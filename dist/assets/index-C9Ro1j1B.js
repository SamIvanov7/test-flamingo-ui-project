(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function kB(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var OB={exports:{}},H0={},GB={exports:{}},rn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pp=Symbol.for("react.element"),Zk=Symbol.for("react.portal"),qk=Symbol.for("react.fragment"),$k=Symbol.for("react.strict_mode"),eO=Symbol.for("react.profiler"),tO=Symbol.for("react.provider"),nO=Symbol.for("react.context"),iO=Symbol.for("react.forward_ref"),rO=Symbol.for("react.suspense"),sO=Symbol.for("react.memo"),aO=Symbol.for("react.lazy"),IT=Symbol.iterator;function oO(t){return t===null||typeof t!="object"?null:(t=IT&&t[IT]||t["@@iterator"],typeof t=="function"?t:null)}var zB={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},HB=Object.assign,VB={};function zh(t,e,n){this.props=t,this.context=e,this.refs=VB,this.updater=n||zB}zh.prototype.isReactComponent={};zh.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};zh.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function jB(){}jB.prototype=zh.prototype;function lw(t,e,n){this.props=t,this.context=e,this.refs=VB,this.updater=n||zB}var cw=lw.prototype=new jB;cw.constructor=lw;HB(cw,zh.prototype);cw.isPureReactComponent=!0;var LT=Array.isArray,WB=Object.prototype.hasOwnProperty,uw={current:null},XB={key:!0,ref:!0,__self:!0,__source:!0};function JB(t,e,n){var i,r={},s=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)WB.call(e,i)&&!XB.hasOwnProperty(i)&&(r[i]=e[i]);var o=arguments.length-2;if(o===1)r.children=n;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in o=t.defaultProps,o)r[i]===void 0&&(r[i]=o[i]);return{$$typeof:Pp,type:t,key:s,ref:a,props:r,_owner:uw.current}}function lO(t,e){return{$$typeof:Pp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function hw(t){return typeof t=="object"&&t!==null&&t.$$typeof===Pp}function cO(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var DT=/\/+/g;function Xx(t,e){return typeof t=="object"&&t!==null&&t.key!=null?cO(""+t.key):e.toString(36)}function wv(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Pp:case Zk:a=!0}}if(a)return a=t,r=r(a),t=i===""?"."+Xx(a,0):i,LT(r)?(n="",t!=null&&(n=t.replace(DT,"$&/")+"/"),wv(r,e,n,"",function(c){return c})):r!=null&&(hw(r)&&(r=lO(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(DT,"$&/")+"/")+t)),e.push(r)),1;if(a=0,i=i===""?".":i+":",LT(t))for(var o=0;o<t.length;o++){s=t[o];var l=i+Xx(s,o);a+=wv(s,e,n,l,r)}else if(l=oO(t),typeof l=="function")for(t=l.call(t),o=0;!(s=t.next()).done;)s=s.value,l=i+Xx(s,o++),a+=wv(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Zm(t,e,n){if(t==null)return t;var i=[],r=0;return wv(t,i,"","",function(s){return e.call(n,s,r++)}),i}function uO(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _r={current:null},Mv={transition:null},hO={ReactCurrentDispatcher:_r,ReactCurrentBatchConfig:Mv,ReactCurrentOwner:uw};function YB(){throw Error("act(...) is not supported in production builds of React.")}rn.Children={map:Zm,forEach:function(t,e,n){Zm(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Zm(t,function(){e++}),e},toArray:function(t){return Zm(t,function(e){return e})||[]},only:function(t){if(!hw(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};rn.Component=zh;rn.Fragment=qk;rn.Profiler=eO;rn.PureComponent=lw;rn.StrictMode=$k;rn.Suspense=rO;rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hO;rn.act=YB;rn.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=HB({},t.props),r=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=uw.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)WB.call(e,l)&&!XB.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];i.children=o}return{$$typeof:Pp,type:t.type,key:r,ref:s,props:i,_owner:a}};rn.createContext=function(t){return t={$$typeof:nO,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:tO,_context:t},t.Consumer=t};rn.createElement=JB;rn.createFactory=function(t){var e=JB.bind(null,t);return e.type=t,e};rn.createRef=function(){return{current:null}};rn.forwardRef=function(t){return{$$typeof:iO,render:t}};rn.isValidElement=hw;rn.lazy=function(t){return{$$typeof:aO,_payload:{_status:-1,_result:t},_init:uO}};rn.memo=function(t,e){return{$$typeof:sO,type:t,compare:e===void 0?null:e}};rn.startTransition=function(t){var e=Mv.transition;Mv.transition={};try{t()}finally{Mv.transition=e}};rn.unstable_act=YB;rn.useCallback=function(t,e){return _r.current.useCallback(t,e)};rn.useContext=function(t){return _r.current.useContext(t)};rn.useDebugValue=function(){};rn.useDeferredValue=function(t){return _r.current.useDeferredValue(t)};rn.useEffect=function(t,e){return _r.current.useEffect(t,e)};rn.useId=function(){return _r.current.useId()};rn.useImperativeHandle=function(t,e,n){return _r.current.useImperativeHandle(t,e,n)};rn.useInsertionEffect=function(t,e){return _r.current.useInsertionEffect(t,e)};rn.useLayoutEffect=function(t,e){return _r.current.useLayoutEffect(t,e)};rn.useMemo=function(t,e){return _r.current.useMemo(t,e)};rn.useReducer=function(t,e,n){return _r.current.useReducer(t,e,n)};rn.useRef=function(t){return _r.current.useRef(t)};rn.useState=function(t){return _r.current.useState(t)};rn.useSyncExternalStore=function(t,e,n){return _r.current.useSyncExternalStore(t,e,n)};rn.useTransition=function(){return _r.current.useTransition()};rn.version="18.3.1";GB.exports=rn;var D=GB.exports;const Ah=kB(D);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dO=D,fO=Symbol.for("react.element"),pO=Symbol.for("react.fragment"),mO=Object.prototype.hasOwnProperty,gO=dO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vO={key:!0,ref:!0,__self:!0,__source:!0};function KB(t,e,n){var i,r={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)mO.call(e,i)&&!vO.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:fO,type:t,key:s,ref:a,props:r,_owner:gO.current}}H0.Fragment=pO;H0.jsx=KB;H0.jsxs=KB;OB.exports=H0;var w=OB.exports,z_={},QB={exports:{}},ts={},ZB={exports:{}},qB={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Z,J){var H=Z.length;Z.push(J);e:for(;0<H;){var O=H-1>>>1,j=Z[O];if(0<r(j,J))Z[O]=J,Z[H]=j,H=O;else break e}}function n(Z){return Z.length===0?null:Z[0]}function i(Z){if(Z.length===0)return null;var J=Z[0],H=Z.pop();if(H!==J){Z[0]=H;e:for(var O=0,j=Z.length,W=j>>>1;O<W;){var ne=2*(O+1)-1,ae=Z[ne],de=ne+1,fe=Z[de];if(0>r(ae,H))de<j&&0>r(fe,ae)?(Z[O]=fe,Z[de]=H,O=de):(Z[O]=ae,Z[ne]=H,O=ne);else if(de<j&&0>r(fe,H))Z[O]=fe,Z[de]=H,O=de;else break e}}return J}function r(Z,J){var H=Z.sortIndex-J.sortIndex;return H!==0?H:Z.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,h=null,f=3,m=!1,g=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(Z){for(var J=n(c);J!==null;){if(J.callback===null)i(c);else if(J.startTime<=Z)i(c),J.sortIndex=J.expirationTime,e(l,J);else break;J=n(c)}}function M(Z){if(y=!1,S(Z),!g)if(n(l)!==null)g=!0,$(b);else{var J=n(c);J!==null&&oe(M,J.startTime-Z)}}function b(Z,J){g=!1,y&&(y=!1,v(P),P=-1),m=!0;var H=f;try{for(S(J),h=n(l);h!==null&&(!(h.expirationTime>J)||Z&&!z());){var O=h.callback;if(typeof O=="function"){h.callback=null,f=h.priorityLevel;var j=O(h.expirationTime<=J);J=t.unstable_now(),typeof j=="function"?h.callback=j:h===n(l)&&i(l),S(J)}else i(l);h=n(l)}if(h!==null)var W=!0;else{var ne=n(c);ne!==null&&oe(M,ne.startTime-J),W=!1}return W}finally{h=null,f=H,m=!1}}var C=!1,B=null,P=-1,T=5,I=-1;function z(){return!(t.unstable_now()-I<T)}function G(){if(B!==null){var Z=t.unstable_now();I=Z;var J=!0;try{J=B(!0,Z)}finally{J?Q():(C=!1,B=null)}}else C=!1}var Q;if(typeof _=="function")Q=function(){_(G)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,ee=U.port2;U.port1.onmessage=G,Q=function(){ee.postMessage(null)}}else Q=function(){x(G,0)};function $(Z){B=Z,C||(C=!0,Q())}function oe(Z,J){P=x(function(){Z(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Z){Z.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,$(b))},t.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<Z?Math.floor(1e3/Z):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(Z){switch(f){case 1:case 2:case 3:var J=3;break;default:J=f}var H=f;f=J;try{return Z()}finally{f=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Z,J){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var H=f;f=Z;try{return J()}finally{f=H}},t.unstable_scheduleCallback=function(Z,J,H){var O=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?O+H:O):H=O,Z){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=H+j,Z={id:u++,callback:J,priorityLevel:Z,startTime:H,expirationTime:j,sortIndex:-1},H>O?(Z.sortIndex=H,e(c,Z),n(l)===null&&Z===n(c)&&(y?(v(P),P=-1):y=!0,oe(M,H-O))):(Z.sortIndex=j,e(l,Z),g||m||(g=!0,$(b))),Z},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(Z){var J=f;return function(){var H=f;f=J;try{return Z.apply(this,arguments)}finally{f=H}}}})(qB);ZB.exports=qB;var yO=ZB.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xO=D,$r=yO;function tt(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $B=new Set,kf={};function Xc(t,e){wh(t,e),wh(t+"Capture",e)}function wh(t,e){for(kf[t]=e,t=0;t<e.length;t++)$B.add(e[t])}var io=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),H_=Object.prototype.hasOwnProperty,_O=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,NT={},FT={};function SO(t){return H_.call(FT,t)?!0:H_.call(NT,t)?!1:_O.test(t)?FT[t]=!0:(NT[t]=!0,!1)}function AO(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function wO(t,e,n,i){if(e===null||typeof e>"u"||AO(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Sr(t,e,n,i,r,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var ji={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ji[t]=new Sr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ji[e]=new Sr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ji[t]=new Sr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ji[t]=new Sr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ji[t]=new Sr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ji[t]=new Sr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ji[t]=new Sr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ji[t]=new Sr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ji[t]=new Sr(t,5,!1,t.toLowerCase(),null,!1,!1)});var dw=/[\-:]([a-z])/g;function fw(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(dw,fw);ji[e]=new Sr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(dw,fw);ji[e]=new Sr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(dw,fw);ji[e]=new Sr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ji[t]=new Sr(t,1,!1,t.toLowerCase(),null,!1,!1)});ji.xlinkHref=new Sr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ji[t]=new Sr(t,1,!1,t.toLowerCase(),null,!0,!0)});function pw(t,e,n,i){var r=ji.hasOwnProperty(e)?ji[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(wO(e,n,r,i)&&(n=null),i||r===null?SO(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var fo=xO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qm=Symbol.for("react.element"),ju=Symbol.for("react.portal"),Wu=Symbol.for("react.fragment"),mw=Symbol.for("react.strict_mode"),V_=Symbol.for("react.profiler"),eI=Symbol.for("react.provider"),tI=Symbol.for("react.context"),gw=Symbol.for("react.forward_ref"),j_=Symbol.for("react.suspense"),W_=Symbol.for("react.suspense_list"),vw=Symbol.for("react.memo"),Uo=Symbol.for("react.lazy"),nI=Symbol.for("react.offscreen"),UT=Symbol.iterator;function Ed(t){return t===null||typeof t!="object"?null:(t=UT&&t[UT]||t["@@iterator"],typeof t=="function"?t:null)}var Jn=Object.assign,Jx;function rf(t){if(Jx===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Jx=e&&e[1]||""}return`
`+Jx+t}var Yx=!1;function Kx(t,e){if(!t||Yx)return"";Yx=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),a=r.length-1,o=s.length-1;1<=a&&0<=o&&r[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||r[a]!==s[o]){var l=`
`+r[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{Yx=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?rf(t):""}function MO(t){switch(t.tag){case 5:return rf(t.type);case 16:return rf("Lazy");case 13:return rf("Suspense");case 19:return rf("SuspenseList");case 0:case 2:case 15:return t=Kx(t.type,!1),t;case 11:return t=Kx(t.type.render,!1),t;case 1:return t=Kx(t.type,!0),t;default:return""}}function X_(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Wu:return"Fragment";case ju:return"Portal";case V_:return"Profiler";case mw:return"StrictMode";case j_:return"Suspense";case W_:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case tI:return(t.displayName||"Context")+".Consumer";case eI:return(t._context.displayName||"Context")+".Provider";case gw:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case vw:return e=t.displayName||null,e!==null?e:X_(t.type)||"Memo";case Uo:e=t._payload,t=t._init;try{return X_(t(e))}catch{}}return null}function EO(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return X_(e);case 8:return e===mw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ll(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function iI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function bO(t){var e=iI(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function $m(t){t._valueTracker||(t._valueTracker=bO(t))}function rI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=iI(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Qv(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function J_(t,e){var n=e.checked;return Jn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function kT(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=ll(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function sI(t,e){e=e.checked,e!=null&&pw(t,"checked",e,!1)}function Y_(t,e){sI(t,e);var n=ll(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?K_(t,e.type,n):e.hasOwnProperty("defaultValue")&&K_(t,e.type,ll(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function OT(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function K_(t,e,n){(e!=="number"||Qv(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var sf=Array.isArray;function uh(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+ll(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Q_(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(tt(91));return Jn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function GT(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(tt(92));if(sf(n)){if(1<n.length)throw Error(tt(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ll(n)}}function aI(t,e){var n=ll(e.value),i=ll(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function zT(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function oI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Z_(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?oI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var eg,lI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(eg=eg||document.createElement("div"),eg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=eg.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Of(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ff={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},TO=["Webkit","ms","Moz","O"];Object.keys(ff).forEach(function(t){TO.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ff[e]=ff[t]})});function cI(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ff.hasOwnProperty(t)&&ff[t]?(""+e).trim():e+"px"}function uI(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=cI(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var CO=Jn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function q_(t,e){if(e){if(CO[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(tt(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(tt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(tt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(tt(62))}}function $_(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eS=null;function yw(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var tS=null,hh=null,dh=null;function HT(t){if(t=Lp(t)){if(typeof tS!="function")throw Error(tt(280));var e=t.stateNode;e&&(e=J0(e),tS(t.stateNode,t.type,e))}}function hI(t){hh?dh?dh.push(t):dh=[t]:hh=t}function dI(){if(hh){var t=hh,e=dh;if(dh=hh=null,HT(t),e)for(t=0;t<e.length;t++)HT(e[t])}}function fI(t,e){return t(e)}function pI(){}var Qx=!1;function mI(t,e,n){if(Qx)return t(e,n);Qx=!0;try{return fI(t,e,n)}finally{Qx=!1,(hh!==null||dh!==null)&&(pI(),dI())}}function Gf(t,e){var n=t.stateNode;if(n===null)return null;var i=J0(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(tt(231,e,typeof n));return n}var nS=!1;if(io)try{var bd={};Object.defineProperty(bd,"passive",{get:function(){nS=!0}}),window.addEventListener("test",bd,bd),window.removeEventListener("test",bd,bd)}catch{nS=!1}function RO(t,e,n,i,r,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var pf=!1,Zv=null,qv=!1,iS=null,PO={onError:function(t){pf=!0,Zv=t}};function BO(t,e,n,i,r,s,a,o,l){pf=!1,Zv=null,RO.apply(PO,arguments)}function IO(t,e,n,i,r,s,a,o,l){if(BO.apply(this,arguments),pf){if(pf){var c=Zv;pf=!1,Zv=null}else throw Error(tt(198));qv||(qv=!0,iS=c)}}function Jc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function gI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function VT(t){if(Jc(t)!==t)throw Error(tt(188))}function LO(t){var e=t.alternate;if(!e){if(e=Jc(t),e===null)throw Error(tt(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return VT(r),t;if(s===i)return VT(r),e;s=s.sibling}throw Error(tt(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,o=r.child;o;){if(o===n){a=!0,n=r,i=s;break}if(o===i){a=!0,i=r,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,i=r;break}if(o===i){a=!0,i=s,n=r;break}o=o.sibling}if(!a)throw Error(tt(189))}}if(n.alternate!==i)throw Error(tt(190))}if(n.tag!==3)throw Error(tt(188));return n.stateNode.current===n?t:e}function vI(t){return t=LO(t),t!==null?yI(t):null}function yI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=yI(t);if(e!==null)return e;t=t.sibling}return null}var xI=$r.unstable_scheduleCallback,jT=$r.unstable_cancelCallback,DO=$r.unstable_shouldYield,NO=$r.unstable_requestPaint,li=$r.unstable_now,FO=$r.unstable_getCurrentPriorityLevel,xw=$r.unstable_ImmediatePriority,_I=$r.unstable_UserBlockingPriority,$v=$r.unstable_NormalPriority,UO=$r.unstable_LowPriority,SI=$r.unstable_IdlePriority,V0=null,ma=null;function kO(t){if(ma&&typeof ma.onCommitFiberRoot=="function")try{ma.onCommitFiberRoot(V0,t,void 0,(t.current.flags&128)===128)}catch{}}var js=Math.clz32?Math.clz32:zO,OO=Math.log,GO=Math.LN2;function zO(t){return t>>>=0,t===0?32:31-(OO(t)/GO|0)|0}var tg=64,ng=4194304;function af(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function e0(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var o=a&~r;o!==0?i=af(o):(s&=a,s!==0&&(i=af(s)))}else a=n&~r,a!==0?i=af(a):s!==0&&(i=af(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-js(e),r=1<<n,i|=t[n],e&=~r;return i}function HO(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function VO(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-js(s),o=1<<a,l=r[a];l===-1?(!(o&n)||o&i)&&(r[a]=HO(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}}function rS(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function AI(){var t=tg;return tg<<=1,!(tg&4194240)&&(tg=64),t}function Zx(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Bp(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-js(e),t[e]=n}function jO(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-js(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function _w(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-js(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var vn=0;function wI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var MI,Sw,EI,bI,TI,sS=!1,ig=[],Yo=null,Ko=null,Qo=null,zf=new Map,Hf=new Map,Go=[],WO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function WT(t,e){switch(t){case"focusin":case"focusout":Yo=null;break;case"dragenter":case"dragleave":Ko=null;break;case"mouseover":case"mouseout":Qo=null;break;case"pointerover":case"pointerout":zf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hf.delete(e.pointerId)}}function Td(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Lp(e),e!==null&&Sw(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function XO(t,e,n,i,r){switch(e){case"focusin":return Yo=Td(Yo,t,e,n,i,r),!0;case"dragenter":return Ko=Td(Ko,t,e,n,i,r),!0;case"mouseover":return Qo=Td(Qo,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return zf.set(s,Td(zf.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Hf.set(s,Td(Hf.get(s)||null,t,e,n,i,r)),!0}return!1}function CI(t){var e=vc(t.target);if(e!==null){var n=Jc(e);if(n!==null){if(e=n.tag,e===13){if(e=gI(n),e!==null){t.blockedOn=e,TI(t.priority,function(){EI(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ev(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=aS(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);eS=i,n.target.dispatchEvent(i),eS=null}else return e=Lp(n),e!==null&&Sw(e),t.blockedOn=n,!1;e.shift()}return!0}function XT(t,e,n){Ev(t)&&n.delete(e)}function JO(){sS=!1,Yo!==null&&Ev(Yo)&&(Yo=null),Ko!==null&&Ev(Ko)&&(Ko=null),Qo!==null&&Ev(Qo)&&(Qo=null),zf.forEach(XT),Hf.forEach(XT)}function Cd(t,e){t.blockedOn===e&&(t.blockedOn=null,sS||(sS=!0,$r.unstable_scheduleCallback($r.unstable_NormalPriority,JO)))}function Vf(t){function e(r){return Cd(r,t)}if(0<ig.length){Cd(ig[0],t);for(var n=1;n<ig.length;n++){var i=ig[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Yo!==null&&Cd(Yo,t),Ko!==null&&Cd(Ko,t),Qo!==null&&Cd(Qo,t),zf.forEach(e),Hf.forEach(e),n=0;n<Go.length;n++)i=Go[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Go.length&&(n=Go[0],n.blockedOn===null);)CI(n),n.blockedOn===null&&Go.shift()}var fh=fo.ReactCurrentBatchConfig,t0=!0;function YO(t,e,n,i){var r=vn,s=fh.transition;fh.transition=null;try{vn=1,Aw(t,e,n,i)}finally{vn=r,fh.transition=s}}function KO(t,e,n,i){var r=vn,s=fh.transition;fh.transition=null;try{vn=4,Aw(t,e,n,i)}finally{vn=r,fh.transition=s}}function Aw(t,e,n,i){if(t0){var r=aS(t,e,n,i);if(r===null)o1(t,e,i,n0,n),WT(t,i);else if(XO(r,t,e,n,i))i.stopPropagation();else if(WT(t,i),e&4&&-1<WO.indexOf(t)){for(;r!==null;){var s=Lp(r);if(s!==null&&MI(s),s=aS(t,e,n,i),s===null&&o1(t,e,i,n0,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else o1(t,e,i,null,n)}}var n0=null;function aS(t,e,n,i){if(n0=null,t=yw(i),t=vc(t),t!==null)if(e=Jc(t),e===null)t=null;else if(n=e.tag,n===13){if(t=gI(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return n0=t,null}function RI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(FO()){case xw:return 1;case _I:return 4;case $v:case UO:return 16;case SI:return 536870912;default:return 16}default:return 16}}var Vo=null,ww=null,bv=null;function PI(){if(bv)return bv;var t,e=ww,n=e.length,i,r="value"in Vo?Vo.value:Vo.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[s-i];i++);return bv=r.slice(t,1<i?1-i:void 0)}function Tv(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function rg(){return!0}function JT(){return!1}function ns(t){function e(n,i,r,s,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?rg:JT,this.isPropagationStopped=JT,this}return Jn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=rg)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=rg)},persist:function(){},isPersistent:rg}),e}var Hh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mw=ns(Hh),Ip=Jn({},Hh,{view:0,detail:0}),QO=ns(Ip),qx,$x,Rd,j0=Jn({},Ip,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ew,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Rd&&(Rd&&t.type==="mousemove"?(qx=t.screenX-Rd.screenX,$x=t.screenY-Rd.screenY):$x=qx=0,Rd=t),qx)},movementY:function(t){return"movementY"in t?t.movementY:$x}}),YT=ns(j0),ZO=Jn({},j0,{dataTransfer:0}),qO=ns(ZO),$O=Jn({},Ip,{relatedTarget:0}),e1=ns($O),e4=Jn({},Hh,{animationName:0,elapsedTime:0,pseudoElement:0}),t4=ns(e4),n4=Jn({},Hh,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),i4=ns(n4),r4=Jn({},Hh,{data:0}),KT=ns(r4),s4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},o4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function l4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=o4[t])?!!e[t]:!1}function Ew(){return l4}var c4=Jn({},Ip,{key:function(t){if(t.key){var e=s4[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Tv(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?a4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ew,charCode:function(t){return t.type==="keypress"?Tv(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Tv(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),u4=ns(c4),h4=Jn({},j0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),QT=ns(h4),d4=Jn({},Ip,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ew}),f4=ns(d4),p4=Jn({},Hh,{propertyName:0,elapsedTime:0,pseudoElement:0}),m4=ns(p4),g4=Jn({},j0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),v4=ns(g4),y4=[9,13,27,32],bw=io&&"CompositionEvent"in window,mf=null;io&&"documentMode"in document&&(mf=document.documentMode);var x4=io&&"TextEvent"in window&&!mf,BI=io&&(!bw||mf&&8<mf&&11>=mf),ZT=" ",qT=!1;function II(t,e){switch(t){case"keyup":return y4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function LI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Xu=!1;function _4(t,e){switch(t){case"compositionend":return LI(e);case"keypress":return e.which!==32?null:(qT=!0,ZT);case"textInput":return t=e.data,t===ZT&&qT?null:t;default:return null}}function S4(t,e){if(Xu)return t==="compositionend"||!bw&&II(t,e)?(t=PI(),bv=ww=Vo=null,Xu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return BI&&e.locale!=="ko"?null:e.data;default:return null}}var A4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $T(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!A4[t.type]:e==="textarea"}function DI(t,e,n,i){hI(i),e=i0(e,"onChange"),0<e.length&&(n=new Mw("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var gf=null,jf=null;function w4(t){WI(t,0)}function W0(t){var e=Ku(t);if(rI(e))return t}function M4(t,e){if(t==="change")return e}var NI=!1;if(io){var t1;if(io){var n1="oninput"in document;if(!n1){var eC=document.createElement("div");eC.setAttribute("oninput","return;"),n1=typeof eC.oninput=="function"}t1=n1}else t1=!1;NI=t1&&(!document.documentMode||9<document.documentMode)}function tC(){gf&&(gf.detachEvent("onpropertychange",FI),jf=gf=null)}function FI(t){if(t.propertyName==="value"&&W0(jf)){var e=[];DI(e,jf,t,yw(t)),mI(w4,e)}}function E4(t,e,n){t==="focusin"?(tC(),gf=e,jf=n,gf.attachEvent("onpropertychange",FI)):t==="focusout"&&tC()}function b4(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return W0(jf)}function T4(t,e){if(t==="click")return W0(e)}function C4(t,e){if(t==="input"||t==="change")return W0(e)}function R4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Js=typeof Object.is=="function"?Object.is:R4;function Wf(t,e){if(Js(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!H_.call(e,r)||!Js(t[r],e[r]))return!1}return!0}function nC(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function iC(t,e){var n=nC(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=nC(n)}}function UI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?UI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function kI(){for(var t=window,e=Qv();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Qv(t.document)}return e}function Tw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function P4(t){var e=kI(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&UI(n.ownerDocument.documentElement,n)){if(i!==null&&Tw(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=iC(n,s);var a=iC(n,i);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var B4=io&&"documentMode"in document&&11>=document.documentMode,Ju=null,oS=null,vf=null,lS=!1;function rC(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;lS||Ju==null||Ju!==Qv(i)||(i=Ju,"selectionStart"in i&&Tw(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),vf&&Wf(vf,i)||(vf=i,i=i0(oS,"onSelect"),0<i.length&&(e=new Mw("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Ju)))}function sg(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Yu={animationend:sg("Animation","AnimationEnd"),animationiteration:sg("Animation","AnimationIteration"),animationstart:sg("Animation","AnimationStart"),transitionend:sg("Transition","TransitionEnd")},i1={},OI={};io&&(OI=document.createElement("div").style,"AnimationEvent"in window||(delete Yu.animationend.animation,delete Yu.animationiteration.animation,delete Yu.animationstart.animation),"TransitionEvent"in window||delete Yu.transitionend.transition);function X0(t){if(i1[t])return i1[t];if(!Yu[t])return t;var e=Yu[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in OI)return i1[t]=e[n];return t}var GI=X0("animationend"),zI=X0("animationiteration"),HI=X0("animationstart"),VI=X0("transitionend"),jI=new Map,sC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _l(t,e){jI.set(t,e),Xc(e,[t])}for(var r1=0;r1<sC.length;r1++){var s1=sC[r1],I4=s1.toLowerCase(),L4=s1[0].toUpperCase()+s1.slice(1);_l(I4,"on"+L4)}_l(GI,"onAnimationEnd");_l(zI,"onAnimationIteration");_l(HI,"onAnimationStart");_l("dblclick","onDoubleClick");_l("focusin","onFocus");_l("focusout","onBlur");_l(VI,"onTransitionEnd");wh("onMouseEnter",["mouseout","mouseover"]);wh("onMouseLeave",["mouseout","mouseover"]);wh("onPointerEnter",["pointerout","pointerover"]);wh("onPointerLeave",["pointerout","pointerover"]);Xc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var of="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),D4=new Set("cancel close invalid load scroll toggle".split(" ").concat(of));function aC(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,IO(i,e,void 0,t),t.currentTarget=null}function WI(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break e;aC(r,o,c),s=l}else for(a=0;a<i.length;a++){if(o=i[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break e;aC(r,o,c),s=l}}}if(qv)throw t=iS,qv=!1,iS=null,t}function Ln(t,e){var n=e[fS];n===void 0&&(n=e[fS]=new Set);var i=t+"__bubble";n.has(i)||(XI(e,t,2,!1),n.add(i))}function a1(t,e,n){var i=0;e&&(i|=4),XI(n,t,i,e)}var ag="_reactListening"+Math.random().toString(36).slice(2);function Xf(t){if(!t[ag]){t[ag]=!0,$B.forEach(function(n){n!=="selectionchange"&&(D4.has(n)||a1(n,!1,t),a1(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ag]||(e[ag]=!0,a1("selectionchange",!1,e))}}function XI(t,e,n,i){switch(RI(e)){case 1:var r=YO;break;case 4:r=KO;break;default:r=Aw}n=r.bind(null,e,n,t),r=void 0,!nS||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function o1(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var o=i.stateNode.containerInfo;if(o===r||o.nodeType===8&&o.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;a=a.return}for(;o!==null;){if(a=vc(o),a===null)return;if(l=a.tag,l===5||l===6){i=s=a;continue e}o=o.parentNode}}i=i.return}mI(function(){var c=s,u=yw(n),h=[];e:{var f=jI.get(t);if(f!==void 0){var m=Mw,g=t;switch(t){case"keypress":if(Tv(n)===0)break e;case"keydown":case"keyup":m=u4;break;case"focusin":g="focus",m=e1;break;case"focusout":g="blur",m=e1;break;case"beforeblur":case"afterblur":m=e1;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=YT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=qO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=f4;break;case GI:case zI:case HI:m=t4;break;case VI:m=m4;break;case"scroll":m=QO;break;case"wheel":m=v4;break;case"copy":case"cut":case"paste":m=i4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=QT}var y=(e&4)!==0,x=!y&&t==="scroll",v=y?f!==null?f+"Capture":null:f;y=[];for(var _=c,S;_!==null;){S=_;var M=S.stateNode;if(S.tag===5&&M!==null&&(S=M,v!==null&&(M=Gf(_,v),M!=null&&y.push(Jf(_,M,S)))),x)break;_=_.return}0<y.length&&(f=new m(f,g,null,n,u),h.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==eS&&(g=n.relatedTarget||n.fromElement)&&(vc(g)||g[ro]))break e;if((m||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,m?(g=n.relatedTarget||n.toElement,m=c,g=g?vc(g):null,g!==null&&(x=Jc(g),g!==x||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=c),m!==g)){if(y=YT,M="onMouseLeave",v="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(y=QT,M="onPointerLeave",v="onPointerEnter",_="pointer"),x=m==null?f:Ku(m),S=g==null?f:Ku(g),f=new y(M,_+"leave",m,n,u),f.target=x,f.relatedTarget=S,M=null,vc(u)===c&&(y=new y(v,_+"enter",g,n,u),y.target=S,y.relatedTarget=x,M=y),x=M,m&&g)t:{for(y=m,v=g,_=0,S=y;S;S=vu(S))_++;for(S=0,M=v;M;M=vu(M))S++;for(;0<_-S;)y=vu(y),_--;for(;0<S-_;)v=vu(v),S--;for(;_--;){if(y===v||v!==null&&y===v.alternate)break t;y=vu(y),v=vu(v)}y=null}else y=null;m!==null&&oC(h,f,m,y,!1),g!==null&&x!==null&&oC(h,x,g,y,!0)}}e:{if(f=c?Ku(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var b=M4;else if($T(f))if(NI)b=C4;else{b=b4;var C=E4}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(b=T4);if(b&&(b=b(t,c))){DI(h,b,n,u);break e}C&&C(t,f,c),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&K_(f,"number",f.value)}switch(C=c?Ku(c):window,t){case"focusin":($T(C)||C.contentEditable==="true")&&(Ju=C,oS=c,vf=null);break;case"focusout":vf=oS=Ju=null;break;case"mousedown":lS=!0;break;case"contextmenu":case"mouseup":case"dragend":lS=!1,rC(h,n,u);break;case"selectionchange":if(B4)break;case"keydown":case"keyup":rC(h,n,u)}var B;if(bw)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Xu?II(t,n)&&(P="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(BI&&n.locale!=="ko"&&(Xu||P!=="onCompositionStart"?P==="onCompositionEnd"&&Xu&&(B=PI()):(Vo=u,ww="value"in Vo?Vo.value:Vo.textContent,Xu=!0)),C=i0(c,P),0<C.length&&(P=new KT(P,t,null,n,u),h.push({event:P,listeners:C}),B?P.data=B:(B=LI(n),B!==null&&(P.data=B)))),(B=x4?_4(t,n):S4(t,n))&&(c=i0(c,"onBeforeInput"),0<c.length&&(u=new KT("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:c}),u.data=B))}WI(h,e)})}function Jf(t,e,n){return{instance:t,listener:e,currentTarget:n}}function i0(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Gf(t,n),s!=null&&i.unshift(Jf(t,s,r)),s=Gf(t,e),s!=null&&i.push(Jf(t,s,r))),t=t.return}return i}function vu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function oC(t,e,n,i,r){for(var s=e._reactName,a=[];n!==null&&n!==i;){var o=n,l=o.alternate,c=o.stateNode;if(l!==null&&l===i)break;o.tag===5&&c!==null&&(o=c,r?(l=Gf(n,s),l!=null&&a.unshift(Jf(n,l,o))):r||(l=Gf(n,s),l!=null&&a.push(Jf(n,l,o)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var N4=/\r\n?/g,F4=/\u0000|\uFFFD/g;function lC(t){return(typeof t=="string"?t:""+t).replace(N4,`
`).replace(F4,"")}function og(t,e,n){if(e=lC(e),lC(t)!==e&&n)throw Error(tt(425))}function r0(){}var cS=null,uS=null;function hS(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var dS=typeof setTimeout=="function"?setTimeout:void 0,U4=typeof clearTimeout=="function"?clearTimeout:void 0,cC=typeof Promise=="function"?Promise:void 0,k4=typeof queueMicrotask=="function"?queueMicrotask:typeof cC<"u"?function(t){return cC.resolve(null).then(t).catch(O4)}:dS;function O4(t){setTimeout(function(){throw t})}function l1(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Vf(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Vf(e)}function Zo(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function uC(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Vh=Math.random().toString(36).slice(2),pa="__reactFiber$"+Vh,Yf="__reactProps$"+Vh,ro="__reactContainer$"+Vh,fS="__reactEvents$"+Vh,G4="__reactListeners$"+Vh,z4="__reactHandles$"+Vh;function vc(t){var e=t[pa];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ro]||n[pa]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=uC(t);t!==null;){if(n=t[pa])return n;t=uC(t)}return e}t=n,n=t.parentNode}return null}function Lp(t){return t=t[pa]||t[ro],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ku(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(tt(33))}function J0(t){return t[Yf]||null}var pS=[],Qu=-1;function Sl(t){return{current:t}}function Fn(t){0>Qu||(t.current=pS[Qu],pS[Qu]=null,Qu--)}function Bn(t,e){Qu++,pS[Qu]=t.current,t.current=e}var cl={},rr=Sl(cl),Lr=Sl(!1),Nc=cl;function Mh(t,e){var n=t.type.contextTypes;if(!n)return cl;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Dr(t){return t=t.childContextTypes,t!=null}function s0(){Fn(Lr),Fn(rr)}function hC(t,e,n){if(rr.current!==cl)throw Error(tt(168));Bn(rr,e),Bn(Lr,n)}function JI(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(tt(108,EO(t)||"Unknown",r));return Jn({},n,i)}function a0(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||cl,Nc=rr.current,Bn(rr,t),Bn(Lr,Lr.current),!0}function dC(t,e,n){var i=t.stateNode;if(!i)throw Error(tt(169));n?(t=JI(t,e,Nc),i.__reactInternalMemoizedMergedChildContext=t,Fn(Lr),Fn(rr),Bn(rr,t)):Fn(Lr),Bn(Lr,n)}var Ha=null,Y0=!1,c1=!1;function YI(t){Ha===null?Ha=[t]:Ha.push(t)}function H4(t){Y0=!0,YI(t)}function Al(){if(!c1&&Ha!==null){c1=!0;var t=0,e=vn;try{var n=Ha;for(vn=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Ha=null,Y0=!1}catch(r){throw Ha!==null&&(Ha=Ha.slice(t+1)),xI(xw,Al),r}finally{vn=e,c1=!1}}return null}var Zu=[],qu=0,o0=null,l0=0,gs=[],vs=0,Fc=null,Wa=1,Xa="";function ac(t,e){Zu[qu++]=l0,Zu[qu++]=o0,o0=t,l0=e}function KI(t,e,n){gs[vs++]=Wa,gs[vs++]=Xa,gs[vs++]=Fc,Fc=t;var i=Wa;t=Xa;var r=32-js(i)-1;i&=~(1<<r),n+=1;var s=32-js(e)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Wa=1<<32-js(e)+r|n<<r|i,Xa=s+t}else Wa=1<<s|n<<r|i,Xa=t}function Cw(t){t.return!==null&&(ac(t,1),KI(t,1,0))}function Rw(t){for(;t===o0;)o0=Zu[--qu],Zu[qu]=null,l0=Zu[--qu],Zu[qu]=null;for(;t===Fc;)Fc=gs[--vs],gs[vs]=null,Xa=gs[--vs],gs[vs]=null,Wa=gs[--vs],gs[vs]=null}var Zr=null,Qr=null,kn=!1,ks=null;function QI(t,e){var n=_s(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function fC(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Zr=t,Qr=Zo(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Zr=t,Qr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Fc!==null?{id:Wa,overflow:Xa}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=_s(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Zr=t,Qr=null,!0):!1;default:return!1}}function mS(t){return(t.mode&1)!==0&&(t.flags&128)===0}function gS(t){if(kn){var e=Qr;if(e){var n=e;if(!fC(t,e)){if(mS(t))throw Error(tt(418));e=Zo(n.nextSibling);var i=Zr;e&&fC(t,e)?QI(i,n):(t.flags=t.flags&-4097|2,kn=!1,Zr=t)}}else{if(mS(t))throw Error(tt(418));t.flags=t.flags&-4097|2,kn=!1,Zr=t}}}function pC(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Zr=t}function lg(t){if(t!==Zr)return!1;if(!kn)return pC(t),kn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!hS(t.type,t.memoizedProps)),e&&(e=Qr)){if(mS(t))throw ZI(),Error(tt(418));for(;e;)QI(t,e),e=Zo(e.nextSibling)}if(pC(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(tt(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Qr=Zo(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Qr=null}}else Qr=Zr?Zo(t.stateNode.nextSibling):null;return!0}function ZI(){for(var t=Qr;t;)t=Zo(t.nextSibling)}function Eh(){Qr=Zr=null,kn=!1}function Pw(t){ks===null?ks=[t]:ks.push(t)}var V4=fo.ReactCurrentBatchConfig;function Pd(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(tt(309));var i=n.stateNode}if(!i)throw Error(tt(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=r.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(tt(284));if(!n._owner)throw Error(tt(290,t))}return t}function cg(t,e){throw t=Object.prototype.toString.call(e),Error(tt(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function mC(t){var e=t._init;return e(t._payload)}function qI(t){function e(v,_){if(t){var S=v.deletions;S===null?(v.deletions=[_],v.flags|=16):S.push(_)}}function n(v,_){if(!t)return null;for(;_!==null;)e(v,_),_=_.sibling;return null}function i(v,_){for(v=new Map;_!==null;)_.key!==null?v.set(_.key,_):v.set(_.index,_),_=_.sibling;return v}function r(v,_){return v=tl(v,_),v.index=0,v.sibling=null,v}function s(v,_,S){return v.index=S,t?(S=v.alternate,S!==null?(S=S.index,S<_?(v.flags|=2,_):S):(v.flags|=2,_)):(v.flags|=1048576,_)}function a(v){return t&&v.alternate===null&&(v.flags|=2),v}function o(v,_,S,M){return _===null||_.tag!==6?(_=g1(S,v.mode,M),_.return=v,_):(_=r(_,S),_.return=v,_)}function l(v,_,S,M){var b=S.type;return b===Wu?u(v,_,S.props.children,M,S.key):_!==null&&(_.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Uo&&mC(b)===_.type)?(M=r(_,S.props),M.ref=Pd(v,_,S),M.return=v,M):(M=Dv(S.type,S.key,S.props,null,v.mode,M),M.ref=Pd(v,_,S),M.return=v,M)}function c(v,_,S,M){return _===null||_.tag!==4||_.stateNode.containerInfo!==S.containerInfo||_.stateNode.implementation!==S.implementation?(_=v1(S,v.mode,M),_.return=v,_):(_=r(_,S.children||[]),_.return=v,_)}function u(v,_,S,M,b){return _===null||_.tag!==7?(_=Rc(S,v.mode,M,b),_.return=v,_):(_=r(_,S),_.return=v,_)}function h(v,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return _=g1(""+_,v.mode,S),_.return=v,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case qm:return S=Dv(_.type,_.key,_.props,null,v.mode,S),S.ref=Pd(v,null,_),S.return=v,S;case ju:return _=v1(_,v.mode,S),_.return=v,_;case Uo:var M=_._init;return h(v,M(_._payload),S)}if(sf(_)||Ed(_))return _=Rc(_,v.mode,S,null),_.return=v,_;cg(v,_)}return null}function f(v,_,S,M){var b=_!==null?_.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return b!==null?null:o(v,_,""+S,M);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case qm:return S.key===b?l(v,_,S,M):null;case ju:return S.key===b?c(v,_,S,M):null;case Uo:return b=S._init,f(v,_,b(S._payload),M)}if(sf(S)||Ed(S))return b!==null?null:u(v,_,S,M,null);cg(v,S)}return null}function m(v,_,S,M,b){if(typeof M=="string"&&M!==""||typeof M=="number")return v=v.get(S)||null,o(_,v,""+M,b);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case qm:return v=v.get(M.key===null?S:M.key)||null,l(_,v,M,b);case ju:return v=v.get(M.key===null?S:M.key)||null,c(_,v,M,b);case Uo:var C=M._init;return m(v,_,S,C(M._payload),b)}if(sf(M)||Ed(M))return v=v.get(S)||null,u(_,v,M,b,null);cg(_,M)}return null}function g(v,_,S,M){for(var b=null,C=null,B=_,P=_=0,T=null;B!==null&&P<S.length;P++){B.index>P?(T=B,B=null):T=B.sibling;var I=f(v,B,S[P],M);if(I===null){B===null&&(B=T);break}t&&B&&I.alternate===null&&e(v,B),_=s(I,_,P),C===null?b=I:C.sibling=I,C=I,B=T}if(P===S.length)return n(v,B),kn&&ac(v,P),b;if(B===null){for(;P<S.length;P++)B=h(v,S[P],M),B!==null&&(_=s(B,_,P),C===null?b=B:C.sibling=B,C=B);return kn&&ac(v,P),b}for(B=i(v,B);P<S.length;P++)T=m(B,v,P,S[P],M),T!==null&&(t&&T.alternate!==null&&B.delete(T.key===null?P:T.key),_=s(T,_,P),C===null?b=T:C.sibling=T,C=T);return t&&B.forEach(function(z){return e(v,z)}),kn&&ac(v,P),b}function y(v,_,S,M){var b=Ed(S);if(typeof b!="function")throw Error(tt(150));if(S=b.call(S),S==null)throw Error(tt(151));for(var C=b=null,B=_,P=_=0,T=null,I=S.next();B!==null&&!I.done;P++,I=S.next()){B.index>P?(T=B,B=null):T=B.sibling;var z=f(v,B,I.value,M);if(z===null){B===null&&(B=T);break}t&&B&&z.alternate===null&&e(v,B),_=s(z,_,P),C===null?b=z:C.sibling=z,C=z,B=T}if(I.done)return n(v,B),kn&&ac(v,P),b;if(B===null){for(;!I.done;P++,I=S.next())I=h(v,I.value,M),I!==null&&(_=s(I,_,P),C===null?b=I:C.sibling=I,C=I);return kn&&ac(v,P),b}for(B=i(v,B);!I.done;P++,I=S.next())I=m(B,v,P,I.value,M),I!==null&&(t&&I.alternate!==null&&B.delete(I.key===null?P:I.key),_=s(I,_,P),C===null?b=I:C.sibling=I,C=I);return t&&B.forEach(function(G){return e(v,G)}),kn&&ac(v,P),b}function x(v,_,S,M){if(typeof S=="object"&&S!==null&&S.type===Wu&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case qm:e:{for(var b=S.key,C=_;C!==null;){if(C.key===b){if(b=S.type,b===Wu){if(C.tag===7){n(v,C.sibling),_=r(C,S.props.children),_.return=v,v=_;break e}}else if(C.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Uo&&mC(b)===C.type){n(v,C.sibling),_=r(C,S.props),_.ref=Pd(v,C,S),_.return=v,v=_;break e}n(v,C);break}else e(v,C);C=C.sibling}S.type===Wu?(_=Rc(S.props.children,v.mode,M,S.key),_.return=v,v=_):(M=Dv(S.type,S.key,S.props,null,v.mode,M),M.ref=Pd(v,_,S),M.return=v,v=M)}return a(v);case ju:e:{for(C=S.key;_!==null;){if(_.key===C)if(_.tag===4&&_.stateNode.containerInfo===S.containerInfo&&_.stateNode.implementation===S.implementation){n(v,_.sibling),_=r(_,S.children||[]),_.return=v,v=_;break e}else{n(v,_);break}else e(v,_);_=_.sibling}_=v1(S,v.mode,M),_.return=v,v=_}return a(v);case Uo:return C=S._init,x(v,_,C(S._payload),M)}if(sf(S))return g(v,_,S,M);if(Ed(S))return y(v,_,S,M);cg(v,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,_!==null&&_.tag===6?(n(v,_.sibling),_=r(_,S),_.return=v,v=_):(n(v,_),_=g1(S,v.mode,M),_.return=v,v=_),a(v)):n(v,_)}return x}var bh=qI(!0),$I=qI(!1),c0=Sl(null),u0=null,$u=null,Bw=null;function Iw(){Bw=$u=u0=null}function Lw(t){var e=c0.current;Fn(c0),t._currentValue=e}function vS(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function ph(t,e){u0=t,Bw=$u=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ir=!0),t.firstContext=null)}function Ms(t){var e=t._currentValue;if(Bw!==t)if(t={context:t,memoizedValue:e,next:null},$u===null){if(u0===null)throw Error(tt(308));$u=t,u0.dependencies={lanes:0,firstContext:t}}else $u=$u.next=t;return e}var yc=null;function Dw(t){yc===null?yc=[t]:yc.push(t)}function e3(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Dw(e)):(n.next=r.next,r.next=n),e.interleaved=n,so(t,i)}function so(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ko=!1;function Nw(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function t3(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ka(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function qo(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,cn&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,so(t,n)}return r=i.interleaved,r===null?(e.next=e,Dw(i)):(e.next=r.next,r.next=e),i.interleaved=e,so(t,n)}function Cv(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,_w(t,n)}}function gC(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function h0(t,e,n,i){var r=t.updateQueue;ko=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?s=c:a.next=c,a=l;var u=t.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==a&&(o===null?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(s!==null){var h=r.baseState;a=0,u=c=l=null,o=s;do{var f=o.lane,m=o.eventTime;if((i&f)===f){u!==null&&(u=u.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=t,y=o;switch(f=e,m=n,y.tag){case 1:if(g=y.payload,typeof g=="function"){h=g.call(m,h,f);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,f=typeof g=="function"?g.call(m,h,f):g,f==null)break e;h=Jn({},h,f);break e;case 2:ko=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[o]:f.push(o))}else m={eventTime:m,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(c=u=m,l=h):u=u.next=m,a|=f;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;f=o,o=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(u===null&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);kc|=a,t.lanes=a,t.memoizedState=h}}function vC(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(tt(191,r));r.call(i)}}}var Dp={},ga=Sl(Dp),Kf=Sl(Dp),Qf=Sl(Dp);function xc(t){if(t===Dp)throw Error(tt(174));return t}function Fw(t,e){switch(Bn(Qf,e),Bn(Kf,t),Bn(ga,Dp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Z_(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Z_(e,t)}Fn(ga),Bn(ga,e)}function Th(){Fn(ga),Fn(Kf),Fn(Qf)}function n3(t){xc(Qf.current);var e=xc(ga.current),n=Z_(e,t.type);e!==n&&(Bn(Kf,t),Bn(ga,n))}function Uw(t){Kf.current===t&&(Fn(ga),Fn(Kf))}var Vn=Sl(0);function d0(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var u1=[];function kw(){for(var t=0;t<u1.length;t++)u1[t]._workInProgressVersionPrimary=null;u1.length=0}var Rv=fo.ReactCurrentDispatcher,h1=fo.ReactCurrentBatchConfig,Uc=0,Xn=null,_i=null,Bi=null,f0=!1,yf=!1,Zf=0,j4=0;function Qi(){throw Error(tt(321))}function Ow(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Js(t[n],e[n]))return!1;return!0}function Gw(t,e,n,i,r,s){if(Uc=s,Xn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Rv.current=t===null||t.memoizedState===null?Y4:K4,t=n(i,r),yf){s=0;do{if(yf=!1,Zf=0,25<=s)throw Error(tt(301));s+=1,Bi=_i=null,e.updateQueue=null,Rv.current=Q4,t=n(i,r)}while(yf)}if(Rv.current=p0,e=_i!==null&&_i.next!==null,Uc=0,Bi=_i=Xn=null,f0=!1,e)throw Error(tt(300));return t}function zw(){var t=Zf!==0;return Zf=0,t}function ua(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bi===null?Xn.memoizedState=Bi=t:Bi=Bi.next=t,Bi}function Es(){if(_i===null){var t=Xn.alternate;t=t!==null?t.memoizedState:null}else t=_i.next;var e=Bi===null?Xn.memoizedState:Bi.next;if(e!==null)Bi=e,_i=t;else{if(t===null)throw Error(tt(310));_i=t,t={memoizedState:_i.memoizedState,baseState:_i.baseState,baseQueue:_i.baseQueue,queue:_i.queue,next:null},Bi===null?Xn.memoizedState=Bi=t:Bi=Bi.next=t}return Bi}function qf(t,e){return typeof e=="function"?e(t):e}function d1(t){var e=Es(),n=e.queue;if(n===null)throw Error(tt(311));n.lastRenderedReducer=t;var i=_i,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var o=a=null,l=null,c=s;do{var u=c.lane;if((Uc&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=h,a=i):l=l.next=h,Xn.lanes|=u,kc|=u}c=c.next}while(c!==null&&c!==s);l===null?a=i:l.next=o,Js(i,e.memoizedState)||(Ir=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,Xn.lanes|=s,kc|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function f1(t){var e=Es(),n=e.queue;if(n===null)throw Error(tt(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do s=t(s,a.action),a=a.next;while(a!==r);Js(s,e.memoizedState)||(Ir=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function i3(){}function r3(t,e){var n=Xn,i=Es(),r=e(),s=!Js(i.memoizedState,r);if(s&&(i.memoizedState=r,Ir=!0),i=i.queue,Hw(o3.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Bi!==null&&Bi.memoizedState.tag&1){if(n.flags|=2048,$f(9,a3.bind(null,n,i,r,e),void 0,null),Li===null)throw Error(tt(349));Uc&30||s3(n,e,r)}return r}function s3(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Xn.updateQueue,e===null?(e={lastEffect:null,stores:null},Xn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function a3(t,e,n,i){e.value=n,e.getSnapshot=i,l3(e)&&c3(t)}function o3(t,e,n){return n(function(){l3(e)&&c3(t)})}function l3(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Js(t,n)}catch{return!0}}function c3(t){var e=so(t,1);e!==null&&Ws(e,t,1,-1)}function yC(t){var e=ua();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qf,lastRenderedState:t},e.queue=t,t=t.dispatch=J4.bind(null,Xn,t),[e.memoizedState,t]}function $f(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Xn.updateQueue,e===null?(e={lastEffect:null,stores:null},Xn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function u3(){return Es().memoizedState}function Pv(t,e,n,i){var r=ua();Xn.flags|=t,r.memoizedState=$f(1|e,n,void 0,i===void 0?null:i)}function K0(t,e,n,i){var r=Es();i=i===void 0?null:i;var s=void 0;if(_i!==null){var a=_i.memoizedState;if(s=a.destroy,i!==null&&Ow(i,a.deps)){r.memoizedState=$f(e,n,s,i);return}}Xn.flags|=t,r.memoizedState=$f(1|e,n,s,i)}function xC(t,e){return Pv(8390656,8,t,e)}function Hw(t,e){return K0(2048,8,t,e)}function h3(t,e){return K0(4,2,t,e)}function d3(t,e){return K0(4,4,t,e)}function f3(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function p3(t,e,n){return n=n!=null?n.concat([t]):null,K0(4,4,f3.bind(null,e,t),n)}function Vw(){}function m3(t,e){var n=Es();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Ow(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function g3(t,e){var n=Es();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Ow(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function v3(t,e,n){return Uc&21?(Js(n,e)||(n=AI(),Xn.lanes|=n,kc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ir=!0),t.memoizedState=n)}function W4(t,e){var n=vn;vn=n!==0&&4>n?n:4,t(!0);var i=h1.transition;h1.transition={};try{t(!1),e()}finally{vn=n,h1.transition=i}}function y3(){return Es().memoizedState}function X4(t,e,n){var i=el(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},x3(t))_3(e,n);else if(n=e3(t,e,n,i),n!==null){var r=yr();Ws(n,t,i,r),S3(n,e,i)}}function J4(t,e,n){var i=el(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(x3(t))_3(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,n);if(r.hasEagerState=!0,r.eagerState=o,Js(o,a)){var l=e.interleaved;l===null?(r.next=r,Dw(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=e3(t,e,r,i),n!==null&&(r=yr(),Ws(n,t,i,r),S3(n,e,i))}}function x3(t){var e=t.alternate;return t===Xn||e!==null&&e===Xn}function _3(t,e){yf=f0=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function S3(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,_w(t,n)}}var p0={readContext:Ms,useCallback:Qi,useContext:Qi,useEffect:Qi,useImperativeHandle:Qi,useInsertionEffect:Qi,useLayoutEffect:Qi,useMemo:Qi,useReducer:Qi,useRef:Qi,useState:Qi,useDebugValue:Qi,useDeferredValue:Qi,useTransition:Qi,useMutableSource:Qi,useSyncExternalStore:Qi,useId:Qi,unstable_isNewReconciler:!1},Y4={readContext:Ms,useCallback:function(t,e){return ua().memoizedState=[t,e===void 0?null:e],t},useContext:Ms,useEffect:xC,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Pv(4194308,4,f3.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Pv(4194308,4,t,e)},useInsertionEffect:function(t,e){return Pv(4,2,t,e)},useMemo:function(t,e){var n=ua();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=ua();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=X4.bind(null,Xn,t),[i.memoizedState,t]},useRef:function(t){var e=ua();return t={current:t},e.memoizedState=t},useState:yC,useDebugValue:Vw,useDeferredValue:function(t){return ua().memoizedState=t},useTransition:function(){var t=yC(!1),e=t[0];return t=W4.bind(null,t[1]),ua().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Xn,r=ua();if(kn){if(n===void 0)throw Error(tt(407));n=n()}else{if(n=e(),Li===null)throw Error(tt(349));Uc&30||s3(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,xC(o3.bind(null,i,s,t),[t]),i.flags|=2048,$f(9,a3.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=ua(),e=Li.identifierPrefix;if(kn){var n=Xa,i=Wa;n=(i&~(1<<32-js(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Zf++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=j4++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},K4={readContext:Ms,useCallback:m3,useContext:Ms,useEffect:Hw,useImperativeHandle:p3,useInsertionEffect:h3,useLayoutEffect:d3,useMemo:g3,useReducer:d1,useRef:u3,useState:function(){return d1(qf)},useDebugValue:Vw,useDeferredValue:function(t){var e=Es();return v3(e,_i.memoizedState,t)},useTransition:function(){var t=d1(qf)[0],e=Es().memoizedState;return[t,e]},useMutableSource:i3,useSyncExternalStore:r3,useId:y3,unstable_isNewReconciler:!1},Q4={readContext:Ms,useCallback:m3,useContext:Ms,useEffect:Hw,useImperativeHandle:p3,useInsertionEffect:h3,useLayoutEffect:d3,useMemo:g3,useReducer:f1,useRef:u3,useState:function(){return f1(qf)},useDebugValue:Vw,useDeferredValue:function(t){var e=Es();return _i===null?e.memoizedState=t:v3(e,_i.memoizedState,t)},useTransition:function(){var t=f1(qf)[0],e=Es().memoizedState;return[t,e]},useMutableSource:i3,useSyncExternalStore:r3,useId:y3,unstable_isNewReconciler:!1};function Ns(t,e){if(t&&t.defaultProps){e=Jn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function yS(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Jn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Q0={isMounted:function(t){return(t=t._reactInternals)?Jc(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=yr(),r=el(t),s=Ka(i,r);s.payload=e,n!=null&&(s.callback=n),e=qo(t,s,r),e!==null&&(Ws(e,t,r,i),Cv(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=yr(),r=el(t),s=Ka(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=qo(t,s,r),e!==null&&(Ws(e,t,r,i),Cv(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=yr(),i=el(t),r=Ka(n,i);r.tag=2,e!=null&&(r.callback=e),e=qo(t,r,i),e!==null&&(Ws(e,t,i,n),Cv(e,t,i))}};function _C(t,e,n,i,r,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,a):e.prototype&&e.prototype.isPureReactComponent?!Wf(n,i)||!Wf(r,s):!0}function A3(t,e,n){var i=!1,r=cl,s=e.contextType;return typeof s=="object"&&s!==null?s=Ms(s):(r=Dr(e)?Nc:rr.current,i=e.contextTypes,s=(i=i!=null)?Mh(t,r):cl),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Q0,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function SC(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Q0.enqueueReplaceState(e,e.state,null)}function xS(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Nw(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Ms(s):(s=Dr(e)?Nc:rr.current,r.context=Mh(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(yS(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Q0.enqueueReplaceState(r,r.state,null),h0(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Ch(t,e){try{var n="",i=e;do n+=MO(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function p1(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function _S(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Z4=typeof WeakMap=="function"?WeakMap:Map;function w3(t,e,n){n=Ka(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){g0||(g0=!0,PS=i),_S(t,e)},n}function M3(t,e,n){n=Ka(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){_S(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){_S(t,e),typeof i!="function"&&($o===null?$o=new Set([this]):$o.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function AC(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new Z4;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=hG.bind(null,t,e,n),e.then(t,t))}function wC(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function MC(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ka(-1,1),e.tag=2,qo(n,e,1))),n.lanes|=1),t)}var q4=fo.ReactCurrentOwner,Ir=!1;function mr(t,e,n,i){e.child=t===null?$I(e,null,n,i):bh(e,t.child,n,i)}function EC(t,e,n,i,r){n=n.render;var s=e.ref;return ph(e,r),i=Gw(t,e,n,i,s,r),n=zw(),t!==null&&!Ir?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ao(t,e,r)):(kn&&n&&Cw(e),e.flags|=1,mr(t,e,i,r),e.child)}function bC(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!Zw(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,E3(t,e,s,i,r)):(t=Dv(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Wf,n(a,i)&&t.ref===e.ref)return ao(t,e,r)}return e.flags|=1,t=tl(s,i),t.ref=e.ref,t.return=e,e.child=t}function E3(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(Wf(s,i)&&t.ref===e.ref)if(Ir=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(Ir=!0);else return e.lanes=t.lanes,ao(t,e,r)}return SS(t,e,n,i,r)}function b3(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Bn(th,Kr),Kr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Bn(th,Kr),Kr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Bn(th,Kr),Kr|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Bn(th,Kr),Kr|=i;return mr(t,e,r,n),e.child}function T3(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function SS(t,e,n,i,r){var s=Dr(n)?Nc:rr.current;return s=Mh(e,s),ph(e,r),n=Gw(t,e,n,i,s,r),i=zw(),t!==null&&!Ir?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ao(t,e,r)):(kn&&i&&Cw(e),e.flags|=1,mr(t,e,n,r),e.child)}function TC(t,e,n,i,r){if(Dr(n)){var s=!0;a0(e)}else s=!1;if(ph(e,r),e.stateNode===null)Bv(t,e),A3(e,n,i),xS(e,n,i,r),i=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=Ms(c):(c=Dr(n)?Nc:rr.current,c=Mh(e,c));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==i||l!==c)&&SC(e,a,i,c),ko=!1;var f=e.memoizedState;a.state=f,h0(e,i,a,r),l=e.memoizedState,o!==i||f!==l||Lr.current||ko?(typeof u=="function"&&(yS(e,n,u,i),l=e.memoizedState),(o=ko||_C(e,n,o,i,f,l,c))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),a.props=i,a.state=l,a.context=c,i=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,t3(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:Ns(e.type,o),a.props=c,h=e.pendingProps,f=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ms(l):(l=Dr(n)?Nc:rr.current,l=Mh(e,l));var m=n.getDerivedStateFromProps;(u=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==h||f!==l)&&SC(e,a,i,l),ko=!1,f=e.memoizedState,a.state=f,h0(e,i,a,r);var g=e.memoizedState;o!==h||f!==g||Lr.current||ko?(typeof m=="function"&&(yS(e,n,m,i),g=e.memoizedState),(c=ko||_C(e,n,c,i,f,g,l)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,g,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,g,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),a.props=i,a.state=g,a.context=l,i=c):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return AS(t,e,n,i,s,r)}function AS(t,e,n,i,r,s){T3(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&dC(e,n,!1),ao(t,e,s);i=e.stateNode,q4.current=e;var o=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=bh(e,t.child,null,s),e.child=bh(e,null,o,s)):mr(t,e,o,s),e.memoizedState=i.state,r&&dC(e,n,!0),e.child}function C3(t){var e=t.stateNode;e.pendingContext?hC(t,e.pendingContext,e.pendingContext!==e.context):e.context&&hC(t,e.context,!1),Fw(t,e.containerInfo)}function CC(t,e,n,i,r){return Eh(),Pw(r),e.flags|=256,mr(t,e,n,i),e.child}var wS={dehydrated:null,treeContext:null,retryLane:0};function MS(t){return{baseLanes:t,cachePool:null,transitions:null}}function R3(t,e,n){var i=e.pendingProps,r=Vn.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(r&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Bn(Vn,r&1),t===null)return gS(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,s?(i=e.mode,s=e.child,a={mode:"hidden",children:a},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=$0(a,i,0,null),t=Rc(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=MS(n),e.memoizedState=wS,t):jw(e,a));if(r=t.memoizedState,r!==null&&(o=r.dehydrated,o!==null))return $4(t,e,a,i,o,r,n);if(s){s=i.fallback,a=e.mode,r=t.child,o=r.sibling;var l={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=tl(r,l),i.subtreeFlags=r.subtreeFlags&14680064),o!==null?s=tl(o,s):(s=Rc(s,a,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,a=t.child.memoizedState,a=a===null?MS(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=wS,i}return s=t.child,t=s.sibling,i=tl(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function jw(t,e){return e=$0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ug(t,e,n,i){return i!==null&&Pw(i),bh(e,t.child,null,n),t=jw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function $4(t,e,n,i,r,s,a){if(n)return e.flags&256?(e.flags&=-257,i=p1(Error(tt(422))),ug(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=$0({mode:"visible",children:i.children},r,0,null),s=Rc(s,r,a,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&bh(e,t.child,null,a),e.child.memoizedState=MS(a),e.memoizedState=wS,s);if(!(e.mode&1))return ug(t,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var o=i.dgst;return i=o,s=Error(tt(419)),i=p1(s,i,void 0),ug(t,e,a,i)}if(o=(a&t.childLanes)!==0,Ir||o){if(i=Li,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,so(t,r),Ws(i,t,r,-1))}return Qw(),i=p1(Error(tt(421))),ug(t,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=dG.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,Qr=Zo(r.nextSibling),Zr=e,kn=!0,ks=null,t!==null&&(gs[vs++]=Wa,gs[vs++]=Xa,gs[vs++]=Fc,Wa=t.id,Xa=t.overflow,Fc=e),e=jw(e,i.children),e.flags|=4096,e)}function RC(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),vS(t.return,e,n)}function m1(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function P3(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(mr(t,e,i.children,n),i=Vn.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&RC(t,n,e);else if(t.tag===19)RC(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Bn(Vn,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&d0(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),m1(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&d0(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}m1(e,!0,n,null,s);break;case"together":m1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Bv(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ao(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),kc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(tt(153));if(e.child!==null){for(t=e.child,n=tl(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=tl(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function eG(t,e,n){switch(e.tag){case 3:C3(e),Eh();break;case 5:n3(e);break;case 1:Dr(e.type)&&a0(e);break;case 4:Fw(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Bn(c0,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Bn(Vn,Vn.current&1),e.flags|=128,null):n&e.child.childLanes?R3(t,e,n):(Bn(Vn,Vn.current&1),t=ao(t,e,n),t!==null?t.sibling:null);Bn(Vn,Vn.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return P3(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Bn(Vn,Vn.current),i)break;return null;case 22:case 23:return e.lanes=0,b3(t,e,n)}return ao(t,e,n)}var B3,ES,I3,L3;B3=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ES=function(){};I3=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,xc(ga.current);var s=null;switch(n){case"input":r=J_(t,r),i=J_(t,i),s=[];break;case"select":r=Jn({},r,{value:void 0}),i=Jn({},i,{value:void 0}),s=[];break;case"textarea":r=Q_(t,r),i=Q_(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=r0)}q_(n,i);var a;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var o=r[c];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(kf.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(o=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(kf.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ln("scroll",t),s||o===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};L3=function(t,e,n,i){n!==i&&(e.flags|=4)};function Bd(t,e){if(!kn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Zi(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function tG(t,e,n){var i=e.pendingProps;switch(Rw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zi(e),null;case 1:return Dr(e.type)&&s0(),Zi(e),null;case 3:return i=e.stateNode,Th(),Fn(Lr),Fn(rr),kw(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(lg(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ks!==null&&(LS(ks),ks=null))),ES(t,e),Zi(e),null;case 5:Uw(e);var r=xc(Qf.current);if(n=e.type,t!==null&&e.stateNode!=null)I3(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(tt(166));return Zi(e),null}if(t=xc(ga.current),lg(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[pa]=e,i[Yf]=s,t=(e.mode&1)!==0,n){case"dialog":Ln("cancel",i),Ln("close",i);break;case"iframe":case"object":case"embed":Ln("load",i);break;case"video":case"audio":for(r=0;r<of.length;r++)Ln(of[r],i);break;case"source":Ln("error",i);break;case"img":case"image":case"link":Ln("error",i),Ln("load",i);break;case"details":Ln("toggle",i);break;case"input":kT(i,s),Ln("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Ln("invalid",i);break;case"textarea":GT(i,s),Ln("invalid",i)}q_(n,s),r=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?i.textContent!==o&&(s.suppressHydrationWarning!==!0&&og(i.textContent,o,t),r=["children",o]):typeof o=="number"&&i.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&og(i.textContent,o,t),r=["children",""+o]):kf.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Ln("scroll",i)}switch(n){case"input":$m(i),OT(i,s,!0);break;case"textarea":$m(i),zT(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=r0)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=oI(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[pa]=e,t[Yf]=i,B3(t,e,!1,!1),e.stateNode=t;e:{switch(a=$_(n,i),n){case"dialog":Ln("cancel",t),Ln("close",t),r=i;break;case"iframe":case"object":case"embed":Ln("load",t),r=i;break;case"video":case"audio":for(r=0;r<of.length;r++)Ln(of[r],t);r=i;break;case"source":Ln("error",t),r=i;break;case"img":case"image":case"link":Ln("error",t),Ln("load",t),r=i;break;case"details":Ln("toggle",t),r=i;break;case"input":kT(t,i),r=J_(t,i),Ln("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Jn({},i,{value:void 0}),Ln("invalid",t);break;case"textarea":GT(t,i),r=Q_(t,i),Ln("invalid",t);break;default:r=i}q_(n,r),o=r;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?uI(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&lI(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Of(t,l):typeof l=="number"&&Of(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(kf.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ln("scroll",t):l!=null&&pw(t,s,l,a))}switch(n){case"input":$m(t),OT(t,i,!1);break;case"textarea":$m(t),zT(t);break;case"option":i.value!=null&&t.setAttribute("value",""+ll(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?uh(t,!!i.multiple,s,!1):i.defaultValue!=null&&uh(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=r0)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Zi(e),null;case 6:if(t&&e.stateNode!=null)L3(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(tt(166));if(n=xc(Qf.current),xc(ga.current),lg(e)){if(i=e.stateNode,n=e.memoizedProps,i[pa]=e,(s=i.nodeValue!==n)&&(t=Zr,t!==null))switch(t.tag){case 3:og(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&og(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[pa]=e,e.stateNode=i}return Zi(e),null;case 13:if(Fn(Vn),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(kn&&Qr!==null&&e.mode&1&&!(e.flags&128))ZI(),Eh(),e.flags|=98560,s=!1;else if(s=lg(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(tt(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(tt(317));s[pa]=e}else Eh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Zi(e),s=!1}else ks!==null&&(LS(ks),ks=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Vn.current&1?Si===0&&(Si=3):Qw())),e.updateQueue!==null&&(e.flags|=4),Zi(e),null);case 4:return Th(),ES(t,e),t===null&&Xf(e.stateNode.containerInfo),Zi(e),null;case 10:return Lw(e.type._context),Zi(e),null;case 17:return Dr(e.type)&&s0(),Zi(e),null;case 19:if(Fn(Vn),s=e.memoizedState,s===null)return Zi(e),null;if(i=(e.flags&128)!==0,a=s.rendering,a===null)if(i)Bd(s,!1);else{if(Si!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=d0(t),a!==null){for(e.flags|=128,Bd(s,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Bn(Vn,Vn.current&1|2),e.child}t=t.sibling}s.tail!==null&&li()>Rh&&(e.flags|=128,i=!0,Bd(s,!1),e.lanes=4194304)}else{if(!i)if(t=d0(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Bd(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!kn)return Zi(e),null}else 2*li()-s.renderingStartTime>Rh&&n!==1073741824&&(e.flags|=128,i=!0,Bd(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=li(),e.sibling=null,n=Vn.current,Bn(Vn,i?n&1|2:n&1),e):(Zi(e),null);case 22:case 23:return Kw(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Kr&1073741824&&(Zi(e),e.subtreeFlags&6&&(e.flags|=8192)):Zi(e),null;case 24:return null;case 25:return null}throw Error(tt(156,e.tag))}function nG(t,e){switch(Rw(e),e.tag){case 1:return Dr(e.type)&&s0(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Th(),Fn(Lr),Fn(rr),kw(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Uw(e),null;case 13:if(Fn(Vn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(tt(340));Eh()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Fn(Vn),null;case 4:return Th(),null;case 10:return Lw(e.type._context),null;case 22:case 23:return Kw(),null;case 24:return null;default:return null}}var hg=!1,nr=!1,iG=typeof WeakSet=="function"?WeakSet:Set,yt=null;function eh(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Zn(t,e,i)}else n.current=null}function bS(t,e,n){try{n()}catch(i){Zn(t,e,i)}}var PC=!1;function rG(t,e){if(cS=t0,t=kI(),Tw(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,c=0,u=0,h=t,f=null;t:for(;;){for(var m;h!==n||r!==0&&h.nodeType!==3||(o=a+r),h!==s||i!==0&&h.nodeType!==3||(l=a+i),h.nodeType===3&&(a+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===n&&++c===r&&(o=a),f===s&&++u===i&&(l=a),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(uS={focusedElem:t,selectionRange:n},t0=!1,yt=e;yt!==null;)if(e=yt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,yt=t;else for(;yt!==null;){e=yt;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,x=g.memoizedState,v=e.stateNode,_=v.getSnapshotBeforeUpdate(e.elementType===e.type?y:Ns(e.type,y),x);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(tt(163))}}catch(M){Zn(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,yt=t;break}yt=e.return}return g=PC,PC=!1,g}function xf(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&bS(e,n,s)}r=r.next}while(r!==i)}}function Z0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function TS(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function D3(t){var e=t.alternate;e!==null&&(t.alternate=null,D3(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[pa],delete e[Yf],delete e[fS],delete e[G4],delete e[z4])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function N3(t){return t.tag===5||t.tag===3||t.tag===4}function BC(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||N3(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function CS(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=r0));else if(i!==4&&(t=t.child,t!==null))for(CS(t,e,n),t=t.sibling;t!==null;)CS(t,e,n),t=t.sibling}function RS(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(RS(t,e,n),t=t.sibling;t!==null;)RS(t,e,n),t=t.sibling}var zi=null,Us=!1;function Mo(t,e,n){for(n=n.child;n!==null;)F3(t,e,n),n=n.sibling}function F3(t,e,n){if(ma&&typeof ma.onCommitFiberUnmount=="function")try{ma.onCommitFiberUnmount(V0,n)}catch{}switch(n.tag){case 5:nr||eh(n,e);case 6:var i=zi,r=Us;zi=null,Mo(t,e,n),zi=i,Us=r,zi!==null&&(Us?(t=zi,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):zi.removeChild(n.stateNode));break;case 18:zi!==null&&(Us?(t=zi,n=n.stateNode,t.nodeType===8?l1(t.parentNode,n):t.nodeType===1&&l1(t,n),Vf(t)):l1(zi,n.stateNode));break;case 4:i=zi,r=Us,zi=n.stateNode.containerInfo,Us=!0,Mo(t,e,n),zi=i,Us=r;break;case 0:case 11:case 14:case 15:if(!nr&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&bS(n,e,a),r=r.next}while(r!==i)}Mo(t,e,n);break;case 1:if(!nr&&(eh(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(o){Zn(n,e,o)}Mo(t,e,n);break;case 21:Mo(t,e,n);break;case 22:n.mode&1?(nr=(i=nr)||n.memoizedState!==null,Mo(t,e,n),nr=i):Mo(t,e,n);break;default:Mo(t,e,n)}}function IC(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new iG),e.forEach(function(i){var r=fG.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Ps(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:zi=o.stateNode,Us=!1;break e;case 3:zi=o.stateNode.containerInfo,Us=!0;break e;case 4:zi=o.stateNode.containerInfo,Us=!0;break e}o=o.return}if(zi===null)throw Error(tt(160));F3(s,a,r),zi=null,Us=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){Zn(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)U3(e,t),e=e.sibling}function U3(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ps(e,t),la(t),i&4){try{xf(3,t,t.return),Z0(3,t)}catch(y){Zn(t,t.return,y)}try{xf(5,t,t.return)}catch(y){Zn(t,t.return,y)}}break;case 1:Ps(e,t),la(t),i&512&&n!==null&&eh(n,n.return);break;case 5:if(Ps(e,t),la(t),i&512&&n!==null&&eh(n,n.return),t.flags&32){var r=t.stateNode;try{Of(r,"")}catch(y){Zn(t,t.return,y)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&sI(r,s),$_(o,a);var c=$_(o,s);for(a=0;a<l.length;a+=2){var u=l[a],h=l[a+1];u==="style"?uI(r,h):u==="dangerouslySetInnerHTML"?lI(r,h):u==="children"?Of(r,h):pw(r,u,h,c)}switch(o){case"input":Y_(r,s);break;case"textarea":aI(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?uh(r,!!s.multiple,m,!1):f!==!!s.multiple&&(s.defaultValue!=null?uh(r,!!s.multiple,s.defaultValue,!0):uh(r,!!s.multiple,s.multiple?[]:"",!1))}r[Yf]=s}catch(y){Zn(t,t.return,y)}}break;case 6:if(Ps(e,t),la(t),i&4){if(t.stateNode===null)throw Error(tt(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(y){Zn(t,t.return,y)}}break;case 3:if(Ps(e,t),la(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Vf(e.containerInfo)}catch(y){Zn(t,t.return,y)}break;case 4:Ps(e,t),la(t);break;case 13:Ps(e,t),la(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Jw=li())),i&4&&IC(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(nr=(c=nr)||u,Ps(e,t),nr=c):Ps(e,t),la(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(yt=t,u=t.child;u!==null;){for(h=yt=u;yt!==null;){switch(f=yt,m=f.child,f.tag){case 0:case 11:case 14:case 15:xf(4,f,f.return);break;case 1:eh(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){i=f,n=f.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(y){Zn(i,n,y)}}break;case 5:eh(f,f.return);break;case 22:if(f.memoizedState!==null){DC(h);continue}}m!==null?(m.return=f,yt=m):DC(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{r=h.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=h.stateNode,l=h.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=cI("display",a))}catch(y){Zn(t,t.return,y)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(y){Zn(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ps(e,t),la(t),i&4&&IC(t);break;case 21:break;default:Ps(e,t),la(t)}}function la(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(N3(n)){var i=n;break e}n=n.return}throw Error(tt(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Of(r,""),i.flags&=-33);var s=BC(t);RS(t,s,r);break;case 3:case 4:var a=i.stateNode.containerInfo,o=BC(t);CS(t,o,a);break;default:throw Error(tt(161))}}catch(l){Zn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function sG(t,e,n){yt=t,k3(t)}function k3(t,e,n){for(var i=(t.mode&1)!==0;yt!==null;){var r=yt,s=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||hg;if(!a){var o=r.alternate,l=o!==null&&o.memoizedState!==null||nr;o=hg;var c=nr;if(hg=a,(nr=l)&&!c)for(yt=r;yt!==null;)a=yt,l=a.child,a.tag===22&&a.memoizedState!==null?NC(r):l!==null?(l.return=a,yt=l):NC(r);for(;s!==null;)yt=s,k3(s),s=s.sibling;yt=r,hg=o,nr=c}LC(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,yt=s):LC(t)}}function LC(t){for(;yt!==null;){var e=yt;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:nr||Z0(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!nr)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Ns(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&vC(e,s,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}vC(e,a,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Vf(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(tt(163))}nr||e.flags&512&&TS(e)}catch(f){Zn(e,e.return,f)}}if(e===t){yt=null;break}if(n=e.sibling,n!==null){n.return=e.return,yt=n;break}yt=e.return}}function DC(t){for(;yt!==null;){var e=yt;if(e===t){yt=null;break}var n=e.sibling;if(n!==null){n.return=e.return,yt=n;break}yt=e.return}}function NC(t){for(;yt!==null;){var e=yt;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Z0(4,e)}catch(l){Zn(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Zn(e,r,l)}}var s=e.return;try{TS(e)}catch(l){Zn(e,s,l)}break;case 5:var a=e.return;try{TS(e)}catch(l){Zn(e,a,l)}}}catch(l){Zn(e,e.return,l)}if(e===t){yt=null;break}var o=e.sibling;if(o!==null){o.return=e.return,yt=o;break}yt=e.return}}var aG=Math.ceil,m0=fo.ReactCurrentDispatcher,Ww=fo.ReactCurrentOwner,As=fo.ReactCurrentBatchConfig,cn=0,Li=null,mi=null,Hi=0,Kr=0,th=Sl(0),Si=0,ep=null,kc=0,q0=0,Xw=0,_f=null,Rr=null,Jw=0,Rh=1/0,Oa=null,g0=!1,PS=null,$o=null,dg=!1,jo=null,v0=0,Sf=0,BS=null,Iv=-1,Lv=0;function yr(){return cn&6?li():Iv!==-1?Iv:Iv=li()}function el(t){return t.mode&1?cn&2&&Hi!==0?Hi&-Hi:V4.transition!==null?(Lv===0&&(Lv=AI()),Lv):(t=vn,t!==0||(t=window.event,t=t===void 0?16:RI(t.type)),t):1}function Ws(t,e,n,i){if(50<Sf)throw Sf=0,BS=null,Error(tt(185));Bp(t,n,i),(!(cn&2)||t!==Li)&&(t===Li&&(!(cn&2)&&(q0|=n),Si===4&&zo(t,Hi)),Nr(t,i),n===1&&cn===0&&!(e.mode&1)&&(Rh=li()+500,Y0&&Al()))}function Nr(t,e){var n=t.callbackNode;VO(t,e);var i=e0(t,t===Li?Hi:0);if(i===0)n!==null&&jT(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&jT(n),e===1)t.tag===0?H4(FC.bind(null,t)):YI(FC.bind(null,t)),k4(function(){!(cn&6)&&Al()}),n=null;else{switch(wI(i)){case 1:n=xw;break;case 4:n=_I;break;case 16:n=$v;break;case 536870912:n=SI;break;default:n=$v}n=X3(n,O3.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function O3(t,e){if(Iv=-1,Lv=0,cn&6)throw Error(tt(327));var n=t.callbackNode;if(mh()&&t.callbackNode!==n)return null;var i=e0(t,t===Li?Hi:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=y0(t,i);else{e=i;var r=cn;cn|=2;var s=z3();(Li!==t||Hi!==e)&&(Oa=null,Rh=li()+500,Cc(t,e));do try{cG();break}catch(o){G3(t,o)}while(!0);Iw(),m0.current=s,cn=r,mi!==null?e=0:(Li=null,Hi=0,e=Si)}if(e!==0){if(e===2&&(r=rS(t),r!==0&&(i=r,e=IS(t,r))),e===1)throw n=ep,Cc(t,0),zo(t,i),Nr(t,li()),n;if(e===6)zo(t,i);else{if(r=t.current.alternate,!(i&30)&&!oG(r)&&(e=y0(t,i),e===2&&(s=rS(t),s!==0&&(i=s,e=IS(t,s))),e===1))throw n=ep,Cc(t,0),zo(t,i),Nr(t,li()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(tt(345));case 2:oc(t,Rr,Oa);break;case 3:if(zo(t,i),(i&130023424)===i&&(e=Jw+500-li(),10<e)){if(e0(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){yr(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=dS(oc.bind(null,t,Rr,Oa),e);break}oc(t,Rr,Oa);break;case 4:if(zo(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-js(i);s=1<<a,a=e[a],a>r&&(r=a),i&=~s}if(i=r,i=li()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*aG(i/1960))-i,10<i){t.timeoutHandle=dS(oc.bind(null,t,Rr,Oa),i);break}oc(t,Rr,Oa);break;case 5:oc(t,Rr,Oa);break;default:throw Error(tt(329))}}}return Nr(t,li()),t.callbackNode===n?O3.bind(null,t):null}function IS(t,e){var n=_f;return t.current.memoizedState.isDehydrated&&(Cc(t,e).flags|=256),t=y0(t,e),t!==2&&(e=Rr,Rr=n,e!==null&&LS(e)),t}function LS(t){Rr===null?Rr=t:Rr.push.apply(Rr,t)}function oG(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Js(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function zo(t,e){for(e&=~Xw,e&=~q0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-js(e),i=1<<n;t[n]=-1,e&=~i}}function FC(t){if(cn&6)throw Error(tt(327));mh();var e=e0(t,0);if(!(e&1))return Nr(t,li()),null;var n=y0(t,e);if(t.tag!==0&&n===2){var i=rS(t);i!==0&&(e=i,n=IS(t,i))}if(n===1)throw n=ep,Cc(t,0),zo(t,e),Nr(t,li()),n;if(n===6)throw Error(tt(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,oc(t,Rr,Oa),Nr(t,li()),null}function Yw(t,e){var n=cn;cn|=1;try{return t(e)}finally{cn=n,cn===0&&(Rh=li()+500,Y0&&Al())}}function Oc(t){jo!==null&&jo.tag===0&&!(cn&6)&&mh();var e=cn;cn|=1;var n=As.transition,i=vn;try{if(As.transition=null,vn=1,t)return t()}finally{vn=i,As.transition=n,cn=e,!(cn&6)&&Al()}}function Kw(){Kr=th.current,Fn(th)}function Cc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,U4(n)),mi!==null)for(n=mi.return;n!==null;){var i=n;switch(Rw(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&s0();break;case 3:Th(),Fn(Lr),Fn(rr),kw();break;case 5:Uw(i);break;case 4:Th();break;case 13:Fn(Vn);break;case 19:Fn(Vn);break;case 10:Lw(i.type._context);break;case 22:case 23:Kw()}n=n.return}if(Li=t,mi=t=tl(t.current,null),Hi=Kr=e,Si=0,ep=null,Xw=q0=kc=0,Rr=_f=null,yc!==null){for(e=0;e<yc.length;e++)if(n=yc[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var a=s.next;s.next=r,i.next=a}n.pending=i}yc=null}return t}function G3(t,e){do{var n=mi;try{if(Iw(),Rv.current=p0,f0){for(var i=Xn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}f0=!1}if(Uc=0,Bi=_i=Xn=null,yf=!1,Zf=0,Ww.current=null,n===null||n.return===null){Si=1,ep=e,mi=null;break}e:{var s=t,a=n.return,o=n,l=e;if(e=Hi,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=o,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=wC(a);if(m!==null){m.flags&=-257,MC(m,a,o,s,e),m.mode&1&&AC(s,c,e),e=m,l=c;var g=e.updateQueue;if(g===null){var y=new Set;y.add(l),e.updateQueue=y}else g.add(l);break e}else{if(!(e&1)){AC(s,c,e),Qw();break e}l=Error(tt(426))}}else if(kn&&o.mode&1){var x=wC(a);if(x!==null){!(x.flags&65536)&&(x.flags|=256),MC(x,a,o,s,e),Pw(Ch(l,o));break e}}s=l=Ch(l,o),Si!==4&&(Si=2),_f===null?_f=[s]:_f.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=w3(s,l,e);gC(s,v);break e;case 1:o=l;var _=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&($o===null||!$o.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var M=M3(s,o,e);gC(s,M);break e}}s=s.return}while(s!==null)}V3(n)}catch(b){e=b,mi===n&&n!==null&&(mi=n=n.return);continue}break}while(!0)}function z3(){var t=m0.current;return m0.current=p0,t===null?p0:t}function Qw(){(Si===0||Si===3||Si===2)&&(Si=4),Li===null||!(kc&268435455)&&!(q0&268435455)||zo(Li,Hi)}function y0(t,e){var n=cn;cn|=2;var i=z3();(Li!==t||Hi!==e)&&(Oa=null,Cc(t,e));do try{lG();break}catch(r){G3(t,r)}while(!0);if(Iw(),cn=n,m0.current=i,mi!==null)throw Error(tt(261));return Li=null,Hi=0,Si}function lG(){for(;mi!==null;)H3(mi)}function cG(){for(;mi!==null&&!DO();)H3(mi)}function H3(t){var e=W3(t.alternate,t,Kr);t.memoizedProps=t.pendingProps,e===null?V3(t):mi=e,Ww.current=null}function V3(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=nG(n,e),n!==null){n.flags&=32767,mi=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Si=6,mi=null;return}}else if(n=tG(n,e,Kr),n!==null){mi=n;return}if(e=e.sibling,e!==null){mi=e;return}mi=e=t}while(e!==null);Si===0&&(Si=5)}function oc(t,e,n){var i=vn,r=As.transition;try{As.transition=null,vn=1,uG(t,e,n,i)}finally{As.transition=r,vn=i}return null}function uG(t,e,n,i){do mh();while(jo!==null);if(cn&6)throw Error(tt(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(tt(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(jO(t,s),t===Li&&(mi=Li=null,Hi=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||dg||(dg=!0,X3($v,function(){return mh(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=As.transition,As.transition=null;var a=vn;vn=1;var o=cn;cn|=4,Ww.current=null,rG(t,n),U3(n,t),P4(uS),t0=!!cS,uS=cS=null,t.current=n,sG(n),NO(),cn=o,vn=a,As.transition=s}else t.current=n;if(dg&&(dg=!1,jo=t,v0=r),s=t.pendingLanes,s===0&&($o=null),kO(n.stateNode),Nr(t,li()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(g0)throw g0=!1,t=PS,PS=null,t;return v0&1&&t.tag!==0&&mh(),s=t.pendingLanes,s&1?t===BS?Sf++:(Sf=0,BS=t):Sf=0,Al(),null}function mh(){if(jo!==null){var t=wI(v0),e=As.transition,n=vn;try{if(As.transition=null,vn=16>t?16:t,jo===null)var i=!1;else{if(t=jo,jo=null,v0=0,cn&6)throw Error(tt(331));var r=cn;for(cn|=4,yt=t.current;yt!==null;){var s=yt,a=s.child;if(yt.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(yt=c;yt!==null;){var u=yt;switch(u.tag){case 0:case 11:case 15:xf(8,u,s)}var h=u.child;if(h!==null)h.return=u,yt=h;else for(;yt!==null;){u=yt;var f=u.sibling,m=u.return;if(D3(u),u===c){yt=null;break}if(f!==null){f.return=m,yt=f;break}yt=m}}}var g=s.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var x=y.sibling;y.sibling=null,y=x}while(y!==null)}}yt=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,yt=a;else e:for(;yt!==null;){if(s=yt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:xf(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,yt=v;break e}yt=s.return}}var _=t.current;for(yt=_;yt!==null;){a=yt;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,yt=S;else e:for(a=_;yt!==null;){if(o=yt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Z0(9,o)}}catch(b){Zn(o,o.return,b)}if(o===a){yt=null;break e}var M=o.sibling;if(M!==null){M.return=o.return,yt=M;break e}yt=o.return}}if(cn=r,Al(),ma&&typeof ma.onPostCommitFiberRoot=="function")try{ma.onPostCommitFiberRoot(V0,t)}catch{}i=!0}return i}finally{vn=n,As.transition=e}}return!1}function UC(t,e,n){e=Ch(n,e),e=w3(t,e,1),t=qo(t,e,1),e=yr(),t!==null&&(Bp(t,1,e),Nr(t,e))}function Zn(t,e,n){if(t.tag===3)UC(t,t,n);else for(;e!==null;){if(e.tag===3){UC(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&($o===null||!$o.has(i))){t=Ch(n,t),t=M3(e,t,1),e=qo(e,t,1),t=yr(),e!==null&&(Bp(e,1,t),Nr(e,t));break}}e=e.return}}function hG(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=yr(),t.pingedLanes|=t.suspendedLanes&n,Li===t&&(Hi&n)===n&&(Si===4||Si===3&&(Hi&130023424)===Hi&&500>li()-Jw?Cc(t,0):Xw|=n),Nr(t,e)}function j3(t,e){e===0&&(t.mode&1?(e=ng,ng<<=1,!(ng&130023424)&&(ng=4194304)):e=1);var n=yr();t=so(t,e),t!==null&&(Bp(t,e,n),Nr(t,n))}function dG(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),j3(t,n)}function fG(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(tt(314))}i!==null&&i.delete(e),j3(t,n)}var W3;W3=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Lr.current)Ir=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ir=!1,eG(t,e,n);Ir=!!(t.flags&131072)}else Ir=!1,kn&&e.flags&1048576&&KI(e,l0,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Bv(t,e),t=e.pendingProps;var r=Mh(e,rr.current);ph(e,n),r=Gw(null,e,i,t,r,n);var s=zw();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Dr(i)?(s=!0,a0(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Nw(e),r.updater=Q0,e.stateNode=r,r._reactInternals=e,xS(e,i,t,n),e=AS(null,e,i,!0,s,n)):(e.tag=0,kn&&s&&Cw(e),mr(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Bv(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=mG(i),t=Ns(i,t),r){case 0:e=SS(null,e,i,t,n);break e;case 1:e=TC(null,e,i,t,n);break e;case 11:e=EC(null,e,i,t,n);break e;case 14:e=bC(null,e,i,Ns(i.type,t),n);break e}throw Error(tt(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Ns(i,r),SS(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Ns(i,r),TC(t,e,i,r,n);case 3:e:{if(C3(e),t===null)throw Error(tt(387));i=e.pendingProps,s=e.memoizedState,r=s.element,t3(t,e),h0(e,i,null,n);var a=e.memoizedState;if(i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Ch(Error(tt(423)),e),e=CC(t,e,i,n,r);break e}else if(i!==r){r=Ch(Error(tt(424)),e),e=CC(t,e,i,n,r);break e}else for(Qr=Zo(e.stateNode.containerInfo.firstChild),Zr=e,kn=!0,ks=null,n=$I(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Eh(),i===r){e=ao(t,e,n);break e}mr(t,e,i,n)}e=e.child}return e;case 5:return n3(e),t===null&&gS(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,a=r.children,hS(i,r)?a=null:s!==null&&hS(i,s)&&(e.flags|=32),T3(t,e),mr(t,e,a,n),e.child;case 6:return t===null&&gS(e),null;case 13:return R3(t,e,n);case 4:return Fw(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=bh(e,null,i,n):mr(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Ns(i,r),EC(t,e,i,r,n);case 7:return mr(t,e,e.pendingProps,n),e.child;case 8:return mr(t,e,e.pendingProps.children,n),e.child;case 12:return mr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,a=r.value,Bn(c0,i._currentValue),i._currentValue=a,s!==null)if(Js(s.value,a)){if(s.children===r.children&&!Lr.current){e=ao(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Ka(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),vS(s.return,n,e),o.lanes|=n;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(tt(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),vS(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}mr(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,ph(e,n),r=Ms(r),i=i(r),e.flags|=1,mr(t,e,i,n),e.child;case 14:return i=e.type,r=Ns(i,e.pendingProps),r=Ns(i.type,r),bC(t,e,i,r,n);case 15:return E3(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Ns(i,r),Bv(t,e),e.tag=1,Dr(i)?(t=!0,a0(e)):t=!1,ph(e,n),A3(e,i,r),xS(e,i,r,n),AS(null,e,i,!0,t,n);case 19:return P3(t,e,n);case 22:return b3(t,e,n)}throw Error(tt(156,e.tag))};function X3(t,e){return xI(t,e)}function pG(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _s(t,e,n,i){return new pG(t,e,n,i)}function Zw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function mG(t){if(typeof t=="function")return Zw(t)?1:0;if(t!=null){if(t=t.$$typeof,t===gw)return 11;if(t===vw)return 14}return 2}function tl(t,e){var n=t.alternate;return n===null?(n=_s(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Dv(t,e,n,i,r,s){var a=2;if(i=t,typeof t=="function")Zw(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Wu:return Rc(n.children,r,s,e);case mw:a=8,r|=8;break;case V_:return t=_s(12,n,e,r|2),t.elementType=V_,t.lanes=s,t;case j_:return t=_s(13,n,e,r),t.elementType=j_,t.lanes=s,t;case W_:return t=_s(19,n,e,r),t.elementType=W_,t.lanes=s,t;case nI:return $0(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case eI:a=10;break e;case tI:a=9;break e;case gw:a=11;break e;case vw:a=14;break e;case Uo:a=16,i=null;break e}throw Error(tt(130,t==null?t:typeof t,""))}return e=_s(a,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function Rc(t,e,n,i){return t=_s(7,t,i,e),t.lanes=n,t}function $0(t,e,n,i){return t=_s(22,t,i,e),t.elementType=nI,t.lanes=n,t.stateNode={isHidden:!1},t}function g1(t,e,n){return t=_s(6,t,null,e),t.lanes=n,t}function v1(t,e,n){return e=_s(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function gG(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zx(0),this.expirationTimes=Zx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zx(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function qw(t,e,n,i,r,s,a,o,l){return t=new gG(t,e,n,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=_s(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nw(s),t}function vG(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ju,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function J3(t){if(!t)return cl;t=t._reactInternals;e:{if(Jc(t)!==t||t.tag!==1)throw Error(tt(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Dr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(tt(171))}if(t.tag===1){var n=t.type;if(Dr(n))return JI(t,n,e)}return e}function Y3(t,e,n,i,r,s,a,o,l){return t=qw(n,i,!0,t,r,s,a,o,l),t.context=J3(null),n=t.current,i=yr(),r=el(n),s=Ka(i,r),s.callback=e??null,qo(n,s,r),t.current.lanes=r,Bp(t,r,i),Nr(t,i),t}function ey(t,e,n,i){var r=e.current,s=yr(),a=el(r);return n=J3(n),e.context===null?e.context=n:e.pendingContext=n,e=Ka(s,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=qo(r,e,a),t!==null&&(Ws(t,r,a,s),Cv(t,r,a)),a}function x0(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function kC(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function $w(t,e){kC(t,e),(t=t.alternate)&&kC(t,e)}function yG(){return null}var K3=typeof reportError=="function"?reportError:function(t){console.error(t)};function eM(t){this._internalRoot=t}ty.prototype.render=eM.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(tt(409));ey(t,e,null,null)};ty.prototype.unmount=eM.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Oc(function(){ey(null,t,null,null)}),e[ro]=null}};function ty(t){this._internalRoot=t}ty.prototype.unstable_scheduleHydration=function(t){if(t){var e=bI();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Go.length&&e!==0&&e<Go[n].priority;n++);Go.splice(n,0,t),n===0&&CI(t)}};function tM(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ny(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function OC(){}function xG(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=x0(a);s.call(c)}}var a=Y3(e,i,t,0,null,!1,!1,"",OC);return t._reactRootContainer=a,t[ro]=a.current,Xf(t.nodeType===8?t.parentNode:t),Oc(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var o=i;i=function(){var c=x0(l);o.call(c)}}var l=qw(t,0,!1,null,null,!1,!1,"",OC);return t._reactRootContainer=l,t[ro]=l.current,Xf(t.nodeType===8?t.parentNode:t),Oc(function(){ey(e,l,n,i)}),l}function iy(t,e,n,i,r){var s=n._reactRootContainer;if(s){var a=s;if(typeof r=="function"){var o=r;r=function(){var l=x0(a);o.call(l)}}ey(e,a,t,r)}else a=xG(n,e,t,r,i);return x0(a)}MI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=af(e.pendingLanes);n!==0&&(_w(e,n|1),Nr(e,li()),!(cn&6)&&(Rh=li()+500,Al()))}break;case 13:Oc(function(){var i=so(t,1);if(i!==null){var r=yr();Ws(i,t,1,r)}}),$w(t,1)}};Sw=function(t){if(t.tag===13){var e=so(t,134217728);if(e!==null){var n=yr();Ws(e,t,134217728,n)}$w(t,134217728)}};EI=function(t){if(t.tag===13){var e=el(t),n=so(t,e);if(n!==null){var i=yr();Ws(n,t,e,i)}$w(t,e)}};bI=function(){return vn};TI=function(t,e){var n=vn;try{return vn=t,e()}finally{vn=n}};tS=function(t,e,n){switch(e){case"input":if(Y_(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=J0(i);if(!r)throw Error(tt(90));rI(i),Y_(i,r)}}}break;case"textarea":aI(t,n);break;case"select":e=n.value,e!=null&&uh(t,!!n.multiple,e,!1)}};fI=Yw;pI=Oc;var _G={usingClientEntryPoint:!1,Events:[Lp,Ku,J0,hI,dI,Yw]},Id={findFiberByHostInstance:vc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},SG={bundleType:Id.bundleType,version:Id.version,rendererPackageName:Id.rendererPackageName,rendererConfig:Id.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=vI(t),t===null?null:t.stateNode},findFiberByHostInstance:Id.findFiberByHostInstance||yG,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fg.isDisabled&&fg.supportsFiber)try{V0=fg.inject(SG),ma=fg}catch{}}ts.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_G;ts.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tM(e))throw Error(tt(200));return vG(t,e,null,n)};ts.createRoot=function(t,e){if(!tM(t))throw Error(tt(299));var n=!1,i="",r=K3;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=qw(t,1,!1,null,null,n,!1,i,r),t[ro]=e.current,Xf(t.nodeType===8?t.parentNode:t),new eM(e)};ts.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(tt(188)):(t=Object.keys(t).join(","),Error(tt(268,t)));return t=vI(e),t=t===null?null:t.stateNode,t};ts.flushSync=function(t){return Oc(t)};ts.hydrate=function(t,e,n){if(!ny(e))throw Error(tt(200));return iy(null,t,e,!0,n)};ts.hydrateRoot=function(t,e,n){if(!tM(t))throw Error(tt(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",a=K3;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=Y3(e,null,t,1,n??null,r,!1,s,a),t[ro]=e.current,Xf(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new ty(e)};ts.render=function(t,e,n){if(!ny(e))throw Error(tt(200));return iy(null,t,e,!1,n)};ts.unmountComponentAtNode=function(t){if(!ny(t))throw Error(tt(40));return t._reactRootContainer?(Oc(function(){iy(null,null,t,!1,function(){t._reactRootContainer=null,t[ro]=null})}),!0):!1};ts.unstable_batchedUpdates=Yw;ts.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!ny(n))throw Error(tt(200));if(t==null||t._reactInternals===void 0)throw Error(tt(38));return iy(t,e,n,!1,i)};ts.version="18.3.1-next-f1338f8080-20240426";function Q3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Q3)}catch(t){console.error(t)}}Q3(),QB.exports=ts;var AG=QB.exports,Z3,GC=AG;Z3=z_.createRoot=GC.createRoot,z_.hydrateRoot=GC.hydrateRoot;/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var zC="popstate";function wG(t={}){function e(i,r){let{pathname:s,search:a,hash:o}=i.location;return DS("",{pathname:s,search:a,hash:o},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:tp(r)}return EG(e,n,null,t)}function On(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ys(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function MG(){return Math.random().toString(36).substring(2,10)}function HC(t,e){return{usr:t.state,key:t.key,idx:e}}function DS(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?jh(e):e,state:n,key:e&&e.key||i||MG()}}function tp({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function jh(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function EG(t,e,n,i={}){let{window:r=document.defaultView,v5Compat:s=!1}=i,a=r.history,o="POP",l=null,c=u();c==null&&(c=0,a.replaceState({...a.state,idx:c},""));function u(){return(a.state||{idx:null}).idx}function h(){o="POP";let x=u(),v=x==null?null:x-c;c=x,l&&l({action:o,location:y.location,delta:v})}function f(x,v){o="PUSH";let _=DS(y.location,x,v);c=u()+1;let S=HC(_,c),M=y.createHref(_);try{a.pushState(S,"",M)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;r.location.assign(M)}s&&l&&l({action:o,location:y.location,delta:1})}function m(x,v){o="REPLACE";let _=DS(y.location,x,v);c=u();let S=HC(_,c),M=y.createHref(_);a.replaceState(S,"",M),s&&l&&l({action:o,location:y.location,delta:0})}function g(x){return bG(x)}let y={get action(){return o},get location(){return t(r,a)},listen(x){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(zC,h),l=x,()=>{r.removeEventListener(zC,h),l=null}},createHref(x){return e(r,x)},createURL:g,encodeLocation(x){let v=g(x);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:m,go(x){return a.go(x)}};return y}function bG(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),On(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:tp(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function q3(t,e,n="/"){return TG(t,e,n,!1)}function TG(t,e,n,i){let r=typeof e=="string"?jh(e):e,s=oo(r.pathname||"/",n);if(s==null)return null;let a=$3(t);CG(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=OG(s);o=UG(a[l],c,i)}return o}function $3(t,e=[],n=[],i=""){let r=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(On(l.relativePath.startsWith(i),`Absolute route path "${l.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(i.length));let c=Qa([i,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(On(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),$3(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:NG(c,s.index),routesMeta:u})};return t.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))r(s,a);else for(let l of eL(s.path))r(s,a,l)}),e}function eL(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let a=eL(i.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),r&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function CG(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:FG(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var RG=/^:[\w-]+$/,PG=3,BG=2,IG=1,LG=10,DG=-2,VC=t=>t==="*";function NG(t,e){let n=t.split("/"),i=n.length;return n.some(VC)&&(i+=DG),e&&(i+=BG),n.filter(r=>!VC(r)).reduce((r,s)=>r+(RG.test(s)?PG:s===""?IG:LG),i)}function FG(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function UG(t,e,n=!1){let{routesMeta:i}=t,r={},s="/",a=[];for(let o=0;o<i.length;++o){let l=i[o],c=o===i.length-1,u=s==="/"?e:e.slice(s.length)||"/",h=_0({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!h&&c&&n&&!i[i.length-1].route.index&&(h=_0({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!h)return null;Object.assign(r,h.params),a.push({params:r,pathname:Qa([s,h.pathname]),pathnameBase:VG(Qa([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=Qa([s,h.pathnameBase]))}return a}function _0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=kG(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:i.reduce((c,{paramName:u,isOptional:h},f)=>{if(u==="*"){let g=o[f]||"";a=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const m=o[f];return h&&!m?c[u]=void 0:c[u]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:a,pattern:t}}function kG(t,e=!1,n=!0){Ys(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(i.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function OG(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ys(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function oo(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function GG(t,e="/"){let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?jh(t):t;return{pathname:n?n.startsWith("/")?n:zG(n,e):e,search:jG(i),hash:WG(r)}}function zG(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function y1(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function HG(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function nM(t){let e=HG(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function iM(t,e,n,i=!1){let r;typeof t=="string"?r=jh(t):(r={...t},On(!r.pathname||!r.pathname.includes("?"),y1("?","pathname","search",r)),On(!r.pathname||!r.pathname.includes("#"),y1("#","pathname","hash",r)),On(!r.search||!r.search.includes("#"),y1("#","search","hash",r)));let s=t===""||r.pathname==="",a=s?"/":r.pathname,o;if(a==null)o=n;else{let h=e.length-1;if(!i&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),h-=1;r.pathname=f.join("/")}o=h>=0?e[h]:"/"}let l=GG(r,o),c=a&&a!=="/"&&a.endsWith("/"),u=(s||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var Qa=t=>t.join("/").replace(/\/\/+/g,"/"),VG=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),jG=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,WG=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function XG(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var tL=["POST","PUT","PATCH","DELETE"];new Set(tL);var JG=["GET",...tL];new Set(JG);var Wh=D.createContext(null);Wh.displayName="DataRouter";var ry=D.createContext(null);ry.displayName="DataRouterState";D.createContext(!1);var nL=D.createContext({isTransitioning:!1});nL.displayName="ViewTransition";var YG=D.createContext(new Map);YG.displayName="Fetchers";var KG=D.createContext(null);KG.displayName="Await";var Zs=D.createContext(null);Zs.displayName="Navigation";var Np=D.createContext(null);Np.displayName="Location";var qs=D.createContext({outlet:null,matches:[],isDataRoute:!1});qs.displayName="Route";var rM=D.createContext(null);rM.displayName="RouteError";function QG(t,{relative:e}={}){On(Xh(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=D.useContext(Zs),{hash:r,pathname:s,search:a}=Fp(t,{relative:e}),o=s;return n!=="/"&&(o=s==="/"?n:Qa([n,s])),i.createHref({pathname:o,search:a,hash:r})}function Xh(){return D.useContext(Np)!=null}function wl(){return On(Xh(),"useLocation() may be used only in the context of a <Router> component."),D.useContext(Np).location}var iL="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function rL(t){D.useContext(Zs).static||D.useLayoutEffect(t)}function Ml(){let{isDataRoute:t}=D.useContext(qs);return t?hz():ZG()}function ZG(){On(Xh(),"useNavigate() may be used only in the context of a <Router> component.");let t=D.useContext(Wh),{basename:e,navigator:n}=D.useContext(Zs),{matches:i}=D.useContext(qs),{pathname:r}=wl(),s=JSON.stringify(nM(i)),a=D.useRef(!1);return rL(()=>{a.current=!0}),D.useCallback((l,c={})=>{if(Ys(a.current,iL),!a.current)return;if(typeof l=="number"){n.go(l);return}let u=iM(l,JSON.parse(s),r,c.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:Qa([e,u.pathname])),(c.replace?n.replace:n.push)(u,c.state,c)},[e,n,s,r,t])}var qG=D.createContext(null);function $G(t){let e=D.useContext(qs).outlet;return e&&D.createElement(qG.Provider,{value:t},e)}function Fp(t,{relative:e}={}){let{matches:n}=D.useContext(qs),{pathname:i}=wl(),r=JSON.stringify(nM(n));return D.useMemo(()=>iM(t,JSON.parse(r),i,e==="path"),[t,r,i,e])}function ez(t,e){return sL(t,e)}function sL(t,e,n,i){var v;On(Xh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=D.useContext(Zs),{matches:s}=D.useContext(qs),a=s[s.length-1],o=a?a.params:{},l=a?a.pathname:"/",c=a?a.pathnameBase:"/",u=a&&a.route;{let _=u&&u.path||"";aL(l,!u||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let h=wl(),f;if(e){let _=typeof e=="string"?jh(e):e;On(c==="/"||((v=_.pathname)==null?void 0:v.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${_.pathname}" was given in the \`location\` prop.`),f=_}else f=h;let m=f.pathname||"/",g=m;if(c!=="/"){let _=c.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(_.length).join("/")}let y=q3(t,{pathname:g});Ys(u||y!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),Ys(y==null||y[y.length-1].route.element!==void 0||y[y.length-1].route.Component!==void 0||y[y.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=sz(y&&y.map(_=>Object.assign({},_,{params:Object.assign({},o,_.params),pathname:Qa([c,r.encodeLocation?r.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?c:Qa([c,r.encodeLocation?r.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),s,n,i);return e&&x?D.createElement(Np.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},x):x}function tz(){let t=uz(),e=XG(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},s={padding:"2px 4px",backgroundColor:i},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=D.createElement(D.Fragment,null,D.createElement("p",null,"💿 Hey developer 👋"),D.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",D.createElement("code",{style:s},"ErrorBoundary")," or"," ",D.createElement("code",{style:s},"errorElement")," prop on your route.")),D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:r},n):null,a)}var nz=D.createElement(tz,null),iz=class extends D.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?D.createElement(qs.Provider,{value:this.props.routeContext},D.createElement(rM.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function rz({routeContext:t,match:e,children:n}){let i=D.useContext(Wh);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),D.createElement(qs.Provider,{value:t},n)}function sz(t,e=[],n=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let r=t,s=n==null?void 0:n.errors;if(s!=null){let l=r.findIndex(c=>c.route.id&&(s==null?void 0:s[c.route.id])!==void 0);On(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),r=r.slice(0,Math.min(r.length,l+1))}let a=!1,o=-1;if(n)for(let l=0;l<r.length;l++){let c=r[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(o=l),c.route.id){let{loaderData:u,errors:h}=n,f=c.route.loader&&!u.hasOwnProperty(c.route.id)&&(!h||h[c.route.id]===void 0);if(c.route.lazy||f){a=!0,o>=0?r=r.slice(0,o+1):r=[r[0]];break}}}return r.reduceRight((l,c,u)=>{let h,f=!1,m=null,g=null;n&&(h=s&&c.route.id?s[c.route.id]:void 0,m=c.route.errorElement||nz,a&&(o<0&&u===0?(aL("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,g=null):o===u&&(f=!0,g=c.route.hydrateFallbackElement||null)));let y=e.concat(r.slice(0,u+1)),x=()=>{let v;return h?v=m:f?v=g:c.route.Component?v=D.createElement(c.route.Component,null):c.route.element?v=c.route.element:v=l,D.createElement(rz,{match:c,routeContext:{outlet:l,matches:y,isDataRoute:n!=null},children:v})};return n&&(c.route.ErrorBoundary||c.route.errorElement||u===0)?D.createElement(iz,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:x(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):x()},null)}function sM(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function az(t){let e=D.useContext(Wh);return On(e,sM(t)),e}function oz(t){let e=D.useContext(ry);return On(e,sM(t)),e}function lz(t){let e=D.useContext(qs);return On(e,sM(t)),e}function aM(t){let e=lz(t),n=e.matches[e.matches.length-1];return On(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function cz(){return aM("useRouteId")}function uz(){var i;let t=D.useContext(rM),e=oz("useRouteError"),n=aM("useRouteError");return t!==void 0?t:(i=e.errors)==null?void 0:i[n]}function hz(){let{router:t}=az("useNavigate"),e=aM("useNavigate"),n=D.useRef(!1);return rL(()=>{n.current=!0}),D.useCallback(async(r,s={})=>{Ys(n.current,iL),n.current&&(typeof r=="number"?t.navigate(r):await t.navigate(r,{fromRouteId:e,...s}))},[t,e])}var jC={};function aL(t,e,n){!e&&!jC[t]&&(jC[t]=!0,Ys(!1,n))}D.memo(dz);function dz({routes:t,future:e,state:n}){return sL(t,void 0,n,e)}function fz({to:t,replace:e,state:n,relative:i}){On(Xh(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=D.useContext(Zs);Ys(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=D.useContext(qs),{pathname:a}=wl(),o=Ml(),l=iM(t,nM(s),a,i==="path"),c=JSON.stringify(l);return D.useEffect(()=>{o(JSON.parse(c),{replace:e,state:n,relative:i})},[o,c,i,e,n]),null}function pz(t){return $G(t.context)}function Tr(t){On(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function mz({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:r,static:s=!1}){On(!Xh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),o=D.useMemo(()=>({basename:a,navigator:r,static:s,future:{}}),[a,r,s]);typeof n=="string"&&(n=jh(n));let{pathname:l="/",search:c="",hash:u="",state:h=null,key:f="default"}=n,m=D.useMemo(()=>{let g=oo(l,a);return g==null?null:{location:{pathname:g,search:c,hash:u,state:h,key:f},navigationType:i}},[a,l,c,u,h,f,i]);return Ys(m!=null,`<Router basename="${a}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:D.createElement(Zs.Provider,{value:o},D.createElement(Np.Provider,{children:e,value:m}))}function gz({children:t,location:e}){return ez(NS(t),e)}function NS(t,e=[]){let n=[];return D.Children.forEach(t,(i,r)=>{if(!D.isValidElement(i))return;let s=[...e,r];if(i.type===D.Fragment){n.push.apply(n,NS(i.props.children,s));return}On(i.type===Tr,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),On(!i.props.index||!i.props.children,"An index route cannot have child routes.");let a={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=NS(i.props.children,s)),n.push(a)}),n}var Nv="get",Fv="application/x-www-form-urlencoded";function sy(t){return t!=null&&typeof t.tagName=="string"}function vz(t){return sy(t)&&t.tagName.toLowerCase()==="button"}function yz(t){return sy(t)&&t.tagName.toLowerCase()==="form"}function xz(t){return sy(t)&&t.tagName.toLowerCase()==="input"}function _z(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Sz(t,e){return t.button===0&&(!e||e==="_self")&&!_z(t)}var pg=null;function Az(){if(pg===null)try{new FormData(document.createElement("form"),0),pg=!1}catch{pg=!0}return pg}var wz=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function x1(t){return t!=null&&!wz.has(t)?(Ys(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Fv}"`),null):t}function Mz(t,e){let n,i,r,s,a;if(yz(t)){let o=t.getAttribute("action");i=o?oo(o,e):null,n=t.getAttribute("method")||Nv,r=x1(t.getAttribute("enctype"))||Fv,s=new FormData(t)}else if(vz(t)||xz(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||o.getAttribute("action");if(i=l?oo(l,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||Nv,r=x1(t.getAttribute("formenctype"))||x1(o.getAttribute("enctype"))||Fv,s=new FormData(o,t),!Az()){let{name:c,type:u,value:h}=t;if(u==="image"){let f=c?`${c}.`:"";s.append(`${f}x`,"0"),s.append(`${f}y`,"0")}else c&&s.append(c,h)}}else{if(sy(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Nv,i=null,r=Fv,a=t}return s&&r==="text/plain"&&(a=s,s=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function oM(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ez(t,e,n){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&oo(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function bz(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Tz(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Cz(t,e,n){let i=await Promise.all(t.map(async r=>{let s=e.routes[r.route.id];if(s){let a=await bz(s,n);return a.links?a.links():[]}return[]}));return Iz(i.flat(1).filter(Tz).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function WC(t,e,n,i,r,s){let a=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,o=(l,c)=>{var u;return n[c].pathname!==l.pathname||((u=n[c].route.path)==null?void 0:u.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,c)=>a(l,c)||o(l,c)):s==="data"?e.filter((l,c)=>{var h;let u=i.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(a(l,c)||o(l,c))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((h=n[0])==null?void 0:h.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function Rz(t,e,{includeHydrateFallback:n}={}){return Pz(t.map(i=>{let r=e.routes[i.route.id];if(!r)return[];let s=[r.module];return r.clientActionModule&&(s=s.concat(r.clientActionModule)),r.clientLoaderModule&&(s=s.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(s=s.concat(r.hydrateFallbackModule)),r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function Pz(t){return[...new Set(t)]}function Bz(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function Iz(t,e){let n=new Set;return new Set(e),t.reduce((i,r)=>{let s=JSON.stringify(Bz(r));return n.has(s)||(n.add(s),i.push({key:s,link:r})),i},[])}function oL(){let t=D.useContext(Wh);return oM(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Lz(){let t=D.useContext(ry);return oM(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var lM=D.createContext(void 0);lM.displayName="FrameworkContext";function lL(){let t=D.useContext(lM);return oM(t,"You must render this element inside a <HydratedRouter> element"),t}function Dz(t,e){let n=D.useContext(lM),[i,r]=D.useState(!1),[s,a]=D.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:h}=e,f=D.useRef(null);D.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let y=v=>{v.forEach(_=>{a(_.isIntersecting)})},x=new IntersectionObserver(y,{threshold:.5});return f.current&&x.observe(f.current),()=>{x.disconnect()}}},[t]),D.useEffect(()=>{if(i){let y=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(y)}}},[i]);let m=()=>{r(!0)},g=()=>{r(!1),a(!1)};return n?t!=="intent"?[s,f,{}]:[s,f,{onFocus:Ld(o,m),onBlur:Ld(l,g),onMouseEnter:Ld(c,m),onMouseLeave:Ld(u,g),onTouchStart:Ld(h,m)}]:[!1,f,{}]}function Ld(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function Nz({page:t,...e}){let{router:n}=oL(),i=D.useMemo(()=>q3(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?D.createElement(Uz,{page:t,matches:i,...e}):null}function Fz(t){let{manifest:e,routeModules:n}=lL(),[i,r]=D.useState([]);return D.useEffect(()=>{let s=!1;return Cz(t,e,n).then(a=>{s||r(a)}),()=>{s=!0}},[t,e,n]),i}function Uz({page:t,matches:e,...n}){let i=wl(),{manifest:r,routeModules:s}=lL(),{basename:a}=oL(),{loaderData:o,matches:l}=Lz(),c=D.useMemo(()=>WC(t,e,l,r,i,"data"),[t,e,l,r,i]),u=D.useMemo(()=>WC(t,e,l,r,i,"assets"),[t,e,l,r,i]),h=D.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let g=new Set,y=!1;if(e.forEach(v=>{var S;let _=r.routes[v.route.id];!_||!_.hasLoader||(!c.some(M=>M.route.id===v.route.id)&&v.route.id in o&&((S=s[v.route.id])!=null&&S.shouldRevalidate)||_.hasClientLoader?y=!0:g.add(v.route.id))}),g.size===0)return[];let x=Ez(t,a,"data");return y&&g.size>0&&x.searchParams.set("_routes",e.filter(v=>g.has(v.route.id)).map(v=>v.route.id).join(",")),[x.pathname+x.search]},[a,o,i,r,c,e,t,s]),f=D.useMemo(()=>Rz(u,r),[u,r]),m=Fz(u);return D.createElement(D.Fragment,null,h.map(g=>D.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...n})),f.map(g=>D.createElement("link",{key:g,rel:"modulepreload",href:g,...n})),m.map(({key:g,link:y})=>D.createElement("link",{key:g,...y})))}function kz(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var cL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{cL&&(window.__reactRouterVersion="7.7.1")}catch{}function Oz({basename:t,children:e,window:n}){let i=D.useRef();i.current==null&&(i.current=wG({window:n,v5Compat:!0}));let r=i.current,[s,a]=D.useState({action:r.action,location:r.location}),o=D.useCallback(l=>{D.startTransition(()=>a(l))},[a]);return D.useLayoutEffect(()=>r.listen(o),[r,o]),D.createElement(mz,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:r})}var uL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hL=D.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:r,reloadDocument:s,replace:a,state:o,target:l,to:c,preventScrollReset:u,viewTransition:h,...f},m){let{basename:g}=D.useContext(Zs),y=typeof c=="string"&&uL.test(c),x,v=!1;if(typeof c=="string"&&y&&(x=c,cL))try{let T=new URL(window.location.href),I=c.startsWith("//")?new URL(T.protocol+c):new URL(c),z=oo(I.pathname,g);I.origin===T.origin&&z!=null?c=z+I.search+I.hash:v=!0}catch{Ys(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let _=QG(c,{relative:r}),[S,M,b]=Dz(i,f),C=Vz(c,{replace:a,state:o,target:l,preventScrollReset:u,relative:r,viewTransition:h});function B(T){e&&e(T),T.defaultPrevented||C(T)}let P=D.createElement("a",{...f,...b,href:x||_,onClick:v||s?e:B,ref:kz(m,M),target:l,"data-discover":!y&&n==="render"?"true":void 0});return S&&!y?D.createElement(D.Fragment,null,P,D.createElement(Nz,{page:_})):P});hL.displayName="Link";var Gz=D.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:r=!1,style:s,to:a,viewTransition:o,children:l,...c},u){let h=Fp(a,{relative:c.relative}),f=wl(),m=D.useContext(ry),{navigator:g,basename:y}=D.useContext(Zs),x=m!=null&&Yz(h)&&o===!0,v=g.encodeLocation?g.encodeLocation(h).pathname:h.pathname,_=f.pathname,S=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;n||(_=_.toLowerCase(),S=S?S.toLowerCase():null,v=v.toLowerCase()),S&&y&&(S=oo(S,y)||S);const M=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let b=_===v||!r&&_.startsWith(v)&&_.charAt(M)==="/",C=S!=null&&(S===v||!r&&S.startsWith(v)&&S.charAt(v.length)==="/"),B={isActive:b,isPending:C,isTransitioning:x},P=b?e:void 0,T;typeof i=="function"?T=i(B):T=[i,b?"active":null,C?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let I=typeof s=="function"?s(B):s;return D.createElement(hL,{...c,"aria-current":P,className:T,ref:u,style:I,to:a,viewTransition:o},typeof l=="function"?l(B):l)});Gz.displayName="NavLink";var zz=D.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:r,state:s,method:a=Nv,action:o,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:h,...f},m)=>{let g=Xz(),y=Jz(o,{relative:c}),x=a.toLowerCase()==="get"?"get":"post",v=typeof o=="string"&&uL.test(o),_=S=>{if(l&&l(S),S.defaultPrevented)return;S.preventDefault();let M=S.nativeEvent.submitter,b=(M==null?void 0:M.getAttribute("formmethod"))||a;g(M||S.currentTarget,{fetcherKey:e,method:b,navigate:n,replace:r,state:s,relative:c,preventScrollReset:u,viewTransition:h})};return D.createElement("form",{ref:m,method:x,action:y,onSubmit:i?l:_,...f,"data-discover":!v&&t==="render"?"true":void 0})});zz.displayName="Form";function Hz(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dL(t){let e=D.useContext(Wh);return On(e,Hz(t)),e}function Vz(t,{target:e,replace:n,state:i,preventScrollReset:r,relative:s,viewTransition:a}={}){let o=Ml(),l=wl(),c=Fp(t,{relative:s});return D.useCallback(u=>{if(Sz(u,e)){u.preventDefault();let h=n!==void 0?n:tp(l)===tp(c);o(t,{replace:h,state:i,preventScrollReset:r,relative:s,viewTransition:a})}},[l,o,c,n,i,e,t,r,s,a])}var jz=0,Wz=()=>`__${String(++jz)}__`;function Xz(){let{router:t}=dL("useSubmit"),{basename:e}=D.useContext(Zs),n=cz();return D.useCallback(async(i,r={})=>{let{action:s,method:a,encType:o,formData:l,body:c}=Mz(i,e);if(r.navigate===!1){let u=r.fetcherKey||Wz();await t.fetch(u,n,r.action||s,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||a,formEncType:r.encType||o,flushSync:r.flushSync})}else await t.navigate(r.action||s,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||a,formEncType:r.encType||o,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,e,n])}function Jz(t,{relative:e}={}){let{basename:n}=D.useContext(Zs),i=D.useContext(qs);On(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),s={...Fp(t||".",{relative:e})},a=wl();if(t==null){s.search=a.search;let o=new URLSearchParams(s.search),l=o.getAll("index");if(l.some(u=>u==="")){o.delete("index"),l.filter(h=>h).forEach(h=>o.append("index",h));let u=o.toString();s.search=u?`?${u}`:""}}return(!t||t===".")&&r.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Qa([n,s.pathname])),tp(s)}function Yz(t,{relative:e}={}){let n=D.useContext(nL);On(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=dL("useViewTransitionState"),r=Fp(t,{relative:e});if(!n.isTransitioning)return!1;let s=oo(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=oo(n.nextLocation.pathname,i)||n.nextLocation.pathname;return _0(r.pathname,a)!=null||_0(r.pathname,s)!=null}const fL=D.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),ay=D.createContext({}),oy=D.createContext(null),ly=typeof document<"u",cM=ly?D.useLayoutEffect:D.useEffect,pL=D.createContext({strict:!1}),uM=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Kz="framerAppearId",mL="data-"+uM(Kz);function Qz(t,e,n,i){const{visualElement:r}=D.useContext(ay),s=D.useContext(pL),a=D.useContext(oy),o=D.useContext(fL).reducedMotion,l=D.useRef();i=i||s.renderer,!l.current&&i&&(l.current=i(t,{visualState:e,parent:r,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:o}));const c=l.current;D.useInsertionEffect(()=>{c&&c.update(n,a)});const u=D.useRef(!!(n[mL]&&!window.HandoffComplete));return cM(()=>{c&&(c.render(),u.current&&c.animationState&&c.animationState.animateChanges())}),D.useEffect(()=>{c&&(c.updateFeatures(),!u.current&&c.animationState&&c.animationState.animateChanges(),u.current&&(u.current=!1,window.HandoffComplete=!0))}),c}function nh(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Zz(t,e,n){return D.useCallback(i=>{i&&t.mount&&t.mount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):nh(n)&&(n.current=i))},[e])}function np(t){return typeof t=="string"||Array.isArray(t)}function cy(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const hM=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],dM=["initial",...hM];function uy(t){return cy(t.animate)||dM.some(e=>np(t[e]))}function gL(t){return!!(uy(t)||t.variants)}function qz(t,e){if(uy(t)){const{initial:n,animate:i}=t;return{initial:n===!1||np(n)?n:void 0,animate:np(i)?i:void 0}}return t.inherit!==!1?e:{}}function $z(t){const{initial:e,animate:n}=qz(t,D.useContext(ay));return D.useMemo(()=>({initial:e,animate:n}),[XC(e),XC(n)])}function XC(t){return Array.isArray(t)?t.join(" "):t}const JC={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ip={};for(const t in JC)ip[t]={isEnabled:e=>JC[t].some(n=>!!e[n])};function e5(t){for(const e in t)ip[e]={...ip[e],...t[e]}}const fM=D.createContext({}),vL=D.createContext({}),t5=Symbol.for("motionComponentSymbol");function n5({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){t&&e5(t);function s(o,l){let c;const u={...D.useContext(fL),...o,layoutId:i5(o)},{isStatic:h}=u,f=$z(o),m=i(o,h);if(!h&&ly){f.visualElement=Qz(r,m,u,e);const g=D.useContext(vL),y=D.useContext(pL).strict;f.visualElement&&(c=f.visualElement.loadFeatures(u,y,t,g))}return D.createElement(ay.Provider,{value:f},c&&f.visualElement?D.createElement(c,{visualElement:f.visualElement,...u}):null,n(r,o,Zz(m,f.visualElement,l),m,h,f.visualElement))}const a=D.forwardRef(s);return a[t5]=r,a}function i5({layoutId:t}){const e=D.useContext(fM).id;return e&&t!==void 0?e+"-"+t:t}function r5(t){function e(i,r={}){return n5(t(i,r))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(i,r)=>(n.has(r)||n.set(r,e(r)),n.get(r))})}const s5=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function pM(t){return typeof t!="string"||t.includes("-")?!1:!!(s5.indexOf(t)>-1||/[A-Z]/.test(t))}const S0={};function a5(t){Object.assign(S0,t)}const Up=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Yc=new Set(Up);function yL(t,{layout:e,layoutId:n}){return Yc.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!S0[t]||t==="opacity")}const Fr=t=>!!(t&&t.getVelocity),o5={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},l5=Up.length;function c5(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},i,r){let s="";for(let a=0;a<l5;a++){const o=Up[a];if(t[o]!==void 0){const l=o5[o]||o;s+=`${l}(${t[o]}) `}}return e&&!t.z&&(s+="translateZ(0)"),s=s.trim(),r?s=r(t,i?"":s):n&&i&&(s="none"),s}const xL=t=>e=>typeof e=="string"&&e.startsWith(t),_L=xL("--"),FS=xL("var(--"),u5=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,h5=(t,e)=>e&&typeof t=="number"?e.transform(t):t,ul=(t,e,n)=>Math.min(Math.max(n,t),e),Kc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Af={...Kc,transform:t=>ul(0,1,t)},mg={...Kc,default:1},wf=t=>Math.round(t*1e5)/1e5,hy=/(-)?([\d]*\.?[\d])+/g,SL=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,d5=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function kp(t){return typeof t=="string"}const Op=t=>({test:e=>kp(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Fo=Op("deg"),va=Op("%"),Dt=Op("px"),f5=Op("vh"),p5=Op("vw"),YC={...va,parse:t=>va.parse(t)/100,transform:t=>va.transform(t*100)},KC={...Kc,transform:Math.round},AL={borderWidth:Dt,borderTopWidth:Dt,borderRightWidth:Dt,borderBottomWidth:Dt,borderLeftWidth:Dt,borderRadius:Dt,radius:Dt,borderTopLeftRadius:Dt,borderTopRightRadius:Dt,borderBottomRightRadius:Dt,borderBottomLeftRadius:Dt,width:Dt,maxWidth:Dt,height:Dt,maxHeight:Dt,size:Dt,top:Dt,right:Dt,bottom:Dt,left:Dt,padding:Dt,paddingTop:Dt,paddingRight:Dt,paddingBottom:Dt,paddingLeft:Dt,margin:Dt,marginTop:Dt,marginRight:Dt,marginBottom:Dt,marginLeft:Dt,rotate:Fo,rotateX:Fo,rotateY:Fo,rotateZ:Fo,scale:mg,scaleX:mg,scaleY:mg,scaleZ:mg,skew:Fo,skewX:Fo,skewY:Fo,distance:Dt,translateX:Dt,translateY:Dt,translateZ:Dt,x:Dt,y:Dt,z:Dt,perspective:Dt,transformPerspective:Dt,opacity:Af,originX:YC,originY:YC,originZ:Dt,zIndex:KC,fillOpacity:Af,strokeOpacity:Af,numOctaves:KC};function mM(t,e,n,i){const{style:r,vars:s,transform:a,transformOrigin:o}=t;let l=!1,c=!1,u=!0;for(const h in e){const f=e[h];if(_L(h)){s[h]=f;continue}const m=AL[h],g=h5(f,m);if(Yc.has(h)){if(l=!0,a[h]=g,!u)continue;f!==(m.default||0)&&(u=!1)}else h.startsWith("origin")?(c=!0,o[h]=g):r[h]=g}if(e.transform||(l||i?r.transform=c5(t.transform,n,u,i):r.transform&&(r.transform="none")),c){const{originX:h="50%",originY:f="50%",originZ:m=0}=o;r.transformOrigin=`${h} ${f} ${m}`}}const gM=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function wL(t,e,n){for(const i in e)!Fr(e[i])&&!yL(i,n)&&(t[i]=e[i])}function m5({transformTemplate:t},e,n){return D.useMemo(()=>{const i=gM();return mM(i,e,{enableHardwareAcceleration:!n},t),Object.assign({},i.vars,i.style)},[e])}function g5(t,e,n){const i=t.style||{},r={};return wL(r,i,t),Object.assign(r,m5(t,e,n)),t.transformValues?t.transformValues(r):r}function v5(t,e,n){const i={},r=g5(t,e,n);return t.drag&&t.dragListener!==!1&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(i.tabIndex=0),i.style=r,i}const y5=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function A0(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||y5.has(t)}let ML=t=>!A0(t);function x5(t){t&&(ML=e=>e.startsWith("on")?!A0(e):t(e))}try{x5(require("@emotion/is-prop-valid").default)}catch{}function _5(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(ML(r)||n===!0&&A0(r)||!e&&!A0(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function QC(t,e,n){return typeof t=="string"?t:Dt.transform(e+n*t)}function S5(t,e,n){const i=QC(e,t.x,t.width),r=QC(n,t.y,t.height);return`${i} ${r}`}const A5={offset:"stroke-dashoffset",array:"stroke-dasharray"},w5={offset:"strokeDashoffset",array:"strokeDasharray"};function M5(t,e,n=1,i=0,r=!0){t.pathLength=1;const s=r?A5:w5;t[s.offset]=Dt.transform(-i);const a=Dt.transform(e),o=Dt.transform(n);t[s.array]=`${a} ${o}`}function vM(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:s,pathLength:a,pathSpacing:o=1,pathOffset:l=0,...c},u,h,f){if(mM(t,c,u,f),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:g,dimensions:y}=t;m.transform&&(y&&(g.transform=m.transform),delete m.transform),y&&(r!==void 0||s!==void 0||g.transform)&&(g.transformOrigin=S5(y,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(m.x=e),n!==void 0&&(m.y=n),i!==void 0&&(m.scale=i),a!==void 0&&M5(m,a,o,l,!1)}const EL=()=>({...gM(),attrs:{}}),yM=t=>typeof t=="string"&&t.toLowerCase()==="svg";function E5(t,e,n,i){const r=D.useMemo(()=>{const s=EL();return vM(s,e,{enableHardwareAcceleration:!1},yM(i),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};wL(s,t.style,t),r.style={...s,...r.style}}return r}function b5(t=!1){return(n,i,r,{latestValues:s},a)=>{const l=(pM(n)?E5:v5)(i,s,a,n),u={..._5(i,typeof n=="string",t),...l,ref:r},{children:h}=i,f=D.useMemo(()=>Fr(h)?h.get():h,[h]);return D.createElement(n,{...u,children:f})}}function bL(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const s in n)t.style.setProperty(s,n[s])}const TL=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function CL(t,e,n,i){bL(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(TL.has(r)?r:uM(r),e.attrs[r])}function xM(t,e){const{style:n}=t,i={};for(const r in n)(Fr(n[r])||e.style&&Fr(e.style[r])||yL(r,t))&&(i[r]=n[r]);return i}function RL(t,e){const n=xM(t,e);for(const i in t)if(Fr(t[i])||Fr(e[i])){const r=Up.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[r]=t[i]}return n}function _M(t,e,n,i={},r={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),e}function PL(t){const e=D.useRef(null);return e.current===null&&(e.current=t()),e.current}const w0=t=>Array.isArray(t),T5=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),C5=t=>w0(t)?t[t.length-1]||0:t;function Uv(t){const e=Fr(t)?t.get():t;return T5(e)?e.toValue():e}function R5({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},i,r,s){const a={latestValues:P5(i,r,s,t),renderState:e()};return n&&(a.mount=o=>n(i,o,a)),a}const BL=t=>(e,n)=>{const i=D.useContext(ay),r=D.useContext(oy),s=()=>R5(t,e,i,r);return n?s():PL(s)};function P5(t,e,n,i){const r={},s=i(t,{});for(const f in s)r[f]=Uv(s[f]);let{initial:a,animate:o}=t;const l=uy(t),c=gL(t);e&&c&&!l&&t.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let u=n?n.initial===!1:!1;u=u||a===!1;const h=u?o:a;return h&&typeof h!="boolean"&&!cy(h)&&(Array.isArray(h)?h:[h]).forEach(m=>{const g=_M(t,m);if(!g)return;const{transitionEnd:y,transition:x,...v}=g;for(const _ in v){let S=v[_];if(Array.isArray(S)){const M=u?S.length-1:0;S=S[M]}S!==null&&(r[_]=S)}for(const _ in y)r[_]=y[_]}),r}const ci=t=>t;class ZC{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function B5(t){let e=new ZC,n=new ZC,i=0,r=!1,s=!1;const a=new WeakSet,o={schedule:(l,c=!1,u=!1)=>{const h=u&&r,f=h?e:n;return c&&a.add(l),f.add(l)&&h&&r&&(i=e.order.length),l},cancel:l=>{n.remove(l),a.delete(l)},process:l=>{if(r){s=!0;return}if(r=!0,[e,n]=[n,e],n.clear(),i=e.order.length,i)for(let c=0;c<i;c++){const u=e.order[c];u(l),a.has(u)&&(o.schedule(u),t())}r=!1,s&&(s=!1,o.process(l))}};return o}const gg=["prepare","read","update","preRender","render","postRender"],I5=40;function L5(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=gg.reduce((h,f)=>(h[f]=B5(()=>n=!0),h),{}),a=h=>s[h].process(r),o=()=>{const h=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(h-r.timestamp,I5),1),r.timestamp=h,r.isProcessing=!0,gg.forEach(a),r.isProcessing=!1,n&&e&&(i=!1,t(o))},l=()=>{n=!0,i=!0,r.isProcessing||t(o)};return{schedule:gg.reduce((h,f)=>{const m=s[f];return h[f]=(g,y=!1,x=!1)=>(n||l(),m.schedule(g,y,x)),h},{}),cancel:h=>gg.forEach(f=>s[f].cancel(h)),state:r,steps:s}}const{schedule:In,cancel:lo,state:tr,steps:_1}=L5(typeof requestAnimationFrame<"u"?requestAnimationFrame:ci,!0),D5={useVisualState:BL({scrapeMotionValuesFromProps:RL,createRenderState:EL,onMount:(t,e,{renderState:n,latestValues:i})=>{In.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),In.render(()=>{vM(n,i,{enableHardwareAcceleration:!1},yM(e.tagName),t.transformTemplate),CL(e,n)})}})},N5={useVisualState:BL({scrapeMotionValuesFromProps:xM,createRenderState:gM})};function F5(t,{forwardMotionProps:e=!1},n,i){return{...pM(t)?D5:N5,preloadedFeatures:n,useRender:b5(e),createVisualElement:i,Component:t}}function Ja(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}const IL=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function dy(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const U5=t=>e=>IL(e)&&t(e,dy(e));function Za(t,e,n,i){return Ja(t,e,U5(n),i)}const k5=(t,e)=>n=>e(t(n)),nl=(...t)=>t.reduce(k5);function LL(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const qC=LL("dragHorizontal"),$C=LL("dragVertical");function DL(t){let e=!1;if(t==="y")e=$C();else if(t==="x")e=qC();else{const n=qC(),i=$C();n&&i?e=()=>{n(),i()}:(n&&n(),i&&i())}return e}function NL(){const t=DL(!0);return t?(t(),!1):!0}class El{constructor(e){this.isMounted=!1,this.node=e}update(){}}function e2(t,e){const n="pointer"+(e?"enter":"leave"),i="onHover"+(e?"Start":"End"),r=(s,a)=>{if(s.pointerType==="touch"||NL())return;const o=t.getProps();t.animationState&&o.whileHover&&t.animationState.setActive("whileHover",e),o[i]&&In.update(()=>o[i](s,a))};return Za(t.current,n,r,{passive:!t.getProps()[i]})}class O5 extends El{mount(){this.unmount=nl(e2(this.node,!0),e2(this.node,!1))}unmount(){}}class G5 extends El{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=nl(Ja(this.node.current,"focus",()=>this.onFocus()),Ja(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const FL=(t,e)=>e?t===e?!0:FL(t,e.parentElement):!1;function S1(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,dy(n))}class z5 extends El{constructor(){super(...arguments),this.removeStartListeners=ci,this.removeEndListeners=ci,this.removeAccessibleListeners=ci,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),s=Za(window,"pointerup",(o,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:u,globalTapTarget:h}=this.node.getProps();In.update(()=>{!h&&!FL(this.node.current,o.target)?u&&u(o,l):c&&c(o,l)})},{passive:!(i.onTap||i.onPointerUp)}),a=Za(window,"pointercancel",(o,l)=>this.cancelPress(o,l),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=nl(s,a),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const a=o=>{o.key!=="Enter"||!this.checkPressEnd()||S1("up",(l,c)=>{const{onTap:u}=this.node.getProps();u&&In.update(()=>u(l,c))})};this.removeEndListeners(),this.removeEndListeners=Ja(this.node.current,"keyup",a),S1("down",(o,l)=>{this.startPress(o,l)})},n=Ja(this.node.current,"keydown",e),i=()=>{this.isPressing&&S1("cancel",(s,a)=>this.cancelPress(s,a))},r=Ja(this.node.current,"blur",i);this.removeAccessibleListeners=nl(n,r)}}startPress(e,n){this.isPressing=!0;const{onTapStart:i,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&In.update(()=>i(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!NL()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&In.update(()=>i(e,n))}mount(){const e=this.node.getProps(),n=Za(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=Ja(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=nl(n,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const US=new WeakMap,A1=new WeakMap,H5=t=>{const e=US.get(t.target);e&&e(t)},V5=t=>{t.forEach(H5)};function j5({root:t,...e}){const n=t||document;A1.has(n)||A1.set(n,{});const i=A1.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(V5,{root:t,...e})),i[r]}function W5(t,e,n){const i=j5(e);return US.set(t,n),i.observe(t),()=>{US.delete(t),i.unobserve(t)}}const X5={some:0,all:1};class J5 extends El{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:s}=e,a={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:X5[r]},o=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),f=c?u:h;f&&f(l)};return W5(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Y5(e,n))&&this.startObserver()}unmount(){}}function Y5({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const K5={inView:{Feature:J5},tap:{Feature:z5},focus:{Feature:G5},hover:{Feature:O5}};function UL(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function Q5(t){const e={};return t.values.forEach((n,i)=>e[i]=n.get()),e}function Z5(t){const e={};return t.values.forEach((n,i)=>e[i]=n.getVelocity()),e}function fy(t,e,n){const i=t.getProps();return _M(i,e,n!==void 0?n:i.custom,Q5(t),Z5(t))}let SM=ci;const Pc=t=>t*1e3,qa=t=>t/1e3,q5={current:!1},kL=t=>Array.isArray(t)&&typeof t[0]=="number";function OL(t){return!!(!t||typeof t=="string"&&GL[t]||kL(t)||Array.isArray(t)&&t.every(OL))}const lf=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,GL={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:lf([0,.65,.55,1]),circOut:lf([.55,0,1,.45]),backIn:lf([.31,.01,.66,-.59]),backOut:lf([.33,1.53,.69,.99])};function zL(t){if(t)return kL(t)?lf(t):Array.isArray(t)?t.map(zL):GL[t]}function $5(t,e,n,{delay:i=0,duration:r,repeat:s=0,repeatType:a="loop",ease:o,times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=zL(o);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:i,duration:r,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}function eH(t,{repeat:e,repeatType:n="loop"}){const i=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[i]}const HL=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,tH=1e-7,nH=12;function iH(t,e,n,i,r){let s,a,o=0;do a=e+(n-e)/2,s=HL(a,i,r)-t,s>0?n=a:e=a;while(Math.abs(s)>tH&&++o<nH);return a}function Gp(t,e,n,i){if(t===e&&n===i)return ci;const r=s=>iH(s,0,1,t,n);return s=>s===0||s===1?s:HL(r(s),e,i)}const rH=Gp(.42,0,1,1),sH=Gp(0,0,.58,1),VL=Gp(.42,0,.58,1),aH=t=>Array.isArray(t)&&typeof t[0]!="number",jL=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,WL=t=>e=>1-t(1-e),AM=t=>1-Math.sin(Math.acos(t)),XL=WL(AM),oH=jL(AM),JL=Gp(.33,1.53,.69,.99),wM=WL(JL),lH=jL(wM),cH=t=>(t*=2)<1?.5*wM(t):.5*(2-Math.pow(2,-10*(t-1))),uH={linear:ci,easeIn:rH,easeInOut:VL,easeOut:sH,circIn:AM,circInOut:oH,circOut:XL,backIn:wM,backInOut:lH,backOut:JL,anticipate:cH},t2=t=>{if(Array.isArray(t)){SM(t.length===4);const[e,n,i,r]=t;return Gp(e,n,i,r)}else if(typeof t=="string")return uH[t];return t},MM=(t,e)=>n=>!!(kp(n)&&d5.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),YL=(t,e,n)=>i=>{if(!kp(i))return i;const[r,s,a,o]=i.match(hy);return{[t]:parseFloat(r),[e]:parseFloat(s),[n]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},hH=t=>ul(0,255,t),w1={...Kc,transform:t=>Math.round(hH(t))},_c={test:MM("rgb","red"),parse:YL("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+w1.transform(t)+", "+w1.transform(e)+", "+w1.transform(n)+", "+wf(Af.transform(i))+")"};function dH(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const kS={test:MM("#"),parse:dH,transform:_c.transform},ih={test:MM("hsl","hue"),parse:YL("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+va.transform(wf(e))+", "+va.transform(wf(n))+", "+wf(Af.transform(i))+")"},pr={test:t=>_c.test(t)||kS.test(t)||ih.test(t),parse:t=>_c.test(t)?_c.parse(t):ih.test(t)?ih.parse(t):kS.parse(t),transform:t=>kp(t)?t:t.hasOwnProperty("red")?_c.transform(t):ih.transform(t)},jn=(t,e,n)=>-n*t+n*e+t;function M1(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function fH({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,s=0,a=0;if(!e)r=s=a=n;else{const o=n<.5?n*(1+e):n+e-n*e,l=2*n-o;r=M1(l,o,t+1/3),s=M1(l,o,t),a=M1(l,o,t-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:i}}const E1=(t,e,n)=>{const i=t*t;return Math.sqrt(Math.max(0,n*(e*e-i)+i))},pH=[kS,_c,ih],mH=t=>pH.find(e=>e.test(t));function n2(t){const e=mH(t);let n=e.parse(t);return e===ih&&(n=fH(n)),n}const KL=(t,e)=>{const n=n2(t),i=n2(e),r={...n};return s=>(r.red=E1(n.red,i.red,s),r.green=E1(n.green,i.green,s),r.blue=E1(n.blue,i.blue,s),r.alpha=jn(n.alpha,i.alpha,s),_c.transform(r))};function gH(t){var e,n;return isNaN(t)&&kp(t)&&(((e=t.match(hy))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(SL))===null||n===void 0?void 0:n.length)||0)>0}const QL={regex:u5,countKey:"Vars",token:"${v}",parse:ci},ZL={regex:SL,countKey:"Colors",token:"${c}",parse:pr.parse},qL={regex:hy,countKey:"Numbers",token:"${n}",parse:Kc.parse};function b1(t,{regex:e,countKey:n,token:i,parse:r}){const s=t.tokenised.match(e);s&&(t["num"+n]=s.length,t.tokenised=t.tokenised.replace(e,i),t.values.push(...s.map(r)))}function M0(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&b1(n,QL),b1(n,ZL),b1(n,qL),n}function $L(t){return M0(t).values}function eD(t){const{values:e,numColors:n,numVars:i,tokenised:r}=M0(t),s=e.length;return a=>{let o=r;for(let l=0;l<s;l++)l<i?o=o.replace(QL.token,a[l]):l<i+n?o=o.replace(ZL.token,pr.transform(a[l])):o=o.replace(qL.token,wf(a[l]));return o}}const vH=t=>typeof t=="number"?0:t;function yH(t){const e=$L(t);return eD(t)(e.map(vH))}const hl={test:gH,parse:$L,createTransformer:eD,getAnimatableNone:yH},tD=(t,e)=>n=>`${n>0?e:t}`;function nD(t,e){return typeof t=="number"?n=>jn(t,e,n):pr.test(t)?KL(t,e):t.startsWith("var(")?tD(t,e):rD(t,e)}const iD=(t,e)=>{const n=[...t],i=n.length,r=t.map((s,a)=>nD(s,e[a]));return s=>{for(let a=0;a<i;a++)n[a]=r[a](s);return n}},xH=(t,e)=>{const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=nD(t[r],e[r]));return r=>{for(const s in i)n[s]=i[s](r);return n}},rD=(t,e)=>{const n=hl.createTransformer(e),i=M0(t),r=M0(e);return i.numVars===r.numVars&&i.numColors===r.numColors&&i.numNumbers>=r.numNumbers?nl(iD(i.values,r.values),n):tD(t,e)},rp=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},i2=(t,e)=>n=>jn(t,e,n);function _H(t){return typeof t=="number"?i2:typeof t=="string"?pr.test(t)?KL:rD:Array.isArray(t)?iD:typeof t=="object"?xH:i2}function SH(t,e,n){const i=[],r=n||_H(t[0]),s=t.length-1;for(let a=0;a<s;a++){let o=r(t[a],t[a+1]);if(e){const l=Array.isArray(e)?e[a]||ci:e;o=nl(l,o)}i.push(o)}return i}function sD(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const s=t.length;if(SM(s===e.length),s===1)return()=>e[0];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=SH(e,i,r),o=a.length,l=c=>{let u=0;if(o>1)for(;u<t.length-2&&!(c<t[u+1]);u++);const h=rp(t[u],t[u+1],c);return a[u](h)};return n?c=>l(ul(t[0],t[s-1],c)):l}function AH(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=rp(0,e,i);t.push(jn(n,1,r))}}function wH(t){const e=[0];return AH(e,t.length-1),e}function MH(t,e){return t.map(n=>n*e)}function EH(t,e){return t.map(()=>e||VL).splice(0,t.length-1)}function E0({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=aH(i)?i.map(t2):t2(i),s={done:!1,value:e[0]},a=MH(n&&n.length===e.length?n:wH(e),t),o=sD(a,e,{ease:Array.isArray(r)?r:EH(e,r)});return{calculatedDuration:t,next:l=>(s.value=o(l),s.done=l>=t,s)}}function aD(t,e){return e?t*(1e3/e):0}const bH=5;function oD(t,e,n){const i=Math.max(e-bH,0);return aD(n-t(i),e-i)}const T1=.001,TH=.01,CH=10,RH=.05,PH=1;function BH({duration:t=800,bounce:e=.25,velocity:n=0,mass:i=1}){let r,s,a=1-e;a=ul(RH,PH,a),t=ul(TH,CH,qa(t)),a<1?(r=c=>{const u=c*a,h=u*t,f=u-n,m=OS(c,a),g=Math.exp(-h);return T1-f/m*g},s=c=>{const h=c*a*t,f=h*n+n,m=Math.pow(a,2)*Math.pow(c,2)*t,g=Math.exp(-h),y=OS(Math.pow(c,2),a);return(-r(c)+T1>0?-1:1)*((f-m)*g)/y}):(r=c=>{const u=Math.exp(-c*t),h=(c-n)*t+1;return-T1+u*h},s=c=>{const u=Math.exp(-c*t),h=(n-c)*(t*t);return u*h});const o=5/t,l=LH(r,s,o);if(t=Pc(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(l,2)*i;return{stiffness:c,damping:a*2*Math.sqrt(i*c),duration:t}}}const IH=12;function LH(t,e,n){let i=n;for(let r=1;r<IH;r++)i=i-t(i)/e(i);return i}function OS(t,e){return t*Math.sqrt(1-e*e)}const DH=["duration","bounce"],NH=["stiffness","damping","mass"];function r2(t,e){return e.some(n=>t[n]!==void 0)}function FH(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!r2(t,NH)&&r2(t,DH)){const n=BH(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function lD({keyframes:t,restDelta:e,restSpeed:n,...i}){const r=t[0],s=t[t.length-1],a={done:!1,value:r},{stiffness:o,damping:l,mass:c,duration:u,velocity:h,isResolvedFromDuration:f}=FH({...i,velocity:-qa(i.velocity||0)}),m=h||0,g=l/(2*Math.sqrt(o*c)),y=s-r,x=qa(Math.sqrt(o/c)),v=Math.abs(y)<5;n||(n=v?.01:2),e||(e=v?.005:.5);let _;if(g<1){const S=OS(x,g);_=M=>{const b=Math.exp(-g*x*M);return s-b*((m+g*x*y)/S*Math.sin(S*M)+y*Math.cos(S*M))}}else if(g===1)_=S=>s-Math.exp(-x*S)*(y+(m+x*y)*S);else{const S=x*Math.sqrt(g*g-1);_=M=>{const b=Math.exp(-g*x*M),C=Math.min(S*M,300);return s-b*((m+g*x*y)*Math.sinh(C)+S*y*Math.cosh(C))/S}}return{calculatedDuration:f&&u||null,next:S=>{const M=_(S);if(f)a.done=S>=u;else{let b=m;S!==0&&(g<1?b=oD(_,S,M):b=0);const C=Math.abs(b)<=n,B=Math.abs(s-M)<=e;a.done=C&&B}return a.value=a.done?s:M,a}}}function s2({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:c=.5,restSpeed:u}){const h=t[0],f={done:!1,value:h},m=P=>o!==void 0&&P<o||l!==void 0&&P>l,g=P=>o===void 0?l:l===void 0||Math.abs(o-P)<Math.abs(l-P)?o:l;let y=n*e;const x=h+y,v=a===void 0?x:a(x);v!==x&&(y=v-h);const _=P=>-y*Math.exp(-P/i),S=P=>v+_(P),M=P=>{const T=_(P),I=S(P);f.done=Math.abs(T)<=c,f.value=f.done?v:I};let b,C;const B=P=>{m(f.value)&&(b=P,C=lD({keyframes:[f.value,g(f.value)],velocity:oD(S,P,f.value),damping:r,stiffness:s,restDelta:c,restSpeed:u}))};return B(0),{calculatedDuration:null,next:P=>{let T=!1;return!C&&b===void 0&&(T=!0,M(P),B(P)),b!==void 0&&P>b?C.next(P-b):(!T&&M(P),f)}}}const UH=t=>{const e=({timestamp:n})=>t(n);return{start:()=>In.update(e,!0),stop:()=>lo(e),now:()=>tr.isProcessing?tr.timestamp:performance.now()}},a2=2e4;function o2(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<a2;)e+=n,i=t.next(e);return e>=a2?1/0:e}const kH={decay:s2,inertia:s2,tween:E0,keyframes:E0,spring:lD};function b0({autoplay:t=!0,delay:e=0,driver:n=UH,keyframes:i,type:r="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:o="loop",onPlay:l,onStop:c,onComplete:u,onUpdate:h,...f}){let m=1,g=!1,y,x;const v=()=>{x=new Promise(O=>{y=O})};v();let _;const S=kH[r]||E0;let M;S!==E0&&typeof i[0]!="number"&&(M=sD([0,100],i,{clamp:!1}),i=[0,100]);const b=S({...f,keyframes:i});let C;o==="mirror"&&(C=S({...f,keyframes:[...i].reverse(),velocity:-(f.velocity||0)}));let B="idle",P=null,T=null,I=null;b.calculatedDuration===null&&s&&(b.calculatedDuration=o2(b));const{calculatedDuration:z}=b;let G=1/0,Q=1/0;z!==null&&(G=z+a,Q=G*(s+1)-a);let U=0;const ee=O=>{if(T===null)return;m>0&&(T=Math.min(T,O)),m<0&&(T=Math.min(O-Q/m,T)),P!==null?U=P:U=Math.round(O-T)*m;const j=U-e*(m>=0?1:-1),W=m>=0?j<0:j>Q;U=Math.max(j,0),B==="finished"&&P===null&&(U=Q);let ne=U,ae=b;if(s){const He=Math.min(U,Q)/G;let Fe=Math.floor(He),ge=He%1;!ge&&He>=1&&(ge=1),ge===1&&Fe--,Fe=Math.min(Fe,s+1),!!(Fe%2)&&(o==="reverse"?(ge=1-ge,a&&(ge-=a/G)):o==="mirror"&&(ae=C)),ne=ul(0,1,ge)*G}const de=W?{done:!1,value:i[0]}:ae.next(ne);M&&(de.value=M(de.value));let{done:fe}=de;!W&&z!==null&&(fe=m>=0?U>=Q:U<=0);const Se=P===null&&(B==="finished"||B==="running"&&fe);return h&&h(de.value),Se&&Z(),de},$=()=>{_&&_.stop(),_=void 0},oe=()=>{B="idle",$(),y(),v(),T=I=null},Z=()=>{B="finished",u&&u(),$(),y()},J=()=>{if(g)return;_||(_=n(ee));const O=_.now();l&&l(),P!==null?T=O-P:(!T||B==="finished")&&(T=O),B==="finished"&&v(),I=T,P=null,B="running",_.start()};t&&J();const H={then(O,j){return x.then(O,j)},get time(){return qa(U)},set time(O){O=Pc(O),U=O,P!==null||!_||m===0?P=O:T=_.now()-O/m},get duration(){const O=b.calculatedDuration===null?o2(b):b.calculatedDuration;return qa(O)},get speed(){return m},set speed(O){O===m||!_||(m=O,H.time=qa(U))},get state(){return B},play:J,pause:()=>{B="paused",P=U},stop:()=>{g=!0,B!=="idle"&&(B="idle",c&&c(),oe())},cancel:()=>{I!==null&&ee(I),oe()},complete:()=>{B="finished"},sample:O=>(T=0,ee(O))};return H}function OH(t){let e;return()=>(e===void 0&&(e=t()),e)}const GH=OH(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),zH=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),vg=10,HH=2e4,VH=(t,e)=>e.type==="spring"||t==="backgroundColor"||!OL(e.ease);function jH(t,e,{onUpdate:n,onComplete:i,...r}){if(!(GH()&&zH.has(e)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let a=!1,o,l,c=!1;const u=()=>{l=new Promise(S=>{o=S})};u();let{keyframes:h,duration:f=300,ease:m,times:g}=r;if(VH(e,r)){const S=b0({...r,repeat:0,delay:0});let M={done:!1,value:h[0]};const b=[];let C=0;for(;!M.done&&C<HH;)M=S.sample(C),b.push(M.value),C+=vg;g=void 0,h=b,f=C-vg,m="linear"}const y=$5(t.owner.current,e,h,{...r,duration:f,ease:m,times:g}),x=()=>{c=!1,y.cancel()},v=()=>{c=!0,In.update(x),o(),u()};return y.onfinish=()=>{c||(t.set(eH(h,r)),i&&i(),v())},{then(S,M){return l.then(S,M)},attachTimeline(S){return y.timeline=S,y.onfinish=null,ci},get time(){return qa(y.currentTime||0)},set time(S){y.currentTime=Pc(S)},get speed(){return y.playbackRate},set speed(S){y.playbackRate=S},get duration(){return qa(f)},play:()=>{a||(y.play(),lo(x))},pause:()=>y.pause(),stop:()=>{if(a=!0,y.playState==="idle")return;const{currentTime:S}=y;if(S){const M=b0({...r,autoplay:!1});t.setWithVelocity(M.sample(S-vg).value,M.sample(S).value,vg)}v()},complete:()=>{c||y.finish()},cancel:v}}function WH({keyframes:t,delay:e,onUpdate:n,onComplete:i}){const r=()=>(n&&n(t[t.length-1]),i&&i(),{time:0,speed:1,duration:0,play:ci,pause:ci,stop:ci,then:s=>(s(),Promise.resolve()),cancel:ci,complete:ci});return e?b0({keyframes:[0,1],duration:0,delay:e,onComplete:r}):r()}const XH={type:"spring",stiffness:500,damping:25,restSpeed:10},JH=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),YH={type:"keyframes",duration:.8},KH={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},QH=(t,{keyframes:e})=>e.length>2?YH:Yc.has(t)?t.startsWith("scale")?JH(e[1]):XH:KH,GS=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(hl.test(e)||e==="0")&&!e.startsWith("url(")),ZH=new Set(["brightness","contrast","saturate","opacity"]);function qH(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(hy)||[];if(!i)return t;const r=n.replace(i,"");let s=ZH.has(e)?1:0;return i!==n&&(s*=100),e+"("+s+r+")"}const $H=/([a-z-]*)\(.*?\)/g,zS={...hl,getAnimatableNone:t=>{const e=t.match($H);return e?e.map(qH).join(" "):t}},e6={...AL,color:pr,backgroundColor:pr,outlineColor:pr,fill:pr,stroke:pr,borderColor:pr,borderTopColor:pr,borderRightColor:pr,borderBottomColor:pr,borderLeftColor:pr,filter:zS,WebkitFilter:zS},EM=t=>e6[t];function cD(t,e){let n=EM(t);return n!==zS&&(n=hl),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const uD=t=>/^0[^.\s]+$/.test(t);function t6(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||uD(t)}function n6(t,e,n,i){const r=GS(e,n);let s;Array.isArray(n)?s=[...n]:s=[null,n];const a=i.from!==void 0?i.from:t.get();let o;const l=[];for(let c=0;c<s.length;c++)s[c]===null&&(s[c]=c===0?a:s[c-1]),t6(s[c])&&l.push(c),typeof s[c]=="string"&&s[c]!=="none"&&s[c]!=="0"&&(o=s[c]);if(r&&l.length&&o)for(let c=0;c<l.length;c++){const u=l[c];s[u]=cD(e,o)}return s}function i6({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:c,...u}){return!!Object.keys(u).length}function bM(t,e){return t[e]||t.default||t}const r6={skipAnimations:!1},TM=(t,e,n,i={})=>r=>{const s=bM(i,t)||{},a=s.delay||i.delay||0;let{elapsed:o=0}=i;o=o-Pc(a);const l=n6(e,t,n,s),c=l[0],u=l[l.length-1],h=GS(t,c),f=GS(t,u);let m={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-o,onUpdate:g=>{e.set(g),s.onUpdate&&s.onUpdate(g)},onComplete:()=>{r(),s.onComplete&&s.onComplete()}};if(i6(s)||(m={...m,...QH(t,m)}),m.duration&&(m.duration=Pc(m.duration)),m.repeatDelay&&(m.repeatDelay=Pc(m.repeatDelay)),!h||!f||q5.current||s.type===!1||r6.skipAnimations)return WH(m);if(!i.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const g=jH(e,t,m);if(g)return g}return b0(m)};function T0(t){return!!(Fr(t)&&t.add)}const hD=t=>/^\-?\d*\.?\d+$/.test(t);function CM(t,e){t.indexOf(e)===-1&&t.push(e)}function RM(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class PM{constructor(){this.subscriptions=[]}add(e){return CM(this.subscriptions,e),()=>RM(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let s=0;s<r;s++){const a=this.subscriptions[s];a&&a(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const s6=t=>!isNaN(parseFloat(t));class a6{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,r=!0)=>{this.prev=this.current,this.current=i;const{delta:s,timestamp:a}=tr;this.lastUpdated!==a&&(this.timeDelta=s,this.lastUpdated=a,In.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>In.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=s6(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new PM);const i=this.events[e].add(n);return e==="change"?()=>{i(),In.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=e,this.timeDelta=i}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?aD(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ph(t,e){return new a6(t,e)}const dD=t=>e=>e.test(t),o6={test:t=>t==="auto",parse:t=>t},fD=[Kc,Dt,va,Fo,p5,f5,o6],Dd=t=>fD.find(dD(t)),l6=[...fD,pr,hl],c6=t=>l6.find(dD(t));function u6(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ph(n))}function h6(t,e){const n=fy(t,e);let{transitionEnd:i={},transition:r={},...s}=n?t.makeTargetAnimatable(n,!1):{};s={...s,...i};for(const a in s){const o=C5(s[a]);u6(t,a,o)}}function d6(t,e,n){var i,r;const s=Object.keys(e).filter(o=>!t.hasValue(o)),a=s.length;if(a)for(let o=0;o<a;o++){const l=s[o],c=e[l];let u=null;Array.isArray(c)&&(u=c[0]),u===null&&(u=(r=(i=n[l])!==null&&i!==void 0?i:t.readValue(l))!==null&&r!==void 0?r:e[l]),u!=null&&(typeof u=="string"&&(hD(u)||uD(u))?u=parseFloat(u):!c6(u)&&hl.test(c)&&(u=cD(l,c)),t.addValue(l,Ph(u,{owner:t})),n[l]===void 0&&(n[l]=u),u!==null&&t.setBaseTarget(l,u))}}function f6(t,e){return e?(e[t]||e.default||e).from:void 0}function p6(t,e,n){const i={};for(const r in t){const s=f6(r,e);if(s!==void 0)i[r]=s;else{const a=n.getValue(r);a&&(i[r]=a.get())}}return i}function m6({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function g6(t,e){const n=t.get();if(Array.isArray(e)){for(let i=0;i<e.length;i++)if(e[i]!==n)return!0}else return n!==e}function pD(t,e,{delay:n=0,transitionOverride:i,type:r}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:a,...o}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");i&&(s=i);const c=[],u=r&&t.animationState&&t.animationState.getState()[r];for(const h in o){const f=t.getValue(h),m=o[h];if(!f||m===void 0||u&&m6(u,h))continue;const g={delay:n,elapsed:0,...bM(s||{},h)};if(window.HandoffAppearAnimations){const v=t.getProps()[mL];if(v){const _=window.HandoffAppearAnimations(v,h,f,In);_!==null&&(g.elapsed=_,g.isHandoff=!0)}}let y=!g.isHandoff&&!g6(f,m);if(g.type==="spring"&&(f.getVelocity()||g.velocity)&&(y=!1),f.animation&&(y=!1),y)continue;f.start(TM(h,f,m,t.shouldReduceMotion&&Yc.has(h)?{type:!1}:g));const x=f.animation;T0(l)&&(l.add(h),x.then(()=>l.remove(h))),c.push(x)}return a&&Promise.all(c).then(()=>{a&&h6(t,a)}),c}function HS(t,e,n={}){const i=fy(t,e,n.custom);let{transition:r=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const s=i?()=>Promise.all(pD(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:u,staggerDirection:h}=r;return v6(t,e,c+l,u,h,n)}:()=>Promise.resolve(),{when:o}=r;if(o){const[l,c]=o==="beforeChildren"?[s,a]:[a,s];return l().then(()=>c())}else return Promise.all([s(),a(n.delay)])}function v6(t,e,n=0,i=0,r=1,s){const a=[],o=(t.variantChildren.size-1)*i,l=r===1?(c=0)=>c*i:(c=0)=>o-c*i;return Array.from(t.variantChildren).sort(y6).forEach((c,u)=>{c.notify("AnimationStart",e),a.push(HS(c,e,{...s,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(a)}function y6(t,e){return t.sortNodePosition(e)}function x6(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>HS(t,s,n));i=Promise.all(r)}else if(typeof e=="string")i=HS(t,e,n);else{const r=typeof e=="function"?fy(t,e,n.custom):e;i=Promise.all(pD(t,r,n))}return i.then(()=>t.notify("AnimationComplete",e))}const _6=[...hM].reverse(),S6=hM.length;function A6(t){return e=>Promise.all(e.map(({animation:n,options:i})=>x6(t,n,i)))}function w6(t){let e=A6(t);const n=E6();let i=!0;const r=(l,c)=>{const u=fy(t,c);if(u){const{transition:h,transitionEnd:f,...m}=u;l={...l,...m,...f}}return l};function s(l){e=l(t)}function a(l,c){const u=t.getProps(),h=t.getVariantContext(!0)||{},f=[],m=new Set;let g={},y=1/0;for(let v=0;v<S6;v++){const _=_6[v],S=n[_],M=u[_]!==void 0?u[_]:h[_],b=np(M),C=_===c?S.isActive:null;C===!1&&(y=v);let B=M===h[_]&&M!==u[_]&&b;if(B&&i&&t.manuallyAnimateOnMount&&(B=!1),S.protectedKeys={...g},!S.isActive&&C===null||!M&&!S.prevProp||cy(M)||typeof M=="boolean")continue;let T=M6(S.prevProp,M)||_===c&&S.isActive&&!B&&b||v>y&&b,I=!1;const z=Array.isArray(M)?M:[M];let G=z.reduce(r,{});C===!1&&(G={});const{prevResolvedValues:Q={}}=S,U={...Q,...G},ee=$=>{T=!0,m.has($)&&(I=!0,m.delete($)),S.needsAnimating[$]=!0};for(const $ in U){const oe=G[$],Z=Q[$];if(g.hasOwnProperty($))continue;let J=!1;w0(oe)&&w0(Z)?J=!UL(oe,Z):J=oe!==Z,J?oe!==void 0?ee($):m.add($):oe!==void 0&&m.has($)?ee($):S.protectedKeys[$]=!0}S.prevProp=M,S.prevResolvedValues=G,S.isActive&&(g={...g,...G}),i&&t.blockInitialAnimation&&(T=!1),T&&(!B||I)&&f.push(...z.map($=>({animation:$,options:{type:_,...l}})))}if(m.size){const v={};m.forEach(_=>{const S=t.getBaseTarget(_);S!==void 0&&(v[_]=S)}),f.push({animation:v})}let x=!!f.length;return i&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(x=!1),i=!1,x?e(f):Promise.resolve()}function o(l,c,u){var h;if(n[l].isActive===c)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(m=>{var g;return(g=m.animationState)===null||g===void 0?void 0:g.setActive(l,c)}),n[l].isActive=c;const f=a(u,l);for(const m in n)n[m].protectedKeys={};return f}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>n}}function M6(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!UL(e,t):!1}function Xl(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function E6(){return{animate:Xl(!0),whileInView:Xl(),whileHover:Xl(),whileTap:Xl(),whileDrag:Xl(),whileFocus:Xl(),exit:Xl()}}class b6 extends El{constructor(e){super(e),e.animationState||(e.animationState=w6(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),cy(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let T6=0;class C6 extends El{constructor(){super(...arguments),this.id=T6++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:i}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e,{custom:i??this.node.getProps().custom});n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const R6={animation:{Feature:b6},exit:{Feature:C6}},l2=(t,e)=>Math.abs(t-e);function P6(t,e){const n=l2(t.x,e.x),i=l2(t.y,e.y);return Math.sqrt(n**2+i**2)}class mD{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=R1(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,m=P6(h.offset,{x:0,y:0})>=3;if(!f&&!m)return;const{point:g}=h,{timestamp:y}=tr;this.history.push({...g,timestamp:y});const{onStart:x,onMove:v}=this.handlers;f||(x&&x(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=C1(f,this.transformPagePoint),In.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:m,onSessionEnd:g,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=R1(h.type==="pointercancel"?this.lastMoveEventInfo:C1(f,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,x),g&&g(h,x)},!IL(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const a=dy(e),o=C1(a,this.transformPagePoint),{point:l}=o,{timestamp:c}=tr;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,R1(o,this.history)),this.removeListeners=nl(Za(this.contextWindow,"pointermove",this.handlePointerMove),Za(this.contextWindow,"pointerup",this.handlePointerUp),Za(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),lo(this.updatePoint)}}function C1(t,e){return e?{point:e(t.point)}:t}function c2(t,e){return{x:t.x-e.x,y:t.y-e.y}}function R1({point:t},e){return{point:t,delta:c2(t,gD(e)),offset:c2(t,B6(e)),velocity:I6(e,.1)}}function B6(t){return t[0]}function gD(t){return t[t.length-1]}function I6(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=gD(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>Pc(e)));)n--;if(!i)return{x:0,y:0};const s=qa(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const a={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function es(t){return t.max-t.min}function VS(t,e=0,n=.01){return Math.abs(t-e)<=n}function u2(t,e,n,i=.5){t.origin=i,t.originPoint=jn(e.min,e.max,t.origin),t.scale=es(n)/es(e),(VS(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=jn(n.min,n.max,t.origin)-t.originPoint,(VS(t.translate)||isNaN(t.translate))&&(t.translate=0)}function Mf(t,e,n,i){u2(t.x,e.x,n.x,i?i.originX:void 0),u2(t.y,e.y,n.y,i?i.originY:void 0)}function h2(t,e,n){t.min=n.min+e.min,t.max=t.min+es(e)}function L6(t,e,n){h2(t.x,e.x,n.x),h2(t.y,e.y,n.y)}function d2(t,e,n){t.min=e.min-n.min,t.max=t.min+es(e)}function Ef(t,e,n){d2(t.x,e.x,n.x),d2(t.y,e.y,n.y)}function D6(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?jn(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?jn(n,t,i.max):Math.min(t,n)),t}function f2(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function N6(t,{top:e,left:n,bottom:i,right:r}){return{x:f2(t.x,n,r),y:f2(t.y,e,i)}}function p2(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function F6(t,e){return{x:p2(t.x,e.x),y:p2(t.y,e.y)}}function U6(t,e){let n=.5;const i=es(t),r=es(e);return r>i?n=rp(e.min,e.max-i,t.min):i>r&&(n=rp(t.min,t.max-r,e.min)),ul(0,1,n)}function k6(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const jS=.35;function O6(t=jS){return t===!1?t=0:t===!0&&(t=jS),{x:m2(t,"left","right"),y:m2(t,"top","bottom")}}function m2(t,e,n){return{min:g2(t,e),max:g2(t,n)}}function g2(t,e){return typeof t=="number"?t:t[e]||0}const v2=()=>({translate:0,scale:1,origin:0,originPoint:0}),rh=()=>({x:v2(),y:v2()}),y2=()=>({min:0,max:0}),pi=()=>({x:y2(),y:y2()});function fs(t){return[t("x"),t("y")]}function vD({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function G6({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function z6(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function P1(t){return t===void 0||t===1}function WS({scale:t,scaleX:e,scaleY:n}){return!P1(t)||!P1(e)||!P1(n)}function lc(t){return WS(t)||yD(t)||t.z||t.rotate||t.rotateX||t.rotateY}function yD(t){return x2(t.x)||x2(t.y)}function x2(t){return t&&t!=="0%"}function C0(t,e,n){const i=t-n,r=e*i;return n+r}function _2(t,e,n,i,r){return r!==void 0&&(t=C0(t,r,i)),C0(t,n,i)+e}function XS(t,e=0,n=1,i,r){t.min=_2(t.min,e,n,i,r),t.max=_2(t.max,e,n,i,r)}function xD(t,{x:e,y:n}){XS(t.x,e.translate,e.scale,e.originPoint),XS(t.y,n.translate,n.scale,n.originPoint)}function H6(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let s,a;for(let o=0;o<r;o++){s=n[o],a=s.projectionDelta;const l=s.instance;l&&l.style&&l.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&sh(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,xD(t,a)),i&&lc(s.latestValues)&&sh(t,s.latestValues))}e.x=S2(e.x),e.y=S2(e.y)}function S2(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Oo(t,e){t.min=t.min+e,t.max=t.max+e}function A2(t,e,[n,i,r]){const s=e[r]!==void 0?e[r]:.5,a=jn(t.min,t.max,s);XS(t,e[n],e[i],a,e.scale)}const V6=["x","scaleX","originX"],j6=["y","scaleY","originY"];function sh(t,e){A2(t.x,e,V6),A2(t.y,e,j6)}function _D(t,e){return vD(z6(t.getBoundingClientRect(),e))}function W6(t,e,n){const i=_D(t,n),{scroll:r}=e;return r&&(Oo(i.x,r.offset.x),Oo(i.y,r.offset.y)),i}const SD=({current:t})=>t?t.ownerDocument.defaultView:null,X6=new WeakMap;class J6{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=pi(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(dy(u,"page").point)},s=(u,h)=>{const{drag:f,dragPropagation:m,onDragStart:g}=this.getProps();if(f&&!m&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=DL(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),fs(x=>{let v=this.getAxisMotionValue(x).get()||0;if(va.test(v)){const{projection:_}=this.visualElement;if(_&&_.layout){const S=_.layout.layoutBox[x];S&&(v=es(S)*(parseFloat(v)/100))}}this.originPoint[x]=v}),g&&In.update(()=>g(u,h),!1,!0);const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},a=(u,h)=>{const{dragPropagation:f,dragDirectionLock:m,onDirectionLock:g,onDrag:y}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:x}=h;if(m&&this.currentDirection===null){this.currentDirection=Y6(x),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",h.point,x),this.updateAxis("y",h.point,x),this.visualElement.render(),y&&y(u,h)},o=(u,h)=>this.stop(u,h),l=()=>fs(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new mD(e,{onSessionStart:r,onStart:s,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:SD(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&In.update(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!yg(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=D6(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&nh(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=N6(r.layoutBox,n):this.constraints=!1,this.elastic=O6(i),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&fs(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=k6(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!nh(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=W6(i,r.root,this.visualElement.getTransformPagePoint());let a=F6(r.layout.layoutBox,s);if(n){const o=n(G6(a));this.hasMutatedConstraints=!!o,o&&(a=vD(o))}return a}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},c=fs(u=>{if(!yg(u,n,this.currentDirection))return;let h=l&&l[u]||{};a&&(h={min:0,max:0});const f=r?200:1e6,m=r?40:1e7,g={type:"inertia",velocity:i?e[u]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(u,g)});return Promise.all(c).then(o)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return i.start(TM(e,i,0,n))}stopAnimation(){fs(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){fs(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){fs(n=>{const{drag:i}=this.getProps();if(!yg(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(n);if(r&&r.layout){const{min:a,max:o}=r.layout.layoutBox[n];s.set(e[n]-jn(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!nh(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};fs(a=>{const o=this.getAxisMotionValue(a);if(o){const l=o.get();r[a]=U6({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),fs(a=>{if(!yg(a,e,null))return;const o=this.getAxisMotionValue(a),{min:l,max:c}=this.constraints[a];o.set(jn(l,c,r[a]))})}addListeners(){if(!this.visualElement.current)return;X6.set(this.visualElement,this);const e=this.visualElement.current,n=Za(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();nh(l)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),i();const a=Ja(window,"resize",()=>this.scalePositionWithinConstraints()),o=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(fs(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=l[u].translate,h.set(h.get()+l[u].translate))}),this.visualElement.render())});return()=>{a(),n(),s(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:a=jS,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function yg(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Y6(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class K6 extends El{constructor(e){super(e),this.removeGroupControls=ci,this.removeListeners=ci,this.controls=new J6(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ci}unmount(){this.removeGroupControls(),this.removeListeners()}}const w2=t=>(e,n)=>{t&&In.update(()=>t(e,n))};class Q6 extends El{constructor(){super(...arguments),this.removePointerDownListener=ci}onPointerDown(e){this.session=new mD(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:SD(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:w2(e),onStart:w2(n),onMove:i,onEnd:(s,a)=>{delete this.session,r&&In.update(()=>r(s,a))}}}mount(){this.removePointerDownListener=Za(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function Z6(){const t=D.useContext(oy);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:i}=t,r=D.useId();return D.useEffect(()=>i(r),[]),!e&&n?[!1,()=>n&&n(r)]:[!0]}const kv={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function M2(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Nd={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Dt.test(t))t=parseFloat(t);else return t;const n=M2(t,e.target.x),i=M2(t,e.target.y);return`${n}% ${i}%`}},q6={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=hl.parse(t);if(r.length>5)return i;const s=hl.createTransformer(t),a=typeof r[0]!="number"?1:0,o=n.x.scale*e.x,l=n.y.scale*e.y;r[0+a]/=o,r[1+a]/=l;const c=jn(o,l,.5);return typeof r[2+a]=="number"&&(r[2+a]/=c),typeof r[3+a]=="number"&&(r[3+a]/=c),s(r)}};class $6 extends Ah.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;a5(e8),s&&(n.group&&n.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),kv.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:s}=this.props,a=i.projection;return a&&(a.isPresent=s,r||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||In.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function AD(t){const[e,n]=Z6(),i=D.useContext(fM);return Ah.createElement($6,{...t,layoutGroup:i,switchLayoutGroup:D.useContext(vL),isPresent:e,safeToRemove:n})}const e8={borderRadius:{...Nd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Nd,borderTopRightRadius:Nd,borderBottomLeftRadius:Nd,borderBottomRightRadius:Nd,boxShadow:q6},wD=["TopLeft","TopRight","BottomLeft","BottomRight"],t8=wD.length,E2=t=>typeof t=="string"?parseFloat(t):t,b2=t=>typeof t=="number"||Dt.test(t);function n8(t,e,n,i,r,s){r?(t.opacity=jn(0,n.opacity!==void 0?n.opacity:1,i8(i)),t.opacityExit=jn(e.opacity!==void 0?e.opacity:1,0,r8(i))):s&&(t.opacity=jn(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let a=0;a<t8;a++){const o=`border${wD[a]}Radius`;let l=T2(e,o),c=T2(n,o);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||b2(l)===b2(c)?(t[o]=Math.max(jn(E2(l),E2(c),i),0),(va.test(c)||va.test(l))&&(t[o]+="%")):t[o]=c}(e.rotate||n.rotate)&&(t.rotate=jn(e.rotate||0,n.rotate||0,i))}function T2(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const i8=MD(0,.5,XL),r8=MD(.5,.95,ci);function MD(t,e,n){return i=>i<t?0:i>e?1:n(rp(t,e,i))}function C2(t,e){t.min=e.min,t.max=e.max}function hs(t,e){C2(t.x,e.x),C2(t.y,e.y)}function R2(t,e,n,i,r){return t-=e,t=C0(t,1/n,i),r!==void 0&&(t=C0(t,1/r,i)),t}function s8(t,e=0,n=1,i=.5,r,s=t,a=t){if(va.test(e)&&(e=parseFloat(e),e=jn(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=jn(s.min,s.max,i);t===s&&(o-=e),t.min=R2(t.min,e,n,o,r),t.max=R2(t.max,e,n,o,r)}function P2(t,e,[n,i,r],s,a){s8(t,e[n],e[i],e[r],e.scale,s,a)}const a8=["x","scaleX","originX"],o8=["y","scaleY","originY"];function B2(t,e,n,i){P2(t.x,e,a8,n?n.x:void 0,i?i.x:void 0),P2(t.y,e,o8,n?n.y:void 0,i?i.y:void 0)}function I2(t){return t.translate===0&&t.scale===1}function ED(t){return I2(t.x)&&I2(t.y)}function l8(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function bD(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function L2(t){return es(t.x)/es(t.y)}class c8{constructor(){this.members=[]}add(e){CM(this.members,e),e.scheduleRender()}remove(e){if(RM(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function D2(t,e,n){let i="";const r=t.x.translate/e.x,s=t.y.translate/e.y;if((r||s)&&(i=`translate3d(${r}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:l,rotateX:c,rotateY:u}=n;l&&(i+=`rotate(${l}deg) `),c&&(i+=`rotateX(${c}deg) `),u&&(i+=`rotateY(${u}deg) `)}const a=t.x.scale*e.x,o=t.y.scale*e.y;return(a!==1||o!==1)&&(i+=`scale(${a}, ${o})`),i||"none"}const u8=(t,e)=>t.depth-e.depth;class h8{constructor(){this.children=[],this.isDirty=!1}add(e){CM(this.children,e),this.isDirty=!0}remove(e){RM(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(u8),this.isDirty=!1,this.children.forEach(e)}}function d8(t,e){const n=performance.now(),i=({timestamp:r})=>{const s=r-n;s>=e&&(lo(i),t(s-e))};return In.read(i,!0),()=>lo(i)}function f8(t){window.MotionDebug&&window.MotionDebug.record(t)}function p8(t){return t instanceof SVGElement&&t.tagName!=="svg"}function m8(t,e,n){const i=Fr(t)?t:Ph(t);return i.start(TM("",i,e,n)),i.animation}const N2=["","X","Y","Z"],g8={visibility:"hidden"},F2=1e3;let v8=0;const cc={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function TD({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(a={},o=e==null?void 0:e()){this.id=v8++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,cc.totalNodes=cc.resolvedTargetDeltas=cc.recalculatedProjection=0,this.nodes.forEach(_8),this.nodes.forEach(E8),this.nodes.forEach(b8),this.nodes.forEach(S8),f8(cc)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new h8)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new PM),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=p8(a),this.instance=a;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(c||l)&&(this.isLayoutDirty=!0),t){let h;const f=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=d8(f,250),kv.hasAnimatedSinceResize&&(kv.hasAnimatedSinceResize=!1,this.nodes.forEach(k2))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||u.getDefaultTransition()||B8,{onLayoutAnimationStart:x,onLayoutAnimationComplete:v}=u.getProps(),_=!this.targetLayout||!bD(this.targetLayout,g)||m,S=!f&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||S||f&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,S);const M={...bM(y,"layout"),onPlay:x,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(M.delay=0,M.type=!1),this.startAnimation(M)}else f||k2(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,lo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(T8),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(U2);return}this.isUpdating||this.nodes.forEach(w8),this.isUpdating=!1,this.nodes.forEach(M8),this.nodes.forEach(y8),this.nodes.forEach(x8),this.clearAllSnapshots();const o=performance.now();tr.delta=ul(0,1e3/60,o-tr.timestamp),tr.timestamp=o,tr.isProcessing=!0,_1.update.process(tr),_1.preRender.process(tr),_1.render.process(tr),tr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(A8),this.sharedNodes.forEach(C8)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,In.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){In.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=pi(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:i(this.instance),offset:n(this.instance)})}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform,o=this.projectionDelta&&!ED(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;a&&(o||lc(this.latestValues)||u)&&(r(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),I8(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return pi();const o=a.measureViewportBox(),{scroll:l}=this.root;return l&&(Oo(o.x,l.offset.x),Oo(o.y,l.offset.y)),o}removeElementScroll(a){const o=pi();hs(o,a);for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:u,options:h}=c;if(c!==this.root&&u&&h.layoutScroll){if(u.isRoot){hs(o,a);const{scroll:f}=this.root;f&&(Oo(o.x,-f.offset.x),Oo(o.y,-f.offset.y))}Oo(o.x,u.offset.x),Oo(o.y,u.offset.y)}}return o}applyTransform(a,o=!1){const l=pi();hs(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];!o&&u.options.layoutScroll&&u.scroll&&u!==u.root&&sh(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),lc(u.latestValues)&&sh(l,u.latestValues)}return lc(this.latestValues)&&sh(l,this.latestValues),l}removeTransform(a){const o=pi();hs(o,a);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!lc(c.latestValues))continue;WS(c.latestValues)&&c.updateSnapshot();const u=pi(),h=c.measurePageBox();hs(u,h),B2(o,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return lc(this.latestValues)&&B2(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==tr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var o;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=tr.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pi(),this.relativeTargetOrigin=pi(),Ef(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),hs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=pi(),this.targetWithTransforms=pi()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),L6(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):hs(this.target,this.layout.layoutBox),xD(this.target,this.targetDelta)):hs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pi(),this.relativeTargetOrigin=pi(),Ef(this.relativeTargetOrigin,this.target,m.target),hs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}cc.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||WS(this.parent.latestValues)||yD(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===tr.timestamp&&(c=!1),c)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;hs(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;H6(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox);const{target:g}=o;if(!g){this.projectionTransform&&(this.projectionDelta=rh(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=rh(),this.projectionDeltaWithTransform=rh());const y=this.projectionTransform;Mf(this.projectionDelta,this.layoutCorrected,g,this.latestValues),this.projectionTransform=D2(this.projectionDelta,this.treeScale),(this.projectionTransform!==y||this.treeScale.x!==f||this.treeScale.y!==m)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),cc.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,o=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},h=rh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const f=pi(),m=l?l.source:void 0,g=this.layout?this.layout.source:void 0,y=m!==g,x=this.getStack(),v=!x||x.members.length<=1,_=!!(y&&!v&&this.options.crossfade===!0&&!this.path.some(P8));this.animationProgress=0;let S;this.mixTargetDelta=M=>{const b=M/1e3;O2(h.x,a.x,b),O2(h.y,a.y,b),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ef(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),R8(this.relativeTarget,this.relativeTargetOrigin,f,b),S&&l8(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=pi()),hs(S,this.relativeTarget)),y&&(this.animationValues=u,n8(u,c,this.latestValues,b,_,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=b},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(lo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=In.update(()=>{kv.hasAnimatedSinceResize=!0,this.currentAnimation=m8(0,F2,{...a,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(F2),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:c,latestValues:u}=a;if(!(!o||!l||!c)){if(this!==a&&this.layout&&c&&CD(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||pi();const h=es(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+h;const f=es(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+f}hs(o,l),sh(o,u),Mf(this.projectionDeltaWithTransform,this.layoutCorrected,o,u)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new c8),this.sharedNodes.get(a).add(o);const c=o.options.initialPromotionConfig;o.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(o=!0),!o)return;const c={};for(let u=0;u<N2.length;u++){const h="rotate"+N2[u];l[h]&&(c[h]=l[h],a.setStaticValue(h,0))}a.render();for(const u in c)a.setStaticValue(u,c[u]);a.scheduleRender()}getProjectionStyles(a){var o,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return g8;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Uv(a==null?void 0:a.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=Uv(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!lc(this.latestValues)&&(y.transform=u?u({},""):"none",this.hasProjected=!1),y}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=D2(this.projectionDeltaWithTransform,this.treeScale,f),u&&(c.transform=u(f,c.transform));const{x:m,y:g}=this.projectionDelta;c.transformOrigin=`${m.origin*100}% ${g.origin*100}% 0`,h.animationValues?c.opacity=h===this?(l=(o=f.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const y in S0){if(f[y]===void 0)continue;const{correct:x,applyTo:v}=S0[y],_=c.transform==="none"?f[y]:x(f[y],h);if(v){const S=v.length;for(let M=0;M<S;M++)c[v[M]]=_}else c[y]=_}return this.options.layoutId&&(c.pointerEvents=h===this?Uv(a==null?void 0:a.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(U2),this.root.sharedNodes.clear()}}}function y8(t){t.updateLayout()}function x8(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:s}=t.options,a=n.source!==t.layout.source;s==="size"?fs(h=>{const f=a?n.measuredBox[h]:n.layoutBox[h],m=es(f);f.min=i[h].min,f.max=f.min+m}):CD(s,n.layoutBox,i)&&fs(h=>{const f=a?n.measuredBox[h]:n.layoutBox[h],m=es(i[h]);f.max=f.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+m)});const o=rh();Mf(o,i,n.layoutBox);const l=rh();a?Mf(l,t.applyTransform(r,!0),n.measuredBox):Mf(l,i,n.layoutBox);const c=!ED(o);let u=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:m}=h;if(f&&m){const g=pi();Ef(g,n.layoutBox,f.layoutBox);const y=pi();Ef(y,i,m.layoutBox),bD(g,y)||(u=!0),h.options.layoutRoot&&(t.relativeTarget=y,t.relativeTargetOrigin=g,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:l,layoutDelta:o,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function _8(t){cc.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function S8(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function A8(t){t.clearSnapshot()}function U2(t){t.clearMeasurements()}function w8(t){t.isLayoutDirty=!1}function M8(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function k2(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function E8(t){t.resolveTargetDelta()}function b8(t){t.calcProjection()}function T8(t){t.resetRotation()}function C8(t){t.removeLeadSnapshot()}function O2(t,e,n){t.translate=jn(e.translate,0,n),t.scale=jn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function G2(t,e,n,i){t.min=jn(e.min,n.min,i),t.max=jn(e.max,n.max,i)}function R8(t,e,n,i){G2(t.x,e.x,n.x,i),G2(t.y,e.y,n.y,i)}function P8(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const B8={duration:.45,ease:[.4,0,.1,1]},z2=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),H2=z2("applewebkit/")&&!z2("chrome/")?Math.round:ci;function V2(t){t.min=H2(t.min),t.max=H2(t.max)}function I8(t){V2(t.x),V2(t.y)}function CD(t,e,n){return t==="position"||t==="preserve-aspect"&&!VS(L2(e),L2(n),.2)}const L8=TD({attachResizeListener:(t,e)=>Ja(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),B1={current:void 0},RD=TD({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!B1.current){const t=new L8({});t.mount(window),t.setOptions({layoutScroll:!0}),B1.current=t}return B1.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),D8={pan:{Feature:Q6},drag:{Feature:K6,ProjectionNode:RD,MeasureLayout:AD}},N8=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function F8(t){const e=N8.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]}function JS(t,e,n=1){const[i,r]=F8(t);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const a=s.trim();return hD(a)?parseFloat(a):a}else return FS(r)?JS(r,e,n+1):r}function U8(t,{...e},n){const i=t.current;if(!(i instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(r=>{const s=r.get();if(!FS(s))return;const a=JS(s,i);a&&r.set(a)});for(const r in e){const s=e[r];if(!FS(s))continue;const a=JS(s,i);a&&(e[r]=a,n||(n={}),n[r]===void 0&&(n[r]=s))}return{target:e,transitionEnd:n}}const k8=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),PD=t=>k8.has(t),O8=t=>Object.keys(t).some(PD),j2=t=>t===Kc||t===Dt,W2=(t,e)=>parseFloat(t.split(", ")[e]),X2=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/);if(r)return W2(r[1],e);{const s=i.match(/^matrix\((.+)\)$/);return s?W2(s[1],t):0}},G8=new Set(["x","y","z"]),z8=Up.filter(t=>!G8.has(t));function H8(t){const e=[];return z8.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Bh={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:X2(4,13),y:X2(5,14)};Bh.translateX=Bh.x;Bh.translateY=Bh.y;const V8=(t,e,n)=>{const i=e.measureViewportBox(),r=e.current,s=getComputedStyle(r),{display:a}=s,o={};a==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(c=>{o[c]=Bh[c](i,s)}),e.render();const l=e.measureViewportBox();return n.forEach(c=>{const u=e.getValue(c);u&&u.jump(o[c]),t[c]=Bh[c](l,s)}),t},j8=(t,e,n={},i={})=>{e={...e},i={...i};const r=Object.keys(e).filter(PD);let s=[],a=!1;const o=[];if(r.forEach(l=>{const c=t.getValue(l);if(!t.hasValue(l))return;let u=n[l],h=Dd(u);const f=e[l];let m;if(w0(f)){const g=f.length,y=f[0]===null?1:0;u=f[y],h=Dd(u);for(let x=y;x<g&&f[x]!==null;x++)m?SM(Dd(f[x])===m):m=Dd(f[x])}else m=Dd(f);if(h!==m)if(j2(h)&&j2(m)){const g=c.get();typeof g=="string"&&c.set(parseFloat(g)),typeof f=="string"?e[l]=parseFloat(f):Array.isArray(f)&&m===Dt&&(e[l]=f.map(parseFloat))}else h!=null&&h.transform&&(m!=null&&m.transform)&&(u===0||f===0)?u===0?c.set(m.transform(u)):e[l]=h.transform(f):(a||(s=H8(t),a=!0),o.push(l),i[l]=i[l]!==void 0?i[l]:e[l],c.jump(f))}),o.length){const l=o.indexOf("height")>=0?window.pageYOffset:null,c=V8(e,t,o);return s.length&&s.forEach(([u,h])=>{t.getValue(u).set(h)}),t.render(),ly&&l!==null&&window.scrollTo({top:l}),{target:c,transitionEnd:i}}else return{target:e,transitionEnd:i}};function W8(t,e,n,i){return O8(e)?j8(t,e,n,i):{target:e,transitionEnd:i}}const X8=(t,e,n,i)=>{const r=U8(t,e,i);return e=r.target,i=r.transitionEnd,W8(t,e,n,i)},YS={current:null},BD={current:!1};function J8(){if(BD.current=!0,!!ly)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>YS.current=t.matches;t.addListener(e),e()}else YS.current=!1}function Y8(t,e,n){const{willChange:i}=e;for(const r in e){const s=e[r],a=n[r];if(Fr(s))t.addValue(r,s),T0(i)&&i.add(r);else if(Fr(a))t.addValue(r,Ph(s,{owner:t})),T0(i)&&i.remove(r);else if(a!==s)if(t.hasValue(r)){const o=t.getValue(r);!o.hasAnimated&&o.set(s)}else{const o=t.getStaticValue(r);t.addValue(r,Ph(o!==void 0?o:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const J2=new WeakMap,ID=Object.keys(ip),K8=ID.length,Y2=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],Q8=dM.length;class Z8{constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,visualState:s},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>In.render(this.render,!1,!0);const{latestValues:o,renderState:l}=s;this.latestValues=o,this.baseTarget={...o},this.initialValues=n.initial?{...o}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.isControllingVariants=uy(n),this.isVariantNode=gL(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...u}=this.scrapeMotionValuesFromProps(n,{});for(const h in u){const f=u[h];o[h]!==void 0&&Fr(f)&&(f.set(o[h],!1),T0(c)&&c.add(h))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,J2.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),BD.current||J8(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:YS.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){J2.delete(this.current),this.projection&&this.projection.unmount(),lo(this.notifyUpdate),lo(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const i=Yc.has(e),r=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&In.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},i,r,s){let a,o;for(let l=0;l<K8;l++){const c=ID[l],{isEnabled:u,Feature:h,ProjectionNode:f,MeasureLayout:m}=ip[c];f&&(a=f),u(n)&&(!this.features[c]&&h&&(this.features[c]=new h(this)),m&&(o=m))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:c,drag:u,dragConstraints:h,layoutScroll:f,layoutRoot:m}=n;this.projection.setOptions({layoutId:l,layout:c,alwaysMeasureLayout:!!u||h&&nh(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:s,layoutScroll:f,layoutRoot:m})}return o}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):pi()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<Y2.length;i++){const r=Y2[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s=e["on"+r];s&&(this.propEventSubscriptions[r]=this.on(r,s))}this.prevMotionValues=Y8(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const n={};for(let i=0;i<Q8;i++){const r=dM[i],s=this.props[r];(np(s)||s===!1)&&(n[r]=s)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=Ph(n,{owner:this}),this.addValue(e,i)),i}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props,r=typeof i=="string"||typeof i=="object"?(n=_M(this.props,i))===null||n===void 0?void 0:n[e]:void 0;if(i&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Fr(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new PM),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class LD extends Z8{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...i},{transformValues:r},s){let a=p6(i,e||{},this);if(r&&(n&&(n=r(n)),i&&(i=r(i)),a&&(a=r(a))),s){d6(this,i,a);const o=X8(this,i,a,n);n=o.transitionEnd,i=o.target}return{transition:e,transitionEnd:n,...i}}}function q8(t){return window.getComputedStyle(t)}class $8 extends LD{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(Yc.has(n)){const i=EM(n);return i&&i.default||0}else{const i=q8(e),r=(_L(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return _D(e,n)}build(e,n,i,r){mM(e,n,i,r.transformTemplate)}scrapeMotionValuesFromProps(e,n){return xM(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Fr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,i,r){bL(e,n,i,r)}}class eV extends LD{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Yc.has(n)){const i=EM(n);return i&&i.default||0}return n=TL.has(n)?n:uM(n),e.getAttribute(n)}measureInstanceViewportBox(){return pi()}scrapeMotionValuesFromProps(e,n){return RL(e,n)}build(e,n,i,r){vM(e,n,i,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,i,r){CL(e,n,i,r)}mount(e){this.isSVGTag=yM(e.tagName),super.mount(e)}}const tV=(t,e)=>pM(t)?new eV(e,{enableHardwareAcceleration:!1}):new $8(e,{enableHardwareAcceleration:!0}),nV={layout:{ProjectionNode:RD,MeasureLayout:AD}},iV={...R6,...K5,...D8,...nV},Be=r5((t,e)=>F5(t,e,iV,tV));function DD(){const t=D.useRef(!1);return cM(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function rV(){const t=DD(),[e,n]=D.useState(0),i=D.useCallback(()=>{t.current&&n(e+1)},[e]);return[D.useCallback(()=>In.postRender(i),[i]),e]}class sV extends D.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function aV({children:t,isPresent:e}){const n=D.useId(),i=D.useRef(null),r=D.useRef({width:0,height:0,top:0,left:0});return D.useInsertionEffect(()=>{const{width:s,height:a,top:o,left:l}=r.current;if(e||!i.current||!s||!a)return;i.current.dataset.motionPopId=n;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${a}px !important;
            top: ${o}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[e]),D.createElement(sV,{isPresent:e,childRef:i,sizeRef:r},D.cloneElement(t,{ref:i}))}const I1=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:s,mode:a})=>{const o=PL(oV),l=D.useId(),c=D.useMemo(()=>({id:l,initial:e,isPresent:n,custom:r,onExitComplete:u=>{o.set(u,!0);for(const h of o.values())if(!h)return;i&&i()},register:u=>(o.set(u,!1),()=>o.delete(u))}),s?void 0:[n]);return D.useMemo(()=>{o.forEach((u,h)=>o.set(h,!1))},[n]),D.useEffect(()=>{!n&&!o.size&&i&&i()},[n]),a==="popLayout"&&(t=D.createElement(aV,{isPresent:n},t)),D.createElement(oy.Provider,{value:c},t)};function oV(){return new Map}function lV(t){return D.useEffect(()=>()=>t(),[])}const uc=t=>t.key||"";function cV(t,e){t.forEach(n=>{const i=uc(n);e.set(i,n)})}function uV(t){const e=[];return D.Children.forEach(t,n=>{D.isValidElement(n)&&e.push(n)}),e}const zp=({children:t,custom:e,initial:n=!0,onExitComplete:i,exitBeforeEnter:r,presenceAffectsLayout:s=!0,mode:a="sync"})=>{const o=D.useContext(fM).forceRender||rV()[0],l=DD(),c=uV(t);let u=c;const h=D.useRef(new Map).current,f=D.useRef(u),m=D.useRef(new Map).current,g=D.useRef(!0);if(cM(()=>{g.current=!1,cV(c,m),f.current=u}),lV(()=>{g.current=!0,m.clear(),h.clear()}),g.current)return D.createElement(D.Fragment,null,u.map(_=>D.createElement(I1,{key:uc(_),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:s,mode:a},_)));u=[...u];const y=f.current.map(uc),x=c.map(uc),v=y.length;for(let _=0;_<v;_++){const S=y[_];x.indexOf(S)===-1&&!h.has(S)&&h.set(S,void 0)}return a==="wait"&&h.size&&(u=[]),h.forEach((_,S)=>{if(x.indexOf(S)!==-1)return;const M=m.get(S);if(!M)return;const b=y.indexOf(S);let C=_;if(!C){const B=()=>{h.delete(S);const P=Array.from(m.keys()).filter(T=>!x.includes(T));if(P.forEach(T=>m.delete(T)),f.current=c.filter(T=>{const I=uc(T);return I===S||P.includes(I)}),!h.size){if(l.current===!1)return;o(),i&&i()}};C=D.createElement(I1,{key:uc(M),isPresent:!1,onExitComplete:B,custom:e,presenceAffectsLayout:s,mode:a},M),h.set(S,C)}u.splice(b,0,C)}),u=u.map(_=>{const S=_.key;return h.has(S)?_:D.createElement(I1,{key:uc(_),isPresent:!0,presenceAffectsLayout:s,mode:a},_)}),D.createElement(D.Fragment,null,h.size?u:u.map(_=>D.cloneElement(_)))};function hV({videoSrc:t}){const e=D.useRef(null);return D.useEffect(()=>{e.current&&e.current.play().catch(n=>{console.error("Video autoplay failed:",n)})},[]),w.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[w.jsx("video",{ref:e,className:"absolute inset-0 w-full h-full object-cover",loop:!0,muted:!0,playsInline:!0,autoPlay:!0,children:w.jsx("source",{src:t,type:"video/mp4"})}),w.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-djungle/50 via-djungle/70 to-djungle"}),w.jsx(Be.div,{className:"absolute inset-0 opacity-20",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`,backgroundRepeat:"repeat",backgroundSize:"128px 128px"},animate:{backgroundPosition:["0px 0px","128px 128px"]},transition:{duration:20,repeat:1/0,ease:"linear"}})]})}function ND({onLogin:t}){const[e,n]=D.useState(!1),i=Ml(),r=[{name:"Home",path:"/"},{name:"About Us",path:"/about"},{name:"Use Case",path:"/use-case"},{name:"Pricing",path:"/pricing"},{name:"Blog",path:"/blog"},{name:"Contact",path:"/contact"},{name:"Dashboard",path:"/dashboard"},{name:"Chat",path:"/chat"},{name:"Request Feature",path:"/request-feature"}],s=a=>{n(!1),i(a)};return w.jsxs(w.Fragment,{children:[w.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-transparent",children:w.jsx("div",{className:"container mx-auto px-6 py-4",children:w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs(Be.div,{className:"flex items-center space-x-2 cursor-pointer",whileHover:{scale:1.05},onClick:()=>i("/"),children:[w.jsx("img",{src:"/assets/images/logo-variant-3.png",alt:"flamingo.ai",className:"w-12 h-12 object-contain"}),w.jsx("span",{className:"text-xl font-bold text-limeGreen drop-shadow-lg",children:"flamingo.ai"})]}),w.jsx(Be.button,{onClick:()=>n(!e),whileHover:{scale:1.1},whileTap:{scale:.95},className:"p-2 rounded-lg hover:bg-darkGreen/10 transition-colors",children:w.jsx("svg",{className:"w-8 h-8 text-limeGreen",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M4 6h16M4 12h16M4 18h16"})})})]})})}),w.jsx(zp,{children:e&&w.jsxs(w.Fragment,{children:[w.jsx(Be.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>n(!1),className:"fixed inset-0 bg-black/50 z-40"}),w.jsx(Be.nav,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",damping:20},className:"fixed top-0 left-0 h-full w-80 bg-darkGreen/95 backdrop-blur-md z-50 shadow-2xl",children:w.jsxs("div",{className:"p-6",children:[w.jsx(Be.button,{onClick:()=>n(!1),whileHover:{scale:1.1},whileTap:{scale:.95},className:"absolute top-6 right-6 p-2 rounded-lg hover:bg-darkGreen/10 transition-colors",children:w.jsx("svg",{className:"w-6 h-6 text-limeGreen",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),w.jsxs("div",{className:"flex items-center space-x-3 mb-10",children:[w.jsx("img",{src:"/assets/images/logo-variant-3.png",alt:"flamingo.ai",className:"w-14 h-14 object-contain"}),w.jsx("span",{className:"text-2xl font-bold text-limeGreen",children:"flamingo.ai"})]}),w.jsx("div",{className:"space-y-2",children:r.map((a,o)=>w.jsx(Be.button,{onClick:()=>s(a.path),className:`block w-full text-left py-3 px-4 rounded-lg text-limeGreen font-medium
                               hover:bg-limeGreen/10 hover:translate-x-2 
                               transition-all duration-300`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:o*.05},children:a.name},a.name))}),w.jsx(Be.button,{onClick:()=>{n(!1),t()},whileHover:{scale:1.05},whileTap:{scale:.95},className:`w-full mt-8 px-6 py-3 bg-limeGreen/20 border-2 border-limeGreen text-limeGreen font-bold 
                           rounded-lg hover:bg-limeGreen/30 hover:shadow-[0_0_20px_rgba(171,248,11,0.5)]
                           transition-all duration-300`,children:"Log In"})]})})]})})]})}function FD({title:t,excerpt:e,date:n,readTime:i,imageUrl:r,sourceUrl:s,index:a}){return w.jsxs(Be.article,{initial:{y:50,opacity:0},whileInView:{y:0,opacity:1},transition:{delay:a*.1},whileHover:{y:-5},className:"glassmorphism rounded-2xl overflow-hidden hover:border-pink/50 transition-all duration-300",children:[r&&w.jsx("div",{className:"h-48 overflow-hidden bg-gradient-to-br from-pink/20 to-limeGreen/20",children:w.jsx("img",{src:r,alt:t,className:"w-full h-full object-cover opacity-80",onError:o=>{o.target.style.display="none"}})}),w.jsxs("div",{className:"p-6",children:[w.jsxs("div",{className:"flex items-center justify-between text-sm text-beigeCream/60 mb-3",children:[w.jsx("span",{children:n}),w.jsxs("span",{children:[i," min read"]})]}),w.jsx("h3",{className:"text-xl font-bold text-pink mb-3 line-clamp-2",children:t}),w.jsx("p",{className:"text-beigeCream/80 line-clamp-3 mb-4",children:e}),w.jsx(Be.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>s&&window.open(s,"_blank"),className:"text-limeGreen font-semibold hover:text-limeGreen/80 transition-colors",children:"Read More →"})]})]})}function dV(){const[t,e]=D.useState([]),[n,i]=D.useState(!0);D.useEffect(()=>{r()},[]);const r=async()=>{try{e([{title:"Major Online Casino Caught Using Rigged RNG Software",excerpt:"Investigation reveals popular online casino manipulated random number generators to reduce player wins by 15%. Regulatory authorities have issued record fines.",date:"March 15, 2024",readTime:"5",sourceUrl:"#"},{title:"Slot Machine Manufacturer Admits to Programming 'Near Miss' Features",excerpt:"Leading slot machine manufacturer confesses to deliberately programming machines to show 'near miss' combinations more frequently than statistically probable.",date:"March 10, 2024",readTime:"7",sourceUrl:"#"},{title:"Whistleblower Exposes Casino's Player Tracking Manipulation",excerpt:"Former casino employee reveals how player tracking systems were used to identify and limit winning players while encouraging problem gamblers.",date:"March 5, 2024",readTime:"6",sourceUrl:"#"},{title:"AI Analysis Proves Popular Slots Are Not Truly Random",excerpt:"Independent researchers using advanced AI algorithms demonstrate that several popular slot games exhibit patterns that contradict claims of true randomness.",date:"February 28, 2024",readTime:"8",sourceUrl:"#"},{title:"Class Action Lawsuit Filed Against Major Casino Chain",excerpt:"Thousands of players join lawsuit claiming systematic manipulation of odds and false advertising of payout percentages across multiple properties.",date:"February 20, 2024",readTime:"4",sourceUrl:"#"},{title:"Regulatory Body Fines Online Casinos $50M for RTP Violations",excerpt:"Gaming commission issues massive fines after audit reveals actual return-to-player percentages were significantly lower than advertised.",date:"February 15, 2024",readTime:"5",sourceUrl:"#"}]),i(!1)}catch(s){console.error("Error fetching news:",s),i(!1)}};return w.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[w.jsxs(Be.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-12",children:[w.jsxs("h2",{className:"text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold text-beigeCream mb-4",children:[w.jsx("span",{className:"text-pink",children:"EXPOSED:"})," Industry Scandals"]}),w.jsx("p",{className:"text-base sm:text-lg md:text-xl text-beigeCream/70 max-w-3xl mx-auto",children:"The truth they don't want you to know. Real investigations revealing how the house always wins."})]}),n?w.jsx("div",{className:"flex items-center justify-center h-64",children:w.jsx("div",{className:"animate-pulse text-limeGreen text-2xl",children:"Uncovering the truth..."})}):w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 lg:gap-8",children:t.map((s,a)=>w.jsx(FD,{title:s.title,excerpt:s.excerpt,date:s.date,readTime:s.readTime,imageUrl:s.imageUrl,sourceUrl:s.sourceUrl,index:a},a))}),w.jsx(Be.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{delay:.5},className:"text-center mt-12",children:w.jsx("p",{className:"text-sm text-beigeCream/50 italic",children:'flamingo.ai - Exposing the truth behind "random" number generation'})})]})}function fV(){const t=Ml(),[e,n]=D.useState(!1),i=D.useRef(null),r=()=>{n(!0),i.current&&i.current.play()},s=()=>{n(!1),i.current&&(i.current.pause(),i.current.currentTime=0)};return w.jsxs(Be.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[w.jsx(ND,{onLogin:()=>t("/dashboard")}),w.jsxs("section",{className:"relative h-screen overflow-hidden",children:[w.jsx(hV,{videoSrc:"/assets/videos/intro-loop-desktop.mp4"}),w.jsx("div",{className:"relative z-10 h-full flex items-center justify-center",children:w.jsx("div",{className:"container mx-auto px-4 sm:px-6",children:w.jsxs("div",{className:"relative",children:[w.jsx(Be.div,{initial:{x:100,opacity:0},animate:{x:0,opacity:1},transition:{delay:.5,duration:.8},className:"absolute right-0 top-1/2 -translate-y-1/2 hidden lg:block w-64 h-64 xl:w-96 xl:h-96",children:w.jsx(Be.img,{src:"/assets/images/ui-screenshot-3.png",alt:"UI Preview",className:"w-full h-full object-contain",animate:{y:[0,-20,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"}})}),w.jsx("div",{children:w.jsxs(Be.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.8},className:"text-center max-w-4xl mx-auto",children:[w.jsxs("div",{className:"flex flex-col items-center justify-center select-none",children:[w.jsxs("div",{className:"title mt-8 sm:mt-12 lg:mt-20 text-center relative z-20",children:[w.jsx("h1",{className:"text-beigeCream uppercase text-4xl sm:text-6xl md:text-7xl lg:text-8xl xl:text-[143.112px] leading-tight sm:leading-tight md:leading-tight lg:leading-[104.519997px] select-none m-0 p-0",style:{fontWeight:700,fontVariationSettings:"normal",height:"auto",marginBlockEnd:"0px",marginBlockStart:"0px",marginBottom:"0px",marginInlineEnd:"0px",marginInlineStart:"0px",marginLeft:"0px",marginRight:"0px",marginTop:"0px",tabSize:4,WebkitUserSelect:"none",userSelect:"none"},children:"PLAYING BY THEIR RULES."}),w.jsx("h2",{className:"text-pink uppercase text-4xl sm:text-6xl md:text-7xl lg:text-8xl xl:text-[143.112px] leading-tight sm:leading-tight md:leading-tight lg:leading-[104.519997px] select-none m-0 p-0",style:{fontWeight:700,fontVariationSettings:"normal",height:"auto",marginBlockEnd:"0px",marginBlockStart:"0px",marginBottom:"0px",marginInlineEnd:"0px",marginInlineStart:"0px",marginLeft:"0px",marginRight:"0px",marginTop:"0px",tabSize:4,WebkitUserSelect:"none",userSelect:"none"},children:"BIG MISTAKE."})]}),w.jsx("div",{className:"subtitle max-w-[350px] sm:max-w-[500px] lg:max-w-[600px] px-6 sm:px-8 lg:px-0 mt-4 lg:mt-6 text-sm sm:text-base lg:text-lg text-beigeCream text-center flex flex-col relative z-10",children:w.jsx("p",{children:"Flamingo AI leverages quantum-neural analysis to decode RNG patterns. We prove that true randomness is a myth, whether casinos like it or not."})})]}),w.jsx(Be.button,{onClick:r,whileHover:{scale:1.1},whileTap:{scale:.95},className:"relative mb-8 sm:mb-12 lg:mb-16 mx-auto block w-24 h-24 sm:w-28 sm:h-28 lg:w-32 lg:h-32",children:w.jsxs("div",{className:`absolute inset-0 rounded-full border-2 border-limeGreen bg-transparent
                                  shadow-[0_0_50px_rgba(171,248,11,0.6)] hover:shadow-[0_0_70px_rgba(171,248,11,0.8)]
                                  transition-all duration-300`,children:[w.jsxs("svg",{className:"absolute inset-0 w-full h-full animate-spin-slow",viewBox:"0 0 128 128",children:[w.jsx("defs",{children:w.jsx("path",{id:"circle-text-path",d:"M 64, 64 m -50, 0 a 50,50 0 1,1 100,0 a 50,50 0 1,1 -100,0"})}),w.jsx("text",{className:"fill-limeGreen text-[10px] sm:text-xs font-bold uppercase",children:w.jsx("textPath",{href:"#circle-text-path",startOffset:"0%",children:"WATCH OUR STORY • WATCH OUR STORY •"})})]}),w.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:w.jsx("svg",{className:"w-8 h-8 sm:w-10 sm:h-10 lg:w-12 lg:h-12 text-limeGreen ml-1 sm:ml-2",fill:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{d:"M8 5v14l11-7z"})})})]})}),w.jsx(Be.button,{onClick:()=>t("/onboarding"),whileHover:{scale:1.05},whileTap:{scale:.95},className:`px-6 py-3 sm:px-8 sm:py-4 bg-transparent border-2 border-limeGreen text-limeGreen font-bold rounded-xl text-base sm:text-lg
                             hover:bg-limeGreen/10 hover:shadow-[0_0_30px_rgba(171,248,11,0.5)] transition-all duration-300
                             mt-8 sm:mt-12 lg:mt-16`,children:"Try flamingo.ai"})]})})]})})})]}),w.jsx("section",{className:"min-h-screen bg-darkGreen flex items-center justify-center overflow-hidden py-12 sm:py-16 lg:py-0",children:w.jsx("div",{className:"container mx-auto px-4 sm:px-6",children:w.jsxs(Be.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.8},className:"grid grid-cols-1 md:grid-cols-3 gap-6 sm:gap-8 max-w-6xl mx-auto",children:[w.jsxs(Be.div,{initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},transition:{delay:.1},whileHover:{y:-10},className:"glassmorphism p-4 sm:p-6 rounded-2xl overflow-hidden group",children:[w.jsx("img",{src:"/assets/images/flamingo_1_restyled.png",alt:"Flamingo 1",className:`w-full h-32 sm:h-40 md:h-48 object-contain rounded-lg mb-3 sm:mb-4 
                         group-hover:scale-105 transition-transform duration-300`}),w.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-2 text-limeGreen",children:"AI Technology"}),w.jsx("p",{className:"text-sm sm:text-base text-beigeCream/70",children:"Advanced neural networks analyze patterns in real-time"})]}),w.jsxs(Be.div,{initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},transition:{delay:.2},whileHover:{y:-10},className:"glassmorphism p-4 sm:p-6 rounded-2xl overflow-hidden group",children:[w.jsx("img",{src:"/assets/images/flamingo_2_restyled.png",alt:"Flamingo 2",className:`w-full h-32 sm:h-40 md:h-48 object-contain rounded-lg mb-3 sm:mb-4
                         group-hover:scale-105 transition-transform duration-300`}),w.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-2 text-limeGreen",children:"Live Analytics"}),w.jsx("p",{className:"text-sm sm:text-base text-beigeCream/70",children:"Real-time probability calculations for every spin"})]}),w.jsxs(Be.div,{initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},transition:{delay:.3},whileHover:{y:-10},className:"glassmorphism p-4 sm:p-6 rounded-2xl overflow-hidden group",children:[w.jsx("img",{src:"/assets/images/flamingo_3_restyled.png",alt:"Flamingo 3",className:`w-full h-32 sm:h-40 md:h-48 object-contain rounded-lg mb-3 sm:mb-4
                         group-hover:scale-105 transition-transform duration-300`}),w.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-2 text-limeGreen",children:"Smart Insights"}),w.jsx("p",{className:"text-sm sm:text-base text-beigeCream/70",children:"Personalized recommendations based on your play style"})]}),w.jsxs(Be.div,{initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},transition:{delay:.4},whileHover:{y:-10},className:"glassmorphism p-4 sm:p-6 rounded-2xl overflow-hidden group",children:[w.jsx("img",{src:"/assets/images/flamingo_4_restyled.png",alt:"Flamingo 4",className:`w-full h-32 sm:h-40 md:h-48 object-contain rounded-lg mb-3 sm:mb-4 
                         group-hover:scale-105 transition-transform duration-300`}),w.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-2 text-limeGreen",children:"Pattern Recognition"}),w.jsx("p",{className:"text-sm sm:text-base text-beigeCream/70",children:"Quantum-neural analysis decodes hidden patterns"})]}),w.jsxs(Be.div,{initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},transition:{delay:.5},whileHover:{y:-10},className:"glassmorphism p-4 sm:p-6 rounded-2xl overflow-hidden group",children:[w.jsx("img",{src:"/assets/images/flamingo_5_restyled.png",alt:"Flamingo 5",className:`w-full h-32 sm:h-40 md:h-48 object-contain rounded-lg mb-3 sm:mb-4
                         group-hover:scale-105 transition-transform duration-300`}),w.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-2 text-limeGreen",children:"Probability Engine"}),w.jsx("p",{className:"text-sm sm:text-base text-beigeCream/70",children:"Revolutionary algorithms challenge randomness"})]}),w.jsxs(Be.div,{initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},transition:{delay:.6},whileHover:{y:-10},className:"glassmorphism p-4 sm:p-6 rounded-2xl overflow-hidden group",children:[w.jsx("img",{src:"/assets/images/flamingo_6_restyled.png",alt:"Flamingo 6",className:`w-full h-32 sm:h-40 md:h-48 object-contain rounded-lg mb-3 sm:mb-4
                         group-hover:scale-105 transition-transform duration-300`}),w.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-2 text-limeGreen",children:"Win Strategy"}),w.jsx("p",{className:"text-sm sm:text-base text-beigeCream/70",children:"Beat the house with data-driven insights"})]})]})})}),w.jsx("section",{className:"min-h-screen bg-raisinBlack flex items-center justify-center py-12 sm:py-16 lg:py-20",children:w.jsx(dV,{})}),w.jsxs("section",{className:"min-h-screen relative overflow-hidden",children:[w.jsxs("div",{className:"absolute inset-0",children:[w.jsx("div",{className:"absolute inset-0 bg-darkGreen"}),w.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-pink/90 via-transparent to-transparent"})]}),w.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col justify-between p-6 sm:p-8 lg:p-12",children:[w.jsx("div",{className:"container mx-auto",children:w.jsxs(Be.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8},className:"grid grid-cols-1 md:grid-cols-3 gap-8 sm:gap-12",children:[w.jsxs("div",{children:[w.jsxs("div",{className:"flex items-center space-x-3 mb-4 sm:mb-6",children:[w.jsx("img",{src:"/assets/images/logo-variant-3.png",alt:"flamingo.ai",className:"w-12 h-12 sm:w-16 sm:h-16 object-contain"}),w.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-beigeCream",children:"flamingo.ai"})]}),w.jsx("p",{className:"text-sm sm:text-base text-beigeCream/70 mb-4 sm:mb-6",children:"Revolutionizing gaming with quantum-neural analysis. We prove that true randomness is a myth."}),w.jsxs("div",{className:"flex space-x-4",children:[w.jsx(Be.a,{href:"#",whileHover:{scale:1.1},className:`w-10 h-10 bg-limeGreen/20 rounded-full flex items-center justify-center
                             hover:bg-limeGreen/30 transition-colors`,children:w.jsx("span",{className:"text-limeGreen",children:"𝕏"})}),w.jsx(Be.a,{href:"#",whileHover:{scale:1.1},className:`w-10 h-10 bg-limeGreen/20 rounded-full flex items-center justify-center
                             hover:bg-limeGreen/30 transition-colors`,children:w.jsx("span",{className:"text-limeGreen",children:"📧"})}),w.jsx(Be.a,{href:"#",whileHover:{scale:1.1},className:`w-10 h-10 bg-limeGreen/20 rounded-full flex items-center justify-center
                             hover:bg-limeGreen/30 transition-colors`,children:w.jsx("span",{className:"text-limeGreen",children:"🔗"})})]})]}),w.jsxs("div",{children:[w.jsx("h4",{className:"text-lg sm:text-xl font-semibold text-limeGreen mb-4 sm:mb-6",children:"Quick Links"}),w.jsx("ul",{className:"space-y-3",children:["About Us","Use Case","Pricing","Blog","Contact"].map(a=>w.jsx("li",{children:w.jsx("a",{href:"#",className:"text-sm sm:text-base text-beigeCream/70 hover:text-limeGreen transition-colors",children:a})},a))})]}),w.jsxs("div",{children:[w.jsx("h4",{className:"text-lg sm:text-xl font-semibold text-limeGreen mb-4 sm:mb-6",children:"Stay Updated"}),w.jsx("p",{className:"text-sm sm:text-base text-beigeCream/70 mb-4",children:"Get the latest updates on our quantum-neural breakthroughs."}),w.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-0",children:[w.jsx("input",{type:"email",placeholder:"Enter your email",className:`flex-1 px-4 py-3 bg-white/10 border border-white/20 rounded-lg sm:rounded-l-lg sm:rounded-r-none
                             text-beigeCream placeholder-beigeCream/50 focus:outline-none
                             focus:border-limeGreen/50 transition-colors`}),w.jsx("button",{className:`px-6 py-3 bg-limeGreen text-darkGreen font-bold rounded-lg sm:rounded-l-none sm:rounded-r-lg
                                   hover:bg-limeGreen/90 transition-colors`,children:"Subscribe"})]})]})]})}),w.jsx("div",{className:"container mx-auto text-center my-12 sm:my-16",children:w.jsxs(Be.div,{initial:{scale:.8,opacity:0},whileInView:{scale:1,opacity:1},transition:{duration:.8},children:[w.jsx("h2",{className:"text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold text-beigeCream mb-4 sm:mb-6",children:"Ready to Beat the House?"}),w.jsx("p",{className:"text-base sm:text-lg md:text-xl text-beigeCream/70 mb-6 sm:mb-8 max-w-2xl mx-auto px-4",children:"Join thousands who've discovered that the house doesn't always win."}),w.jsx(Be.button,{onClick:()=>t("/onboarding"),whileHover:{scale:1.05},whileTap:{scale:.95},className:`px-8 py-4 sm:px-12 sm:py-5 bg-limeGreen text-darkGreen font-bold rounded-xl text-lg sm:text-xl
                         hover:shadow-[0_0_40px_rgba(171,248,11,0.6)] transition-all duration-300`,children:"Start Winning Now"})]})}),w.jsx("div",{className:"container mx-auto",children:w.jsxs("div",{className:"border-t border-white/10 pt-6 sm:pt-8 flex flex-col md:flex-row justify-between items-center",children:[w.jsx("p",{className:"text-xs sm:text-sm text-beigeCream/60 mb-4 md:mb-0",children:"© 2024 flamingo.ai. All rights reserved."}),w.jsxs("div",{className:"flex flex-wrap justify-center gap-4 sm:gap-6 text-xs sm:text-sm",children:[w.jsx("a",{href:"#",className:"text-beigeCream/60 hover:text-limeGreen transition-colors",children:"Privacy Policy"}),w.jsx("a",{href:"#",className:"text-beigeCream/60 hover:text-limeGreen transition-colors",children:"Terms of Service"}),w.jsx("a",{href:"#",className:"text-beigeCream/60 hover:text-limeGreen transition-colors",children:"Responsible Gaming"})]})]})})]}),w.jsx("div",{className:"absolute bottom-0 right-0 w-64 h-64 sm:w-96 sm:h-96 bg-pink/20 rounded-full blur-3xl"}),w.jsx("div",{className:"absolute top-0 left-0 w-64 h-64 sm:w-96 sm:h-96 bg-limeGreen/10 rounded-full blur-3xl"})]}),e&&w.jsx(Be.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/90 flex items-center justify-center p-4",onClick:s,children:w.jsxs(Be.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"relative max-w-4xl w-full",onClick:a=>a.stopPropagation(),children:[w.jsx("video",{ref:i,src:"/assets/videos/Pinky_Desktop.mp4",className:"w-full rounded-lg shadow-2xl",controls:!0,autoPlay:!0}),w.jsx(Be.button,{onClick:s,whileHover:{scale:1.1},whileTap:{scale:.95},className:`absolute top-4 right-4 p-2 bg-limeGreen rounded-full 
                       text-darkGreen hover:bg-limeGreen/80 transition-colors`,children:w.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]})}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const bl="159",hc={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},dc={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},UD=0,KS=1,kD=2,pV=3,OD=0,py=1,bf=2,Fs=3,Ks=0,Ai=1,Ii=2,mV=2,Di=0,Bc=1,sp=2,QS=3,ZS=4,GD=5,Ho=100,zD=101,HD=102,qS=103,$S=104,VD=200,jD=201,WD=202,XD=203,R0=204,P0=205,JD=206,YD=207,KD=208,QD=209,ZD=210,qD=211,$D=212,eN=213,tN=214,nN=0,iN=1,rN=2,ap=3,sN=4,aN=5,oN=6,lN=7,Hp=0,cN=1,uN=2,Xs=0,hN=1,dN=2,fN=3,BM=4,pN=5,eA="attached",mN="detached",dl=300,xa=301,fl=302,Ih=303,op=304,Jh=306,pl=1e3,Dn=1001,Lh=1002,Rn=1003,lp=1004,gV=1004,gh=1005,vV=1005,kt=1006,my=1007,yV=1007,_a=1008,tA=1008,vi=1009,IM=1010,LM=1011,Vp=1012,gy=1013,zs=1014,$n=1015,ei=1016,DM=1017,NM=1018,$a=1020,gN=1021,gi=1023,vN=1024,yN=1025,eo=1026,ml=1027,FM=1028,UM=1029,xN=1030,kM=1031,OM=1033,Ov=33776,Gv=33777,zv=33778,Hv=33779,nA=35840,iA=35841,rA=35842,sA=35843,GM=36196,aA=37492,oA=37496,lA=37808,cA=37809,uA=37810,hA=37811,dA=37812,fA=37813,pA=37814,mA=37815,gA=37816,vA=37817,yA=37818,xA=37819,_A=37820,SA=37821,Vv=36492,AA=36494,wA=36495,_N=36283,MA=36284,EA=36285,bA=36286,SN=2200,AN=2201,wN=2202,Dh=2300,Gc=2301,jv=2302,Sc=2400,Ac=2401,cp=2402,vy=2500,zM=2501,MN=0,HM=1,B0=2,VM=3e3,il=3001,Tl=3200,jM=3201,Cl=0,EN=1,gr="",sn="srgb",xr="srgb-linear",yy="display-p3",jp="display-p3-linear",up="linear",bn="srgb",hp="rec709",dp="p3",xV=0,fc=7680,_V=7681,SV=7682,AV=7683,wV=34055,MV=34056,EV=5386,bV=512,TV=513,CV=514,RV=515,PV=516,BV=517,IV=518,TA=519,bN=512,TN=513,CN=514,WM=515,RN=516,PN=517,BN=518,IN=519,fp=35044,LV=35048,DV=35040,NV=35045,FV=35049,UV=35041,kV=35046,OV=35050,GV=35042,zV="100",CA="300 es",I0=1035,Hs=2e3,Nh=2001;let bs=class{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(n)===-1&&i[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e);e.target=null}}};const qi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let K2=1234567;const Ic=Math.PI/180,Fh=180/Math.PI;function qr(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(qi[t&255]+qi[t>>8&255]+qi[t>>16&255]+qi[t>>24&255]+"-"+qi[e&255]+qi[e>>8&255]+"-"+qi[e>>16&15|64]+qi[e>>24&255]+"-"+qi[n&63|128]+qi[n>>8&255]+"-"+qi[n>>16&255]+qi[n>>24&255]+qi[i&255]+qi[i>>8&255]+qi[i>>16&255]+qi[i>>24&255]).toLowerCase()}function qn(t,e,n){return Math.max(e,Math.min(n,t))}function XM(t,e){return(t%e+e)%e}function HV(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)}function VV(t,e,n){return t!==e?(n-t)/(e-t):0}function Tf(t,e,n){return(1-n)*t+n*e}function jV(t,e,n,i){return Tf(t,e,1-Math.exp(-n*i))}function WV(t,e=1){return e-Math.abs(XM(t,e*2)-e)}function XV(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function JV(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function YV(t,e){return t+Math.floor(Math.random()*(e-t+1))}function KV(t,e){return t+Math.random()*(e-t)}function QV(t){return t*(.5-Math.random())}function ZV(t){t!==void 0&&(K2=t);let e=K2+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function qV(t){return t*Ic}function $V(t){return t*Fh}function RA(t){return(t&t-1)===0&&t!==0}function ej(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function L0(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function tj(t,e,n,i,r){const s=Math.cos,a=Math.sin,o=s(n/2),l=a(n/2),c=s((e+i)/2),u=a((e+i)/2),h=s((e-i)/2),f=a((e-i)/2),m=s((i-e)/2),g=a((i-e)/2);switch(r){case"XYX":t.set(o*u,l*h,l*f,o*c);break;case"YZY":t.set(l*f,o*u,l*h,o*c);break;case"ZXZ":t.set(l*h,l*f,o*u,o*c);break;case"XZX":t.set(o*u,l*g,l*m,o*c);break;case"YXY":t.set(l*m,o*u,l*g,o*c);break;case"ZYZ":t.set(l*g,l*m,o*u,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Br(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Kt(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const pp={DEG2RAD:Ic,RAD2DEG:Fh,generateUUID:qr,clamp:qn,euclideanModulo:XM,mapLinear:HV,inverseLerp:VV,lerp:Tf,damp:jV,pingpong:WV,smoothstep:XV,smootherstep:JV,randInt:YV,randFloat:KV,randFloatSpread:QV,seededRandom:ZV,degToRad:qV,radToDeg:$V,isPowerOfTwo:RA,ceilPowerOfTwo:ej,floorPowerOfTwo:L0,setQuaternionFromProperEuler:tj,normalize:Kt,denormalize:Br};class Ie{constructor(e=0,n=0){Ie.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,i=this.y,r=e.elements;return this.x=r[0]*n+r[3]*i+r[6],this.y=r[1]*n+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(qn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y;return n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const i=Math.cos(n),r=Math.sin(n),s=this.x-e.x,a=this.y-e.y;return this.x=s*i-a*r+e.x,this.y=s*r+a*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Yt{constructor(e,n,i,r,s,a,o,l,c){Yt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,i,r,s,a,o,l,c)}set(e,n,i,r,s,a,o,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=o,u[3]=n,u[4]=s,u[5]=l,u[6]=i,u[7]=a,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this}extractBasis(e,n,i){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,s=this.elements,a=i[0],o=i[3],l=i[6],c=i[1],u=i[4],h=i[7],f=i[2],m=i[5],g=i[8],y=r[0],x=r[3],v=r[6],_=r[1],S=r[4],M=r[7],b=r[2],C=r[5],B=r[8];return s[0]=a*y+o*_+l*b,s[3]=a*x+o*S+l*C,s[6]=a*v+o*M+l*B,s[1]=c*y+u*_+h*b,s[4]=c*x+u*S+h*C,s[7]=c*v+u*M+h*B,s[2]=f*y+m*_+g*b,s[5]=f*x+m*S+g*C,s[8]=f*v+m*M+g*B,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8];return n*a*u-n*o*c-i*s*u+i*o*l+r*s*c-r*a*l}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],h=u*a-o*c,f=o*l-u*s,m=c*s-a*l,g=n*h+i*f+r*m;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const y=1/g;return e[0]=h*y,e[1]=(r*c-u*i)*y,e[2]=(o*i-r*a)*y,e[3]=f*y,e[4]=(u*n-r*l)*y,e[5]=(r*s-o*n)*y,e[6]=m*y,e[7]=(i*l-c*n)*y,e[8]=(a*n-i*s)*y,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,i,r,s,a,o){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*a+c*o)+a+e,-r*c,r*l,-r*(-c*a+l*o)+o+n,0,0,1),this}scale(e,n){return this.premultiply(L1.makeScale(e,n)),this}rotate(e){return this.premultiply(L1.makeRotation(-e)),this}translate(e,n){return this.premultiply(L1.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,i,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<9;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<9;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const L1=new Yt;function LN(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const nj={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function ah(t,e){return new nj[t](e)}function mp(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function DN(){const t=mp("canvas");return t.style.display="block",t}const Q2={};function Cf(t){t in Q2||(Q2[t]=!0,console.warn(t))}const Z2=new Yt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),q2=new Yt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),xg={[xr]:{transfer:up,primaries:hp,toReference:t=>t,fromReference:t=>t},[sn]:{transfer:bn,primaries:hp,toReference:t=>t.convertSRGBToLinear(),fromReference:t=>t.convertLinearToSRGB()},[jp]:{transfer:up,primaries:dp,toReference:t=>t.applyMatrix3(q2),fromReference:t=>t.applyMatrix3(Z2)},[yy]:{transfer:bn,primaries:dp,toReference:t=>t.convertSRGBToLinear().applyMatrix3(q2),fromReference:t=>t.applyMatrix3(Z2).convertLinearToSRGB()}},ij=new Set([xr,jp]),gn={enabled:!0,_workingColorSpace:xr,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(t){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!t},get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(t){if(!ij.has(t))throw new Error(`Unsupported working color space, "${t}".`);this._workingColorSpace=t},convert:function(t,e,n){if(this.enabled===!1||e===n||!e||!n)return t;const i=xg[e].toReference,r=xg[n].fromReference;return r(i(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this._workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this._workingColorSpace)},getPrimaries:function(t){return xg[t].primaries},getTransfer:function(t){return t===gr?up:xg[t].transfer}};function vh(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function D1(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let yu;class JM{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{yu===void 0&&(yu=mp("canvas")),yu.width=e.width,yu.height=e.height;const i=yu.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),n=yu}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=mp("canvas");n.width=e.width,n.height=e.height;const i=n.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let a=0;a<s.length;a++)s[a]=vh(s[a]/255)*255;return i.putImageData(r,0,0),n}else if(e.data){const n=e.data.slice(0);for(let i=0;i<n.length;i++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[i]=Math.floor(vh(n[i]/255)*255):n[i]=vh(n[i]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let rj=0;class wc{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:rj++}),this.uuid=qr(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let a=0,o=r.length;a<o;a++)r[a].isDataTexture?s.push(N1(r[a].image)):s.push(N1(r[a]))}else s=N1(r);i.url=s}return n||(e.images[this.uuid]=i),i}}function N1(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?JM.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let sj=0;class pn extends bs{constructor(e=pn.DEFAULT_IMAGE,n=pn.DEFAULT_MAPPING,i=Dn,r=Dn,s=kt,a=_a,o=gi,l=vi,c=pn.DEFAULT_ANISOTROPY,u=gr){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:sj++}),this.uuid=qr(),this.name="",this.source=new wc(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=a,this.anisotropy=c,this.format=o,this.internalFormat=null,this.type=l,this.offset=new Ie(0,0),this.repeat=new Ie(1,1),this.center=new Ie(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Yt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof u=="string"?this.colorSpace=u:(Cf("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=u===il?sn:gr),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),n||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==dl)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case pl:e.x=e.x-Math.floor(e.x);break;case Dn:e.x=e.x<0?0:1;break;case Lh:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case pl:e.y=e.y-Math.floor(e.y);break;case Dn:e.y=e.y<0?0:1;break;case Lh:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Cf("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===sn?il:VM}set encoding(e){Cf("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===il?sn:gr}}pn.DEFAULT_IMAGE=null;pn.DEFAULT_MAPPING=dl;pn.DEFAULT_ANISOTROPY=1;class on{constructor(e=0,n=0,i=0,r=1){on.prototype.isVector4=!0,this.x=e,this.y=n,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,i,r){return this.x=e,this.y=n,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,s=this.w,a=e.elements;return this.x=a[0]*n+a[4]*i+a[8]*r+a[12]*s,this.y=a[1]*n+a[5]*i+a[9]*r+a[13]*s,this.z=a[2]*n+a[6]*i+a[10]*r+a[14]*s,this.w=a[3]*n+a[7]*i+a[11]*r+a[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,i,r,s;const l=e.elements,c=l[0],u=l[4],h=l[8],f=l[1],m=l[5],g=l[9],y=l[2],x=l[6],v=l[10];if(Math.abs(u-f)<.01&&Math.abs(h-y)<.01&&Math.abs(g-x)<.01){if(Math.abs(u+f)<.1&&Math.abs(h+y)<.1&&Math.abs(g+x)<.1&&Math.abs(c+m+v-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const S=(c+1)/2,M=(m+1)/2,b=(v+1)/2,C=(u+f)/4,B=(h+y)/4,P=(g+x)/4;return S>M&&S>b?S<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(S),r=C/i,s=B/i):M>b?M<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(M),i=C/r,s=P/r):b<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(b),i=B/s,r=P/s),this.set(i,r,s,n),this}let _=Math.sqrt((x-g)*(x-g)+(h-y)*(h-y)+(f-u)*(f-u));return Math.abs(_)<.001&&(_=1),this.x=(x-g)/_,this.y=(h-y)/_,this.z=(f-u)/_,this.w=Math.acos((c+m+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this.w=e.w+(n.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class NN extends bs{constructor(e=1,n=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new on(0,0,e,n),this.scissorTest=!1,this.viewport=new on(0,0,e,n);const r={width:e,height:n,depth:1};i.encoding!==void 0&&(Cf("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===il?sn:gr),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:kt,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},i),this.texture=new pn(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps,this.texture.internalFormat=i.internalFormat,this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}setSize(e,n,i=1){(this.width!==e||this.height!==n||this.depth!==i)&&(this.width=e,this.height=n,this.depth=i,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new wc(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Mn extends NN{constructor(e=1,n=1,i={}){super(e,n,i),this.isWebGLRenderTarget=!0}}class xy extends pn{constructor(e=null,n=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=Rn,this.minFilter=Rn,this.wrapR=Dn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class aj extends Mn{constructor(e=1,n=1,i=1,r={}){super(e,n,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new xy(null,e,n,i),this.texture.isRenderTargetTexture=!0}}class YM extends pn{constructor(e=null,n=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=Rn,this.minFilter=Rn,this.wrapR=Dn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class oj extends Mn{constructor(e=1,n=1,i=1,r={}){super(e,n,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new YM(null,e,n,i),this.texture.isRenderTargetTexture=!0}}class lj extends Mn{constructor(e=1,n=1,i=1,r={}){super(e,n,r),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let a=0;a<i;a++)this.texture[a]=s.clone(),this.texture[a].isRenderTargetTexture=!0}setSize(e,n,i=1){if(this.width!==e||this.height!==n||this.depth!==i){this.width=e,this.height=n,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=n,this.texture[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let n=0,i=e.texture.length;n<i;n++)this.texture[n]=e.texture[n].clone(),this.texture[n].isRenderTargetTexture=!0;return this}}class wi{constructor(e=0,n=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=i,this._w=r}static slerpFlat(e,n,i,r,s,a,o){let l=i[r+0],c=i[r+1],u=i[r+2],h=i[r+3];const f=s[a+0],m=s[a+1],g=s[a+2],y=s[a+3];if(o===0){e[n+0]=l,e[n+1]=c,e[n+2]=u,e[n+3]=h;return}if(o===1){e[n+0]=f,e[n+1]=m,e[n+2]=g,e[n+3]=y;return}if(h!==y||l!==f||c!==m||u!==g){let x=1-o;const v=l*f+c*m+u*g+h*y,_=v>=0?1:-1,S=1-v*v;if(S>Number.EPSILON){const b=Math.sqrt(S),C=Math.atan2(b,v*_);x=Math.sin(x*C)/b,o=Math.sin(o*C)/b}const M=o*_;if(l=l*x+f*M,c=c*x+m*M,u=u*x+g*M,h=h*x+y*M,x===1-o){const b=1/Math.sqrt(l*l+c*c+u*u+h*h);l*=b,c*=b,u*=b,h*=b}}e[n]=l,e[n+1]=c,e[n+2]=u,e[n+3]=h}static multiplyQuaternionsFlat(e,n,i,r,s,a){const o=i[r],l=i[r+1],c=i[r+2],u=i[r+3],h=s[a],f=s[a+1],m=s[a+2],g=s[a+3];return e[n]=o*g+u*h+l*m-c*f,e[n+1]=l*g+u*f+c*h-o*m,e[n+2]=c*g+u*m+o*f-l*h,e[n+3]=u*g-o*h-l*f-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,i,r){return this._x=e,this._y=n,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n){const i=e._x,r=e._y,s=e._z,a=e._order,o=Math.cos,l=Math.sin,c=o(i/2),u=o(r/2),h=o(s/2),f=l(i/2),m=l(r/2),g=l(s/2);switch(a){case"XYZ":this._x=f*u*h+c*m*g,this._y=c*m*h-f*u*g,this._z=c*u*g+f*m*h,this._w=c*u*h-f*m*g;break;case"YXZ":this._x=f*u*h+c*m*g,this._y=c*m*h-f*u*g,this._z=c*u*g-f*m*h,this._w=c*u*h+f*m*g;break;case"ZXY":this._x=f*u*h-c*m*g,this._y=c*m*h+f*u*g,this._z=c*u*g+f*m*h,this._w=c*u*h-f*m*g;break;case"ZYX":this._x=f*u*h-c*m*g,this._y=c*m*h+f*u*g,this._z=c*u*g-f*m*h,this._w=c*u*h+f*m*g;break;case"YZX":this._x=f*u*h+c*m*g,this._y=c*m*h+f*u*g,this._z=c*u*g-f*m*h,this._w=c*u*h-f*m*g;break;case"XZY":this._x=f*u*h-c*m*g,this._y=c*m*h-f*u*g,this._z=c*u*g+f*m*h,this._w=c*u*h+f*m*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return n!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const i=n/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,i=n[0],r=n[4],s=n[8],a=n[1],o=n[5],l=n[9],c=n[2],u=n[6],h=n[10],f=i+o+h;if(f>0){const m=.5/Math.sqrt(f+1);this._w=.25/m,this._x=(u-l)*m,this._y=(s-c)*m,this._z=(a-r)*m}else if(i>o&&i>h){const m=2*Math.sqrt(1+i-o-h);this._w=(u-l)/m,this._x=.25*m,this._y=(r+a)/m,this._z=(s+c)/m}else if(o>h){const m=2*Math.sqrt(1+o-i-h);this._w=(s-c)/m,this._x=(r+a)/m,this._y=.25*m,this._z=(l+u)/m}else{const m=2*Math.sqrt(1+h-i-o);this._w=(a-r)/m,this._x=(s+c)/m,this._y=(l+u)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let i=e.dot(n)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(qn(this.dot(e),-1,1)))}rotateTowards(e,n){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,n/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const i=e._x,r=e._y,s=e._z,a=e._w,o=n._x,l=n._y,c=n._z,u=n._w;return this._x=i*u+a*o+r*c-s*l,this._y=r*u+a*l+s*o-i*c,this._z=s*u+a*c+i*l-r*o,this._w=a*u-i*o-r*l-s*c,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,a=this._w;let o=a*e._w+i*e._x+r*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=i,this._y=r,this._z=s,this;const l=1-o*o;if(l<=Number.EPSILON){const m=1-n;return this._w=m*a+n*this._w,this._x=m*i+n*this._x,this._y=m*r+n*this._y,this._z=m*s+n*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,o),h=Math.sin((1-n)*u)/c,f=Math.sin(n*u)/c;return this._w=a*h+this._w*f,this._x=i*h+this._x*f,this._y=r*h+this._y*f,this._z=s*h+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,n,i){return this.copy(e).slerp(n,i)}random(){const e=Math.random(),n=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(n*Math.cos(r),i*Math.sin(s),i*Math.cos(s),n*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class K{constructor(e=0,n=0,i=0){K.prototype.isVector3=!0,this.x=e,this.y=n,this.z=i}set(e,n,i){return i===void 0&&(i=this.z),this.x=e,this.y=n,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion($2.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion($2.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*n+s[3]*i+s[6]*r,this.y=s[1]*n+s[4]*i+s[7]*r,this.z=s[2]*n+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,s=e.elements,a=1/(s[3]*n+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*n+s[4]*i+s[8]*r+s[12])*a,this.y=(s[1]*n+s[5]*i+s[9]*r+s[13])*a,this.z=(s[2]*n+s[6]*i+s[10]*r+s[14])*a,this}applyQuaternion(e){const n=this.x,i=this.y,r=this.z,s=e.x,a=e.y,o=e.z,l=e.w,c=2*(a*r-o*i),u=2*(o*n-s*r),h=2*(s*i-a*n);return this.x=n+l*c+a*h-o*u,this.y=i+l*u+o*c-s*h,this.z=r+l*h+s*u-a*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*n+s[4]*i+s[8]*r,this.y=s[1]*n+s[5]*i+s[9]*r,this.z=s[2]*n+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const i=e.x,r=e.y,s=e.z,a=n.x,o=n.y,l=n.z;return this.x=r*l-s*o,this.y=s*a-i*l,this.z=i*o-r*a,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const i=e.dot(this)/n;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return F1.copy(this).projectOnVector(e),this.sub(F1)}reflect(e){return this.sub(F1.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(qn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return n*n+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,i){const r=Math.sin(n)*e;return this.x=r*Math.sin(i),this.y=Math.cos(n)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,i){return this.x=e*Math.sin(n),this.y=i,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=i,this.z=r,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(n),this.y=i*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const F1=new K,$2=new wi;class Ni{constructor(e=new K(1/0,1/0,1/0),n=new K(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n+=3)this.expandByPoint(Bs.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,i=e.count;n<i;n++)this.expandByPoint(Bs.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=Bs.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(n===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let a=0,o=s.count;a<o;a++)e.isMesh===!0?e.getVertexPosition(a,Bs):Bs.fromBufferAttribute(s,a),Bs.applyMatrix4(e.matrixWorld),this.expandByPoint(Bs);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),_g.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),_g.copy(i.boundingBox)),_g.applyMatrix4(e.matrixWorld),this.union(_g)}const r=e.children;for(let s=0,a=r.length;s<a;s++)this.expandByObject(r[s],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Bs),Bs.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,i;return e.normal.x>0?(n=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),n<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Fd),Sg.subVectors(this.max,Fd),xu.subVectors(e.a,Fd),_u.subVectors(e.b,Fd),Su.subVectors(e.c,Fd),Eo.subVectors(_u,xu),bo.subVectors(Su,_u),Jl.subVectors(xu,Su);let n=[0,-Eo.z,Eo.y,0,-bo.z,bo.y,0,-Jl.z,Jl.y,Eo.z,0,-Eo.x,bo.z,0,-bo.x,Jl.z,0,-Jl.x,-Eo.y,Eo.x,0,-bo.y,bo.x,0,-Jl.y,Jl.x,0];return!U1(n,xu,_u,Su,Sg)||(n=[1,0,0,0,1,0,0,0,1],!U1(n,xu,_u,Su,Sg))?!1:(Ag.crossVectors(Eo,bo),n=[Ag.x,Ag.y,Ag.z],U1(n,xu,_u,Su,Sg))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Bs).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Bs).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(La[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),La[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),La[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),La[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),La[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),La[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),La[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),La[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(La),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const La=[new K,new K,new K,new K,new K,new K,new K,new K],Bs=new K,_g=new Ni,xu=new K,_u=new K,Su=new K,Eo=new K,bo=new K,Jl=new K,Fd=new K,Sg=new K,Ag=new K,Yl=new K;function U1(t,e,n,i,r){for(let s=0,a=t.length-3;s<=a;s+=3){Yl.fromArray(t,s);const o=r.x*Math.abs(Yl.x)+r.y*Math.abs(Yl.y)+r.z*Math.abs(Yl.z),l=e.dot(Yl),c=n.dot(Yl),u=i.dot(Yl);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>o)return!1}return!0}const cj=new Ni,Ud=new K,k1=new K;class Fi{constructor(e=new K,n=-1){this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const i=this.center;n!==void 0?i.copy(n):cj.setFromPoints(e).getCenter(i);let r=0;for(let s=0,a=e.length;s<a;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const i=this.center.distanceToSquared(e);return n.copy(e),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Ud.subVectors(e,this.center);const n=Ud.lengthSq();if(n>this.radius*this.radius){const i=Math.sqrt(n),r=(i-this.radius)*.5;this.center.addScaledVector(Ud,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(k1.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Ud.copy(e.center).add(k1)),this.expandByPoint(Ud.copy(e.center).sub(k1))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Da=new K,O1=new K,wg=new K,To=new K,G1=new K,Mg=new K,z1=new K;class Qc{constructor(e=new K,n=new K(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Da)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Da.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Da.copy(this.origin).addScaledVector(this.direction,n),Da.distanceToSquared(e))}distanceSqToSegment(e,n,i,r){O1.copy(e).add(n).multiplyScalar(.5),wg.copy(n).sub(e).normalize(),To.copy(this.origin).sub(O1);const s=e.distanceTo(n)*.5,a=-this.direction.dot(wg),o=To.dot(this.direction),l=-To.dot(wg),c=To.lengthSq(),u=Math.abs(1-a*a);let h,f,m,g;if(u>0)if(h=a*l-o,f=a*o-l,g=s*u,h>=0)if(f>=-g)if(f<=g){const y=1/u;h*=y,f*=y,m=h*(h+a*f+2*o)+f*(a*h+f+2*l)+c}else f=s,h=Math.max(0,-(a*f+o)),m=-h*h+f*(f+2*l)+c;else f=-s,h=Math.max(0,-(a*f+o)),m=-h*h+f*(f+2*l)+c;else f<=-g?(h=Math.max(0,-(-a*s+o)),f=h>0?-s:Math.min(Math.max(-s,-l),s),m=-h*h+f*(f+2*l)+c):f<=g?(h=0,f=Math.min(Math.max(-s,-l),s),m=f*(f+2*l)+c):(h=Math.max(0,-(a*s+o)),f=h>0?s:Math.min(Math.max(-s,-l),s),m=-h*h+f*(f+2*l)+c);else f=a>0?-s:s,h=Math.max(0,-(a*f+o)),m=-h*h+f*(f+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,h),r&&r.copy(O1).addScaledVector(wg,f),m}intersectSphere(e,n){Da.subVectors(e.center,this.origin);const i=Da.dot(this.direction),r=Da.dot(Da)-i*i,s=e.radius*e.radius;if(r>s)return null;const a=Math.sqrt(s-r),o=i-a,l=i+a;return l<0?null:o<0?this.at(l,n):this.at(o,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/n;return i>=0?i:null}intersectPlane(e,n){const i=this.distanceToPlane(e);return i===null?null:this.at(i,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let i,r,s,a,o,l;const c=1/this.direction.x,u=1/this.direction.y,h=1/this.direction.z,f=this.origin;return c>=0?(i=(e.min.x-f.x)*c,r=(e.max.x-f.x)*c):(i=(e.max.x-f.x)*c,r=(e.min.x-f.x)*c),u>=0?(s=(e.min.y-f.y)*u,a=(e.max.y-f.y)*u):(s=(e.max.y-f.y)*u,a=(e.min.y-f.y)*u),i>a||s>r||((s>i||isNaN(i))&&(i=s),(a<r||isNaN(r))&&(r=a),h>=0?(o=(e.min.z-f.z)*h,l=(e.max.z-f.z)*h):(o=(e.max.z-f.z)*h,l=(e.min.z-f.z)*h),i>l||o>r)||((o>i||i!==i)&&(i=o),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,n)}intersectsBox(e){return this.intersectBox(e,Da)!==null}intersectTriangle(e,n,i,r,s){G1.subVectors(n,e),Mg.subVectors(i,e),z1.crossVectors(G1,Mg);let a=this.direction.dot(z1),o;if(a>0){if(r)return null;o=1}else if(a<0)o=-1,a=-a;else return null;To.subVectors(this.origin,e);const l=o*this.direction.dot(Mg.crossVectors(To,Mg));if(l<0)return null;const c=o*this.direction.dot(G1.cross(To));if(c<0||l+c>a)return null;const u=-o*To.dot(z1);return u<0?null:this.at(u/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class bt{constructor(e,n,i,r,s,a,o,l,c,u,h,f,m,g,y,x){bt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,i,r,s,a,o,l,c,u,h,f,m,g,y,x)}set(e,n,i,r,s,a,o,l,c,u,h,f,m,g,y,x){const v=this.elements;return v[0]=e,v[4]=n,v[8]=i,v[12]=r,v[1]=s,v[5]=a,v[9]=o,v[13]=l,v[2]=c,v[6]=u,v[10]=h,v[14]=f,v[3]=m,v[7]=g,v[11]=y,v[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new bt().fromArray(this.elements)}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this}copyPosition(e){const n=this.elements,i=e.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,i){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,n,i){return this.set(e.x,n.x,i.x,0,e.y,n.y,i.y,0,e.z,n.z,i.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,i=e.elements,r=1/Au.setFromMatrixColumn(e,0).length(),s=1/Au.setFromMatrixColumn(e,1).length(),a=1/Au.setFromMatrixColumn(e,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[3]=0,n[4]=i[4]*s,n[5]=i[5]*s,n[6]=i[6]*s,n[7]=0,n[8]=i[8]*a,n[9]=i[9]*a,n[10]=i[10]*a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,i=e.x,r=e.y,s=e.z,a=Math.cos(i),o=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const f=a*u,m=a*h,g=o*u,y=o*h;n[0]=l*u,n[4]=-l*h,n[8]=c,n[1]=m+g*c,n[5]=f-y*c,n[9]=-o*l,n[2]=y-f*c,n[6]=g+m*c,n[10]=a*l}else if(e.order==="YXZ"){const f=l*u,m=l*h,g=c*u,y=c*h;n[0]=f+y*o,n[4]=g*o-m,n[8]=a*c,n[1]=a*h,n[5]=a*u,n[9]=-o,n[2]=m*o-g,n[6]=y+f*o,n[10]=a*l}else if(e.order==="ZXY"){const f=l*u,m=l*h,g=c*u,y=c*h;n[0]=f-y*o,n[4]=-a*h,n[8]=g+m*o,n[1]=m+g*o,n[5]=a*u,n[9]=y-f*o,n[2]=-a*c,n[6]=o,n[10]=a*l}else if(e.order==="ZYX"){const f=a*u,m=a*h,g=o*u,y=o*h;n[0]=l*u,n[4]=g*c-m,n[8]=f*c+y,n[1]=l*h,n[5]=y*c+f,n[9]=m*c-g,n[2]=-c,n[6]=o*l,n[10]=a*l}else if(e.order==="YZX"){const f=a*l,m=a*c,g=o*l,y=o*c;n[0]=l*u,n[4]=y-f*h,n[8]=g*h+m,n[1]=h,n[5]=a*u,n[9]=-o*u,n[2]=-c*u,n[6]=m*h+g,n[10]=f-y*h}else if(e.order==="XZY"){const f=a*l,m=a*c,g=o*l,y=o*c;n[0]=l*u,n[4]=-h,n[8]=c*u,n[1]=f*h+y,n[5]=a*u,n[9]=m*h-g,n[2]=g*h-m,n[6]=o*u,n[10]=y*h+f}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(uj,e,hj)}lookAt(e,n,i){const r=this.elements;return Jr.subVectors(e,n),Jr.lengthSq()===0&&(Jr.z=1),Jr.normalize(),Co.crossVectors(i,Jr),Co.lengthSq()===0&&(Math.abs(i.z)===1?Jr.x+=1e-4:Jr.z+=1e-4,Jr.normalize(),Co.crossVectors(i,Jr)),Co.normalize(),Eg.crossVectors(Jr,Co),r[0]=Co.x,r[4]=Eg.x,r[8]=Jr.x,r[1]=Co.y,r[5]=Eg.y,r[9]=Jr.y,r[2]=Co.z,r[6]=Eg.z,r[10]=Jr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,s=this.elements,a=i[0],o=i[4],l=i[8],c=i[12],u=i[1],h=i[5],f=i[9],m=i[13],g=i[2],y=i[6],x=i[10],v=i[14],_=i[3],S=i[7],M=i[11],b=i[15],C=r[0],B=r[4],P=r[8],T=r[12],I=r[1],z=r[5],G=r[9],Q=r[13],U=r[2],ee=r[6],$=r[10],oe=r[14],Z=r[3],J=r[7],H=r[11],O=r[15];return s[0]=a*C+o*I+l*U+c*Z,s[4]=a*B+o*z+l*ee+c*J,s[8]=a*P+o*G+l*$+c*H,s[12]=a*T+o*Q+l*oe+c*O,s[1]=u*C+h*I+f*U+m*Z,s[5]=u*B+h*z+f*ee+m*J,s[9]=u*P+h*G+f*$+m*H,s[13]=u*T+h*Q+f*oe+m*O,s[2]=g*C+y*I+x*U+v*Z,s[6]=g*B+y*z+x*ee+v*J,s[10]=g*P+y*G+x*$+v*H,s[14]=g*T+y*Q+x*oe+v*O,s[3]=_*C+S*I+M*U+b*Z,s[7]=_*B+S*z+M*ee+b*J,s[11]=_*P+S*G+M*$+b*H,s[15]=_*T+S*Q+M*oe+b*O,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[4],r=e[8],s=e[12],a=e[1],o=e[5],l=e[9],c=e[13],u=e[2],h=e[6],f=e[10],m=e[14],g=e[3],y=e[7],x=e[11],v=e[15];return g*(+s*l*h-r*c*h-s*o*f+i*c*f+r*o*m-i*l*m)+y*(+n*l*m-n*c*f+s*a*f-r*a*m+r*c*u-s*l*u)+x*(+n*c*h-n*o*m-s*a*h+i*a*m+s*o*u-i*c*u)+v*(-r*o*u-n*l*h+n*o*f+r*a*h-i*a*f+i*l*u)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=n,r[14]=i),this}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],h=e[9],f=e[10],m=e[11],g=e[12],y=e[13],x=e[14],v=e[15],_=h*x*c-y*f*c+y*l*m-o*x*m-h*l*v+o*f*v,S=g*f*c-u*x*c-g*l*m+a*x*m+u*l*v-a*f*v,M=u*y*c-g*h*c+g*o*m-a*y*m-u*o*v+a*h*v,b=g*h*l-u*y*l-g*o*f+a*y*f+u*o*x-a*h*x,C=n*_+i*S+r*M+s*b;if(C===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const B=1/C;return e[0]=_*B,e[1]=(y*f*s-h*x*s-y*r*m+i*x*m+h*r*v-i*f*v)*B,e[2]=(o*x*s-y*l*s+y*r*c-i*x*c-o*r*v+i*l*v)*B,e[3]=(h*l*s-o*f*s-h*r*c+i*f*c+o*r*m-i*l*m)*B,e[4]=S*B,e[5]=(u*x*s-g*f*s+g*r*m-n*x*m-u*r*v+n*f*v)*B,e[6]=(g*l*s-a*x*s-g*r*c+n*x*c+a*r*v-n*l*v)*B,e[7]=(a*f*s-u*l*s+u*r*c-n*f*c-a*r*m+n*l*m)*B,e[8]=M*B,e[9]=(g*h*s-u*y*s-g*i*m+n*y*m+u*i*v-n*h*v)*B,e[10]=(a*y*s-g*o*s+g*i*c-n*y*c-a*i*v+n*o*v)*B,e[11]=(u*o*s-a*h*s-u*i*c+n*h*c+a*i*m-n*o*m)*B,e[12]=b*B,e[13]=(u*y*r-g*h*r+g*i*f-n*y*f-u*i*x+n*h*x)*B,e[14]=(g*o*r-a*y*r-g*i*l+n*y*l+a*i*x-n*o*x)*B,e[15]=(a*h*r-u*o*r+u*i*l-n*h*l-a*i*f+n*o*f)*B,this}scale(e){const n=this.elements,i=e.x,r=e.y,s=e.z;return n[0]*=i,n[4]*=r,n[8]*=s,n[1]*=i,n[5]*=r,n[9]*=s,n[2]*=i,n[6]*=r,n[10]*=s,n[3]*=i,n[7]*=r,n[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,i,r))}makeTranslation(e,n,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,i,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const i=Math.cos(n),r=Math.sin(n),s=1-i,a=e.x,o=e.y,l=e.z,c=s*a,u=s*o;return this.set(c*a+i,c*o-r*l,c*l+r*o,0,c*o+r*l,u*o+i,u*l-r*a,0,c*l-r*o,u*l+r*a,s*l*l+i,0,0,0,0,1),this}makeScale(e,n,i){return this.set(e,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,n,i,r,s,a){return this.set(1,i,s,0,e,1,a,0,n,r,1,0,0,0,0,1),this}compose(e,n,i){const r=this.elements,s=n._x,a=n._y,o=n._z,l=n._w,c=s+s,u=a+a,h=o+o,f=s*c,m=s*u,g=s*h,y=a*u,x=a*h,v=o*h,_=l*c,S=l*u,M=l*h,b=i.x,C=i.y,B=i.z;return r[0]=(1-(y+v))*b,r[1]=(m+M)*b,r[2]=(g-S)*b,r[3]=0,r[4]=(m-M)*C,r[5]=(1-(f+v))*C,r[6]=(x+_)*C,r[7]=0,r[8]=(g+S)*B,r[9]=(x-_)*B,r[10]=(1-(f+y))*B,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,n,i){const r=this.elements;let s=Au.set(r[0],r[1],r[2]).length();const a=Au.set(r[4],r[5],r[6]).length(),o=Au.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Is.copy(this);const c=1/s,u=1/a,h=1/o;return Is.elements[0]*=c,Is.elements[1]*=c,Is.elements[2]*=c,Is.elements[4]*=u,Is.elements[5]*=u,Is.elements[6]*=u,Is.elements[8]*=h,Is.elements[9]*=h,Is.elements[10]*=h,n.setFromRotationMatrix(Is),i.x=s,i.y=a,i.z=o,this}makePerspective(e,n,i,r,s,a,o=Hs){const l=this.elements,c=2*s/(n-e),u=2*s/(i-r),h=(n+e)/(n-e),f=(i+r)/(i-r);let m,g;if(o===Hs)m=-(a+s)/(a-s),g=-2*a*s/(a-s);else if(o===Nh)m=-a/(a-s),g=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return l[0]=c,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=u,l[9]=f,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=g,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,n,i,r,s,a,o=Hs){const l=this.elements,c=1/(n-e),u=1/(i-r),h=1/(a-s),f=(n+e)*c,m=(i+r)*u;let g,y;if(o===Hs)g=(a+s)*h,y=-2*h;else if(o===Nh)g=s*h,y=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-f,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=y,l[14]=-g,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<16;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<16;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e[n+9]=i[9],e[n+10]=i[10],e[n+11]=i[11],e[n+12]=i[12],e[n+13]=i[13],e[n+14]=i[14],e[n+15]=i[15],e}}const Au=new K,Is=new bt,uj=new K(0,0,0),hj=new K(1,1,1),Co=new K,Eg=new K,Jr=new K,eR=new bt,tR=new wi;class Wp{constructor(e=0,n=0,i=0,r=Wp.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,i,r=this._order){return this._x=e,this._y=n,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,i=!0){const r=e.elements,s=r[0],a=r[4],o=r[8],l=r[1],c=r[5],u=r[9],h=r[2],f=r[6],m=r[10];switch(n){case"XYZ":this._y=Math.asin(qn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,m),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(f,c),this._z=0);break;case"YXZ":this._x=Math.asin(-qn(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(o,m),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(qn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,m),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-qn(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,c));break;case"YZX":this._z=Math.asin(qn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(o,m));break;case"XZY":this._z=Math.asin(-qn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,c),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-u,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,i){return eR.makeRotationFromQuaternion(e),this.setFromRotationMatrix(eR,n,i)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return tR.setFromEuler(this),this.setFromQuaternion(tR,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Wp.DEFAULT_ORDER="XYZ";class Lc{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let dj=0;const nR=new K,wu=new wi,Na=new bt,bg=new K,kd=new K,fj=new K,pj=new wi,iR=new K(1,0,0),rR=new K(0,1,0),sR=new K(0,0,1),mj={type:"added"},gj={type:"removed"};class an extends bs{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:dj++}),this.uuid=qr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=an.DEFAULT_UP.clone();const e=new K,n=new Wp,i=new wi,r=new K(1,1,1);function s(){i.setFromEuler(n,!1)}function a(){n.setFromQuaternion(i,void 0,!1)}n._onChange(s),i._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new bt},normalMatrix:{value:new Yt}}),this.matrix=new bt,this.matrixWorld=new bt,this.matrixAutoUpdate=an.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=an.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Lc,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return wu.setFromAxisAngle(e,n),this.quaternion.multiply(wu),this}rotateOnWorldAxis(e,n){return wu.setFromAxisAngle(e,n),this.quaternion.premultiply(wu),this}rotateX(e){return this.rotateOnAxis(iR,e)}rotateY(e){return this.rotateOnAxis(rR,e)}rotateZ(e){return this.rotateOnAxis(sR,e)}translateOnAxis(e,n){return nR.copy(e).applyQuaternion(this.quaternion),this.position.add(nR.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(iR,e)}translateY(e){return this.translateOnAxis(rR,e)}translateZ(e){return this.translateOnAxis(sR,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Na.copy(this.matrixWorld).invert())}lookAt(e,n,i){e.isVector3?bg.copy(e):bg.set(e,n,i);const r=this.parent;this.updateWorldMatrix(!0,!1),kd.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Na.lookAt(kd,bg,this.up):Na.lookAt(bg,kd,this.up),this.quaternion.setFromRotationMatrix(Na),r&&(Na.extractRotation(r.matrixWorld),wu.setFromRotationMatrix(Na),this.quaternion.premultiply(wu.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(mj)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(gj)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Na.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Na.multiply(e.parent.matrixWorld)),e.applyMatrix4(Na),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let i=0,r=this.children.length;i<r;i++){const a=this.children[i].getObjectByProperty(e,n);if(a!==void 0)return a}}getObjectsByProperty(e,n,i=[]){this[e]===n&&i.push(this);const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].getObjectsByProperty(e,n,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(kd,e,fj),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(kd,pj,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let i=0,r=n.length;i<r;i++){const s=n[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const r=this.children;for(let s=0,a=r.length;s<a;s++){const o=r[s];o.matrixWorldAutoUpdate===!0&&o.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",i={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(o=>({boxInitialized:o.boxInitialized,boxMin:o.box.min.toArray(),boxMax:o.box.max.toArray(),sphereInitialized:o.sphereInitialized,sphereRadius:o.sphere.radius,sphereCenter:o.sphere.center.toArray()})),r.maxGeometryCount=this._maxGeometryCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const h=l[c];s(e.shapes,h)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,c=this.material.length;l<c;l++)o.push(s(e.materials,this.material[l]));r.material=o}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];r.animations.push(s(e.animations,l))}}if(n){const o=a(e.geometries),l=a(e.materials),c=a(e.textures),u=a(e.images),h=a(e.shapes),f=a(e.skeletons),m=a(e.animations),g=a(e.nodes);o.length>0&&(i.geometries=o),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),h.length>0&&(i.shapes=h),f.length>0&&(i.skeletons=f),m.length>0&&(i.animations=m),g.length>0&&(i.nodes=g)}return i.object=r,i;function a(o){const l=[];for(const c in o){const u=o[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}an.DEFAULT_UP=new K(0,1,0);an.DEFAULT_MATRIX_AUTO_UPDATE=!0;an.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ls=new K,Fa=new K,H1=new K,Ua=new K,Mu=new K,Eu=new K,aR=new K,V1=new K,j1=new K,W1=new K;let Tg=!1;class Pr{constructor(e=new K,n=new K,i=new K){this.a=e,this.b=n,this.c=i}static getNormal(e,n,i,r){r.subVectors(i,n),Ls.subVectors(e,n),r.cross(Ls);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,n,i,r,s){Ls.subVectors(r,n),Fa.subVectors(i,n),H1.subVectors(e,n);const a=Ls.dot(Ls),o=Ls.dot(Fa),l=Ls.dot(H1),c=Fa.dot(Fa),u=Fa.dot(H1),h=a*c-o*o;if(h===0)return s.set(-2,-1,-1);const f=1/h,m=(c*l-o*u)*f,g=(a*u-o*l)*f;return s.set(1-m-g,g,m)}static containsPoint(e,n,i,r){return this.getBarycoord(e,n,i,r,Ua),Ua.x>=0&&Ua.y>=0&&Ua.x+Ua.y<=1}static getUV(e,n,i,r,s,a,o,l){return Tg===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Tg=!0),this.getInterpolation(e,n,i,r,s,a,o,l)}static getInterpolation(e,n,i,r,s,a,o,l){return this.getBarycoord(e,n,i,r,Ua),l.setScalar(0),l.addScaledVector(s,Ua.x),l.addScaledVector(a,Ua.y),l.addScaledVector(o,Ua.z),l}static isFrontFacing(e,n,i,r){return Ls.subVectors(i,n),Fa.subVectors(e,n),Ls.cross(Fa).dot(r)<0}set(e,n,i){return this.a.copy(e),this.b.copy(n),this.c.copy(i),this}setFromPointsAndIndices(e,n,i,r){return this.a.copy(e[n]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,n,i,r){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ls.subVectors(this.c,this.b),Fa.subVectors(this.a,this.b),Ls.cross(Fa).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Pr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Pr.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,i,r,s){return Tg===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Tg=!0),Pr.getInterpolation(e,this.a,this.b,this.c,n,i,r,s)}getInterpolation(e,n,i,r,s){return Pr.getInterpolation(e,this.a,this.b,this.c,n,i,r,s)}containsPoint(e){return Pr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Pr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const i=this.a,r=this.b,s=this.c;let a,o;Mu.subVectors(r,i),Eu.subVectors(s,i),V1.subVectors(e,i);const l=Mu.dot(V1),c=Eu.dot(V1);if(l<=0&&c<=0)return n.copy(i);j1.subVectors(e,r);const u=Mu.dot(j1),h=Eu.dot(j1);if(u>=0&&h<=u)return n.copy(r);const f=l*h-u*c;if(f<=0&&l>=0&&u<=0)return a=l/(l-u),n.copy(i).addScaledVector(Mu,a);W1.subVectors(e,s);const m=Mu.dot(W1),g=Eu.dot(W1);if(g>=0&&m<=g)return n.copy(s);const y=m*c-l*g;if(y<=0&&c>=0&&g<=0)return o=c/(c-g),n.copy(i).addScaledVector(Eu,o);const x=u*g-m*h;if(x<=0&&h-u>=0&&m-g>=0)return aR.subVectors(s,r),o=(h-u)/(h-u+(m-g)),n.copy(r).addScaledVector(aR,o);const v=1/(x+y+f);return a=y*v,o=f*v,n.copy(i).addScaledVector(Mu,a).addScaledVector(Eu,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const FN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ro={h:0,s:0,l:0},Cg={h:0,s:0,l:0};function X1(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class ht{constructor(e,n,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,i)}set(e,n,i){if(n===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,n,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=sn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,gn.toWorkingColorSpace(this,n),this}setRGB(e,n,i,r=gn.workingColorSpace){return this.r=e,this.g=n,this.b=i,gn.toWorkingColorSpace(this,r),this}setHSL(e,n,i,r=gn.workingColorSpace){if(e=XM(e,1),n=qn(n,0,1),i=qn(i,0,1),n===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+n):i+n-i*n,a=2*i-s;this.r=X1(a,s,e+1/3),this.g=X1(a,s,e),this.b=X1(a,s,e-1/3)}return gn.toWorkingColorSpace(this,r),this}setStyle(e,n=sn){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=r[1],o=r[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,n);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,n);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,n);if(a===6)return this.setHex(parseInt(s,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=sn){const i=FN[e.toLowerCase()];return i!==void 0?this.setHex(i,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=vh(e.r),this.g=vh(e.g),this.b=vh(e.b),this}copyLinearToSRGB(e){return this.r=D1(e.r),this.g=D1(e.g),this.b=D1(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=sn){return gn.fromWorkingColorSpace($i.copy(this),e),Math.round(qn($i.r*255,0,255))*65536+Math.round(qn($i.g*255,0,255))*256+Math.round(qn($i.b*255,0,255))}getHexString(e=sn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=gn.workingColorSpace){gn.fromWorkingColorSpace($i.copy(this),n);const i=$i.r,r=$i.g,s=$i.b,a=Math.max(i,r,s),o=Math.min(i,r,s);let l,c;const u=(o+a)/2;if(o===a)l=0,c=0;else{const h=a-o;switch(c=u<=.5?h/(a+o):h/(2-a-o),a){case i:l=(r-s)/h+(r<s?6:0);break;case r:l=(s-i)/h+2;break;case s:l=(i-r)/h+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,n=gn.workingColorSpace){return gn.fromWorkingColorSpace($i.copy(this),n),e.r=$i.r,e.g=$i.g,e.b=$i.b,e}getStyle(e=sn){gn.fromWorkingColorSpace($i.copy(this),e);const n=$i.r,i=$i.g,r=$i.b;return e!==sn?`color(${e} ${n.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,n,i){return this.getHSL(Ro),this.setHSL(Ro.h+e,Ro.s+n,Ro.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,i){return this.r=e.r+(n.r-e.r)*i,this.g=e.g+(n.g-e.g)*i,this.b=e.b+(n.b-e.b)*i,this}lerpHSL(e,n){this.getHSL(Ro),e.getHSL(Cg);const i=Tf(Ro.h,Cg.h,n),r=Tf(Ro.s,Cg.s,n),s=Tf(Ro.l,Cg.l,n);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*n+s[3]*i+s[6]*r,this.g=s[1]*n+s[4]*i+s[7]*r,this.b=s[2]*n+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const $i=new ht;ht.NAMES=FN;let vj=0;class ui extends bs{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:vj++}),this.uuid=qr(),this.name="",this.type="Material",this.blending=Bc,this.side=Ks,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=R0,this.blendDst=P0,this.blendEquation=Ho,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ht(0,0,0),this.blendAlpha=0,this.depthFunc=ap,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=TA,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=fc,this.stencilZFail=fc,this.stencilZPass=fc,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const i=e[n];if(i===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const r=this[n];if(r===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[n]=i}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Bc&&(i.blending=this.blending),this.side!==Ks&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==R0&&(i.blendSrc=this.blendSrc),this.blendDst!==P0&&(i.blendDst=this.blendDst),this.blendEquation!==Ho&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==ap&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==TA&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==fc&&(i.stencilFail=this.stencilFail),this.stencilZFail!==fc&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==fc&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const a=[];for(const o in s){const l=s[o];delete l.metadata,a.push(l)}return a}if(n){const s=r(e.textures),a=r(e.images);s.length>0&&(i.textures=s),a.length>0&&(i.images=a)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let i=null;if(n!==null){const r=n.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=n[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class vr extends ui{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ht(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Hp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ja=yj();function yj(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:e,uint32View:n,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:a,offsetTable:o}}function Cr(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=qn(t,-65504,65504),ja.floatView[0]=t;const e=ja.uint32View[0],n=e>>23&511;return ja.baseTable[n]+((e&8388607)>>ja.shiftTable[n])}function cf(t){const e=t>>10;return ja.uint32View[0]=ja.mantissaTable[ja.offsetTable[e]+(t&1023)]+ja.exponentTable[e],ja.floatView[0]}const Mc={toHalfFloat:Cr,fromHalfFloat:cf},fi=new K,Rg=new Ie;class $t{constructor(e,n,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=i,this.usage=fp,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=$n,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn('THREE.BufferAttribute: "updateRange" is deprecated and removed in r169. Use "addUpdateRange()" instead.'),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,i){e*=this.itemSize,i*=n.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=n.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,i=this.count;n<i;n++)Rg.fromBufferAttribute(this,n),Rg.applyMatrix3(e),this.setXY(n,Rg.x,Rg.y);else if(this.itemSize===3)for(let n=0,i=this.count;n<i;n++)fi.fromBufferAttribute(this,n),fi.applyMatrix3(e),this.setXYZ(n,fi.x,fi.y,fi.z);return this}applyMatrix4(e){for(let n=0,i=this.count;n<i;n++)fi.fromBufferAttribute(this,n),fi.applyMatrix4(e),this.setXYZ(n,fi.x,fi.y,fi.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)fi.fromBufferAttribute(this,n),fi.applyNormalMatrix(e),this.setXYZ(n,fi.x,fi.y,fi.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)fi.fromBufferAttribute(this,n),fi.transformDirection(e),this.setXYZ(n,fi.x,fi.y,fi.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let i=this.array[e*this.itemSize+n];return this.normalized&&(i=Br(i,this.array)),i}setComponent(e,n,i){return this.normalized&&(i=Kt(i,this.array)),this.array[e*this.itemSize+n]=i,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=Br(n,this.array)),n}setX(e,n){return this.normalized&&(n=Kt(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=Br(n,this.array)),n}setY(e,n){return this.normalized&&(n=Kt(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=Br(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Kt(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=Br(n,this.array)),n}setW(e,n){return this.normalized&&(n=Kt(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=Kt(n,this.array),i=Kt(i,this.array)),this.array[e+0]=n,this.array[e+1]=i,this}setXYZ(e,n,i,r){return e*=this.itemSize,this.normalized&&(n=Kt(n,this.array),i=Kt(i,this.array),r=Kt(r,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,n,i,r,s){return e*=this.itemSize,this.normalized&&(n=Kt(n,this.array),i=Kt(i,this.array),r=Kt(r,this.array),s=Kt(s,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==fp&&(e.usage=this.usage),e}}class xj extends $t{constructor(e,n,i){super(new Int8Array(e),n,i)}}class _j extends $t{constructor(e,n,i){super(new Uint8Array(e),n,i)}}class Sj extends $t{constructor(e,n,i){super(new Uint8ClampedArray(e),n,i)}}class Aj extends $t{constructor(e,n,i){super(new Int16Array(e),n,i)}}class KM extends $t{constructor(e,n,i){super(new Uint16Array(e),n,i)}}class wj extends $t{constructor(e,n,i){super(new Int32Array(e),n,i)}}class QM extends $t{constructor(e,n,i){super(new Uint32Array(e),n,i)}}class Mj extends $t{constructor(e,n,i){super(new Uint16Array(e),n,i),this.isFloat16BufferAttribute=!0}getX(e){let n=cf(this.array[e*this.itemSize]);return this.normalized&&(n=Br(n,this.array)),n}setX(e,n){return this.normalized&&(n=Kt(n,this.array)),this.array[e*this.itemSize]=Cr(n),this}getY(e){let n=cf(this.array[e*this.itemSize+1]);return this.normalized&&(n=Br(n,this.array)),n}setY(e,n){return this.normalized&&(n=Kt(n,this.array)),this.array[e*this.itemSize+1]=Cr(n),this}getZ(e){let n=cf(this.array[e*this.itemSize+2]);return this.normalized&&(n=Br(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Kt(n,this.array)),this.array[e*this.itemSize+2]=Cr(n),this}getW(e){let n=cf(this.array[e*this.itemSize+3]);return this.normalized&&(n=Br(n,this.array)),n}setW(e,n){return this.normalized&&(n=Kt(n,this.array)),this.array[e*this.itemSize+3]=Cr(n),this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=Kt(n,this.array),i=Kt(i,this.array)),this.array[e+0]=Cr(n),this.array[e+1]=Cr(i),this}setXYZ(e,n,i,r){return e*=this.itemSize,this.normalized&&(n=Kt(n,this.array),i=Kt(i,this.array),r=Kt(r,this.array)),this.array[e+0]=Cr(n),this.array[e+1]=Cr(i),this.array[e+2]=Cr(r),this}setXYZW(e,n,i,r,s){return e*=this.itemSize,this.normalized&&(n=Kt(n,this.array),i=Kt(i,this.array),r=Kt(r,this.array),s=Kt(s,this.array)),this.array[e+0]=Cr(n),this.array[e+1]=Cr(i),this.array[e+2]=Cr(r),this.array[e+3]=Cr(s),this}}class _t extends $t{constructor(e,n,i){super(new Float32Array(e),n,i)}}class Ej extends $t{constructor(e,n,i){super(new Float64Array(e),n,i)}}let bj=0;const ds=new bt,J1=new an,bu=new K,Yr=new Ni,Od=new Ni,Pi=new K;class zt extends bs{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:bj++}),this.uuid=qr(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(LN(e)?QM:KM)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,i=0){this.groups.push({start:e,count:n,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Yt().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ds.makeRotationFromQuaternion(e),this.applyMatrix4(ds),this}rotateX(e){return ds.makeRotationX(e),this.applyMatrix4(ds),this}rotateY(e){return ds.makeRotationY(e),this.applyMatrix4(ds),this}rotateZ(e){return ds.makeRotationZ(e),this.applyMatrix4(ds),this}translate(e,n,i){return ds.makeTranslation(e,n,i),this.applyMatrix4(ds),this}scale(e,n,i){return ds.makeScale(e,n,i),this.applyMatrix4(ds),this}lookAt(e){return J1.lookAt(e),J1.updateMatrix(),this.applyMatrix4(J1.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(bu).negate(),this.translate(bu.x,bu.y,bu.z),this}setFromPoints(e){const n=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];n.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new _t(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ni);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new K(-1/0,-1/0,-1/0),new K(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let i=0,r=n.length;i<r;i++){const s=n[i];Yr.setFromBufferAttribute(s),this.morphTargetsRelative?(Pi.addVectors(this.boundingBox.min,Yr.min),this.boundingBox.expandByPoint(Pi),Pi.addVectors(this.boundingBox.max,Yr.max),this.boundingBox.expandByPoint(Pi)):(this.boundingBox.expandByPoint(Yr.min),this.boundingBox.expandByPoint(Yr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Fi);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new K,1/0);return}if(e){const i=this.boundingSphere.center;if(Yr.setFromBufferAttribute(e),n)for(let s=0,a=n.length;s<a;s++){const o=n[s];Od.setFromBufferAttribute(o),this.morphTargetsRelative?(Pi.addVectors(Yr.min,Od.min),Yr.expandByPoint(Pi),Pi.addVectors(Yr.max,Od.max),Yr.expandByPoint(Pi)):(Yr.expandByPoint(Od.min),Yr.expandByPoint(Od.max))}Yr.getCenter(i);let r=0;for(let s=0,a=e.count;s<a;s++)Pi.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Pi));if(n)for(let s=0,a=n.length;s<a;s++){const o=n[s],l=this.morphTargetsRelative;for(let c=0,u=o.count;c<u;c++)Pi.fromBufferAttribute(o,c),l&&(bu.fromBufferAttribute(e,c),Pi.add(bu)),r=Math.max(r,i.distanceToSquared(Pi))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=n.position.array,s=n.normal.array,a=n.uv.array,o=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new $t(new Float32Array(4*o),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let I=0;I<o;I++)c[I]=new K,u[I]=new K;const h=new K,f=new K,m=new K,g=new Ie,y=new Ie,x=new Ie,v=new K,_=new K;function S(I,z,G){h.fromArray(r,I*3),f.fromArray(r,z*3),m.fromArray(r,G*3),g.fromArray(a,I*2),y.fromArray(a,z*2),x.fromArray(a,G*2),f.sub(h),m.sub(h),y.sub(g),x.sub(g);const Q=1/(y.x*x.y-x.x*y.y);isFinite(Q)&&(v.copy(f).multiplyScalar(x.y).addScaledVector(m,-y.y).multiplyScalar(Q),_.copy(m).multiplyScalar(y.x).addScaledVector(f,-x.x).multiplyScalar(Q),c[I].add(v),c[z].add(v),c[G].add(v),u[I].add(_),u[z].add(_),u[G].add(_))}let M=this.groups;M.length===0&&(M=[{start:0,count:i.length}]);for(let I=0,z=M.length;I<z;++I){const G=M[I],Q=G.start,U=G.count;for(let ee=Q,$=Q+U;ee<$;ee+=3)S(i[ee+0],i[ee+1],i[ee+2])}const b=new K,C=new K,B=new K,P=new K;function T(I){B.fromArray(s,I*3),P.copy(B);const z=c[I];b.copy(z),b.sub(B.multiplyScalar(B.dot(z))).normalize(),C.crossVectors(P,z);const Q=C.dot(u[I])<0?-1:1;l[I*4]=b.x,l[I*4+1]=b.y,l[I*4+2]=b.z,l[I*4+3]=Q}for(let I=0,z=M.length;I<z;++I){const G=M[I],Q=G.start,U=G.count;for(let ee=Q,$=Q+U;ee<$;ee+=3)T(i[ee+0]),T(i[ee+1]),T(i[ee+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new $t(new Float32Array(n.count*3),3),this.setAttribute("normal",i);else for(let f=0,m=i.count;f<m;f++)i.setXYZ(f,0,0,0);const r=new K,s=new K,a=new K,o=new K,l=new K,c=new K,u=new K,h=new K;if(e)for(let f=0,m=e.count;f<m;f+=3){const g=e.getX(f+0),y=e.getX(f+1),x=e.getX(f+2);r.fromBufferAttribute(n,g),s.fromBufferAttribute(n,y),a.fromBufferAttribute(n,x),u.subVectors(a,s),h.subVectors(r,s),u.cross(h),o.fromBufferAttribute(i,g),l.fromBufferAttribute(i,y),c.fromBufferAttribute(i,x),o.add(u),l.add(u),c.add(u),i.setXYZ(g,o.x,o.y,o.z),i.setXYZ(y,l.x,l.y,l.z),i.setXYZ(x,c.x,c.y,c.z)}else for(let f=0,m=n.count;f<m;f+=3)r.fromBufferAttribute(n,f+0),s.fromBufferAttribute(n,f+1),a.fromBufferAttribute(n,f+2),u.subVectors(a,s),h.subVectors(r,s),u.cross(h),i.setXYZ(f+0,u.x,u.y,u.z),i.setXYZ(f+1,u.x,u.y,u.z),i.setXYZ(f+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,i=e.count;n<i;n++)Pi.fromBufferAttribute(e,n),Pi.normalize(),e.setXYZ(n,Pi.x,Pi.y,Pi.z)}toNonIndexed(){function e(o,l){const c=o.array,u=o.itemSize,h=o.normalized,f=new c.constructor(l.length*u);let m=0,g=0;for(let y=0,x=l.length;y<x;y++){o.isInterleavedBufferAttribute?m=l[y]*o.data.stride+o.offset:m=l[y]*u;for(let v=0;v<u;v++)f[g++]=c[m++]}return new $t(f,u,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new zt,i=this.index.array,r=this.attributes;for(const o in r){const l=r[o],c=e(l,i);n.setAttribute(o,c)}const s=this.morphAttributes;for(const o in s){const l=[],c=s[o];for(let u=0,h=c.length;u<h;u++){const f=c[u],m=e(f,i);l.push(m)}n.morphAttributes[o]=l}n.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,l=a.length;o<l;o++){const c=a[o];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let h=0,f=c.length;h<f;h++){const m=c[h];u.push(m.toJSON(e.data))}u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(n));const r=e.attributes;for(const c in r){const u=r[c];this.setAttribute(c,u.clone(n))}const s=e.morphAttributes;for(const c in s){const u=[],h=s[c];for(let f=0,m=h.length;f<m;f++)u.push(h[f].clone(n));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let c=0,u=a.length;c<u;c++){const h=a[c];this.addGroup(h.start,h.count,h.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const oR=new bt,Kl=new Qc,Pg=new Fi,lR=new K,Tu=new K,Cu=new K,Ru=new K,Y1=new K,Bg=new K,Ig=new Ie,Lg=new Ie,Dg=new Ie,cR=new K,uR=new K,hR=new K,Ng=new K,Fg=new K;class Sn extends an{constructor(e=new zt,n=new vr){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}getVertexPosition(e,n){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,a=i.morphTargetsRelative;n.fromBufferAttribute(r,e);const o=this.morphTargetInfluences;if(s&&o){Bg.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=o[l],h=s[l];u!==0&&(Y1.fromBufferAttribute(h,e),a?Bg.addScaledVector(Y1,u):Bg.addScaledVector(Y1.sub(n),u))}n.add(Bg)}return n}raycast(e,n){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Pg.copy(i.boundingSphere),Pg.applyMatrix4(s),Kl.copy(e.ray).recast(e.near),!(Pg.containsPoint(Kl.origin)===!1&&(Kl.intersectSphere(Pg,lR)===null||Kl.origin.distanceToSquared(lR)>(e.far-e.near)**2))&&(oR.copy(s).invert(),Kl.copy(e.ray).applyMatrix4(oR),!(i.boundingBox!==null&&Kl.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,n,Kl)))}_computeIntersections(e,n,i){let r;const s=this.geometry,a=this.material,o=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,h=s.attributes.normal,f=s.groups,m=s.drawRange;if(o!==null)if(Array.isArray(a))for(let g=0,y=f.length;g<y;g++){const x=f[g],v=a[x.materialIndex],_=Math.max(x.start,m.start),S=Math.min(o.count,Math.min(x.start+x.count,m.start+m.count));for(let M=_,b=S;M<b;M+=3){const C=o.getX(M),B=o.getX(M+1),P=o.getX(M+2);r=Ug(this,v,e,i,c,u,h,C,B,P),r&&(r.faceIndex=Math.floor(M/3),r.face.materialIndex=x.materialIndex,n.push(r))}}else{const g=Math.max(0,m.start),y=Math.min(o.count,m.start+m.count);for(let x=g,v=y;x<v;x+=3){const _=o.getX(x),S=o.getX(x+1),M=o.getX(x+2);r=Ug(this,a,e,i,c,u,h,_,S,M),r&&(r.faceIndex=Math.floor(x/3),n.push(r))}}else if(l!==void 0)if(Array.isArray(a))for(let g=0,y=f.length;g<y;g++){const x=f[g],v=a[x.materialIndex],_=Math.max(x.start,m.start),S=Math.min(l.count,Math.min(x.start+x.count,m.start+m.count));for(let M=_,b=S;M<b;M+=3){const C=M,B=M+1,P=M+2;r=Ug(this,v,e,i,c,u,h,C,B,P),r&&(r.faceIndex=Math.floor(M/3),r.face.materialIndex=x.materialIndex,n.push(r))}}else{const g=Math.max(0,m.start),y=Math.min(l.count,m.start+m.count);for(let x=g,v=y;x<v;x+=3){const _=x,S=x+1,M=x+2;r=Ug(this,a,e,i,c,u,h,_,S,M),r&&(r.faceIndex=Math.floor(x/3),n.push(r))}}}}function Tj(t,e,n,i,r,s,a,o){let l;if(e.side===Ai?l=i.intersectTriangle(a,s,r,!0,o):l=i.intersectTriangle(r,s,a,e.side===Ks,o),l===null)return null;Fg.copy(o),Fg.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(Fg);return c<n.near||c>n.far?null:{distance:c,point:Fg.clone(),object:t}}function Ug(t,e,n,i,r,s,a,o,l,c){t.getVertexPosition(o,Tu),t.getVertexPosition(l,Cu),t.getVertexPosition(c,Ru);const u=Tj(t,e,n,i,Tu,Cu,Ru,Ng);if(u){r&&(Ig.fromBufferAttribute(r,o),Lg.fromBufferAttribute(r,l),Dg.fromBufferAttribute(r,c),u.uv=Pr.getInterpolation(Ng,Tu,Cu,Ru,Ig,Lg,Dg,new Ie)),s&&(Ig.fromBufferAttribute(s,o),Lg.fromBufferAttribute(s,l),Dg.fromBufferAttribute(s,c),u.uv1=Pr.getInterpolation(Ng,Tu,Cu,Ru,Ig,Lg,Dg,new Ie),u.uv2=u.uv1),a&&(cR.fromBufferAttribute(a,o),uR.fromBufferAttribute(a,l),hR.fromBufferAttribute(a,c),u.normal=Pr.getInterpolation(Ng,Tu,Cu,Ru,cR,uR,hR,new K),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const h={a:o,b:l,c,normal:new K,materialIndex:0};Pr.getNormal(Tu,Cu,Ru,h.normal),u.face=h}return u}class Zc extends zt{constructor(e=1,n=1,i=1,r=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:i,widthSegments:r,heightSegments:s,depthSegments:a};const o=this;r=Math.floor(r),s=Math.floor(s),a=Math.floor(a);const l=[],c=[],u=[],h=[];let f=0,m=0;g("z","y","x",-1,-1,i,n,e,a,s,0),g("z","y","x",1,-1,i,n,-e,a,s,1),g("x","z","y",1,1,e,i,n,r,a,2),g("x","z","y",1,-1,e,i,-n,r,a,3),g("x","y","z",1,-1,e,n,i,r,s,4),g("x","y","z",-1,-1,e,n,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new _t(c,3)),this.setAttribute("normal",new _t(u,3)),this.setAttribute("uv",new _t(h,2));function g(y,x,v,_,S,M,b,C,B,P,T){const I=M/B,z=b/P,G=M/2,Q=b/2,U=C/2,ee=B+1,$=P+1;let oe=0,Z=0;const J=new K;for(let H=0;H<$;H++){const O=H*z-Q;for(let j=0;j<ee;j++){const W=j*I-G;J[y]=W*_,J[x]=O*S,J[v]=U,c.push(J.x,J.y,J.z),J[y]=0,J[x]=0,J[v]=C>0?1:-1,u.push(J.x,J.y,J.z),h.push(j/B),h.push(1-H/P),oe+=1}}for(let H=0;H<P;H++)for(let O=0;O<B;O++){const j=f+O+ee*H,W=f+O+ee*(H+1),ne=f+(O+1)+ee*(H+1),ae=f+(O+1)+ee*H;l.push(j,W,ae),l.push(W,ne,ae),Z+=6}o.addGroup(m,Z,T),m+=Z,f+=oe}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Zc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Uh(t){const e={};for(const n in t){e[n]={};for(const i in t[n]){const r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][i]=null):e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function fr(t){const e={};for(let n=0;n<t.length;n++){const i=Uh(t[n]);for(const r in i)e[r]=i[r]}return e}function Cj(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function UN(t){return t.getRenderTarget()===null?t.outputColorSpace:gn.workingColorSpace}const ZM={clone:Uh,merge:fr};var Rj=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Pj=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ti extends ui{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Rj,this.fragmentShader=Pj,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Uh(e.uniforms),this.uniformsGroups=Cj(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const r in this.uniforms){const a=this.uniforms[r].value;a&&a.isTexture?n.uniforms[r]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?n.uniforms[r]={type:"c",value:a.getHex()}:a&&a.isVector2?n.uniforms[r]={type:"v2",value:a.toArray()}:a&&a.isVector3?n.uniforms[r]={type:"v3",value:a.toArray()}:a&&a.isVector4?n.uniforms[r]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?n.uniforms[r]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?n.uniforms[r]={type:"m4",value:a.toArray()}:n.uniforms[r]={value:a}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(n.extensions=i),n}}class qc extends an{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new bt,this.projectionMatrix=new bt,this.projectionMatrixInverse=new bt,this.coordinateSystem=Hs}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}let Pn=class extends qc{constructor(e=50,n=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=Fh*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Ic*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Fh*2*Math.atan(Math.tan(Ic*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,n,i,r,s,a){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(Ic*.5*this.fov)/this.zoom,i=2*n,r=this.aspect*i,s=-.5*r;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,c=a.fullHeight;s+=a.offsetX*r/l,n-=a.offsetY*i/c,r*=a.width/l,i*=a.height/c}const o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,n,n-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}};const Pu=-90,Bu=1;class kN extends an{constructor(e,n,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Pn(Pu,Bu,e,n);r.layers=this.layers,this.add(r);const s=new Pn(Pu,Bu,e,n);s.layers=this.layers,this.add(s);const a=new Pn(Pu,Bu,e,n);a.layers=this.layers,this.add(a);const o=new Pn(Pu,Bu,e,n);o.layers=this.layers,this.add(o);const l=new Pn(Pu,Bu,e,n);l.layers=this.layers,this.add(l);const c=new Pn(Pu,Bu,e,n);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[i,r,s,a,o,l]=n;for(const c of n)this.remove(c);if(e===Hs)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Nh)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of n)this.add(c),c.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,a,o,l,c,u]=this.children,h=e.getRenderTarget(),f=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),g=e.xr.enabled;e.xr.enabled=!1;const y=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(n,s),e.setRenderTarget(i,1,r),e.render(n,a),e.setRenderTarget(i,2,r),e.render(n,o),e.setRenderTarget(i,3,r),e.render(n,l),e.setRenderTarget(i,4,r),e.render(n,c),i.texture.generateMipmaps=y,e.setRenderTarget(i,5,r),e.render(n,u),e.setRenderTarget(h,f,m),e.xr.enabled=g,i.texture.needsPMREMUpdate=!0}}class Xp extends pn{constructor(e,n,i,r,s,a,o,l,c,u){e=e!==void 0?e:[],n=n!==void 0?n:xa,super(e,n,i,r,s,a,o,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class qM extends Mn{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];n.encoding!==void 0&&(Cf("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===il?sn:gr),this.texture=new Xp(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:kt}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Zc(5,5,5),s=new ti({name:"CubemapFromEquirect",uniforms:Uh(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Ai,blending:Di});s.uniforms.tEquirect.value=n;const a=new Sn(r,s),o=n.minFilter;return n.minFilter===_a&&(n.minFilter=kt),new kN(1,10,this).update(e,a),n.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,n,i,r){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(n,i,r);e.setRenderTarget(s)}}const K1=new K,Bj=new K,Ij=new Yt;class da{constructor(e=new K(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,i,r){return this.normal.set(e,n,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,i){const r=K1.subVectors(i,n).cross(Bj.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const i=e.delta(K1),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:n.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const n=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return n<0&&i>0||i<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const i=n||Ij.getNormalMatrix(e),r=this.coplanarPoint(K1).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Ql=new Fi,kg=new K;class Jp{constructor(e=new da,n=new da,i=new da,r=new da,s=new da,a=new da){this.planes=[e,n,i,r,s,a]}set(e,n,i,r,s,a){const o=this.planes;return o[0].copy(e),o[1].copy(n),o[2].copy(i),o[3].copy(r),o[4].copy(s),o[5].copy(a),this}copy(e){const n=this.planes;for(let i=0;i<6;i++)n[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,n=Hs){const i=this.planes,r=e.elements,s=r[0],a=r[1],o=r[2],l=r[3],c=r[4],u=r[5],h=r[6],f=r[7],m=r[8],g=r[9],y=r[10],x=r[11],v=r[12],_=r[13],S=r[14],M=r[15];if(i[0].setComponents(l-s,f-c,x-m,M-v).normalize(),i[1].setComponents(l+s,f+c,x+m,M+v).normalize(),i[2].setComponents(l+a,f+u,x+g,M+_).normalize(),i[3].setComponents(l-a,f-u,x-g,M-_).normalize(),i[4].setComponents(l-o,f-h,x-y,M-S).normalize(),n===Hs)i[5].setComponents(l+o,f+h,x+y,M+S).normalize();else if(n===Nh)i[5].setComponents(o,h,y,S).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Ql.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),Ql.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Ql)}intersectsSprite(e){return Ql.center.set(0,0,0),Ql.radius=.7071067811865476,Ql.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ql)}intersectsSphere(e){const n=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const n=this.planes;for(let i=0;i<6;i++){const r=n[i];if(kg.x=r.normal.x>0?e.max.x:e.min.x,kg.y=r.normal.y>0?e.max.y:e.min.y,kg.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(kg)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let i=0;i<6;i++)if(n[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function ON(){let t=null,e=!1,n=null,i=null;function r(s,a){n(s,a),i=t.requestAnimationFrame(r)}return{start:function(){e!==!0&&n!==null&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function Lj(t,e){const n=e.isWebGL2,i=new WeakMap;function r(c,u){const h=c.array,f=c.usage,m=h.byteLength,g=t.createBuffer();t.bindBuffer(u,g),t.bufferData(u,h,f),c.onUploadCallback();let y;if(h instanceof Float32Array)y=t.FLOAT;else if(h instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(n)y=t.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else y=t.UNSIGNED_SHORT;else if(h instanceof Int16Array)y=t.SHORT;else if(h instanceof Uint32Array)y=t.UNSIGNED_INT;else if(h instanceof Int32Array)y=t.INT;else if(h instanceof Int8Array)y=t.BYTE;else if(h instanceof Uint8Array)y=t.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)y=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:g,type:y,bytesPerElement:h.BYTES_PER_ELEMENT,version:c.version,size:m}}function s(c,u,h){const f=u.array,m=u._updateRange,g=u.updateRanges;if(t.bindBuffer(h,c),m.count===-1&&g.length===0&&t.bufferSubData(h,0,f),g.length!==0){for(let y=0,x=g.length;y<x;y++){const v=g[y];n?t.bufferSubData(h,v.start*f.BYTES_PER_ELEMENT,f,v.start,v.count):t.bufferSubData(h,v.start*f.BYTES_PER_ELEMENT,f.subarray(v.start,v.start+v.count))}u.clearUpdateRanges()}m.count!==-1&&(n?t.bufferSubData(h,m.offset*f.BYTES_PER_ELEMENT,f,m.offset,m.count):t.bufferSubData(h,m.offset*f.BYTES_PER_ELEMENT,f.subarray(m.offset,m.offset+m.count)),m.count=-1),u.onUploadCallback()}function a(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)}function o(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=i.get(c);u&&(t.deleteBuffer(u.buffer),i.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const f=i.get(c);(!f||f.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const h=i.get(c);if(h===void 0)i.set(c,r(c,u));else if(h.version<c.version){if(h.size!==c.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");s(h.buffer,c,u),h.version=c.version}}return{get:a,remove:o,update:l}}class Aa extends zt{constructor(e=1,n=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:i,heightSegments:r};const s=e/2,a=n/2,o=Math.floor(i),l=Math.floor(r),c=o+1,u=l+1,h=e/o,f=n/l,m=[],g=[],y=[],x=[];for(let v=0;v<u;v++){const _=v*f-a;for(let S=0;S<c;S++){const M=S*h-s;g.push(M,-_,0),y.push(0,0,1),x.push(S/o),x.push(1-v/l)}}for(let v=0;v<l;v++)for(let _=0;_<o;_++){const S=_+c*v,M=_+c*(v+1),b=_+1+c*(v+1),C=_+1+c*v;m.push(S,M,C),m.push(M,b,C)}this.setIndex(m),this.setAttribute("position",new _t(g,3)),this.setAttribute("normal",new _t(y,3)),this.setAttribute("uv",new _t(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Aa(e.width,e.height,e.widthSegments,e.heightSegments)}}var Dj=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Nj=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Fj=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Uj=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,kj=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Oj=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Gj=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,zj=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Hj=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Vj=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,jj=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Wj=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Xj=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Jj=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Yj=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Kj=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Qj=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Zj=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,qj=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,$j=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,e9=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,t9=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,n9=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,i9=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,r9=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,s9=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,a9=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,o9=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,l9=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,c9=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,u9="gl_FragColor = linearToOutputTexel( gl_FragColor );",h9=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,d9=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,f9=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,p9=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,m9=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,g9=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,v9=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,y9=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,x9=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,_9=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,S9=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,A9=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,w9=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,M9=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,E9=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,b9=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,T9=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,C9=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,R9=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,P9=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,B9=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,I9=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,L9=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,D9=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,N9=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,F9=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,U9=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,k9=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,O9=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,G9=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,z9=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,H9=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,V9=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,j9=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,W9=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,X9=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,J9=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Y9=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,K9=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Q9=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Z9=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,q9=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,$9=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,eW=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,tW=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,nW=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,iW=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,rW=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,sW=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,aW=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,oW=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,lW=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,cW=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,uW=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,hW=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dW=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,fW=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,pW=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,mW=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,gW=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,vW=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,yW=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,xW=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,_W=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,SW=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,AW=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,wW=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,MW=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,EW=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,bW=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,TW=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,CW=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,RW=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,PW=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,BW=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,IW=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const LW=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,DW=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,NW=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,FW=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,UW=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,kW=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,OW=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,GW=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,zW=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,HW=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,VW=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,jW=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,WW=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,XW=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,JW=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,YW=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,KW=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,QW=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ZW=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,qW=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$W=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,e7=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,t7=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,n7=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,i7=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,r7=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,s7=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,a7=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,o7=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,l7=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,c7=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,u7=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,h7=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,d7=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Xt={alphahash_fragment:Dj,alphahash_pars_fragment:Nj,alphamap_fragment:Fj,alphamap_pars_fragment:Uj,alphatest_fragment:kj,alphatest_pars_fragment:Oj,aomap_fragment:Gj,aomap_pars_fragment:zj,batching_pars_vertex:Hj,batching_vertex:Vj,begin_vertex:jj,beginnormal_vertex:Wj,bsdfs:Xj,iridescence_fragment:Jj,bumpmap_pars_fragment:Yj,clipping_planes_fragment:Kj,clipping_planes_pars_fragment:Qj,clipping_planes_pars_vertex:Zj,clipping_planes_vertex:qj,color_fragment:$j,color_pars_fragment:e9,color_pars_vertex:t9,color_vertex:n9,common:i9,cube_uv_reflection_fragment:r9,defaultnormal_vertex:s9,displacementmap_pars_vertex:a9,displacementmap_vertex:o9,emissivemap_fragment:l9,emissivemap_pars_fragment:c9,colorspace_fragment:u9,colorspace_pars_fragment:h9,envmap_fragment:d9,envmap_common_pars_fragment:f9,envmap_pars_fragment:p9,envmap_pars_vertex:m9,envmap_physical_pars_fragment:T9,envmap_vertex:g9,fog_vertex:v9,fog_pars_vertex:y9,fog_fragment:x9,fog_pars_fragment:_9,gradientmap_pars_fragment:S9,lightmap_fragment:A9,lightmap_pars_fragment:w9,lights_lambert_fragment:M9,lights_lambert_pars_fragment:E9,lights_pars_begin:b9,lights_toon_fragment:C9,lights_toon_pars_fragment:R9,lights_phong_fragment:P9,lights_phong_pars_fragment:B9,lights_physical_fragment:I9,lights_physical_pars_fragment:L9,lights_fragment_begin:D9,lights_fragment_maps:N9,lights_fragment_end:F9,logdepthbuf_fragment:U9,logdepthbuf_pars_fragment:k9,logdepthbuf_pars_vertex:O9,logdepthbuf_vertex:G9,map_fragment:z9,map_pars_fragment:H9,map_particle_fragment:V9,map_particle_pars_fragment:j9,metalnessmap_fragment:W9,metalnessmap_pars_fragment:X9,morphcolor_vertex:J9,morphnormal_vertex:Y9,morphtarget_pars_vertex:K9,morphtarget_vertex:Q9,normal_fragment_begin:Z9,normal_fragment_maps:q9,normal_pars_fragment:$9,normal_pars_vertex:eW,normal_vertex:tW,normalmap_pars_fragment:nW,clearcoat_normal_fragment_begin:iW,clearcoat_normal_fragment_maps:rW,clearcoat_pars_fragment:sW,iridescence_pars_fragment:aW,opaque_fragment:oW,packing:lW,premultiplied_alpha_fragment:cW,project_vertex:uW,dithering_fragment:hW,dithering_pars_fragment:dW,roughnessmap_fragment:fW,roughnessmap_pars_fragment:pW,shadowmap_pars_fragment:mW,shadowmap_pars_vertex:gW,shadowmap_vertex:vW,shadowmask_pars_fragment:yW,skinbase_vertex:xW,skinning_pars_vertex:_W,skinning_vertex:SW,skinnormal_vertex:AW,specularmap_fragment:wW,specularmap_pars_fragment:MW,tonemapping_fragment:EW,tonemapping_pars_fragment:bW,transmission_fragment:TW,transmission_pars_fragment:CW,uv_pars_fragment:RW,uv_pars_vertex:PW,uv_vertex:BW,worldpos_vertex:IW,background_vert:LW,background_frag:DW,backgroundCube_vert:NW,backgroundCube_frag:FW,cube_vert:UW,cube_frag:kW,depth_vert:OW,depth_frag:GW,distanceRGBA_vert:zW,distanceRGBA_frag:HW,equirect_vert:VW,equirect_frag:jW,linedashed_vert:WW,linedashed_frag:XW,meshbasic_vert:JW,meshbasic_frag:YW,meshlambert_vert:KW,meshlambert_frag:QW,meshmatcap_vert:ZW,meshmatcap_frag:qW,meshnormal_vert:$W,meshnormal_frag:e7,meshphong_vert:t7,meshphong_frag:n7,meshphysical_vert:i7,meshphysical_frag:r7,meshtoon_vert:s7,meshtoon_frag:a7,points_vert:o7,points_frag:l7,shadow_vert:c7,shadow_frag:u7,sprite_vert:h7,sprite_frag:d7},dt={common:{diffuse:{value:new ht(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Yt},alphaMap:{value:null},alphaMapTransform:{value:new Yt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Yt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Yt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Yt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Yt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Yt},normalScale:{value:new Ie(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Yt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Yt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Yt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Yt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ht(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ht(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Yt},alphaTest:{value:0},uvTransform:{value:new Yt}},sprite:{diffuse:{value:new ht(16777215)},opacity:{value:1},center:{value:new Ie(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Yt},alphaMap:{value:null},alphaMapTransform:{value:new Yt},alphaTest:{value:0}}},Os={basic:{uniforms:fr([dt.common,dt.specularmap,dt.envmap,dt.aomap,dt.lightmap,dt.fog]),vertexShader:Xt.meshbasic_vert,fragmentShader:Xt.meshbasic_frag},lambert:{uniforms:fr([dt.common,dt.specularmap,dt.envmap,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.fog,dt.lights,{emissive:{value:new ht(0)}}]),vertexShader:Xt.meshlambert_vert,fragmentShader:Xt.meshlambert_frag},phong:{uniforms:fr([dt.common,dt.specularmap,dt.envmap,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.fog,dt.lights,{emissive:{value:new ht(0)},specular:{value:new ht(1118481)},shininess:{value:30}}]),vertexShader:Xt.meshphong_vert,fragmentShader:Xt.meshphong_frag},standard:{uniforms:fr([dt.common,dt.envmap,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.roughnessmap,dt.metalnessmap,dt.fog,dt.lights,{emissive:{value:new ht(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Xt.meshphysical_vert,fragmentShader:Xt.meshphysical_frag},toon:{uniforms:fr([dt.common,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.gradientmap,dt.fog,dt.lights,{emissive:{value:new ht(0)}}]),vertexShader:Xt.meshtoon_vert,fragmentShader:Xt.meshtoon_frag},matcap:{uniforms:fr([dt.common,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.fog,{matcap:{value:null}}]),vertexShader:Xt.meshmatcap_vert,fragmentShader:Xt.meshmatcap_frag},points:{uniforms:fr([dt.points,dt.fog]),vertexShader:Xt.points_vert,fragmentShader:Xt.points_frag},dashed:{uniforms:fr([dt.common,dt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Xt.linedashed_vert,fragmentShader:Xt.linedashed_frag},depth:{uniforms:fr([dt.common,dt.displacementmap]),vertexShader:Xt.depth_vert,fragmentShader:Xt.depth_frag},normal:{uniforms:fr([dt.common,dt.bumpmap,dt.normalmap,dt.displacementmap,{opacity:{value:1}}]),vertexShader:Xt.meshnormal_vert,fragmentShader:Xt.meshnormal_frag},sprite:{uniforms:fr([dt.sprite,dt.fog]),vertexShader:Xt.sprite_vert,fragmentShader:Xt.sprite_frag},background:{uniforms:{uvTransform:{value:new Yt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Xt.background_vert,fragmentShader:Xt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Xt.backgroundCube_vert,fragmentShader:Xt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Xt.cube_vert,fragmentShader:Xt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Xt.equirect_vert,fragmentShader:Xt.equirect_frag},distanceRGBA:{uniforms:fr([dt.common,dt.displacementmap,{referencePosition:{value:new K},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Xt.distanceRGBA_vert,fragmentShader:Xt.distanceRGBA_frag},shadow:{uniforms:fr([dt.lights,dt.fog,{color:{value:new ht(0)},opacity:{value:1}}]),vertexShader:Xt.shadow_vert,fragmentShader:Xt.shadow_frag}};Os.physical={uniforms:fr([Os.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Yt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Yt},clearcoatNormalScale:{value:new Ie(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Yt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Yt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Yt},sheen:{value:0},sheenColor:{value:new ht(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Yt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Yt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Yt},transmissionSamplerSize:{value:new Ie},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Yt},attenuationDistance:{value:0},attenuationColor:{value:new ht(0)},specularColor:{value:new ht(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Yt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Yt},anisotropyVector:{value:new Ie},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Yt}}]),vertexShader:Xt.meshphysical_vert,fragmentShader:Xt.meshphysical_frag};const Og={r:0,b:0,g:0};function f7(t,e,n,i,r,s,a){const o=new ht(0);let l=s===!0?0:1,c,u,h=null,f=0,m=null;function g(x,v){let _=!1,S=v.isScene===!0?v.background:null;S&&S.isTexture&&(S=(v.backgroundBlurriness>0?n:e).get(S)),S===null?y(o,l):S&&S.isColor&&(y(S,1),_=!0);const M=t.xr.getEnvironmentBlendMode();M==="additive"?i.buffers.color.setClear(0,0,0,1,a):M==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,a),(t.autoClear||_)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),S&&(S.isCubeTexture||S.mapping===Jh)?(u===void 0&&(u=new Sn(new Zc(1,1,1),new ti({name:"BackgroundCubeMaterial",uniforms:Uh(Os.backgroundCube.uniforms),vertexShader:Os.backgroundCube.vertexShader,fragmentShader:Os.backgroundCube.fragmentShader,side:Ai,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(b,C,B){this.matrixWorld.copyPosition(B.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),u.material.uniforms.envMap.value=S,u.material.uniforms.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,u.material.toneMapped=gn.getTransfer(S.colorSpace)!==bn,(h!==S||f!==S.version||m!==t.toneMapping)&&(u.material.needsUpdate=!0,h=S,f=S.version,m=t.toneMapping),u.layers.enableAll(),x.unshift(u,u.geometry,u.material,0,0,null)):S&&S.isTexture&&(c===void 0&&(c=new Sn(new Aa(2,2),new ti({name:"BackgroundMaterial",uniforms:Uh(Os.background.uniforms),vertexShader:Os.background.vertexShader,fragmentShader:Os.background.fragmentShader,side:Ks,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=S,c.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,c.material.toneMapped=gn.getTransfer(S.colorSpace)!==bn,S.matrixAutoUpdate===!0&&S.updateMatrix(),c.material.uniforms.uvTransform.value.copy(S.matrix),(h!==S||f!==S.version||m!==t.toneMapping)&&(c.material.needsUpdate=!0,h=S,f=S.version,m=t.toneMapping),c.layers.enableAll(),x.unshift(c,c.geometry,c.material,0,0,null))}function y(x,v){x.getRGB(Og,UN(t)),i.buffers.color.setClear(Og.r,Og.g,Og.b,v,a)}return{getClearColor:function(){return o},setClearColor:function(x,v=1){o.set(x),l=v,y(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(x){l=x,y(o,l)},render:g}}function p7(t,e,n,i){const r=t.getParameter(t.MAX_VERTEX_ATTRIBS),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),a=i.isWebGL2||s!==null,o={},l=x(null);let c=l,u=!1;function h(U,ee,$,oe,Z){let J=!1;if(a){const H=y(oe,$,ee);c!==H&&(c=H,m(c.object)),J=v(U,oe,$,Z),J&&_(U,oe,$,Z)}else{const H=ee.wireframe===!0;(c.geometry!==oe.id||c.program!==$.id||c.wireframe!==H)&&(c.geometry=oe.id,c.program=$.id,c.wireframe=H,J=!0)}Z!==null&&n.update(Z,t.ELEMENT_ARRAY_BUFFER),(J||u)&&(u=!1,P(U,ee,$,oe),Z!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get(Z).buffer))}function f(){return i.isWebGL2?t.createVertexArray():s.createVertexArrayOES()}function m(U){return i.isWebGL2?t.bindVertexArray(U):s.bindVertexArrayOES(U)}function g(U){return i.isWebGL2?t.deleteVertexArray(U):s.deleteVertexArrayOES(U)}function y(U,ee,$){const oe=$.wireframe===!0;let Z=o[U.id];Z===void 0&&(Z={},o[U.id]=Z);let J=Z[ee.id];J===void 0&&(J={},Z[ee.id]=J);let H=J[oe];return H===void 0&&(H=x(f()),J[oe]=H),H}function x(U){const ee=[],$=[],oe=[];for(let Z=0;Z<r;Z++)ee[Z]=0,$[Z]=0,oe[Z]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:ee,enabledAttributes:$,attributeDivisors:oe,object:U,attributes:{},index:null}}function v(U,ee,$,oe){const Z=c.attributes,J=ee.attributes;let H=0;const O=$.getAttributes();for(const j in O)if(O[j].location>=0){const ne=Z[j];let ae=J[j];if(ae===void 0&&(j==="instanceMatrix"&&U.instanceMatrix&&(ae=U.instanceMatrix),j==="instanceColor"&&U.instanceColor&&(ae=U.instanceColor)),ne===void 0||ne.attribute!==ae||ae&&ne.data!==ae.data)return!0;H++}return c.attributesNum!==H||c.index!==oe}function _(U,ee,$,oe){const Z={},J=ee.attributes;let H=0;const O=$.getAttributes();for(const j in O)if(O[j].location>=0){let ne=J[j];ne===void 0&&(j==="instanceMatrix"&&U.instanceMatrix&&(ne=U.instanceMatrix),j==="instanceColor"&&U.instanceColor&&(ne=U.instanceColor));const ae={};ae.attribute=ne,ne&&ne.data&&(ae.data=ne.data),Z[j]=ae,H++}c.attributes=Z,c.attributesNum=H,c.index=oe}function S(){const U=c.newAttributes;for(let ee=0,$=U.length;ee<$;ee++)U[ee]=0}function M(U){b(U,0)}function b(U,ee){const $=c.newAttributes,oe=c.enabledAttributes,Z=c.attributeDivisors;$[U]=1,oe[U]===0&&(t.enableVertexAttribArray(U),oe[U]=1),Z[U]!==ee&&((i.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](U,ee),Z[U]=ee)}function C(){const U=c.newAttributes,ee=c.enabledAttributes;for(let $=0,oe=ee.length;$<oe;$++)ee[$]!==U[$]&&(t.disableVertexAttribArray($),ee[$]=0)}function B(U,ee,$,oe,Z,J,H){H===!0?t.vertexAttribIPointer(U,ee,$,Z,J):t.vertexAttribPointer(U,ee,$,oe,Z,J)}function P(U,ee,$,oe){if(i.isWebGL2===!1&&(U.isInstancedMesh||oe.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;S();const Z=oe.attributes,J=$.getAttributes(),H=ee.defaultAttributeValues;for(const O in J){const j=J[O];if(j.location>=0){let W=Z[O];if(W===void 0&&(O==="instanceMatrix"&&U.instanceMatrix&&(W=U.instanceMatrix),O==="instanceColor"&&U.instanceColor&&(W=U.instanceColor)),W!==void 0){const ne=W.normalized,ae=W.itemSize,de=n.get(W);if(de===void 0)continue;const fe=de.buffer,Se=de.type,He=de.bytesPerElement,Fe=i.isWebGL2===!0&&(Se===t.INT||Se===t.UNSIGNED_INT||W.gpuType===gy);if(W.isInterleavedBufferAttribute){const ge=W.data,X=ge.stride,Re=W.offset;if(ge.isInstancedInterleavedBuffer){for(let ye=0;ye<j.locationSize;ye++)b(j.location+ye,ge.meshPerAttribute);U.isInstancedMesh!==!0&&oe._maxInstanceCount===void 0&&(oe._maxInstanceCount=ge.meshPerAttribute*ge.count)}else for(let ye=0;ye<j.locationSize;ye++)M(j.location+ye);t.bindBuffer(t.ARRAY_BUFFER,fe);for(let ye=0;ye<j.locationSize;ye++)B(j.location+ye,ae/j.locationSize,Se,ne,X*He,(Re+ae/j.locationSize*ye)*He,Fe)}else{if(W.isInstancedBufferAttribute){for(let ge=0;ge<j.locationSize;ge++)b(j.location+ge,W.meshPerAttribute);U.isInstancedMesh!==!0&&oe._maxInstanceCount===void 0&&(oe._maxInstanceCount=W.meshPerAttribute*W.count)}else for(let ge=0;ge<j.locationSize;ge++)M(j.location+ge);t.bindBuffer(t.ARRAY_BUFFER,fe);for(let ge=0;ge<j.locationSize;ge++)B(j.location+ge,ae/j.locationSize,Se,ne,ae*He,ae/j.locationSize*ge*He,Fe)}}else if(H!==void 0){const ne=H[O];if(ne!==void 0)switch(ne.length){case 2:t.vertexAttrib2fv(j.location,ne);break;case 3:t.vertexAttrib3fv(j.location,ne);break;case 4:t.vertexAttrib4fv(j.location,ne);break;default:t.vertexAttrib1fv(j.location,ne)}}}}C()}function T(){G();for(const U in o){const ee=o[U];for(const $ in ee){const oe=ee[$];for(const Z in oe)g(oe[Z].object),delete oe[Z];delete ee[$]}delete o[U]}}function I(U){if(o[U.id]===void 0)return;const ee=o[U.id];for(const $ in ee){const oe=ee[$];for(const Z in oe)g(oe[Z].object),delete oe[Z];delete ee[$]}delete o[U.id]}function z(U){for(const ee in o){const $=o[ee];if($[U.id]===void 0)continue;const oe=$[U.id];for(const Z in oe)g(oe[Z].object),delete oe[Z];delete $[U.id]}}function G(){Q(),u=!0,c!==l&&(c=l,m(c.object))}function Q(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:G,resetDefaultState:Q,dispose:T,releaseStatesOfGeometry:I,releaseStatesOfProgram:z,initAttributes:S,enableAttribute:M,disableUnusedAttributes:C}}function m7(t,e,n,i){const r=i.isWebGL2;let s;function a(u){s=u}function o(u,h){t.drawArrays(s,u,h),n.update(h,s,1)}function l(u,h,f){if(f===0)return;let m,g;if(r)m=t,g="drawArraysInstanced";else if(m=e.get("ANGLE_instanced_arrays"),g="drawArraysInstancedANGLE",m===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[g](s,u,h,f),n.update(h,s,f)}function c(u,h,f){if(f===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let g=0;g<f;g++)this.render(u[g],h[g]);else{m.multiDrawArraysWEBGL(s,u,0,h,0,f);let g=0;for(let y=0;y<f;y++)g+=h[y];n.update(g,s,1)}}this.setMode=a,this.render=o,this.renderInstances=l,this.renderMultiDraw=c}function g7(t,e,n){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const B=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(B.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(B){if(B==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";B="mediump"}return B==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const a=typeof WebGL2RenderingContext<"u"&&t.constructor.name==="WebGL2RenderingContext";let o=n.precision!==void 0?n.precision:"highp";const l=s(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);const c=a||e.has("WEBGL_draw_buffers"),u=n.logarithmicDepthBuffer===!0,h=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),f=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=t.getParameter(t.MAX_TEXTURE_SIZE),g=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),y=t.getParameter(t.MAX_VERTEX_ATTRIBS),x=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),v=t.getParameter(t.MAX_VARYING_VECTORS),_=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),S=f>0,M=a||e.has("OES_texture_float"),b=S&&M,C=a?t.getParameter(t.MAX_SAMPLES):0;return{isWebGL2:a,drawBuffers:c,getMaxAnisotropy:r,getMaxPrecision:s,precision:o,logarithmicDepthBuffer:u,maxTextures:h,maxVertexTextures:f,maxTextureSize:m,maxCubemapSize:g,maxAttributes:y,maxVertexUniforms:x,maxVaryings:v,maxFragmentUniforms:_,vertexTextures:S,floatFragmentTextures:M,floatVertexTextures:b,maxSamples:C}}function v7(t){const e=this;let n=null,i=0,r=!1,s=!1;const a=new da,o=new Yt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,f){const m=h.length!==0||f||i!==0||r;return r=f,i=h.length,m},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(h,f){n=u(h,f,0)},this.setState=function(h,f,m){const g=h.clippingPlanes,y=h.clipIntersection,x=h.clipShadows,v=t.get(h);if(!r||g===null||g.length===0||s&&!x)s?u(null):c();else{const _=s?0:i,S=_*4;let M=v.clippingState||null;l.value=M,M=u(g,f,S,m);for(let b=0;b!==S;++b)M[b]=n[b];v.clippingState=M,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=_}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(h,f,m,g){const y=h!==null?h.length:0;let x=null;if(y!==0){if(x=l.value,g!==!0||x===null){const v=m+y*4,_=f.matrixWorldInverse;o.getNormalMatrix(_),(x===null||x.length<v)&&(x=new Float32Array(v));for(let S=0,M=m;S!==y;++S,M+=4)a.copy(h[S]).applyMatrix4(_,o),a.normal.toArray(x,M),x[M+3]=a.constant}l.value=x,l.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,x}}function y7(t){let e=new WeakMap;function n(a,o){return o===Ih?a.mapping=xa:o===op&&(a.mapping=fl),a}function i(a){if(a&&a.isTexture){const o=a.mapping;if(o===Ih||o===op)if(e.has(a)){const l=e.get(a).texture;return n(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const c=new qM(l.height/2);return c.fromEquirectangularTexture(t,a),e.set(a,c),a.addEventListener("dispose",r),n(c.texture,a.mapping)}else return null}}return a}function r(a){const o=a.target;o.removeEventListener("dispose",r);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class ws extends qc{constructor(e=-1,n=1,i=1,r=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=i,this.bottom=r,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,i,r,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,a=i+e,o=r+n,l=r-n;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,a=s+c*this.view.width,o-=u*this.view.offsetY,l=o-u*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const oh=4,dR=[.125,.215,.35,.446,.526,.582],mc=20,Q1=new ws,fR=new ht;let Z1=null,q1=0,$1=0;const pc=(1+Math.sqrt(5))/2,Iu=1/pc,pR=[new K(1,1,1),new K(-1,1,1),new K(1,1,-1),new K(-1,1,-1),new K(0,pc,Iu),new K(0,pc,-Iu),new K(Iu,0,pc),new K(-Iu,0,pc),new K(pc,Iu,0),new K(-pc,Iu,0)];class PA{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,i=.1,r=100){Z1=this._renderer.getRenderTarget(),q1=this._renderer.getActiveCubeFace(),$1=this._renderer.getActiveMipmapLevel(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),n>0&&this._blur(s,0,0,n),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=vR(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=gR(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Z1,q1,$1),e.scissorTest=!1,Gg(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===xa||e.mapping===fl?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Z1=this._renderer.getRenderTarget(),q1=this._renderer.getActiveCubeFace(),$1=this._renderer.getActiveMipmapLevel();const i=n||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,i={magFilter:kt,minFilter:kt,generateMipmaps:!1,type:ei,format:gi,colorSpace:xr,depthBuffer:!1},r=mR(e,n,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=mR(e,n,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=x7(s)),this._blurMaterial=_7(s,e,n)}return r}_compileMaterial(e){const n=new Sn(this._lodPlanes[0],e);this._renderer.compile(n,Q1)}_sceneToCubeUV(e,n,i,r){const o=new Pn(90,1,n,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,h=u.autoClear,f=u.toneMapping;u.getClearColor(fR),u.toneMapping=Xs,u.autoClear=!1;const m=new vr({name:"PMREM.Background",side:Ai,depthWrite:!1,depthTest:!1}),g=new Sn(new Zc,m);let y=!1;const x=e.background;x?x.isColor&&(m.color.copy(x),e.background=null,y=!0):(m.color.copy(fR),y=!0);for(let v=0;v<6;v++){const _=v%3;_===0?(o.up.set(0,l[v],0),o.lookAt(c[v],0,0)):_===1?(o.up.set(0,0,l[v]),o.lookAt(0,c[v],0)):(o.up.set(0,l[v],0),o.lookAt(0,0,c[v]));const S=this._cubeSize;Gg(r,_*S,v>2?S:0,S,S),u.setRenderTarget(r),y&&u.render(g,o),u.render(e,o)}g.geometry.dispose(),g.material.dispose(),u.toneMapping=f,u.autoClear=h,e.background=x}_textureToCubeUV(e,n){const i=this._renderer,r=e.mapping===xa||e.mapping===fl;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=vR()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=gR());const s=r?this._cubemapMaterial:this._equirectMaterial,a=new Sn(this._lodPlanes[0],s),o=s.uniforms;o.envMap.value=e;const l=this._cubeSize;Gg(n,0,0,3*l,2*l),i.setRenderTarget(n),i.render(a,Q1)}_applyPMREM(e){const n=this._renderer,i=n.autoClear;n.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),a=pR[(r-1)%pR.length];this._blur(e,r-1,r,s,a)}n.autoClear=i}_blur(e,n,i,r,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,n,i,r,"latitudinal",s),this._halfBlur(a,e,i,i,r,"longitudinal",s)}_halfBlur(e,n,i,r,s,a,o){const l=this._renderer,c=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,h=new Sn(this._lodPlanes[r],c),f=c.uniforms,m=this._sizeLods[i]-1,g=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*mc-1),y=s/g,x=isFinite(s)?1+Math.floor(u*y):mc;x>mc&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${mc}`);const v=[];let _=0;for(let B=0;B<mc;++B){const P=B/y,T=Math.exp(-P*P/2);v.push(T),B===0?_+=T:B<x&&(_+=2*T)}for(let B=0;B<v.length;B++)v[B]=v[B]/_;f.envMap.value=e.texture,f.samples.value=x,f.weights.value=v,f.latitudinal.value=a==="latitudinal",o&&(f.poleAxis.value=o);const{_lodMax:S}=this;f.dTheta.value=g,f.mipInt.value=S-i;const M=this._sizeLods[r],b=3*M*(r>S-oh?r-S+oh:0),C=4*(this._cubeSize-M);Gg(n,b,C,3*M,2*M),l.setRenderTarget(n),l.render(h,Q1)}}function x7(t){const e=[],n=[],i=[];let r=t;const s=t-oh+1+dR.length;for(let a=0;a<s;a++){const o=Math.pow(2,r);n.push(o);let l=1/o;a>t-oh?l=dR[a-t+oh-1]:a===0&&(l=0),i.push(l);const c=1/(o-2),u=-c,h=1+c,f=[u,u,h,u,h,h,u,u,h,h,u,h],m=6,g=6,y=3,x=2,v=1,_=new Float32Array(y*g*m),S=new Float32Array(x*g*m),M=new Float32Array(v*g*m);for(let C=0;C<m;C++){const B=C%3*2/3-1,P=C>2?0:-1,T=[B,P,0,B+2/3,P,0,B+2/3,P+1,0,B,P,0,B+2/3,P+1,0,B,P+1,0];_.set(T,y*g*C),S.set(f,x*g*C);const I=[C,C,C,C,C,C];M.set(I,v*g*C)}const b=new zt;b.setAttribute("position",new $t(_,y)),b.setAttribute("uv",new $t(S,x)),b.setAttribute("faceIndex",new $t(M,v)),e.push(b),r>oh&&r--}return{lodPlanes:e,sizeLods:n,sigmas:i}}function mR(t,e,n){const i=new Mn(t,e,n);return i.texture.mapping=Jh,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Gg(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function _7(t,e,n){const i=new Float32Array(mc),r=new K(0,1,0);return new ti({name:"SphericalGaussianBlur",defines:{n:mc,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:$M(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Di,depthTest:!1,depthWrite:!1})}function gR(){return new ti({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:$M(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Di,depthTest:!1,depthWrite:!1})}function vR(){return new ti({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:$M(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Di,depthTest:!1,depthWrite:!1})}function $M(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function S7(t){let e=new WeakMap,n=null;function i(o){if(o&&o.isTexture){const l=o.mapping,c=l===Ih||l===op,u=l===xa||l===fl;if(c||u)if(o.isRenderTargetTexture&&o.needsPMREMUpdate===!0){o.needsPMREMUpdate=!1;let h=e.get(o);return n===null&&(n=new PA(t)),h=c?n.fromEquirectangular(o,h):n.fromCubemap(o,h),e.set(o,h),h.texture}else{if(e.has(o))return e.get(o).texture;{const h=o.image;if(c&&h&&h.height>0||u&&h&&r(h)){n===null&&(n=new PA(t));const f=c?n.fromEquirectangular(o):n.fromCubemap(o);return e.set(o,f),o.addEventListener("dispose",s),f.texture}else return null}}}return o}function r(o){let l=0;const c=6;for(let u=0;u<c;u++)o[u]!==void 0&&l++;return l===c}function s(o){const l=o.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function a(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:i,dispose:a}}function A7(t){const e={};function n(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(i)}return e[i]=r,r}return{has:function(i){return n(i)!==null},init:function(i){i.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(i){const r=n(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function w7(t,e,n,i){const r={},s=new WeakMap;function a(h){const f=h.target;f.index!==null&&e.remove(f.index);for(const g in f.attributes)e.remove(f.attributes[g]);for(const g in f.morphAttributes){const y=f.morphAttributes[g];for(let x=0,v=y.length;x<v;x++)e.remove(y[x])}f.removeEventListener("dispose",a),delete r[f.id];const m=s.get(f);m&&(e.remove(m),s.delete(f)),i.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,n.memory.geometries--}function o(h,f){return r[f.id]===!0||(f.addEventListener("dispose",a),r[f.id]=!0,n.memory.geometries++),f}function l(h){const f=h.attributes;for(const g in f)e.update(f[g],t.ARRAY_BUFFER);const m=h.morphAttributes;for(const g in m){const y=m[g];for(let x=0,v=y.length;x<v;x++)e.update(y[x],t.ARRAY_BUFFER)}}function c(h){const f=[],m=h.index,g=h.attributes.position;let y=0;if(m!==null){const _=m.array;y=m.version;for(let S=0,M=_.length;S<M;S+=3){const b=_[S+0],C=_[S+1],B=_[S+2];f.push(b,C,C,B,B,b)}}else if(g!==void 0){const _=g.array;y=g.version;for(let S=0,M=_.length/3-1;S<M;S+=3){const b=S+0,C=S+1,B=S+2;f.push(b,C,C,B,B,b)}}else return;const x=new(LN(f)?QM:KM)(f,1);x.version=y;const v=s.get(h);v&&e.remove(v),s.set(h,x)}function u(h){const f=s.get(h);if(f){const m=h.index;m!==null&&f.version<m.version&&c(h)}else c(h);return s.get(h)}return{get:o,update:l,getWireframeAttribute:u}}function M7(t,e,n,i){const r=i.isWebGL2;let s;function a(m){s=m}let o,l;function c(m){o=m.type,l=m.bytesPerElement}function u(m,g){t.drawElements(s,g,o,m*l),n.update(g,s,1)}function h(m,g,y){if(y===0)return;let x,v;if(r)x=t,v="drawElementsInstanced";else if(x=e.get("ANGLE_instanced_arrays"),v="drawElementsInstancedANGLE",x===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}x[v](s,g,o,m*l,y),n.update(g,s,y)}function f(m,g,y){if(y===0)return;const x=e.get("WEBGL_multi_draw");if(x===null)for(let v=0;v<y;v++)this.render(m[v]/l,g[v]);else{x.multiDrawElementsWEBGL(s,g,0,o,m,0,y);let v=0;for(let _=0;_<y;_++)v+=g[_];n.update(v,s,1)}}this.setMode=a,this.setIndex=c,this.render=u,this.renderInstances=h,this.renderMultiDraw=f}function E7(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,a,o){switch(n.calls++,a){case t.TRIANGLES:n.triangles+=o*(s/3);break;case t.LINES:n.lines+=o*(s/2);break;case t.LINE_STRIP:n.lines+=o*(s-1);break;case t.LINE_LOOP:n.lines+=o*s;break;case t.POINTS:n.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function r(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:r,update:i}}function b7(t,e){return t[0]-e[0]}function T7(t,e){return Math.abs(e[1])-Math.abs(t[1])}function C7(t,e,n){const i={},r=new Float32Array(8),s=new WeakMap,a=new on,o=[];for(let c=0;c<8;c++)o[c]=[c,0];function l(c,u,h){const f=c.morphTargetInfluences;if(e.isWebGL2===!0){const g=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,y=g!==void 0?g.length:0;let x=s.get(u);if(x===void 0||x.count!==y){let ee=function(){Q.dispose(),s.delete(u),u.removeEventListener("dispose",ee)};var m=ee;x!==void 0&&x.texture.dispose();const S=u.morphAttributes.position!==void 0,M=u.morphAttributes.normal!==void 0,b=u.morphAttributes.color!==void 0,C=u.morphAttributes.position||[],B=u.morphAttributes.normal||[],P=u.morphAttributes.color||[];let T=0;S===!0&&(T=1),M===!0&&(T=2),b===!0&&(T=3);let I=u.attributes.position.count*T,z=1;I>e.maxTextureSize&&(z=Math.ceil(I/e.maxTextureSize),I=e.maxTextureSize);const G=new Float32Array(I*z*4*y),Q=new xy(G,I,z,y);Q.type=$n,Q.needsUpdate=!0;const U=T*4;for(let $=0;$<y;$++){const oe=C[$],Z=B[$],J=P[$],H=I*z*4*$;for(let O=0;O<oe.count;O++){const j=O*U;S===!0&&(a.fromBufferAttribute(oe,O),G[H+j+0]=a.x,G[H+j+1]=a.y,G[H+j+2]=a.z,G[H+j+3]=0),M===!0&&(a.fromBufferAttribute(Z,O),G[H+j+4]=a.x,G[H+j+5]=a.y,G[H+j+6]=a.z,G[H+j+7]=0),b===!0&&(a.fromBufferAttribute(J,O),G[H+j+8]=a.x,G[H+j+9]=a.y,G[H+j+10]=a.z,G[H+j+11]=J.itemSize===4?a.w:1)}}x={count:y,texture:Q,size:new Ie(I,z)},s.set(u,x),u.addEventListener("dispose",ee)}let v=0;for(let S=0;S<f.length;S++)v+=f[S];const _=u.morphTargetsRelative?1:1-v;h.getUniforms().setValue(t,"morphTargetBaseInfluence",_),h.getUniforms().setValue(t,"morphTargetInfluences",f),h.getUniforms().setValue(t,"morphTargetsTexture",x.texture,n),h.getUniforms().setValue(t,"morphTargetsTextureSize",x.size)}else{const g=f===void 0?0:f.length;let y=i[u.id];if(y===void 0||y.length!==g){y=[];for(let M=0;M<g;M++)y[M]=[M,0];i[u.id]=y}for(let M=0;M<g;M++){const b=y[M];b[0]=M,b[1]=f[M]}y.sort(T7);for(let M=0;M<8;M++)M<g&&y[M][1]?(o[M][0]=y[M][0],o[M][1]=y[M][1]):(o[M][0]=Number.MAX_SAFE_INTEGER,o[M][1]=0);o.sort(b7);const x=u.morphAttributes.position,v=u.morphAttributes.normal;let _=0;for(let M=0;M<8;M++){const b=o[M],C=b[0],B=b[1];C!==Number.MAX_SAFE_INTEGER&&B?(x&&u.getAttribute("morphTarget"+M)!==x[C]&&u.setAttribute("morphTarget"+M,x[C]),v&&u.getAttribute("morphNormal"+M)!==v[C]&&u.setAttribute("morphNormal"+M,v[C]),r[M]=B,_+=B):(x&&u.hasAttribute("morphTarget"+M)===!0&&u.deleteAttribute("morphTarget"+M),v&&u.hasAttribute("morphNormal"+M)===!0&&u.deleteAttribute("morphNormal"+M),r[M]=0)}const S=u.morphTargetsRelative?1:1-_;h.getUniforms().setValue(t,"morphTargetBaseInfluence",S),h.getUniforms().setValue(t,"morphTargetInfluences",r)}}return{update:l}}function R7(t,e,n,i){let r=new WeakMap;function s(l){const c=i.render.frame,u=l.geometry,h=e.get(l,u);if(r.get(h)!==c&&(e.update(h),r.set(h,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),r.get(l)!==c&&(n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const f=l.skeleton;r.get(f)!==c&&(f.update(),r.set(f,c))}return h}function a(){r=new WeakMap}function o(l){const c=l.target;c.removeEventListener("dispose",o),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:s,dispose:a}}class Yh extends pn{constructor(e,n,i,r,s,a,o,l,c,u){if(u=u!==void 0?u:eo,u!==eo&&u!==ml)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&u===eo&&(i=zs),i===void 0&&u===ml&&(i=$a),super(null,r,s,a,o,l,u,i,c),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=o!==void 0?o:Rn,this.minFilter=l!==void 0?l:Rn,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}const GN=new pn,zN=new Yh(1,1);zN.compareFunction=WM;const HN=new xy,VN=new YM,jN=new Xp,yR=[],xR=[],_R=new Float32Array(16),SR=new Float32Array(9),AR=new Float32Array(4);function Kh(t,e,n){const i=t[0];if(i<=0||i>0)return t;const r=e*n;let s=yR[r];if(s===void 0&&(s=new Float32Array(r),yR[r]=s),e!==0){i.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=n,t[a].toArray(s,o)}return s}function Mi(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function Ei(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function _y(t,e){let n=xR[e];n===void 0&&(n=new Int32Array(e),xR[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function P7(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function B7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Mi(n,e))return;t.uniform2fv(this.addr,e),Ei(n,e)}}function I7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Mi(n,e))return;t.uniform3fv(this.addr,e),Ei(n,e)}}function L7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Mi(n,e))return;t.uniform4fv(this.addr,e),Ei(n,e)}}function D7(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Mi(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Ei(n,e)}else{if(Mi(n,i))return;AR.set(i),t.uniformMatrix2fv(this.addr,!1,AR),Ei(n,i)}}function N7(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Mi(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Ei(n,e)}else{if(Mi(n,i))return;SR.set(i),t.uniformMatrix3fv(this.addr,!1,SR),Ei(n,i)}}function F7(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Mi(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Ei(n,e)}else{if(Mi(n,i))return;_R.set(i),t.uniformMatrix4fv(this.addr,!1,_R),Ei(n,i)}}function U7(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function k7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Mi(n,e))return;t.uniform2iv(this.addr,e),Ei(n,e)}}function O7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Mi(n,e))return;t.uniform3iv(this.addr,e),Ei(n,e)}}function G7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Mi(n,e))return;t.uniform4iv(this.addr,e),Ei(n,e)}}function z7(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function H7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Mi(n,e))return;t.uniform2uiv(this.addr,e),Ei(n,e)}}function V7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Mi(n,e))return;t.uniform3uiv(this.addr,e),Ei(n,e)}}function j7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Mi(n,e))return;t.uniform4uiv(this.addr,e),Ei(n,e)}}function W7(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r);const s=this.type===t.SAMPLER_2D_SHADOW?zN:GN;n.setTexture2D(e||s,r)}function X7(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||VN,r)}function J7(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(e||jN,r)}function Y7(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||HN,r)}function K7(t){switch(t){case 5126:return P7;case 35664:return B7;case 35665:return I7;case 35666:return L7;case 35674:return D7;case 35675:return N7;case 35676:return F7;case 5124:case 35670:return U7;case 35667:case 35671:return k7;case 35668:case 35672:return O7;case 35669:case 35673:return G7;case 5125:return z7;case 36294:return H7;case 36295:return V7;case 36296:return j7;case 35678:case 36198:case 36298:case 36306:case 35682:return W7;case 35679:case 36299:case 36307:return X7;case 35680:case 36300:case 36308:case 36293:return J7;case 36289:case 36303:case 36311:case 36292:return Y7}}function Q7(t,e){t.uniform1fv(this.addr,e)}function Z7(t,e){const n=Kh(e,this.size,2);t.uniform2fv(this.addr,n)}function q7(t,e){const n=Kh(e,this.size,3);t.uniform3fv(this.addr,n)}function $7(t,e){const n=Kh(e,this.size,4);t.uniform4fv(this.addr,n)}function eX(t,e){const n=Kh(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function tX(t,e){const n=Kh(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function nX(t,e){const n=Kh(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function iX(t,e){t.uniform1iv(this.addr,e)}function rX(t,e){t.uniform2iv(this.addr,e)}function sX(t,e){t.uniform3iv(this.addr,e)}function aX(t,e){t.uniform4iv(this.addr,e)}function oX(t,e){t.uniform1uiv(this.addr,e)}function lX(t,e){t.uniform2uiv(this.addr,e)}function cX(t,e){t.uniform3uiv(this.addr,e)}function uX(t,e){t.uniform4uiv(this.addr,e)}function hX(t,e,n){const i=this.cache,r=e.length,s=_y(n,r);Mi(i,s)||(t.uniform1iv(this.addr,s),Ei(i,s));for(let a=0;a!==r;++a)n.setTexture2D(e[a]||GN,s[a])}function dX(t,e,n){const i=this.cache,r=e.length,s=_y(n,r);Mi(i,s)||(t.uniform1iv(this.addr,s),Ei(i,s));for(let a=0;a!==r;++a)n.setTexture3D(e[a]||VN,s[a])}function fX(t,e,n){const i=this.cache,r=e.length,s=_y(n,r);Mi(i,s)||(t.uniform1iv(this.addr,s),Ei(i,s));for(let a=0;a!==r;++a)n.setTextureCube(e[a]||jN,s[a])}function pX(t,e,n){const i=this.cache,r=e.length,s=_y(n,r);Mi(i,s)||(t.uniform1iv(this.addr,s),Ei(i,s));for(let a=0;a!==r;++a)n.setTexture2DArray(e[a]||HN,s[a])}function mX(t){switch(t){case 5126:return Q7;case 35664:return Z7;case 35665:return q7;case 35666:return $7;case 35674:return eX;case 35675:return tX;case 35676:return nX;case 5124:case 35670:return iX;case 35667:case 35671:return rX;case 35668:case 35672:return sX;case 35669:case 35673:return aX;case 5125:return oX;case 36294:return lX;case 36295:return cX;case 36296:return uX;case 35678:case 36198:case 36298:case 36306:case 35682:return hX;case 35679:case 36299:case 36307:return dX;case 35680:case 36300:case 36308:case 36293:return fX;case 36289:case 36303:case 36311:case 36292:return pX}}class gX{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.type=n.type,this.setValue=K7(n.type)}}class vX{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=mX(n.type)}}class yX{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,i){const r=this.seq;for(let s=0,a=r.length;s!==a;++s){const o=r[s];o.setValue(e,n[o.id],i)}}}const e_=/(\w+)(\])?(\[|\.)?/g;function wR(t,e){t.seq.push(e),t.map[e.id]=e}function xX(t,e,n){const i=t.name,r=i.length;for(e_.lastIndex=0;;){const s=e_.exec(i),a=e_.lastIndex;let o=s[1];const l=s[2]==="]",c=s[3];if(l&&(o=o|0),c===void 0||c==="["&&a+2===r){wR(n,c===void 0?new gX(o,t,e):new vX(o,t,e));break}else{let h=n.map[o];h===void 0&&(h=new yX(o),wR(n,h)),n=h}}}class Wv{constructor(e,n){this.seq=[],this.map={};const i=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(n,r),a=e.getUniformLocation(n,s.name);xX(s,a,this)}}setValue(e,n,i,r){const s=this.map[n];s!==void 0&&s.setValue(e,i,r)}setOptional(e,n,i){const r=n[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,n,i,r){for(let s=0,a=n.length;s!==a;++s){const o=n[s],l=i[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,r)}}static seqWithValue(e,n){const i=[];for(let r=0,s=e.length;r!==s;++r){const a=e[r];a.id in n&&i.push(a)}return i}}function MR(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}const _X=37297;let SX=0;function AX(t,e){const n=t.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let a=r;a<s;a++){const o=a+1;i.push(`${o===e?">":" "} ${o}: ${n[a]}`)}return i.join(`
`)}function wX(t){const e=gn.getPrimaries(gn.workingColorSpace),n=gn.getPrimaries(t);let i;switch(e===n?i="":e===dp&&n===hp?i="LinearDisplayP3ToLinearSRGB":e===hp&&n===dp&&(i="LinearSRGBToLinearDisplayP3"),t){case xr:case jp:return[i,"LinearTransferOETF"];case sn:case yy:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),[i,"LinearTransferOETF"]}}function ER(t,e,n){const i=t.getShaderParameter(e,t.COMPILE_STATUS),r=t.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const a=parseInt(s[1]);return n.toUpperCase()+`

`+r+`

`+AX(t.getShaderSource(e),a)}else return r}function MX(t,e){const n=wX(e);return`vec4 ${t}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function EX(t,e){let n;switch(e){case hN:n="Linear";break;case dN:n="Reinhard";break;case fN:n="OptimizedCineon";break;case BM:n="ACESFilmic";break;case pN:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function bX(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(uf).join(`
`)}function TX(t){const e=[];for(const n in t){const i=t[n];i!==!1&&e.push("#define "+n+" "+i)}return e.join(`
`)}function CX(t,e){const n={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=t.getActiveAttrib(e,r),a=s.name;let o=1;s.type===t.FLOAT_MAT2&&(o=2),s.type===t.FLOAT_MAT3&&(o=3),s.type===t.FLOAT_MAT4&&(o=4),n[a]={type:s.type,location:t.getAttribLocation(e,a),locationSize:o}}return n}function uf(t){return t!==""}function bR(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function TR(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const RX=/^[ \t]*#include +<([\w\d./]+)>/gm;function BA(t){return t.replace(RX,BX)}const PX=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function BX(t,e){let n=Xt[e];if(n===void 0){const i=PX.get(e);if(i!==void 0)n=Xt[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return BA(n)}const IX=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function CR(t){return t.replace(IX,LX)}function LX(t,e,n,i){let r="";for(let s=parseInt(e);s<parseInt(n);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function RR(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function DX(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===py?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===bf?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Fs&&(e="SHADOWMAP_TYPE_VSM"),e}function NX(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case xa:case fl:e="ENVMAP_TYPE_CUBE";break;case Jh:e="ENVMAP_TYPE_CUBE_UV";break}return e}function FX(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case fl:e="ENVMAP_MODE_REFRACTION";break}return e}function UX(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case Hp:e="ENVMAP_BLENDING_MULTIPLY";break;case cN:e="ENVMAP_BLENDING_MIX";break;case uN:e="ENVMAP_BLENDING_ADD";break}return e}function kX(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:i,maxMip:n}}function OX(t,e,n,i){const r=t.getContext(),s=n.defines;let a=n.vertexShader,o=n.fragmentShader;const l=DX(n),c=NX(n),u=FX(n),h=UX(n),f=kX(n),m=n.isWebGL2?"":bX(n),g=TX(s),y=r.createProgram();let x,v,_=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(x=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g].filter(uf).join(`
`),x.length>0&&(x+=`
`),v=[m,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g].filter(uf).join(`
`),v.length>0&&(v+=`
`)):(x=[RR(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g,n.batching?"#define USE_BATCHING":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(uf).join(`
`),v=[m,RR(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+h:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Xs?"#define TONE_MAPPING":"",n.toneMapping!==Xs?Xt.tonemapping_pars_fragment:"",n.toneMapping!==Xs?EX("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Xt.colorspace_pars_fragment,MX("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(uf).join(`
`)),a=BA(a),a=bR(a,n),a=TR(a,n),o=BA(o),o=bR(o,n),o=TR(o,n),a=CR(a),o=CR(o),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(_=`#version 300 es
`,x=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+x,v=["precision mediump sampler2DArray;","#define varying in",n.glslVersion===CA?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===CA?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);const S=_+x+a,M=_+v+o,b=MR(r,r.VERTEX_SHADER,S),C=MR(r,r.FRAGMENT_SHADER,M);r.attachShader(y,b),r.attachShader(y,C),n.index0AttributeName!==void 0?r.bindAttribLocation(y,0,n.index0AttributeName):n.morphTargets===!0&&r.bindAttribLocation(y,0,"position"),r.linkProgram(y);function B(z){if(t.debug.checkShaderErrors){const G=r.getProgramInfoLog(y).trim(),Q=r.getShaderInfoLog(b).trim(),U=r.getShaderInfoLog(C).trim();let ee=!0,$=!0;if(r.getProgramParameter(y,r.LINK_STATUS)===!1)if(ee=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(r,y,b,C);else{const oe=ER(r,b,"vertex"),Z=ER(r,C,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(y,r.VALIDATE_STATUS)+`

Program Info Log: `+G+`
`+oe+`
`+Z)}else G!==""?console.warn("THREE.WebGLProgram: Program Info Log:",G):(Q===""||U==="")&&($=!1);$&&(z.diagnostics={runnable:ee,programLog:G,vertexShader:{log:Q,prefix:x},fragmentShader:{log:U,prefix:v}})}r.deleteShader(b),r.deleteShader(C),P=new Wv(r,y),T=CX(r,y)}let P;this.getUniforms=function(){return P===void 0&&B(this),P};let T;this.getAttributes=function(){return T===void 0&&B(this),T};let I=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return I===!1&&(I=r.getProgramParameter(y,_X)),I},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(y),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=SX++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=b,this.fragmentShader=C,this}let GX=0;class zX{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(n),s=this._getShaderStage(i),a=this._getShaderCacheForMaterial(e);return a.has(r)===!1&&(a.add(r),r.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const i of n)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let i=n.get(e);return i===void 0&&(i=new Set,n.set(e,i)),i}_getShaderStage(e){const n=this.shaderCache;let i=n.get(e);return i===void 0&&(i=new HX(e),n.set(e,i)),i}}class HX{constructor(e){this.id=GX++,this.code=e,this.usedTimes=0}}function VX(t,e,n,i,r,s,a){const o=new Lc,l=new zX,c=[],u=r.isWebGL2,h=r.logarithmicDepthBuffer,f=r.vertexTextures;let m=r.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(T){return T===0?"uv":`uv${T}`}function x(T,I,z,G,Q){const U=G.fog,ee=Q.geometry,$=T.isMeshStandardMaterial?G.environment:null,oe=(T.isMeshStandardMaterial?n:e).get(T.envMap||$),Z=oe&&oe.mapping===Jh?oe.image.height:null,J=g[T.type];T.precision!==null&&(m=r.getMaxPrecision(T.precision),m!==T.precision&&console.warn("THREE.WebGLProgram.getParameters:",T.precision,"not supported, using",m,"instead."));const H=ee.morphAttributes.position||ee.morphAttributes.normal||ee.morphAttributes.color,O=H!==void 0?H.length:0;let j=0;ee.morphAttributes.position!==void 0&&(j=1),ee.morphAttributes.normal!==void 0&&(j=2),ee.morphAttributes.color!==void 0&&(j=3);let W,ne,ae,de;if(J){const jt=Os[J];W=jt.vertexShader,ne=jt.fragmentShader}else W=T.vertexShader,ne=T.fragmentShader,l.update(T),ae=l.getVertexShaderID(T),de=l.getFragmentShaderID(T);const fe=t.getRenderTarget(),Se=Q.isInstancedMesh===!0,He=Q.isBatchedMesh===!0,Fe=!!T.map,ge=!!T.matcap,X=!!oe,Re=!!T.aoMap,ye=!!T.lightMap,De=!!T.bumpMap,Me=!!T.normalMap,Qe=!!T.displacementMap,Ee=!!T.emissiveMap,Oe=!!T.metalnessMap,Je=!!T.roughnessMap,be=T.anisotropy>0,rt=T.clearcoat>0,V=T.iridescence>0,k=T.sheen>0,ue=T.transmission>0,je=be&&!!T.anisotropyMap,_e=rt&&!!T.clearcoatMap,Le=rt&&!!T.clearcoatNormalMap,Ke=rt&&!!T.clearcoatRoughnessMap,We=V&&!!T.iridescenceMap,Ze=V&&!!T.iridescenceThicknessMap,ct=k&&!!T.sheenColorMap,ot=k&&!!T.sheenRoughnessMap,Pe=!!T.specularMap,et=!!T.specularColorMap,re=!!T.specularIntensityMap,Ae=ue&&!!T.transmissionMap,Ge=ue&&!!T.thicknessMap,Ve=!!T.gradientMap,xe=!!T.alphaMap,le=T.alphaTest>0,nt=!!T.alphaHash,Xe=!!T.extensions,we=!!ee.attributes.uv1,Ye=!!ee.attributes.uv2,st=!!ee.attributes.uv3;let at=Xs;return T.toneMapped&&(fe===null||fe.isXRRenderTarget===!0)&&(at=t.toneMapping),{isWebGL2:u,shaderID:J,shaderType:T.type,shaderName:T.name,vertexShader:W,fragmentShader:ne,defines:T.defines,customVertexShaderID:ae,customFragmentShaderID:de,isRawShaderMaterial:T.isRawShaderMaterial===!0,glslVersion:T.glslVersion,precision:m,batching:He,instancing:Se,instancingColor:Se&&Q.instanceColor!==null,supportsVertexTextures:f,outputColorSpace:fe===null?t.outputColorSpace:fe.isXRRenderTarget===!0?fe.texture.colorSpace:xr,map:Fe,matcap:ge,envMap:X,envMapMode:X&&oe.mapping,envMapCubeUVHeight:Z,aoMap:Re,lightMap:ye,bumpMap:De,normalMap:Me,displacementMap:f&&Qe,emissiveMap:Ee,normalMapObjectSpace:Me&&T.normalMapType===EN,normalMapTangentSpace:Me&&T.normalMapType===Cl,metalnessMap:Oe,roughnessMap:Je,anisotropy:be,anisotropyMap:je,clearcoat:rt,clearcoatMap:_e,clearcoatNormalMap:Le,clearcoatRoughnessMap:Ke,iridescence:V,iridescenceMap:We,iridescenceThicknessMap:Ze,sheen:k,sheenColorMap:ct,sheenRoughnessMap:ot,specularMap:Pe,specularColorMap:et,specularIntensityMap:re,transmission:ue,transmissionMap:Ae,thicknessMap:Ge,gradientMap:Ve,opaque:T.transparent===!1&&T.blending===Bc,alphaMap:xe,alphaTest:le,alphaHash:nt,combine:T.combine,mapUv:Fe&&y(T.map.channel),aoMapUv:Re&&y(T.aoMap.channel),lightMapUv:ye&&y(T.lightMap.channel),bumpMapUv:De&&y(T.bumpMap.channel),normalMapUv:Me&&y(T.normalMap.channel),displacementMapUv:Qe&&y(T.displacementMap.channel),emissiveMapUv:Ee&&y(T.emissiveMap.channel),metalnessMapUv:Oe&&y(T.metalnessMap.channel),roughnessMapUv:Je&&y(T.roughnessMap.channel),anisotropyMapUv:je&&y(T.anisotropyMap.channel),clearcoatMapUv:_e&&y(T.clearcoatMap.channel),clearcoatNormalMapUv:Le&&y(T.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ke&&y(T.clearcoatRoughnessMap.channel),iridescenceMapUv:We&&y(T.iridescenceMap.channel),iridescenceThicknessMapUv:Ze&&y(T.iridescenceThicknessMap.channel),sheenColorMapUv:ct&&y(T.sheenColorMap.channel),sheenRoughnessMapUv:ot&&y(T.sheenRoughnessMap.channel),specularMapUv:Pe&&y(T.specularMap.channel),specularColorMapUv:et&&y(T.specularColorMap.channel),specularIntensityMapUv:re&&y(T.specularIntensityMap.channel),transmissionMapUv:Ae&&y(T.transmissionMap.channel),thicknessMapUv:Ge&&y(T.thicknessMap.channel),alphaMapUv:xe&&y(T.alphaMap.channel),vertexTangents:!!ee.attributes.tangent&&(Me||be),vertexColors:T.vertexColors,vertexAlphas:T.vertexColors===!0&&!!ee.attributes.color&&ee.attributes.color.itemSize===4,vertexUv1s:we,vertexUv2s:Ye,vertexUv3s:st,pointsUvs:Q.isPoints===!0&&!!ee.attributes.uv&&(Fe||xe),fog:!!U,useFog:T.fog===!0,fogExp2:U&&U.isFogExp2,flatShading:T.flatShading===!0,sizeAttenuation:T.sizeAttenuation===!0,logarithmicDepthBuffer:h,skinning:Q.isSkinnedMesh===!0,morphTargets:ee.morphAttributes.position!==void 0,morphNormals:ee.morphAttributes.normal!==void 0,morphColors:ee.morphAttributes.color!==void 0,morphTargetsCount:O,morphTextureStride:j,numDirLights:I.directional.length,numPointLights:I.point.length,numSpotLights:I.spot.length,numSpotLightMaps:I.spotLightMap.length,numRectAreaLights:I.rectArea.length,numHemiLights:I.hemi.length,numDirLightShadows:I.directionalShadowMap.length,numPointLightShadows:I.pointShadowMap.length,numSpotLightShadows:I.spotShadowMap.length,numSpotLightShadowsWithMaps:I.numSpotLightShadowsWithMaps,numLightProbes:I.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:T.dithering,shadowMapEnabled:t.shadowMap.enabled&&z.length>0,shadowMapType:t.shadowMap.type,toneMapping:at,useLegacyLights:t._useLegacyLights,decodeVideoTexture:Fe&&T.map.isVideoTexture===!0&&gn.getTransfer(T.map.colorSpace)===bn,premultipliedAlpha:T.premultipliedAlpha,doubleSided:T.side===Ii,flipSided:T.side===Ai,useDepthPacking:T.depthPacking>=0,depthPacking:T.depthPacking||0,index0AttributeName:T.index0AttributeName,extensionDerivatives:Xe&&T.extensions.derivatives===!0,extensionFragDepth:Xe&&T.extensions.fragDepth===!0,extensionDrawBuffers:Xe&&T.extensions.drawBuffers===!0,extensionShaderTextureLOD:Xe&&T.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:T.customProgramCacheKey()}}function v(T){const I=[];if(T.shaderID?I.push(T.shaderID):(I.push(T.customVertexShaderID),I.push(T.customFragmentShaderID)),T.defines!==void 0)for(const z in T.defines)I.push(z),I.push(T.defines[z]);return T.isRawShaderMaterial===!1&&(_(I,T),S(I,T),I.push(t.outputColorSpace)),I.push(T.customProgramCacheKey),I.join()}function _(T,I){T.push(I.precision),T.push(I.outputColorSpace),T.push(I.envMapMode),T.push(I.envMapCubeUVHeight),T.push(I.mapUv),T.push(I.alphaMapUv),T.push(I.lightMapUv),T.push(I.aoMapUv),T.push(I.bumpMapUv),T.push(I.normalMapUv),T.push(I.displacementMapUv),T.push(I.emissiveMapUv),T.push(I.metalnessMapUv),T.push(I.roughnessMapUv),T.push(I.anisotropyMapUv),T.push(I.clearcoatMapUv),T.push(I.clearcoatNormalMapUv),T.push(I.clearcoatRoughnessMapUv),T.push(I.iridescenceMapUv),T.push(I.iridescenceThicknessMapUv),T.push(I.sheenColorMapUv),T.push(I.sheenRoughnessMapUv),T.push(I.specularMapUv),T.push(I.specularColorMapUv),T.push(I.specularIntensityMapUv),T.push(I.transmissionMapUv),T.push(I.thicknessMapUv),T.push(I.combine),T.push(I.fogExp2),T.push(I.sizeAttenuation),T.push(I.morphTargetsCount),T.push(I.morphAttributeCount),T.push(I.numDirLights),T.push(I.numPointLights),T.push(I.numSpotLights),T.push(I.numSpotLightMaps),T.push(I.numHemiLights),T.push(I.numRectAreaLights),T.push(I.numDirLightShadows),T.push(I.numPointLightShadows),T.push(I.numSpotLightShadows),T.push(I.numSpotLightShadowsWithMaps),T.push(I.numLightProbes),T.push(I.shadowMapType),T.push(I.toneMapping),T.push(I.numClippingPlanes),T.push(I.numClipIntersection),T.push(I.depthPacking)}function S(T,I){o.disableAll(),I.isWebGL2&&o.enable(0),I.supportsVertexTextures&&o.enable(1),I.instancing&&o.enable(2),I.instancingColor&&o.enable(3),I.matcap&&o.enable(4),I.envMap&&o.enable(5),I.normalMapObjectSpace&&o.enable(6),I.normalMapTangentSpace&&o.enable(7),I.clearcoat&&o.enable(8),I.iridescence&&o.enable(9),I.alphaTest&&o.enable(10),I.vertexColors&&o.enable(11),I.vertexAlphas&&o.enable(12),I.vertexUv1s&&o.enable(13),I.vertexUv2s&&o.enable(14),I.vertexUv3s&&o.enable(15),I.vertexTangents&&o.enable(16),I.anisotropy&&o.enable(17),I.alphaHash&&o.enable(18),I.batching&&o.enable(19),T.push(o.mask),o.disableAll(),I.fog&&o.enable(0),I.useFog&&o.enable(1),I.flatShading&&o.enable(2),I.logarithmicDepthBuffer&&o.enable(3),I.skinning&&o.enable(4),I.morphTargets&&o.enable(5),I.morphNormals&&o.enable(6),I.morphColors&&o.enable(7),I.premultipliedAlpha&&o.enable(8),I.shadowMapEnabled&&o.enable(9),I.useLegacyLights&&o.enable(10),I.doubleSided&&o.enable(11),I.flipSided&&o.enable(12),I.useDepthPacking&&o.enable(13),I.dithering&&o.enable(14),I.transmission&&o.enable(15),I.sheen&&o.enable(16),I.opaque&&o.enable(17),I.pointsUvs&&o.enable(18),I.decodeVideoTexture&&o.enable(19),T.push(o.mask)}function M(T){const I=g[T.type];let z;if(I){const G=Os[I];z=ZM.clone(G.uniforms)}else z=T.uniforms;return z}function b(T,I){let z;for(let G=0,Q=c.length;G<Q;G++){const U=c[G];if(U.cacheKey===I){z=U,++z.usedTimes;break}}return z===void 0&&(z=new OX(t,I,T,s),c.push(z)),z}function C(T){if(--T.usedTimes===0){const I=c.indexOf(T);c[I]=c[c.length-1],c.pop(),T.destroy()}}function B(T){l.remove(T)}function P(){l.dispose()}return{getParameters:x,getProgramCacheKey:v,getUniforms:M,acquireProgram:b,releaseProgram:C,releaseShaderCache:B,programs:c,dispose:P}}function jX(){let t=new WeakMap;function e(s){let a=t.get(s);return a===void 0&&(a={},t.set(s,a)),a}function n(s){t.delete(s)}function i(s,a,o){t.get(s)[a]=o}function r(){t=new WeakMap}return{get:e,remove:n,update:i,dispose:r}}function WX(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function PR(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function BR(){const t=[];let e=0;const n=[],i=[],r=[];function s(){e=0,n.length=0,i.length=0,r.length=0}function a(h,f,m,g,y,x){let v=t[e];return v===void 0?(v={id:h.id,object:h,geometry:f,material:m,groupOrder:g,renderOrder:h.renderOrder,z:y,group:x},t[e]=v):(v.id=h.id,v.object=h,v.geometry=f,v.material=m,v.groupOrder=g,v.renderOrder=h.renderOrder,v.z=y,v.group=x),e++,v}function o(h,f,m,g,y,x){const v=a(h,f,m,g,y,x);m.transmission>0?i.push(v):m.transparent===!0?r.push(v):n.push(v)}function l(h,f,m,g,y,x){const v=a(h,f,m,g,y,x);m.transmission>0?i.unshift(v):m.transparent===!0?r.unshift(v):n.unshift(v)}function c(h,f){n.length>1&&n.sort(h||WX),i.length>1&&i.sort(f||PR),r.length>1&&r.sort(f||PR)}function u(){for(let h=e,f=t.length;h<f;h++){const m=t[h];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:n,transmissive:i,transparent:r,init:s,push:o,unshift:l,finish:u,sort:c}}function XX(){let t=new WeakMap;function e(i,r){const s=t.get(i);let a;return s===void 0?(a=new BR,t.set(i,[a])):r>=s.length?(a=new BR,s.push(a)):a=s[r],a}function n(){t=new WeakMap}return{get:e,dispose:n}}function JX(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new K,color:new ht};break;case"SpotLight":n={position:new K,direction:new K,color:new ht,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new K,color:new ht,distance:0,decay:0};break;case"HemisphereLight":n={direction:new K,skyColor:new ht,groundColor:new ht};break;case"RectAreaLight":n={color:new ht,position:new K,halfWidth:new K,halfHeight:new K};break}return t[e.id]=n,n}}}function YX(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ie};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ie};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ie,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let KX=0;function QX(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function ZX(t,e){const n=new JX,i=YX(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)r.probe.push(new K);const s=new K,a=new bt,o=new bt;function l(u,h){let f=0,m=0,g=0;for(let G=0;G<9;G++)r.probe[G].set(0,0,0);let y=0,x=0,v=0,_=0,S=0,M=0,b=0,C=0,B=0,P=0,T=0;u.sort(QX);const I=h===!0?Math.PI:1;for(let G=0,Q=u.length;G<Q;G++){const U=u[G],ee=U.color,$=U.intensity,oe=U.distance,Z=U.shadow&&U.shadow.map?U.shadow.map.texture:null;if(U.isAmbientLight)f+=ee.r*$*I,m+=ee.g*$*I,g+=ee.b*$*I;else if(U.isLightProbe){for(let J=0;J<9;J++)r.probe[J].addScaledVector(U.sh.coefficients[J],$);T++}else if(U.isDirectionalLight){const J=n.get(U);if(J.color.copy(U.color).multiplyScalar(U.intensity*I),U.castShadow){const H=U.shadow,O=i.get(U);O.shadowBias=H.bias,O.shadowNormalBias=H.normalBias,O.shadowRadius=H.radius,O.shadowMapSize=H.mapSize,r.directionalShadow[y]=O,r.directionalShadowMap[y]=Z,r.directionalShadowMatrix[y]=U.shadow.matrix,M++}r.directional[y]=J,y++}else if(U.isSpotLight){const J=n.get(U);J.position.setFromMatrixPosition(U.matrixWorld),J.color.copy(ee).multiplyScalar($*I),J.distance=oe,J.coneCos=Math.cos(U.angle),J.penumbraCos=Math.cos(U.angle*(1-U.penumbra)),J.decay=U.decay,r.spot[v]=J;const H=U.shadow;if(U.map&&(r.spotLightMap[B]=U.map,B++,H.updateMatrices(U),U.castShadow&&P++),r.spotLightMatrix[v]=H.matrix,U.castShadow){const O=i.get(U);O.shadowBias=H.bias,O.shadowNormalBias=H.normalBias,O.shadowRadius=H.radius,O.shadowMapSize=H.mapSize,r.spotShadow[v]=O,r.spotShadowMap[v]=Z,C++}v++}else if(U.isRectAreaLight){const J=n.get(U);J.color.copy(ee).multiplyScalar($),J.halfWidth.set(U.width*.5,0,0),J.halfHeight.set(0,U.height*.5,0),r.rectArea[_]=J,_++}else if(U.isPointLight){const J=n.get(U);if(J.color.copy(U.color).multiplyScalar(U.intensity*I),J.distance=U.distance,J.decay=U.decay,U.castShadow){const H=U.shadow,O=i.get(U);O.shadowBias=H.bias,O.shadowNormalBias=H.normalBias,O.shadowRadius=H.radius,O.shadowMapSize=H.mapSize,O.shadowCameraNear=H.camera.near,O.shadowCameraFar=H.camera.far,r.pointShadow[x]=O,r.pointShadowMap[x]=Z,r.pointShadowMatrix[x]=U.shadow.matrix,b++}r.point[x]=J,x++}else if(U.isHemisphereLight){const J=n.get(U);J.skyColor.copy(U.color).multiplyScalar($*I),J.groundColor.copy(U.groundColor).multiplyScalar($*I),r.hemi[S]=J,S++}}_>0&&(e.isWebGL2||t.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=dt.LTC_FLOAT_1,r.rectAreaLTC2=dt.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=dt.LTC_HALF_1,r.rectAreaLTC2=dt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=f,r.ambient[1]=m,r.ambient[2]=g;const z=r.hash;(z.directionalLength!==y||z.pointLength!==x||z.spotLength!==v||z.rectAreaLength!==_||z.hemiLength!==S||z.numDirectionalShadows!==M||z.numPointShadows!==b||z.numSpotShadows!==C||z.numSpotMaps!==B||z.numLightProbes!==T)&&(r.directional.length=y,r.spot.length=v,r.rectArea.length=_,r.point.length=x,r.hemi.length=S,r.directionalShadow.length=M,r.directionalShadowMap.length=M,r.pointShadow.length=b,r.pointShadowMap.length=b,r.spotShadow.length=C,r.spotShadowMap.length=C,r.directionalShadowMatrix.length=M,r.pointShadowMatrix.length=b,r.spotLightMatrix.length=C+B-P,r.spotLightMap.length=B,r.numSpotLightShadowsWithMaps=P,r.numLightProbes=T,z.directionalLength=y,z.pointLength=x,z.spotLength=v,z.rectAreaLength=_,z.hemiLength=S,z.numDirectionalShadows=M,z.numPointShadows=b,z.numSpotShadows=C,z.numSpotMaps=B,z.numLightProbes=T,r.version=KX++)}function c(u,h){let f=0,m=0,g=0,y=0,x=0;const v=h.matrixWorldInverse;for(let _=0,S=u.length;_<S;_++){const M=u[_];if(M.isDirectionalLight){const b=r.directional[f];b.direction.setFromMatrixPosition(M.matrixWorld),s.setFromMatrixPosition(M.target.matrixWorld),b.direction.sub(s),b.direction.transformDirection(v),f++}else if(M.isSpotLight){const b=r.spot[g];b.position.setFromMatrixPosition(M.matrixWorld),b.position.applyMatrix4(v),b.direction.setFromMatrixPosition(M.matrixWorld),s.setFromMatrixPosition(M.target.matrixWorld),b.direction.sub(s),b.direction.transformDirection(v),g++}else if(M.isRectAreaLight){const b=r.rectArea[y];b.position.setFromMatrixPosition(M.matrixWorld),b.position.applyMatrix4(v),o.identity(),a.copy(M.matrixWorld),a.premultiply(v),o.extractRotation(a),b.halfWidth.set(M.width*.5,0,0),b.halfHeight.set(0,M.height*.5,0),b.halfWidth.applyMatrix4(o),b.halfHeight.applyMatrix4(o),y++}else if(M.isPointLight){const b=r.point[m];b.position.setFromMatrixPosition(M.matrixWorld),b.position.applyMatrix4(v),m++}else if(M.isHemisphereLight){const b=r.hemi[x];b.direction.setFromMatrixPosition(M.matrixWorld),b.direction.transformDirection(v),x++}}}return{setup:l,setupView:c,state:r}}function IR(t,e){const n=new ZX(t,e),i=[],r=[];function s(){i.length=0,r.length=0}function a(h){i.push(h)}function o(h){r.push(h)}function l(h){n.setup(i,h)}function c(h){n.setupView(i,h)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:l,setupLightsView:c,pushLight:a,pushShadow:o}}function qX(t,e){let n=new WeakMap;function i(s,a=0){const o=n.get(s);let l;return o===void 0?(l=new IR(t,e),n.set(s,[l])):a>=o.length?(l=new IR(t,e),o.push(l)):l=o[a],l}function r(){n=new WeakMap}return{get:i,dispose:r}}class Sy extends ui{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Tl,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Ay extends ui{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const $X=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,eJ=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function tJ(t,e,n){let i=new Jp;const r=new Ie,s=new Ie,a=new on,o=new Sy({depthPacking:jM}),l=new Ay,c={},u=n.maxTextureSize,h={[Ks]:Ai,[Ai]:Ks,[Ii]:Ii},f=new ti({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ie},radius:{value:4}},vertexShader:$X,fragmentShader:eJ}),m=f.clone();m.defines.HORIZONTAL_PASS=1;const g=new zt;g.setAttribute("position",new $t(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const y=new Sn(g,f),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=py;let v=this.type;this.render=function(b,C,B){if(x.enabled===!1||x.autoUpdate===!1&&x.needsUpdate===!1||b.length===0)return;const P=t.getRenderTarget(),T=t.getActiveCubeFace(),I=t.getActiveMipmapLevel(),z=t.state;z.setBlending(Di),z.buffers.color.setClear(1,1,1,1),z.buffers.depth.setTest(!0),z.setScissorTest(!1);const G=v!==Fs&&this.type===Fs,Q=v===Fs&&this.type!==Fs;for(let U=0,ee=b.length;U<ee;U++){const $=b[U],oe=$.shadow;if(oe===void 0){console.warn("THREE.WebGLShadowMap:",$,"has no shadow.");continue}if(oe.autoUpdate===!1&&oe.needsUpdate===!1)continue;r.copy(oe.mapSize);const Z=oe.getFrameExtents();if(r.multiply(Z),s.copy(oe.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/Z.x),r.x=s.x*Z.x,oe.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/Z.y),r.y=s.y*Z.y,oe.mapSize.y=s.y)),oe.map===null||G===!0||Q===!0){const H=this.type!==Fs?{minFilter:Rn,magFilter:Rn}:{};oe.map!==null&&oe.map.dispose(),oe.map=new Mn(r.x,r.y,H),oe.map.texture.name=$.name+".shadowMap",oe.camera.updateProjectionMatrix()}t.setRenderTarget(oe.map),t.clear();const J=oe.getViewportCount();for(let H=0;H<J;H++){const O=oe.getViewport(H);a.set(s.x*O.x,s.y*O.y,s.x*O.z,s.y*O.w),z.viewport(a),oe.updateMatrices($,H),i=oe.getFrustum(),M(C,B,oe.camera,$,this.type)}oe.isPointLightShadow!==!0&&this.type===Fs&&_(oe,B),oe.needsUpdate=!1}v=this.type,x.needsUpdate=!1,t.setRenderTarget(P,T,I)};function _(b,C){const B=e.update(y);f.defines.VSM_SAMPLES!==b.blurSamples&&(f.defines.VSM_SAMPLES=b.blurSamples,m.defines.VSM_SAMPLES=b.blurSamples,f.needsUpdate=!0,m.needsUpdate=!0),b.mapPass===null&&(b.mapPass=new Mn(r.x,r.y)),f.uniforms.shadow_pass.value=b.map.texture,f.uniforms.resolution.value=b.mapSize,f.uniforms.radius.value=b.radius,t.setRenderTarget(b.mapPass),t.clear(),t.renderBufferDirect(C,null,B,f,y,null),m.uniforms.shadow_pass.value=b.mapPass.texture,m.uniforms.resolution.value=b.mapSize,m.uniforms.radius.value=b.radius,t.setRenderTarget(b.map),t.clear(),t.renderBufferDirect(C,null,B,m,y,null)}function S(b,C,B,P){let T=null;const I=B.isPointLight===!0?b.customDistanceMaterial:b.customDepthMaterial;if(I!==void 0)T=I;else if(T=B.isPointLight===!0?l:o,t.localClippingEnabled&&C.clipShadows===!0&&Array.isArray(C.clippingPlanes)&&C.clippingPlanes.length!==0||C.displacementMap&&C.displacementScale!==0||C.alphaMap&&C.alphaTest>0||C.map&&C.alphaTest>0){const z=T.uuid,G=C.uuid;let Q=c[z];Q===void 0&&(Q={},c[z]=Q);let U=Q[G];U===void 0&&(U=T.clone(),Q[G]=U),T=U}if(T.visible=C.visible,T.wireframe=C.wireframe,P===Fs?T.side=C.shadowSide!==null?C.shadowSide:C.side:T.side=C.shadowSide!==null?C.shadowSide:h[C.side],T.alphaMap=C.alphaMap,T.alphaTest=C.alphaTest,T.map=C.map,T.clipShadows=C.clipShadows,T.clippingPlanes=C.clippingPlanes,T.clipIntersection=C.clipIntersection,T.displacementMap=C.displacementMap,T.displacementScale=C.displacementScale,T.displacementBias=C.displacementBias,T.wireframeLinewidth=C.wireframeLinewidth,T.linewidth=C.linewidth,B.isPointLight===!0&&T.isMeshDistanceMaterial===!0){const z=t.properties.get(T);z.light=B}return T}function M(b,C,B,P,T){if(b.visible===!1)return;if(b.layers.test(C.layers)&&(b.isMesh||b.isLine||b.isPoints)&&(b.castShadow||b.receiveShadow&&T===Fs)&&(!b.frustumCulled||i.intersectsObject(b))){b.modelViewMatrix.multiplyMatrices(B.matrixWorldInverse,b.matrixWorld);const G=e.update(b),Q=b.material;if(Array.isArray(Q)){const U=G.groups;for(let ee=0,$=U.length;ee<$;ee++){const oe=U[ee],Z=Q[oe.materialIndex];if(Z&&Z.visible){const J=S(b,Z,P,T);b.onBeforeShadow(t,b,C,B,G,J,oe),t.renderBufferDirect(B,null,G,J,b,oe),b.onAfterShadow(t,b,C,B,G,J,oe)}}}else if(Q.visible){const U=S(b,Q,P,T);b.onBeforeShadow(t,b,C,B,G,U,null),t.renderBufferDirect(B,null,G,U,b,null),b.onAfterShadow(t,b,C,B,G,U,null)}}const z=b.children;for(let G=0,Q=z.length;G<Q;G++)M(z[G],C,B,P,T)}}function nJ(t,e,n){const i=n.isWebGL2;function r(){let le=!1;const nt=new on;let Xe=null;const we=new on(0,0,0,0);return{setMask:function(Ye){Xe!==Ye&&!le&&(t.colorMask(Ye,Ye,Ye,Ye),Xe=Ye)},setLocked:function(Ye){le=Ye},setClear:function(Ye,st,at,Et,jt){jt===!0&&(Ye*=Et,st*=Et,at*=Et),nt.set(Ye,st,at,Et),we.equals(nt)===!1&&(t.clearColor(Ye,st,at,Et),we.copy(nt))},reset:function(){le=!1,Xe=null,we.set(-1,0,0,0)}}}function s(){let le=!1,nt=null,Xe=null,we=null;return{setTest:function(Ye){Ye?He(t.DEPTH_TEST):Fe(t.DEPTH_TEST)},setMask:function(Ye){nt!==Ye&&!le&&(t.depthMask(Ye),nt=Ye)},setFunc:function(Ye){if(Xe!==Ye){switch(Ye){case nN:t.depthFunc(t.NEVER);break;case iN:t.depthFunc(t.ALWAYS);break;case rN:t.depthFunc(t.LESS);break;case ap:t.depthFunc(t.LEQUAL);break;case sN:t.depthFunc(t.EQUAL);break;case aN:t.depthFunc(t.GEQUAL);break;case oN:t.depthFunc(t.GREATER);break;case lN:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}Xe=Ye}},setLocked:function(Ye){le=Ye},setClear:function(Ye){we!==Ye&&(t.clearDepth(Ye),we=Ye)},reset:function(){le=!1,nt=null,Xe=null,we=null}}}function a(){let le=!1,nt=null,Xe=null,we=null,Ye=null,st=null,at=null,Et=null,jt=null;return{setTest:function(Ct){le||(Ct?He(t.STENCIL_TEST):Fe(t.STENCIL_TEST))},setMask:function(Ct){nt!==Ct&&!le&&(t.stencilMask(Ct),nt=Ct)},setFunc:function(Ct,Zt,En){(Xe!==Ct||we!==Zt||Ye!==En)&&(t.stencilFunc(Ct,Zt,En),Xe=Ct,we=Zt,Ye=En)},setOp:function(Ct,Zt,En){(st!==Ct||at!==Zt||Et!==En)&&(t.stencilOp(Ct,Zt,En),st=Ct,at=Zt,Et=En)},setLocked:function(Ct){le=Ct},setClear:function(Ct){jt!==Ct&&(t.clearStencil(Ct),jt=Ct)},reset:function(){le=!1,nt=null,Xe=null,we=null,Ye=null,st=null,at=null,Et=null,jt=null}}}const o=new r,l=new s,c=new a,u=new WeakMap,h=new WeakMap;let f={},m={},g=new WeakMap,y=[],x=null,v=!1,_=null,S=null,M=null,b=null,C=null,B=null,P=null,T=new ht(0,0,0),I=0,z=!1,G=null,Q=null,U=null,ee=null,$=null;const oe=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Z=!1,J=0;const H=t.getParameter(t.VERSION);H.indexOf("WebGL")!==-1?(J=parseFloat(/^WebGL (\d)/.exec(H)[1]),Z=J>=1):H.indexOf("OpenGL ES")!==-1&&(J=parseFloat(/^OpenGL ES (\d)/.exec(H)[1]),Z=J>=2);let O=null,j={};const W=t.getParameter(t.SCISSOR_BOX),ne=t.getParameter(t.VIEWPORT),ae=new on().fromArray(W),de=new on().fromArray(ne);function fe(le,nt,Xe,we){const Ye=new Uint8Array(4),st=t.createTexture();t.bindTexture(le,st),t.texParameteri(le,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(le,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let at=0;at<Xe;at++)i&&(le===t.TEXTURE_3D||le===t.TEXTURE_2D_ARRAY)?t.texImage3D(nt,0,t.RGBA,1,1,we,0,t.RGBA,t.UNSIGNED_BYTE,Ye):t.texImage2D(nt+at,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,Ye);return st}const Se={};Se[t.TEXTURE_2D]=fe(t.TEXTURE_2D,t.TEXTURE_2D,1),Se[t.TEXTURE_CUBE_MAP]=fe(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(Se[t.TEXTURE_2D_ARRAY]=fe(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),Se[t.TEXTURE_3D]=fe(t.TEXTURE_3D,t.TEXTURE_3D,1,1)),o.setClear(0,0,0,1),l.setClear(1),c.setClear(0),He(t.DEPTH_TEST),l.setFunc(ap),Ee(!1),Oe(KS),He(t.CULL_FACE),Me(Di);function He(le){f[le]!==!0&&(t.enable(le),f[le]=!0)}function Fe(le){f[le]!==!1&&(t.disable(le),f[le]=!1)}function ge(le,nt){return m[le]!==nt?(t.bindFramebuffer(le,nt),m[le]=nt,i&&(le===t.DRAW_FRAMEBUFFER&&(m[t.FRAMEBUFFER]=nt),le===t.FRAMEBUFFER&&(m[t.DRAW_FRAMEBUFFER]=nt)),!0):!1}function X(le,nt){let Xe=y,we=!1;if(le)if(Xe=g.get(nt),Xe===void 0&&(Xe=[],g.set(nt,Xe)),le.isWebGLMultipleRenderTargets){const Ye=le.texture;if(Xe.length!==Ye.length||Xe[0]!==t.COLOR_ATTACHMENT0){for(let st=0,at=Ye.length;st<at;st++)Xe[st]=t.COLOR_ATTACHMENT0+st;Xe.length=Ye.length,we=!0}}else Xe[0]!==t.COLOR_ATTACHMENT0&&(Xe[0]=t.COLOR_ATTACHMENT0,we=!0);else Xe[0]!==t.BACK&&(Xe[0]=t.BACK,we=!0);we&&(n.isWebGL2?t.drawBuffers(Xe):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Xe))}function Re(le){return x!==le?(t.useProgram(le),x=le,!0):!1}const ye={[Ho]:t.FUNC_ADD,[zD]:t.FUNC_SUBTRACT,[HD]:t.FUNC_REVERSE_SUBTRACT};if(i)ye[qS]=t.MIN,ye[$S]=t.MAX;else{const le=e.get("EXT_blend_minmax");le!==null&&(ye[qS]=le.MIN_EXT,ye[$S]=le.MAX_EXT)}const De={[VD]:t.ZERO,[jD]:t.ONE,[WD]:t.SRC_COLOR,[R0]:t.SRC_ALPHA,[ZD]:t.SRC_ALPHA_SATURATE,[KD]:t.DST_COLOR,[JD]:t.DST_ALPHA,[XD]:t.ONE_MINUS_SRC_COLOR,[P0]:t.ONE_MINUS_SRC_ALPHA,[QD]:t.ONE_MINUS_DST_COLOR,[YD]:t.ONE_MINUS_DST_ALPHA,[qD]:t.CONSTANT_COLOR,[$D]:t.ONE_MINUS_CONSTANT_COLOR,[eN]:t.CONSTANT_ALPHA,[tN]:t.ONE_MINUS_CONSTANT_ALPHA};function Me(le,nt,Xe,we,Ye,st,at,Et,jt,Ct){if(le===Di){v===!0&&(Fe(t.BLEND),v=!1);return}if(v===!1&&(He(t.BLEND),v=!0),le!==GD){if(le!==_||Ct!==z){if((S!==Ho||C!==Ho)&&(t.blendEquation(t.FUNC_ADD),S=Ho,C=Ho),Ct)switch(le){case Bc:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case sp:t.blendFunc(t.ONE,t.ONE);break;case QS:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case ZS:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",le);break}else switch(le){case Bc:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case sp:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case QS:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case ZS:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",le);break}M=null,b=null,B=null,P=null,T.set(0,0,0),I=0,_=le,z=Ct}return}Ye=Ye||nt,st=st||Xe,at=at||we,(nt!==S||Ye!==C)&&(t.blendEquationSeparate(ye[nt],ye[Ye]),S=nt,C=Ye),(Xe!==M||we!==b||st!==B||at!==P)&&(t.blendFuncSeparate(De[Xe],De[we],De[st],De[at]),M=Xe,b=we,B=st,P=at),(Et.equals(T)===!1||jt!==I)&&(t.blendColor(Et.r,Et.g,Et.b,jt),T.copy(Et),I=jt),_=le,z=!1}function Qe(le,nt){le.side===Ii?Fe(t.CULL_FACE):He(t.CULL_FACE);let Xe=le.side===Ai;nt&&(Xe=!Xe),Ee(Xe),le.blending===Bc&&le.transparent===!1?Me(Di):Me(le.blending,le.blendEquation,le.blendSrc,le.blendDst,le.blendEquationAlpha,le.blendSrcAlpha,le.blendDstAlpha,le.blendColor,le.blendAlpha,le.premultipliedAlpha),l.setFunc(le.depthFunc),l.setTest(le.depthTest),l.setMask(le.depthWrite),o.setMask(le.colorWrite);const we=le.stencilWrite;c.setTest(we),we&&(c.setMask(le.stencilWriteMask),c.setFunc(le.stencilFunc,le.stencilRef,le.stencilFuncMask),c.setOp(le.stencilFail,le.stencilZFail,le.stencilZPass)),be(le.polygonOffset,le.polygonOffsetFactor,le.polygonOffsetUnits),le.alphaToCoverage===!0?He(t.SAMPLE_ALPHA_TO_COVERAGE):Fe(t.SAMPLE_ALPHA_TO_COVERAGE)}function Ee(le){G!==le&&(le?t.frontFace(t.CW):t.frontFace(t.CCW),G=le)}function Oe(le){le!==UD?(He(t.CULL_FACE),le!==Q&&(le===KS?t.cullFace(t.BACK):le===kD?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):Fe(t.CULL_FACE),Q=le}function Je(le){le!==U&&(Z&&t.lineWidth(le),U=le)}function be(le,nt,Xe){le?(He(t.POLYGON_OFFSET_FILL),(ee!==nt||$!==Xe)&&(t.polygonOffset(nt,Xe),ee=nt,$=Xe)):Fe(t.POLYGON_OFFSET_FILL)}function rt(le){le?He(t.SCISSOR_TEST):Fe(t.SCISSOR_TEST)}function V(le){le===void 0&&(le=t.TEXTURE0+oe-1),O!==le&&(t.activeTexture(le),O=le)}function k(le,nt,Xe){Xe===void 0&&(O===null?Xe=t.TEXTURE0+oe-1:Xe=O);let we=j[Xe];we===void 0&&(we={type:void 0,texture:void 0},j[Xe]=we),(we.type!==le||we.texture!==nt)&&(O!==Xe&&(t.activeTexture(Xe),O=Xe),t.bindTexture(le,nt||Se[le]),we.type=le,we.texture=nt)}function ue(){const le=j[O];le!==void 0&&le.type!==void 0&&(t.bindTexture(le.type,null),le.type=void 0,le.texture=void 0)}function je(){try{t.compressedTexImage2D.apply(t,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function _e(){try{t.compressedTexImage3D.apply(t,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Le(){try{t.texSubImage2D.apply(t,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Ke(){try{t.texSubImage3D.apply(t,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function We(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Ze(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function ct(){try{t.texStorage2D.apply(t,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function ot(){try{t.texStorage3D.apply(t,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Pe(){try{t.texImage2D.apply(t,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function et(){try{t.texImage3D.apply(t,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function re(le){ae.equals(le)===!1&&(t.scissor(le.x,le.y,le.z,le.w),ae.copy(le))}function Ae(le){de.equals(le)===!1&&(t.viewport(le.x,le.y,le.z,le.w),de.copy(le))}function Ge(le,nt){let Xe=h.get(nt);Xe===void 0&&(Xe=new WeakMap,h.set(nt,Xe));let we=Xe.get(le);we===void 0&&(we=t.getUniformBlockIndex(nt,le.name),Xe.set(le,we))}function Ve(le,nt){const we=h.get(nt).get(le);u.get(nt)!==we&&(t.uniformBlockBinding(nt,we,le.__bindingPointIndex),u.set(nt,we))}function xe(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),i===!0&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),f={},O=null,j={},m={},g=new WeakMap,y=[],x=null,v=!1,_=null,S=null,M=null,b=null,C=null,B=null,P=null,T=new ht(0,0,0),I=0,z=!1,G=null,Q=null,U=null,ee=null,$=null,ae.set(0,0,t.canvas.width,t.canvas.height),de.set(0,0,t.canvas.width,t.canvas.height),o.reset(),l.reset(),c.reset()}return{buffers:{color:o,depth:l,stencil:c},enable:He,disable:Fe,bindFramebuffer:ge,drawBuffers:X,useProgram:Re,setBlending:Me,setMaterial:Qe,setFlipSided:Ee,setCullFace:Oe,setLineWidth:Je,setPolygonOffset:be,setScissorTest:rt,activeTexture:V,bindTexture:k,unbindTexture:ue,compressedTexImage2D:je,compressedTexImage3D:_e,texImage2D:Pe,texImage3D:et,updateUBOMapping:Ge,uniformBlockBinding:Ve,texStorage2D:ct,texStorage3D:ot,texSubImage2D:Le,texSubImage3D:Ke,compressedTexSubImage2D:We,compressedTexSubImage3D:Ze,scissor:re,viewport:Ae,reset:xe}}function iJ(t,e,n,i,r,s,a){const o=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,h=r.maxSamples,f=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,m=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),g=new WeakMap;let y;const x=new WeakMap;let v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function _(V,k){return v?new OffscreenCanvas(V,k):mp("canvas")}function S(V,k,ue,je){let _e=1;if((V.width>je||V.height>je)&&(_e=je/Math.max(V.width,V.height)),_e<1||k===!0)if(typeof HTMLImageElement<"u"&&V instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&V instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&V instanceof ImageBitmap){const Le=k?L0:Math.floor,Ke=Le(_e*V.width),We=Le(_e*V.height);y===void 0&&(y=_(Ke,We));const Ze=ue?_(Ke,We):y;return Ze.width=Ke,Ze.height=We,Ze.getContext("2d").drawImage(V,0,0,Ke,We),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+V.width+"x"+V.height+") to ("+Ke+"x"+We+")."),Ze}else return"data"in V&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+V.width+"x"+V.height+")."),V;return V}function M(V){return RA(V.width)&&RA(V.height)}function b(V){return o?!1:V.wrapS!==Dn||V.wrapT!==Dn||V.minFilter!==Rn&&V.minFilter!==kt}function C(V,k){return V.generateMipmaps&&k&&V.minFilter!==Rn&&V.minFilter!==kt}function B(V){t.generateMipmap(V)}function P(V,k,ue,je,_e=!1){if(o===!1)return k;if(V!==null){if(t[V]!==void 0)return t[V];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+V+"'")}let Le=k;if(k===t.RED&&(ue===t.FLOAT&&(Le=t.R32F),ue===t.HALF_FLOAT&&(Le=t.R16F),ue===t.UNSIGNED_BYTE&&(Le=t.R8)),k===t.RED_INTEGER&&(ue===t.UNSIGNED_BYTE&&(Le=t.R8UI),ue===t.UNSIGNED_SHORT&&(Le=t.R16UI),ue===t.UNSIGNED_INT&&(Le=t.R32UI),ue===t.BYTE&&(Le=t.R8I),ue===t.SHORT&&(Le=t.R16I),ue===t.INT&&(Le=t.R32I)),k===t.RG&&(ue===t.FLOAT&&(Le=t.RG32F),ue===t.HALF_FLOAT&&(Le=t.RG16F),ue===t.UNSIGNED_BYTE&&(Le=t.RG8)),k===t.RGBA){const Ke=_e?up:gn.getTransfer(je);ue===t.FLOAT&&(Le=t.RGBA32F),ue===t.HALF_FLOAT&&(Le=t.RGBA16F),ue===t.UNSIGNED_BYTE&&(Le=Ke===bn?t.SRGB8_ALPHA8:t.RGBA8),ue===t.UNSIGNED_SHORT_4_4_4_4&&(Le=t.RGBA4),ue===t.UNSIGNED_SHORT_5_5_5_1&&(Le=t.RGB5_A1)}return(Le===t.R16F||Le===t.R32F||Le===t.RG16F||Le===t.RG32F||Le===t.RGBA16F||Le===t.RGBA32F)&&e.get("EXT_color_buffer_float"),Le}function T(V,k,ue){return C(V,ue)===!0||V.isFramebufferTexture&&V.minFilter!==Rn&&V.minFilter!==kt?Math.log2(Math.max(k.width,k.height))+1:V.mipmaps!==void 0&&V.mipmaps.length>0?V.mipmaps.length:V.isCompressedTexture&&Array.isArray(V.image)?k.mipmaps.length:1}function I(V){return V===Rn||V===lp||V===gh?t.NEAREST:t.LINEAR}function z(V){const k=V.target;k.removeEventListener("dispose",z),Q(k),k.isVideoTexture&&g.delete(k)}function G(V){const k=V.target;k.removeEventListener("dispose",G),ee(k)}function Q(V){const k=i.get(V);if(k.__webglInit===void 0)return;const ue=V.source,je=x.get(ue);if(je){const _e=je[k.__cacheKey];_e.usedTimes--,_e.usedTimes===0&&U(V),Object.keys(je).length===0&&x.delete(ue)}i.remove(V)}function U(V){const k=i.get(V);t.deleteTexture(k.__webglTexture);const ue=V.source,je=x.get(ue);delete je[k.__cacheKey],a.memory.textures--}function ee(V){const k=V.texture,ue=i.get(V),je=i.get(k);if(je.__webglTexture!==void 0&&(t.deleteTexture(je.__webglTexture),a.memory.textures--),V.depthTexture&&V.depthTexture.dispose(),V.isWebGLCubeRenderTarget)for(let _e=0;_e<6;_e++){if(Array.isArray(ue.__webglFramebuffer[_e]))for(let Le=0;Le<ue.__webglFramebuffer[_e].length;Le++)t.deleteFramebuffer(ue.__webglFramebuffer[_e][Le]);else t.deleteFramebuffer(ue.__webglFramebuffer[_e]);ue.__webglDepthbuffer&&t.deleteRenderbuffer(ue.__webglDepthbuffer[_e])}else{if(Array.isArray(ue.__webglFramebuffer))for(let _e=0;_e<ue.__webglFramebuffer.length;_e++)t.deleteFramebuffer(ue.__webglFramebuffer[_e]);else t.deleteFramebuffer(ue.__webglFramebuffer);if(ue.__webglDepthbuffer&&t.deleteRenderbuffer(ue.__webglDepthbuffer),ue.__webglMultisampledFramebuffer&&t.deleteFramebuffer(ue.__webglMultisampledFramebuffer),ue.__webglColorRenderbuffer)for(let _e=0;_e<ue.__webglColorRenderbuffer.length;_e++)ue.__webglColorRenderbuffer[_e]&&t.deleteRenderbuffer(ue.__webglColorRenderbuffer[_e]);ue.__webglDepthRenderbuffer&&t.deleteRenderbuffer(ue.__webglDepthRenderbuffer)}if(V.isWebGLMultipleRenderTargets)for(let _e=0,Le=k.length;_e<Le;_e++){const Ke=i.get(k[_e]);Ke.__webglTexture&&(t.deleteTexture(Ke.__webglTexture),a.memory.textures--),i.remove(k[_e])}i.remove(k),i.remove(V)}let $=0;function oe(){$=0}function Z(){const V=$;return V>=l&&console.warn("THREE.WebGLTextures: Trying to use "+V+" texture units while this GPU supports only "+l),$+=1,V}function J(V){const k=[];return k.push(V.wrapS),k.push(V.wrapT),k.push(V.wrapR||0),k.push(V.magFilter),k.push(V.minFilter),k.push(V.anisotropy),k.push(V.internalFormat),k.push(V.format),k.push(V.type),k.push(V.generateMipmaps),k.push(V.premultiplyAlpha),k.push(V.flipY),k.push(V.unpackAlignment),k.push(V.colorSpace),k.join()}function H(V,k){const ue=i.get(V);if(V.isVideoTexture&&be(V),V.isRenderTargetTexture===!1&&V.version>0&&ue.__version!==V.version){const je=V.image;if(je===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(je.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{He(ue,V,k);return}}n.bindTexture(t.TEXTURE_2D,ue.__webglTexture,t.TEXTURE0+k)}function O(V,k){const ue=i.get(V);if(V.version>0&&ue.__version!==V.version){He(ue,V,k);return}n.bindTexture(t.TEXTURE_2D_ARRAY,ue.__webglTexture,t.TEXTURE0+k)}function j(V,k){const ue=i.get(V);if(V.version>0&&ue.__version!==V.version){He(ue,V,k);return}n.bindTexture(t.TEXTURE_3D,ue.__webglTexture,t.TEXTURE0+k)}function W(V,k){const ue=i.get(V);if(V.version>0&&ue.__version!==V.version){Fe(ue,V,k);return}n.bindTexture(t.TEXTURE_CUBE_MAP,ue.__webglTexture,t.TEXTURE0+k)}const ne={[pl]:t.REPEAT,[Dn]:t.CLAMP_TO_EDGE,[Lh]:t.MIRRORED_REPEAT},ae={[Rn]:t.NEAREST,[lp]:t.NEAREST_MIPMAP_NEAREST,[gh]:t.NEAREST_MIPMAP_LINEAR,[kt]:t.LINEAR,[my]:t.LINEAR_MIPMAP_NEAREST,[_a]:t.LINEAR_MIPMAP_LINEAR},de={[bN]:t.NEVER,[IN]:t.ALWAYS,[TN]:t.LESS,[WM]:t.LEQUAL,[CN]:t.EQUAL,[BN]:t.GEQUAL,[RN]:t.GREATER,[PN]:t.NOTEQUAL};function fe(V,k,ue){if(ue?(t.texParameteri(V,t.TEXTURE_WRAP_S,ne[k.wrapS]),t.texParameteri(V,t.TEXTURE_WRAP_T,ne[k.wrapT]),(V===t.TEXTURE_3D||V===t.TEXTURE_2D_ARRAY)&&t.texParameteri(V,t.TEXTURE_WRAP_R,ne[k.wrapR]),t.texParameteri(V,t.TEXTURE_MAG_FILTER,ae[k.magFilter]),t.texParameteri(V,t.TEXTURE_MIN_FILTER,ae[k.minFilter])):(t.texParameteri(V,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(V,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),(V===t.TEXTURE_3D||V===t.TEXTURE_2D_ARRAY)&&t.texParameteri(V,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),(k.wrapS!==Dn||k.wrapT!==Dn)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(V,t.TEXTURE_MAG_FILTER,I(k.magFilter)),t.texParameteri(V,t.TEXTURE_MIN_FILTER,I(k.minFilter)),k.minFilter!==Rn&&k.minFilter!==kt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),k.compareFunction&&(t.texParameteri(V,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(V,t.TEXTURE_COMPARE_FUNC,de[k.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const je=e.get("EXT_texture_filter_anisotropic");if(k.magFilter===Rn||k.minFilter!==gh&&k.minFilter!==_a||k.type===$n&&e.has("OES_texture_float_linear")===!1||o===!1&&k.type===ei&&e.has("OES_texture_half_float_linear")===!1)return;(k.anisotropy>1||i.get(k).__currentAnisotropy)&&(t.texParameterf(V,je.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(k.anisotropy,r.getMaxAnisotropy())),i.get(k).__currentAnisotropy=k.anisotropy)}}function Se(V,k){let ue=!1;V.__webglInit===void 0&&(V.__webglInit=!0,k.addEventListener("dispose",z));const je=k.source;let _e=x.get(je);_e===void 0&&(_e={},x.set(je,_e));const Le=J(k);if(Le!==V.__cacheKey){_e[Le]===void 0&&(_e[Le]={texture:t.createTexture(),usedTimes:0},a.memory.textures++,ue=!0),_e[Le].usedTimes++;const Ke=_e[V.__cacheKey];Ke!==void 0&&(_e[V.__cacheKey].usedTimes--,Ke.usedTimes===0&&U(k)),V.__cacheKey=Le,V.__webglTexture=_e[Le].texture}return ue}function He(V,k,ue){let je=t.TEXTURE_2D;(k.isDataArrayTexture||k.isCompressedArrayTexture)&&(je=t.TEXTURE_2D_ARRAY),k.isData3DTexture&&(je=t.TEXTURE_3D);const _e=Se(V,k),Le=k.source;n.bindTexture(je,V.__webglTexture,t.TEXTURE0+ue);const Ke=i.get(Le);if(Le.version!==Ke.__version||_e===!0){n.activeTexture(t.TEXTURE0+ue);const We=gn.getPrimaries(gn.workingColorSpace),Ze=k.colorSpace===gr?null:gn.getPrimaries(k.colorSpace),ct=k.colorSpace===gr||We===Ze?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,k.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,k.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,ct);const ot=b(k)&&M(k.image)===!1;let Pe=S(k.image,ot,!1,u);Pe=rt(k,Pe);const et=M(Pe)||o,re=s.convert(k.format,k.colorSpace);let Ae=s.convert(k.type),Ge=P(k.internalFormat,re,Ae,k.colorSpace,k.isVideoTexture);fe(je,k,et);let Ve;const xe=k.mipmaps,le=o&&k.isVideoTexture!==!0&&Ge!==GM,nt=Ke.__version===void 0||_e===!0,Xe=T(k,Pe,et);if(k.isDepthTexture)Ge=t.DEPTH_COMPONENT,o?k.type===$n?Ge=t.DEPTH_COMPONENT32F:k.type===zs?Ge=t.DEPTH_COMPONENT24:k.type===$a?Ge=t.DEPTH24_STENCIL8:Ge=t.DEPTH_COMPONENT16:k.type===$n&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),k.format===eo&&Ge===t.DEPTH_COMPONENT&&k.type!==Vp&&k.type!==zs&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),k.type=zs,Ae=s.convert(k.type)),k.format===ml&&Ge===t.DEPTH_COMPONENT&&(Ge=t.DEPTH_STENCIL,k.type!==$a&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),k.type=$a,Ae=s.convert(k.type))),nt&&(le?n.texStorage2D(t.TEXTURE_2D,1,Ge,Pe.width,Pe.height):n.texImage2D(t.TEXTURE_2D,0,Ge,Pe.width,Pe.height,0,re,Ae,null));else if(k.isDataTexture)if(xe.length>0&&et){le&&nt&&n.texStorage2D(t.TEXTURE_2D,Xe,Ge,xe[0].width,xe[0].height);for(let we=0,Ye=xe.length;we<Ye;we++)Ve=xe[we],le?n.texSubImage2D(t.TEXTURE_2D,we,0,0,Ve.width,Ve.height,re,Ae,Ve.data):n.texImage2D(t.TEXTURE_2D,we,Ge,Ve.width,Ve.height,0,re,Ae,Ve.data);k.generateMipmaps=!1}else le?(nt&&n.texStorage2D(t.TEXTURE_2D,Xe,Ge,Pe.width,Pe.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,Pe.width,Pe.height,re,Ae,Pe.data)):n.texImage2D(t.TEXTURE_2D,0,Ge,Pe.width,Pe.height,0,re,Ae,Pe.data);else if(k.isCompressedTexture)if(k.isCompressedArrayTexture){le&&nt&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Xe,Ge,xe[0].width,xe[0].height,Pe.depth);for(let we=0,Ye=xe.length;we<Ye;we++)Ve=xe[we],k.format!==gi?re!==null?le?n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,we,0,0,0,Ve.width,Ve.height,Pe.depth,re,Ve.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,we,Ge,Ve.width,Ve.height,Pe.depth,0,Ve.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):le?n.texSubImage3D(t.TEXTURE_2D_ARRAY,we,0,0,0,Ve.width,Ve.height,Pe.depth,re,Ae,Ve.data):n.texImage3D(t.TEXTURE_2D_ARRAY,we,Ge,Ve.width,Ve.height,Pe.depth,0,re,Ae,Ve.data)}else{le&&nt&&n.texStorage2D(t.TEXTURE_2D,Xe,Ge,xe[0].width,xe[0].height);for(let we=0,Ye=xe.length;we<Ye;we++)Ve=xe[we],k.format!==gi?re!==null?le?n.compressedTexSubImage2D(t.TEXTURE_2D,we,0,0,Ve.width,Ve.height,re,Ve.data):n.compressedTexImage2D(t.TEXTURE_2D,we,Ge,Ve.width,Ve.height,0,Ve.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):le?n.texSubImage2D(t.TEXTURE_2D,we,0,0,Ve.width,Ve.height,re,Ae,Ve.data):n.texImage2D(t.TEXTURE_2D,we,Ge,Ve.width,Ve.height,0,re,Ae,Ve.data)}else if(k.isDataArrayTexture)le?(nt&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Xe,Ge,Pe.width,Pe.height,Pe.depth),n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,Pe.width,Pe.height,Pe.depth,re,Ae,Pe.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,Ge,Pe.width,Pe.height,Pe.depth,0,re,Ae,Pe.data);else if(k.isData3DTexture)le?(nt&&n.texStorage3D(t.TEXTURE_3D,Xe,Ge,Pe.width,Pe.height,Pe.depth),n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,Pe.width,Pe.height,Pe.depth,re,Ae,Pe.data)):n.texImage3D(t.TEXTURE_3D,0,Ge,Pe.width,Pe.height,Pe.depth,0,re,Ae,Pe.data);else if(k.isFramebufferTexture){if(nt)if(le)n.texStorage2D(t.TEXTURE_2D,Xe,Ge,Pe.width,Pe.height);else{let we=Pe.width,Ye=Pe.height;for(let st=0;st<Xe;st++)n.texImage2D(t.TEXTURE_2D,st,Ge,we,Ye,0,re,Ae,null),we>>=1,Ye>>=1}}else if(xe.length>0&&et){le&&nt&&n.texStorage2D(t.TEXTURE_2D,Xe,Ge,xe[0].width,xe[0].height);for(let we=0,Ye=xe.length;we<Ye;we++)Ve=xe[we],le?n.texSubImage2D(t.TEXTURE_2D,we,0,0,re,Ae,Ve):n.texImage2D(t.TEXTURE_2D,we,Ge,re,Ae,Ve);k.generateMipmaps=!1}else le?(nt&&n.texStorage2D(t.TEXTURE_2D,Xe,Ge,Pe.width,Pe.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,re,Ae,Pe)):n.texImage2D(t.TEXTURE_2D,0,Ge,re,Ae,Pe);C(k,et)&&B(je),Ke.__version=Le.version,k.onUpdate&&k.onUpdate(k)}V.__version=k.version}function Fe(V,k,ue){if(k.image.length!==6)return;const je=Se(V,k),_e=k.source;n.bindTexture(t.TEXTURE_CUBE_MAP,V.__webglTexture,t.TEXTURE0+ue);const Le=i.get(_e);if(_e.version!==Le.__version||je===!0){n.activeTexture(t.TEXTURE0+ue);const Ke=gn.getPrimaries(gn.workingColorSpace),We=k.colorSpace===gr?null:gn.getPrimaries(k.colorSpace),Ze=k.colorSpace===gr||Ke===We?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,k.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,k.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ze);const ct=k.isCompressedTexture||k.image[0].isCompressedTexture,ot=k.image[0]&&k.image[0].isDataTexture,Pe=[];for(let we=0;we<6;we++)!ct&&!ot?Pe[we]=S(k.image[we],!1,!0,c):Pe[we]=ot?k.image[we].image:k.image[we],Pe[we]=rt(k,Pe[we]);const et=Pe[0],re=M(et)||o,Ae=s.convert(k.format,k.colorSpace),Ge=s.convert(k.type),Ve=P(k.internalFormat,Ae,Ge,k.colorSpace),xe=o&&k.isVideoTexture!==!0,le=Le.__version===void 0||je===!0;let nt=T(k,et,re);fe(t.TEXTURE_CUBE_MAP,k,re);let Xe;if(ct){xe&&le&&n.texStorage2D(t.TEXTURE_CUBE_MAP,nt,Ve,et.width,et.height);for(let we=0;we<6;we++){Xe=Pe[we].mipmaps;for(let Ye=0;Ye<Xe.length;Ye++){const st=Xe[Ye];k.format!==gi?Ae!==null?xe?n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+we,Ye,0,0,st.width,st.height,Ae,st.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+we,Ye,Ve,st.width,st.height,0,st.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):xe?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+we,Ye,0,0,st.width,st.height,Ae,Ge,st.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+we,Ye,Ve,st.width,st.height,0,Ae,Ge,st.data)}}}else{Xe=k.mipmaps,xe&&le&&(Xe.length>0&&nt++,n.texStorage2D(t.TEXTURE_CUBE_MAP,nt,Ve,Pe[0].width,Pe[0].height));for(let we=0;we<6;we++)if(ot){xe?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+we,0,0,0,Pe[we].width,Pe[we].height,Ae,Ge,Pe[we].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+we,0,Ve,Pe[we].width,Pe[we].height,0,Ae,Ge,Pe[we].data);for(let Ye=0;Ye<Xe.length;Ye++){const at=Xe[Ye].image[we].image;xe?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+we,Ye+1,0,0,at.width,at.height,Ae,Ge,at.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+we,Ye+1,Ve,at.width,at.height,0,Ae,Ge,at.data)}}else{xe?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+we,0,0,0,Ae,Ge,Pe[we]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+we,0,Ve,Ae,Ge,Pe[we]);for(let Ye=0;Ye<Xe.length;Ye++){const st=Xe[Ye];xe?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+we,Ye+1,0,0,Ae,Ge,st.image[we]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+we,Ye+1,Ve,Ae,Ge,st.image[we])}}}C(k,re)&&B(t.TEXTURE_CUBE_MAP),Le.__version=_e.version,k.onUpdate&&k.onUpdate(k)}V.__version=k.version}function ge(V,k,ue,je,_e,Le){const Ke=s.convert(ue.format,ue.colorSpace),We=s.convert(ue.type),Ze=P(ue.internalFormat,Ke,We,ue.colorSpace);if(!i.get(k).__hasExternalTextures){const ot=Math.max(1,k.width>>Le),Pe=Math.max(1,k.height>>Le);_e===t.TEXTURE_3D||_e===t.TEXTURE_2D_ARRAY?n.texImage3D(_e,Le,Ze,ot,Pe,k.depth,0,Ke,We,null):n.texImage2D(_e,Le,Ze,ot,Pe,0,Ke,We,null)}n.bindFramebuffer(t.FRAMEBUFFER,V),Je(k)?f.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,je,_e,i.get(ue).__webglTexture,0,Oe(k)):(_e===t.TEXTURE_2D||_e>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&_e<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,je,_e,i.get(ue).__webglTexture,Le),n.bindFramebuffer(t.FRAMEBUFFER,null)}function X(V,k,ue){if(t.bindRenderbuffer(t.RENDERBUFFER,V),k.depthBuffer&&!k.stencilBuffer){let je=o===!0?t.DEPTH_COMPONENT24:t.DEPTH_COMPONENT16;if(ue||Je(k)){const _e=k.depthTexture;_e&&_e.isDepthTexture&&(_e.type===$n?je=t.DEPTH_COMPONENT32F:_e.type===zs&&(je=t.DEPTH_COMPONENT24));const Le=Oe(k);Je(k)?f.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Le,je,k.width,k.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,Le,je,k.width,k.height)}else t.renderbufferStorage(t.RENDERBUFFER,je,k.width,k.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,V)}else if(k.depthBuffer&&k.stencilBuffer){const je=Oe(k);ue&&Je(k)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,je,t.DEPTH24_STENCIL8,k.width,k.height):Je(k)?f.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,je,t.DEPTH24_STENCIL8,k.width,k.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,k.width,k.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,V)}else{const je=k.isWebGLMultipleRenderTargets===!0?k.texture:[k.texture];for(let _e=0;_e<je.length;_e++){const Le=je[_e],Ke=s.convert(Le.format,Le.colorSpace),We=s.convert(Le.type),Ze=P(Le.internalFormat,Ke,We,Le.colorSpace),ct=Oe(k);ue&&Je(k)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,ct,Ze,k.width,k.height):Je(k)?f.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,ct,Ze,k.width,k.height):t.renderbufferStorage(t.RENDERBUFFER,Ze,k.width,k.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function Re(V,k){if(k&&k.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,V),!(k.depthTexture&&k.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(k.depthTexture).__webglTexture||k.depthTexture.image.width!==k.width||k.depthTexture.image.height!==k.height)&&(k.depthTexture.image.width=k.width,k.depthTexture.image.height=k.height,k.depthTexture.needsUpdate=!0),H(k.depthTexture,0);const je=i.get(k.depthTexture).__webglTexture,_e=Oe(k);if(k.depthTexture.format===eo)Je(k)?f.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,je,0,_e):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,je,0);else if(k.depthTexture.format===ml)Je(k)?f.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,je,0,_e):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,je,0);else throw new Error("Unknown depthTexture format")}function ye(V){const k=i.get(V),ue=V.isWebGLCubeRenderTarget===!0;if(V.depthTexture&&!k.__autoAllocateDepthBuffer){if(ue)throw new Error("target.depthTexture not supported in Cube render targets");Re(k.__webglFramebuffer,V)}else if(ue){k.__webglDepthbuffer=[];for(let je=0;je<6;je++)n.bindFramebuffer(t.FRAMEBUFFER,k.__webglFramebuffer[je]),k.__webglDepthbuffer[je]=t.createRenderbuffer(),X(k.__webglDepthbuffer[je],V,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,k.__webglFramebuffer),k.__webglDepthbuffer=t.createRenderbuffer(),X(k.__webglDepthbuffer,V,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function De(V,k,ue){const je=i.get(V);k!==void 0&&ge(je.__webglFramebuffer,V,V.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),ue!==void 0&&ye(V)}function Me(V){const k=V.texture,ue=i.get(V),je=i.get(k);V.addEventListener("dispose",G),V.isWebGLMultipleRenderTargets!==!0&&(je.__webglTexture===void 0&&(je.__webglTexture=t.createTexture()),je.__version=k.version,a.memory.textures++);const _e=V.isWebGLCubeRenderTarget===!0,Le=V.isWebGLMultipleRenderTargets===!0,Ke=M(V)||o;if(_e){ue.__webglFramebuffer=[];for(let We=0;We<6;We++)if(o&&k.mipmaps&&k.mipmaps.length>0){ue.__webglFramebuffer[We]=[];for(let Ze=0;Ze<k.mipmaps.length;Ze++)ue.__webglFramebuffer[We][Ze]=t.createFramebuffer()}else ue.__webglFramebuffer[We]=t.createFramebuffer()}else{if(o&&k.mipmaps&&k.mipmaps.length>0){ue.__webglFramebuffer=[];for(let We=0;We<k.mipmaps.length;We++)ue.__webglFramebuffer[We]=t.createFramebuffer()}else ue.__webglFramebuffer=t.createFramebuffer();if(Le)if(r.drawBuffers){const We=V.texture;for(let Ze=0,ct=We.length;Ze<ct;Ze++){const ot=i.get(We[Ze]);ot.__webglTexture===void 0&&(ot.__webglTexture=t.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&V.samples>0&&Je(V)===!1){const We=Le?k:[k];ue.__webglMultisampledFramebuffer=t.createFramebuffer(),ue.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,ue.__webglMultisampledFramebuffer);for(let Ze=0;Ze<We.length;Ze++){const ct=We[Ze];ue.__webglColorRenderbuffer[Ze]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,ue.__webglColorRenderbuffer[Ze]);const ot=s.convert(ct.format,ct.colorSpace),Pe=s.convert(ct.type),et=P(ct.internalFormat,ot,Pe,ct.colorSpace,V.isXRRenderTarget===!0),re=Oe(V);t.renderbufferStorageMultisample(t.RENDERBUFFER,re,et,V.width,V.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ze,t.RENDERBUFFER,ue.__webglColorRenderbuffer[Ze])}t.bindRenderbuffer(t.RENDERBUFFER,null),V.depthBuffer&&(ue.__webglDepthRenderbuffer=t.createRenderbuffer(),X(ue.__webglDepthRenderbuffer,V,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(_e){n.bindTexture(t.TEXTURE_CUBE_MAP,je.__webglTexture),fe(t.TEXTURE_CUBE_MAP,k,Ke);for(let We=0;We<6;We++)if(o&&k.mipmaps&&k.mipmaps.length>0)for(let Ze=0;Ze<k.mipmaps.length;Ze++)ge(ue.__webglFramebuffer[We][Ze],V,k,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+We,Ze);else ge(ue.__webglFramebuffer[We],V,k,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+We,0);C(k,Ke)&&B(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Le){const We=V.texture;for(let Ze=0,ct=We.length;Ze<ct;Ze++){const ot=We[Ze],Pe=i.get(ot);n.bindTexture(t.TEXTURE_2D,Pe.__webglTexture),fe(t.TEXTURE_2D,ot,Ke),ge(ue.__webglFramebuffer,V,ot,t.COLOR_ATTACHMENT0+Ze,t.TEXTURE_2D,0),C(ot,Ke)&&B(t.TEXTURE_2D)}n.unbindTexture()}else{let We=t.TEXTURE_2D;if((V.isWebGL3DRenderTarget||V.isWebGLArrayRenderTarget)&&(o?We=V.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(We,je.__webglTexture),fe(We,k,Ke),o&&k.mipmaps&&k.mipmaps.length>0)for(let Ze=0;Ze<k.mipmaps.length;Ze++)ge(ue.__webglFramebuffer[Ze],V,k,t.COLOR_ATTACHMENT0,We,Ze);else ge(ue.__webglFramebuffer,V,k,t.COLOR_ATTACHMENT0,We,0);C(k,Ke)&&B(We),n.unbindTexture()}V.depthBuffer&&ye(V)}function Qe(V){const k=M(V)||o,ue=V.isWebGLMultipleRenderTargets===!0?V.texture:[V.texture];for(let je=0,_e=ue.length;je<_e;je++){const Le=ue[je];if(C(Le,k)){const Ke=V.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,We=i.get(Le).__webglTexture;n.bindTexture(Ke,We),B(Ke),n.unbindTexture()}}}function Ee(V){if(o&&V.samples>0&&Je(V)===!1){const k=V.isWebGLMultipleRenderTargets?V.texture:[V.texture],ue=V.width,je=V.height;let _e=t.COLOR_BUFFER_BIT;const Le=[],Ke=V.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,We=i.get(V),Ze=V.isWebGLMultipleRenderTargets===!0;if(Ze)for(let ct=0;ct<k.length;ct++)n.bindFramebuffer(t.FRAMEBUFFER,We.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+ct,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,We.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+ct,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,We.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,We.__webglFramebuffer);for(let ct=0;ct<k.length;ct++){Le.push(t.COLOR_ATTACHMENT0+ct),V.depthBuffer&&Le.push(Ke);const ot=We.__ignoreDepthValues!==void 0?We.__ignoreDepthValues:!1;if(ot===!1&&(V.depthBuffer&&(_e|=t.DEPTH_BUFFER_BIT),V.stencilBuffer&&(_e|=t.STENCIL_BUFFER_BIT)),Ze&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,We.__webglColorRenderbuffer[ct]),ot===!0&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[Ke]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[Ke])),Ze){const Pe=i.get(k[ct]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,Pe,0)}t.blitFramebuffer(0,0,ue,je,0,0,ue,je,_e,t.NEAREST),m&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,Le)}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),Ze)for(let ct=0;ct<k.length;ct++){n.bindFramebuffer(t.FRAMEBUFFER,We.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+ct,t.RENDERBUFFER,We.__webglColorRenderbuffer[ct]);const ot=i.get(k[ct]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,We.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+ct,t.TEXTURE_2D,ot,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,We.__webglMultisampledFramebuffer)}}function Oe(V){return Math.min(h,V.samples)}function Je(V){const k=i.get(V);return o&&V.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&k.__useRenderToTexture!==!1}function be(V){const k=a.render.frame;g.get(V)!==k&&(g.set(V,k),V.update())}function rt(V,k){const ue=V.colorSpace,je=V.format,_e=V.type;return V.isCompressedTexture===!0||V.isVideoTexture===!0||V.format===I0||ue!==xr&&ue!==gr&&(gn.getTransfer(ue)===bn?o===!1?e.has("EXT_sRGB")===!0&&je===gi?(V.format=I0,V.minFilter=kt,V.generateMipmaps=!1):k=JM.sRGBToLinear(k):(je!==gi||_e!==vi)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ue)),k}this.allocateTextureUnit=Z,this.resetTextureUnits=oe,this.setTexture2D=H,this.setTexture2DArray=O,this.setTexture3D=j,this.setTextureCube=W,this.rebindTextures=De,this.setupRenderTarget=Me,this.updateRenderTargetMipmap=Qe,this.updateMultisampleRenderTarget=Ee,this.setupDepthRenderbuffer=ye,this.setupFrameBufferTexture=ge,this.useMultisampledRTT=Je}function WN(t,e,n){const i=n.isWebGL2;function r(s,a=gr){let o;const l=gn.getTransfer(a);if(s===vi)return t.UNSIGNED_BYTE;if(s===DM)return t.UNSIGNED_SHORT_4_4_4_4;if(s===NM)return t.UNSIGNED_SHORT_5_5_5_1;if(s===IM)return t.BYTE;if(s===LM)return t.SHORT;if(s===Vp)return t.UNSIGNED_SHORT;if(s===gy)return t.INT;if(s===zs)return t.UNSIGNED_INT;if(s===$n)return t.FLOAT;if(s===ei)return i?t.HALF_FLOAT:(o=e.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(s===gN)return t.ALPHA;if(s===gi)return t.RGBA;if(s===vN)return t.LUMINANCE;if(s===yN)return t.LUMINANCE_ALPHA;if(s===eo)return t.DEPTH_COMPONENT;if(s===ml)return t.DEPTH_STENCIL;if(s===I0)return o=e.get("EXT_sRGB"),o!==null?o.SRGB_ALPHA_EXT:null;if(s===FM)return t.RED;if(s===UM)return t.RED_INTEGER;if(s===xN)return t.RG;if(s===kM)return t.RG_INTEGER;if(s===OM)return t.RGBA_INTEGER;if(s===Ov||s===Gv||s===zv||s===Hv)if(l===bn)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(s===Ov)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Gv)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===zv)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===Hv)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(s===Ov)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Gv)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===zv)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===Hv)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===nA||s===iA||s===rA||s===sA)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(s===nA)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===iA)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===rA)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===sA)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===GM)return o=e.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===aA||s===oA)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(s===aA)return l===bn?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(s===oA)return l===bn?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===lA||s===cA||s===uA||s===hA||s===dA||s===fA||s===pA||s===mA||s===gA||s===vA||s===yA||s===xA||s===_A||s===SA)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(s===lA)return l===bn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===cA)return l===bn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===uA)return l===bn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===hA)return l===bn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===dA)return l===bn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===fA)return l===bn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===pA)return l===bn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===mA)return l===bn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===gA)return l===bn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===vA)return l===bn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===yA)return l===bn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===xA)return l===bn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===_A)return l===bn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===SA)return l===bn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===Vv||s===AA||s===wA)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(s===Vv)return l===bn?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(s===AA)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(s===wA)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(s===_N||s===MA||s===EA||s===bA)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(s===Vv)return o.COMPRESSED_RED_RGTC1_EXT;if(s===MA)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===EA)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===bA)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===$a?i?t.UNSIGNED_INT_24_8:(o=e.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null):t[s]!==void 0?t[s]:null}return{convert:r}}class XN extends Pn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Ya extends an{constructor(){super(),this.isGroup=!0,this.type="Group"}}const rJ={type:"move"};class t_{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ya,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ya,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new K,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new K),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ya,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new K,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new K),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const i of e.hand.values())this._getHandJoint(n,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,i){let r=null,s=null,a=null;const o=this._targetRay,l=this._grip,c=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(c&&e.hand){a=!0;for(const y of e.hand.values()){const x=n.getJointPose(y,i),v=this._getHandJoint(c,y);x!==null&&(v.matrix.fromArray(x.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.matrixWorldNeedsUpdate=!0,v.jointRadius=x.radius),v.visible=x!==null}const u=c.joints["index-finger-tip"],h=c.joints["thumb-tip"],f=u.position.distanceTo(h.position),m=.02,g=.005;c.inputState.pinching&&f>m+g?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&f<=m-g&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=n.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(r=n.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(rJ)))}return o!==null&&(o.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=a!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const i=new Ya;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[n.jointName]=i,e.add(i)}return e.joints[n.jointName]}}class sJ extends bs{constructor(e,n){super();const i=this;let r=null,s=1,a=null,o="local-floor",l=1,c=null,u=null,h=null,f=null,m=null,g=null;const y=n.getContextAttributes();let x=null,v=null;const _=[],S=[],M=new Ie;let b=null;const C=new Pn;C.layers.enable(1),C.viewport=new on;const B=new Pn;B.layers.enable(2),B.viewport=new on;const P=[C,B],T=new XN;T.layers.enable(1),T.layers.enable(2);let I=null,z=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(W){let ne=_[W];return ne===void 0&&(ne=new t_,_[W]=ne),ne.getTargetRaySpace()},this.getControllerGrip=function(W){let ne=_[W];return ne===void 0&&(ne=new t_,_[W]=ne),ne.getGripSpace()},this.getHand=function(W){let ne=_[W];return ne===void 0&&(ne=new t_,_[W]=ne),ne.getHandSpace()};function G(W){const ne=S.indexOf(W.inputSource);if(ne===-1)return;const ae=_[ne];ae!==void 0&&(ae.update(W.inputSource,W.frame,c||a),ae.dispatchEvent({type:W.type,data:W.inputSource}))}function Q(){r.removeEventListener("select",G),r.removeEventListener("selectstart",G),r.removeEventListener("selectend",G),r.removeEventListener("squeeze",G),r.removeEventListener("squeezestart",G),r.removeEventListener("squeezeend",G),r.removeEventListener("end",Q),r.removeEventListener("inputsourceschange",U);for(let W=0;W<_.length;W++){const ne=S[W];ne!==null&&(S[W]=null,_[W].disconnect(ne))}I=null,z=null,e.setRenderTarget(x),m=null,f=null,h=null,r=null,v=null,j.stop(),i.isPresenting=!1,e.setPixelRatio(b),e.setSize(M.width,M.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(W){s=W,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(W){o=W,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||a},this.setReferenceSpace=function(W){c=W},this.getBaseLayer=function(){return f!==null?f:m},this.getBinding=function(){return h},this.getFrame=function(){return g},this.getSession=function(){return r},this.setSession=async function(W){if(r=W,r!==null){if(x=e.getRenderTarget(),r.addEventListener("select",G),r.addEventListener("selectstart",G),r.addEventListener("selectend",G),r.addEventListener("squeeze",G),r.addEventListener("squeezestart",G),r.addEventListener("squeezeend",G),r.addEventListener("end",Q),r.addEventListener("inputsourceschange",U),y.xrCompatible!==!0&&await n.makeXRCompatible(),b=e.getPixelRatio(),e.getSize(M),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const ne={antialias:r.renderState.layers===void 0?y.antialias:!0,alpha:!0,depth:y.depth,stencil:y.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(r,n,ne),r.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),v=new Mn(m.framebufferWidth,m.framebufferHeight,{format:gi,type:vi,colorSpace:e.outputColorSpace,stencilBuffer:y.stencil})}else{let ne=null,ae=null,de=null;y.depth&&(de=y.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,ne=y.stencil?ml:eo,ae=y.stencil?$a:zs);const fe={colorFormat:n.RGBA8,depthFormat:de,scaleFactor:s};h=new XRWebGLBinding(r,n),f=h.createProjectionLayer(fe),r.updateRenderState({layers:[f]}),e.setPixelRatio(1),e.setSize(f.textureWidth,f.textureHeight,!1),v=new Mn(f.textureWidth,f.textureHeight,{format:gi,type:vi,depthTexture:new Yh(f.textureWidth,f.textureHeight,ae,void 0,void 0,void 0,void 0,void 0,void 0,ne),stencilBuffer:y.stencil,colorSpace:e.outputColorSpace,samples:y.antialias?4:0});const Se=e.properties.get(v);Se.__ignoreDepthValues=f.ignoreDepthValues}v.isXRRenderTarget=!0,this.setFoveation(l),c=null,a=await r.requestReferenceSpace(o),j.setContext(r),j.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function U(W){for(let ne=0;ne<W.removed.length;ne++){const ae=W.removed[ne],de=S.indexOf(ae);de>=0&&(S[de]=null,_[de].disconnect(ae))}for(let ne=0;ne<W.added.length;ne++){const ae=W.added[ne];let de=S.indexOf(ae);if(de===-1){for(let Se=0;Se<_.length;Se++)if(Se>=S.length){S.push(ae),de=Se;break}else if(S[Se]===null){S[Se]=ae,de=Se;break}if(de===-1)break}const fe=_[de];fe&&fe.connect(ae)}}const ee=new K,$=new K;function oe(W,ne,ae){ee.setFromMatrixPosition(ne.matrixWorld),$.setFromMatrixPosition(ae.matrixWorld);const de=ee.distanceTo($),fe=ne.projectionMatrix.elements,Se=ae.projectionMatrix.elements,He=fe[14]/(fe[10]-1),Fe=fe[14]/(fe[10]+1),ge=(fe[9]+1)/fe[5],X=(fe[9]-1)/fe[5],Re=(fe[8]-1)/fe[0],ye=(Se[8]+1)/Se[0],De=He*Re,Me=He*ye,Qe=de/(-Re+ye),Ee=Qe*-Re;ne.matrixWorld.decompose(W.position,W.quaternion,W.scale),W.translateX(Ee),W.translateZ(Qe),W.matrixWorld.compose(W.position,W.quaternion,W.scale),W.matrixWorldInverse.copy(W.matrixWorld).invert();const Oe=He+Qe,Je=Fe+Qe,be=De-Ee,rt=Me+(de-Ee),V=ge*Fe/Je*Oe,k=X*Fe/Je*Oe;W.projectionMatrix.makePerspective(be,rt,V,k,Oe,Je),W.projectionMatrixInverse.copy(W.projectionMatrix).invert()}function Z(W,ne){ne===null?W.matrixWorld.copy(W.matrix):W.matrixWorld.multiplyMatrices(ne.matrixWorld,W.matrix),W.matrixWorldInverse.copy(W.matrixWorld).invert()}this.updateCamera=function(W){if(r===null)return;T.near=B.near=C.near=W.near,T.far=B.far=C.far=W.far,(I!==T.near||z!==T.far)&&(r.updateRenderState({depthNear:T.near,depthFar:T.far}),I=T.near,z=T.far);const ne=W.parent,ae=T.cameras;Z(T,ne);for(let de=0;de<ae.length;de++)Z(ae[de],ne);ae.length===2?oe(T,C,B):T.projectionMatrix.copy(C.projectionMatrix),J(W,T,ne)};function J(W,ne,ae){ae===null?W.matrix.copy(ne.matrixWorld):(W.matrix.copy(ae.matrixWorld),W.matrix.invert(),W.matrix.multiply(ne.matrixWorld)),W.matrix.decompose(W.position,W.quaternion,W.scale),W.updateMatrixWorld(!0),W.projectionMatrix.copy(ne.projectionMatrix),W.projectionMatrixInverse.copy(ne.projectionMatrixInverse),W.isPerspectiveCamera&&(W.fov=Fh*2*Math.atan(1/W.projectionMatrix.elements[5]),W.zoom=1)}this.getCamera=function(){return T},this.getFoveation=function(){if(!(f===null&&m===null))return l},this.setFoveation=function(W){l=W,f!==null&&(f.fixedFoveation=W),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=W)};let H=null;function O(W,ne){if(u=ne.getViewerPose(c||a),g=ne,u!==null){const ae=u.views;m!==null&&(e.setRenderTargetFramebuffer(v,m.framebuffer),e.setRenderTarget(v));let de=!1;ae.length!==T.cameras.length&&(T.cameras.length=0,de=!0);for(let fe=0;fe<ae.length;fe++){const Se=ae[fe];let He=null;if(m!==null)He=m.getViewport(Se);else{const ge=h.getViewSubImage(f,Se);He=ge.viewport,fe===0&&(e.setRenderTargetTextures(v,ge.colorTexture,f.ignoreDepthValues?void 0:ge.depthStencilTexture),e.setRenderTarget(v))}let Fe=P[fe];Fe===void 0&&(Fe=new Pn,Fe.layers.enable(fe),Fe.viewport=new on,P[fe]=Fe),Fe.matrix.fromArray(Se.transform.matrix),Fe.matrix.decompose(Fe.position,Fe.quaternion,Fe.scale),Fe.projectionMatrix.fromArray(Se.projectionMatrix),Fe.projectionMatrixInverse.copy(Fe.projectionMatrix).invert(),Fe.viewport.set(He.x,He.y,He.width,He.height),fe===0&&(T.matrix.copy(Fe.matrix),T.matrix.decompose(T.position,T.quaternion,T.scale)),de===!0&&T.cameras.push(Fe)}}for(let ae=0;ae<_.length;ae++){const de=S[ae],fe=_[ae];de!==null&&fe!==void 0&&fe.update(de,ne,c||a)}H&&H(W,ne),ne.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:ne}),g=null}const j=new ON;j.setAnimationLoop(O),this.setAnimationLoop=function(W){H=W},this.dispose=function(){}}}function aJ(t,e){function n(x,v){x.matrixAutoUpdate===!0&&x.updateMatrix(),v.value.copy(x.matrix)}function i(x,v){v.color.getRGB(x.fogColor.value,UN(t)),v.isFog?(x.fogNear.value=v.near,x.fogFar.value=v.far):v.isFogExp2&&(x.fogDensity.value=v.density)}function r(x,v,_,S,M){v.isMeshBasicMaterial||v.isMeshLambertMaterial?s(x,v):v.isMeshToonMaterial?(s(x,v),h(x,v)):v.isMeshPhongMaterial?(s(x,v),u(x,v)):v.isMeshStandardMaterial?(s(x,v),f(x,v),v.isMeshPhysicalMaterial&&m(x,v,M)):v.isMeshMatcapMaterial?(s(x,v),g(x,v)):v.isMeshDepthMaterial?s(x,v):v.isMeshDistanceMaterial?(s(x,v),y(x,v)):v.isMeshNormalMaterial?s(x,v):v.isLineBasicMaterial?(a(x,v),v.isLineDashedMaterial&&o(x,v)):v.isPointsMaterial?l(x,v,_,S):v.isSpriteMaterial?c(x,v):v.isShadowMaterial?(x.color.value.copy(v.color),x.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function s(x,v){x.opacity.value=v.opacity,v.color&&x.diffuse.value.copy(v.color),v.emissive&&x.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(x.map.value=v.map,n(v.map,x.mapTransform)),v.alphaMap&&(x.alphaMap.value=v.alphaMap,n(v.alphaMap,x.alphaMapTransform)),v.bumpMap&&(x.bumpMap.value=v.bumpMap,n(v.bumpMap,x.bumpMapTransform),x.bumpScale.value=v.bumpScale,v.side===Ai&&(x.bumpScale.value*=-1)),v.normalMap&&(x.normalMap.value=v.normalMap,n(v.normalMap,x.normalMapTransform),x.normalScale.value.copy(v.normalScale),v.side===Ai&&x.normalScale.value.negate()),v.displacementMap&&(x.displacementMap.value=v.displacementMap,n(v.displacementMap,x.displacementMapTransform),x.displacementScale.value=v.displacementScale,x.displacementBias.value=v.displacementBias),v.emissiveMap&&(x.emissiveMap.value=v.emissiveMap,n(v.emissiveMap,x.emissiveMapTransform)),v.specularMap&&(x.specularMap.value=v.specularMap,n(v.specularMap,x.specularMapTransform)),v.alphaTest>0&&(x.alphaTest.value=v.alphaTest);const _=e.get(v).envMap;if(_&&(x.envMap.value=_,x.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,x.reflectivity.value=v.reflectivity,x.ior.value=v.ior,x.refractionRatio.value=v.refractionRatio),v.lightMap){x.lightMap.value=v.lightMap;const S=t._useLegacyLights===!0?Math.PI:1;x.lightMapIntensity.value=v.lightMapIntensity*S,n(v.lightMap,x.lightMapTransform)}v.aoMap&&(x.aoMap.value=v.aoMap,x.aoMapIntensity.value=v.aoMapIntensity,n(v.aoMap,x.aoMapTransform))}function a(x,v){x.diffuse.value.copy(v.color),x.opacity.value=v.opacity,v.map&&(x.map.value=v.map,n(v.map,x.mapTransform))}function o(x,v){x.dashSize.value=v.dashSize,x.totalSize.value=v.dashSize+v.gapSize,x.scale.value=v.scale}function l(x,v,_,S){x.diffuse.value.copy(v.color),x.opacity.value=v.opacity,x.size.value=v.size*_,x.scale.value=S*.5,v.map&&(x.map.value=v.map,n(v.map,x.uvTransform)),v.alphaMap&&(x.alphaMap.value=v.alphaMap,n(v.alphaMap,x.alphaMapTransform)),v.alphaTest>0&&(x.alphaTest.value=v.alphaTest)}function c(x,v){x.diffuse.value.copy(v.color),x.opacity.value=v.opacity,x.rotation.value=v.rotation,v.map&&(x.map.value=v.map,n(v.map,x.mapTransform)),v.alphaMap&&(x.alphaMap.value=v.alphaMap,n(v.alphaMap,x.alphaMapTransform)),v.alphaTest>0&&(x.alphaTest.value=v.alphaTest)}function u(x,v){x.specular.value.copy(v.specular),x.shininess.value=Math.max(v.shininess,1e-4)}function h(x,v){v.gradientMap&&(x.gradientMap.value=v.gradientMap)}function f(x,v){x.metalness.value=v.metalness,v.metalnessMap&&(x.metalnessMap.value=v.metalnessMap,n(v.metalnessMap,x.metalnessMapTransform)),x.roughness.value=v.roughness,v.roughnessMap&&(x.roughnessMap.value=v.roughnessMap,n(v.roughnessMap,x.roughnessMapTransform)),e.get(v).envMap&&(x.envMapIntensity.value=v.envMapIntensity)}function m(x,v,_){x.ior.value=v.ior,v.sheen>0&&(x.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),x.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(x.sheenColorMap.value=v.sheenColorMap,n(v.sheenColorMap,x.sheenColorMapTransform)),v.sheenRoughnessMap&&(x.sheenRoughnessMap.value=v.sheenRoughnessMap,n(v.sheenRoughnessMap,x.sheenRoughnessMapTransform))),v.clearcoat>0&&(x.clearcoat.value=v.clearcoat,x.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(x.clearcoatMap.value=v.clearcoatMap,n(v.clearcoatMap,x.clearcoatMapTransform)),v.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap,n(v.clearcoatRoughnessMap,x.clearcoatRoughnessMapTransform)),v.clearcoatNormalMap&&(x.clearcoatNormalMap.value=v.clearcoatNormalMap,n(v.clearcoatNormalMap,x.clearcoatNormalMapTransform),x.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),v.side===Ai&&x.clearcoatNormalScale.value.negate())),v.iridescence>0&&(x.iridescence.value=v.iridescence,x.iridescenceIOR.value=v.iridescenceIOR,x.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(x.iridescenceMap.value=v.iridescenceMap,n(v.iridescenceMap,x.iridescenceMapTransform)),v.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=v.iridescenceThicknessMap,n(v.iridescenceThicknessMap,x.iridescenceThicknessMapTransform))),v.transmission>0&&(x.transmission.value=v.transmission,x.transmissionSamplerMap.value=_.texture,x.transmissionSamplerSize.value.set(_.width,_.height),v.transmissionMap&&(x.transmissionMap.value=v.transmissionMap,n(v.transmissionMap,x.transmissionMapTransform)),x.thickness.value=v.thickness,v.thicknessMap&&(x.thicknessMap.value=v.thicknessMap,n(v.thicknessMap,x.thicknessMapTransform)),x.attenuationDistance.value=v.attenuationDistance,x.attenuationColor.value.copy(v.attenuationColor)),v.anisotropy>0&&(x.anisotropyVector.value.set(v.anisotropy*Math.cos(v.anisotropyRotation),v.anisotropy*Math.sin(v.anisotropyRotation)),v.anisotropyMap&&(x.anisotropyMap.value=v.anisotropyMap,n(v.anisotropyMap,x.anisotropyMapTransform))),x.specularIntensity.value=v.specularIntensity,x.specularColor.value.copy(v.specularColor),v.specularColorMap&&(x.specularColorMap.value=v.specularColorMap,n(v.specularColorMap,x.specularColorMapTransform)),v.specularIntensityMap&&(x.specularIntensityMap.value=v.specularIntensityMap,n(v.specularIntensityMap,x.specularIntensityMapTransform))}function g(x,v){v.matcap&&(x.matcap.value=v.matcap)}function y(x,v){const _=e.get(v).light;x.referencePosition.value.setFromMatrixPosition(_.matrixWorld),x.nearDistance.value=_.shadow.camera.near,x.farDistance.value=_.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function oJ(t,e,n,i){let r={},s={},a=[];const o=n.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(_,S){const M=S.program;i.uniformBlockBinding(_,M)}function c(_,S){let M=r[_.id];M===void 0&&(g(_),M=u(_),r[_.id]=M,_.addEventListener("dispose",x));const b=S.program;i.updateUBOMapping(_,b);const C=e.render.frame;s[_.id]!==C&&(f(_),s[_.id]=C)}function u(_){const S=h();_.__bindingPointIndex=S;const M=t.createBuffer(),b=_.__size,C=_.usage;return t.bindBuffer(t.UNIFORM_BUFFER,M),t.bufferData(t.UNIFORM_BUFFER,b,C),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,S,M),M}function h(){for(let _=0;_<o;_++)if(a.indexOf(_)===-1)return a.push(_),_;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(_){const S=r[_.id],M=_.uniforms,b=_.__cache;t.bindBuffer(t.UNIFORM_BUFFER,S);for(let C=0,B=M.length;C<B;C++){const P=M[C];if(m(P,C,b)===!0){const T=P.__offset,I=Array.isArray(P.value)?P.value:[P.value];let z=0;for(let G=0;G<I.length;G++){const Q=I[G],U=y(Q);typeof Q=="number"?(P.__data[0]=Q,t.bufferSubData(t.UNIFORM_BUFFER,T+z,P.__data)):Q.isMatrix3?(P.__data[0]=Q.elements[0],P.__data[1]=Q.elements[1],P.__data[2]=Q.elements[2],P.__data[3]=Q.elements[0],P.__data[4]=Q.elements[3],P.__data[5]=Q.elements[4],P.__data[6]=Q.elements[5],P.__data[7]=Q.elements[0],P.__data[8]=Q.elements[6],P.__data[9]=Q.elements[7],P.__data[10]=Q.elements[8],P.__data[11]=Q.elements[0]):(Q.toArray(P.__data,z),z+=U.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,T,P.__data)}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function m(_,S,M){const b=_.value;if(M[S]===void 0){if(typeof b=="number")M[S]=b;else{const C=Array.isArray(b)?b:[b],B=[];for(let P=0;P<C.length;P++)B.push(C[P].clone());M[S]=B}return!0}else if(typeof b=="number"){if(M[S]!==b)return M[S]=b,!0}else{const C=Array.isArray(M[S])?M[S]:[M[S]],B=Array.isArray(b)?b:[b];for(let P=0;P<C.length;P++){const T=C[P];if(T.equals(B[P])===!1)return T.copy(B[P]),!0}}return!1}function g(_){const S=_.uniforms;let M=0;const b=16;let C=0;for(let B=0,P=S.length;B<P;B++){const T=S[B],I={boundary:0,storage:0},z=Array.isArray(T.value)?T.value:[T.value];for(let G=0,Q=z.length;G<Q;G++){const U=z[G],ee=y(U);I.boundary+=ee.boundary,I.storage+=ee.storage}if(T.__data=new Float32Array(I.storage/Float32Array.BYTES_PER_ELEMENT),T.__offset=M,B>0){C=M%b;const G=b-C;C!==0&&G-I.boundary<0&&(M+=b-C,T.__offset=M)}M+=I.storage}return C=M%b,C>0&&(M+=b-C),_.__size=M,_.__cache={},this}function y(_){const S={boundary:0,storage:0};return typeof _=="number"?(S.boundary=4,S.storage=4):_.isVector2?(S.boundary=8,S.storage=8):_.isVector3||_.isColor?(S.boundary=16,S.storage=12):_.isVector4?(S.boundary=16,S.storage=16):_.isMatrix3?(S.boundary=48,S.storage=48):_.isMatrix4?(S.boundary=64,S.storage=64):_.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",_),S}function x(_){const S=_.target;S.removeEventListener("dispose",x);const M=a.indexOf(S.__bindingPointIndex);a.splice(M,1),t.deleteBuffer(r[S.id]),delete r[S.id],delete s[S.id]}function v(){for(const _ in r)t.deleteBuffer(r[_]);a=[],r={},s={}}return{bind:l,update:c,dispose:v}}class wy{constructor(e={}){const{canvas:n=DN(),context:i=null,depth:r=!0,stencil:s=!0,alpha:a=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:h=!1}=e;this.isWebGLRenderer=!0;let f;i!==null?f=i.getContextAttributes().alpha:f=a;const m=new Uint32Array(4),g=new Int32Array(4);let y=null,x=null;const v=[],_=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=sn,this._useLegacyLights=!1,this.toneMapping=Xs,this.toneMappingExposure=1;const S=this;let M=!1,b=0,C=0,B=null,P=-1,T=null;const I=new on,z=new on;let G=null;const Q=new ht(0);let U=0,ee=n.width,$=n.height,oe=1,Z=null,J=null;const H=new on(0,0,ee,$),O=new on(0,0,ee,$);let j=!1;const W=new Jp;let ne=!1,ae=!1,de=null;const fe=new bt,Se=new Ie,He=new K,Fe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ge(){return B===null?oe:1}let X=i;function Re(N,q){for(let te=0;te<N.length;te++){const ce=N[te],se=n.getContext(ce,q);if(se!==null)return se}return null}try{const N={alpha:!0,depth:r,stencil:s,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:h};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${bl}`),n.addEventListener("webglcontextlost",xe,!1),n.addEventListener("webglcontextrestored",le,!1),n.addEventListener("webglcontextcreationerror",nt,!1),X===null){const q=["webgl2","webgl","experimental-webgl"];if(S.isWebGL1Renderer===!0&&q.shift(),X=Re(q,N),X===null)throw Re(q)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&X instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),X.getShaderPrecisionFormat===void 0&&(X.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(N){throw console.error("THREE.WebGLRenderer: "+N.message),N}let ye,De,Me,Qe,Ee,Oe,Je,be,rt,V,k,ue,je,_e,Le,Ke,We,Ze,ct,ot,Pe,et,re,Ae;function Ge(){ye=new A7(X),De=new g7(X,ye,e),ye.init(De),et=new WN(X,ye,De),Me=new nJ(X,ye,De),Qe=new E7(X),Ee=new jX,Oe=new iJ(X,ye,Me,Ee,De,et,Qe),Je=new y7(S),be=new S7(S),rt=new Lj(X,De),re=new p7(X,ye,rt,De),V=new w7(X,rt,Qe,re),k=new R7(X,V,rt,Qe),ct=new C7(X,De,Oe),Ke=new v7(Ee),ue=new VX(S,Je,be,ye,De,re,Ke),je=new aJ(S,Ee),_e=new XX,Le=new qX(ye,De),Ze=new f7(S,Je,be,Me,k,f,l),We=new tJ(S,k,De),Ae=new oJ(X,Qe,De,Me),ot=new m7(X,ye,Qe,De),Pe=new M7(X,ye,Qe,De),Qe.programs=ue.programs,S.capabilities=De,S.extensions=ye,S.properties=Ee,S.renderLists=_e,S.shadowMap=We,S.state=Me,S.info=Qe}Ge();const Ve=new sJ(S,X);this.xr=Ve,this.getContext=function(){return X},this.getContextAttributes=function(){return X.getContextAttributes()},this.forceContextLoss=function(){const N=ye.get("WEBGL_lose_context");N&&N.loseContext()},this.forceContextRestore=function(){const N=ye.get("WEBGL_lose_context");N&&N.restoreContext()},this.getPixelRatio=function(){return oe},this.setPixelRatio=function(N){N!==void 0&&(oe=N,this.setSize(ee,$,!1))},this.getSize=function(N){return N.set(ee,$)},this.setSize=function(N,q,te=!0){if(Ve.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ee=N,$=q,n.width=Math.floor(N*oe),n.height=Math.floor(q*oe),te===!0&&(n.style.width=N+"px",n.style.height=q+"px"),this.setViewport(0,0,N,q)},this.getDrawingBufferSize=function(N){return N.set(ee*oe,$*oe).floor()},this.setDrawingBufferSize=function(N,q,te){ee=N,$=q,oe=te,n.width=Math.floor(N*te),n.height=Math.floor(q*te),this.setViewport(0,0,N,q)},this.getCurrentViewport=function(N){return N.copy(I)},this.getViewport=function(N){return N.copy(H)},this.setViewport=function(N,q,te,ce){N.isVector4?H.set(N.x,N.y,N.z,N.w):H.set(N,q,te,ce),Me.viewport(I.copy(H).multiplyScalar(oe).floor())},this.getScissor=function(N){return N.copy(O)},this.setScissor=function(N,q,te,ce){N.isVector4?O.set(N.x,N.y,N.z,N.w):O.set(N,q,te,ce),Me.scissor(z.copy(O).multiplyScalar(oe).floor())},this.getScissorTest=function(){return j},this.setScissorTest=function(N){Me.setScissorTest(j=N)},this.setOpaqueSort=function(N){Z=N},this.setTransparentSort=function(N){J=N},this.getClearColor=function(N){return N.copy(Ze.getClearColor())},this.setClearColor=function(){Ze.setClearColor.apply(Ze,arguments)},this.getClearAlpha=function(){return Ze.getClearAlpha()},this.setClearAlpha=function(){Ze.setClearAlpha.apply(Ze,arguments)},this.clear=function(N=!0,q=!0,te=!0){let ce=0;if(N){let se=!1;if(B!==null){const Te=B.texture.format;se=Te===OM||Te===kM||Te===UM}if(se){const Te=B.texture.type,Ne=Te===vi||Te===zs||Te===Vp||Te===$a||Te===DM||Te===NM,ke=Ze.getClearColor(),pe=Ze.getClearAlpha(),ft=ke.r,$e=ke.g,qe=ke.b;Ne?(m[0]=ft,m[1]=$e,m[2]=qe,m[3]=pe,X.clearBufferuiv(X.COLOR,0,m)):(g[0]=ft,g[1]=$e,g[2]=qe,g[3]=pe,X.clearBufferiv(X.COLOR,0,g))}else ce|=X.COLOR_BUFFER_BIT}q&&(ce|=X.DEPTH_BUFFER_BIT),te&&(ce|=X.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),X.clear(ce)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",xe,!1),n.removeEventListener("webglcontextrestored",le,!1),n.removeEventListener("webglcontextcreationerror",nt,!1),_e.dispose(),Le.dispose(),Ee.dispose(),Je.dispose(),be.dispose(),k.dispose(),re.dispose(),Ae.dispose(),ue.dispose(),Ve.dispose(),Ve.removeEventListener("sessionstart",jt),Ve.removeEventListener("sessionend",Ct),de&&(de.dispose(),de=null),Zt.stop()};function xe(N){N.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),M=!0}function le(){console.log("THREE.WebGLRenderer: Context Restored."),M=!1;const N=Qe.autoReset,q=We.enabled,te=We.autoUpdate,ce=We.needsUpdate,se=We.type;Ge(),Qe.autoReset=N,We.enabled=q,We.autoUpdate=te,We.needsUpdate=ce,We.type=se}function nt(N){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",N.statusMessage)}function Xe(N){const q=N.target;q.removeEventListener("dispose",Xe),we(q)}function we(N){Ye(N),Ee.remove(N)}function Ye(N){const q=Ee.get(N).programs;q!==void 0&&(q.forEach(function(te){ue.releaseProgram(te)}),N.isShaderMaterial&&ue.releaseShaderCache(N))}this.renderBufferDirect=function(N,q,te,ce,se,Te){q===null&&(q=Fe);const Ne=se.isMesh&&se.matrixWorld.determinant()<0,ke=F(N,q,te,ce,se);Me.setMaterial(ce,Ne);let pe=te.index,ft=1;if(ce.wireframe===!0){if(pe=V.getWireframeAttribute(te),pe===void 0)return;ft=2}const $e=te.drawRange,qe=te.attributes.position;let vt=$e.start*ft,St=($e.start+$e.count)*ft;Te!==null&&(vt=Math.max(vt,Te.start*ft),St=Math.min(St,(Te.start+Te.count)*ft)),pe!==null?(vt=Math.max(vt,0),St=Math.min(St,pe.count)):qe!=null&&(vt=Math.max(vt,0),St=Math.min(St,qe.count));const wt=St-vt;if(wt<0||wt===1/0)return;re.setup(se,ce,ke,te,pe);let Lt,pt=ot;if(pe!==null&&(Lt=rt.get(pe),pt=Pe,pt.setIndex(Lt)),se.isMesh)ce.wireframe===!0?(Me.setLineWidth(ce.wireframeLinewidth*ge()),pt.setMode(X.LINES)):pt.setMode(X.TRIANGLES);else if(se.isLine){let lt=ce.linewidth;lt===void 0&&(lt=1),Me.setLineWidth(lt*ge()),se.isLineSegments?pt.setMode(X.LINES):se.isLineLoop?pt.setMode(X.LINE_LOOP):pt.setMode(X.LINE_STRIP)}else se.isPoints?pt.setMode(X.POINTS):se.isSprite&&pt.setMode(X.TRIANGLES);if(se.isBatchedMesh)pt.renderMultiDraw(se._multiDrawStarts,se._multiDrawCounts,se._multiDrawCount);else if(se.isInstancedMesh)pt.renderInstances(vt,wt,se.count);else if(te.isInstancedBufferGeometry){const lt=te._maxInstanceCount!==void 0?te._maxInstanceCount:1/0,Ot=Math.min(te.instanceCount,lt);pt.renderInstances(vt,wt,Ot)}else pt.render(vt,wt)};function st(N,q,te){N.transparent===!0&&N.side===Ii&&N.forceSinglePass===!1?(N.side=Ai,N.needsUpdate=!0,Rt(N,q,te),N.side=Ks,N.needsUpdate=!0,Rt(N,q,te),N.side=Ii):Rt(N,q,te)}this.compile=function(N,q,te=null){te===null&&(te=N),x=Le.get(te),x.init(),_.push(x),te.traverseVisible(function(se){se.isLight&&se.layers.test(q.layers)&&(x.pushLight(se),se.castShadow&&x.pushShadow(se))}),N!==te&&N.traverseVisible(function(se){se.isLight&&se.layers.test(q.layers)&&(x.pushLight(se),se.castShadow&&x.pushShadow(se))}),x.setupLights(S._useLegacyLights);const ce=new Set;return N.traverse(function(se){const Te=se.material;if(Te)if(Array.isArray(Te))for(let Ne=0;Ne<Te.length;Ne++){const ke=Te[Ne];st(ke,te,se),ce.add(ke)}else st(Te,te,se),ce.add(Te)}),_.pop(),x=null,ce},this.compileAsync=function(N,q,te=null){const ce=this.compile(N,q,te);return new Promise(se=>{function Te(){if(ce.forEach(function(Ne){Ee.get(Ne).currentProgram.isReady()&&ce.delete(Ne)}),ce.size===0){se(N);return}setTimeout(Te,10)}ye.get("KHR_parallel_shader_compile")!==null?Te():setTimeout(Te,10)})};let at=null;function Et(N){at&&at(N)}function jt(){Zt.stop()}function Ct(){Zt.start()}const Zt=new ON;Zt.setAnimationLoop(Et),typeof self<"u"&&Zt.setContext(self),this.setAnimationLoop=function(N){at=N,Ve.setAnimationLoop(N),N===null?Zt.stop():Zt.start()},Ve.addEventListener("sessionstart",jt),Ve.addEventListener("sessionend",Ct),this.render=function(N,q){if(q!==void 0&&q.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(M===!0)return;N.matrixWorldAutoUpdate===!0&&N.updateMatrixWorld(),q.parent===null&&q.matrixWorldAutoUpdate===!0&&q.updateMatrixWorld(),Ve.enabled===!0&&Ve.isPresenting===!0&&(Ve.cameraAutoUpdate===!0&&Ve.updateCamera(q),q=Ve.getCamera()),N.isScene===!0&&N.onBeforeRender(S,N,q,B),x=Le.get(N,_.length),x.init(),_.push(x),fe.multiplyMatrices(q.projectionMatrix,q.matrixWorldInverse),W.setFromProjectionMatrix(fe),ae=this.localClippingEnabled,ne=Ke.init(this.clippingPlanes,ae),y=_e.get(N,v.length),y.init(),v.push(y),En(N,q,0,S.sortObjects),y.finish(),S.sortObjects===!0&&y.sort(Z,J),this.info.render.frame++,ne===!0&&Ke.beginShadows();const te=x.state.shadowsArray;if(We.render(te,N,q),ne===!0&&Ke.endShadows(),this.info.autoReset===!0&&this.info.reset(),Ze.render(y,N),x.setupLights(S._useLegacyLights),q.isArrayCamera){const ce=q.cameras;for(let se=0,Te=ce.length;se<Te;se++){const Ne=ce[se];yi(y,N,Ne,Ne.viewport)}}else yi(y,N,q);B!==null&&(Oe.updateMultisampleRenderTarget(B),Oe.updateRenderTargetMipmap(B)),N.isScene===!0&&N.onAfterRender(S,N,q),re.resetDefaultState(),P=-1,T=null,_.pop(),_.length>0?x=_[_.length-1]:x=null,v.pop(),v.length>0?y=v[v.length-1]:y=null};function En(N,q,te,ce){if(N.visible===!1)return;if(N.layers.test(q.layers)){if(N.isGroup)te=N.renderOrder;else if(N.isLOD)N.autoUpdate===!0&&N.update(q);else if(N.isLight)x.pushLight(N),N.castShadow&&x.pushShadow(N);else if(N.isSprite){if(!N.frustumCulled||W.intersectsSprite(N)){ce&&He.setFromMatrixPosition(N.matrixWorld).applyMatrix4(fe);const Ne=k.update(N),ke=N.material;ke.visible&&y.push(N,Ne,ke,te,He.z,null)}}else if((N.isMesh||N.isLine||N.isPoints)&&(!N.frustumCulled||W.intersectsObject(N))){const Ne=k.update(N),ke=N.material;if(ce&&(N.boundingSphere!==void 0?(N.boundingSphere===null&&N.computeBoundingSphere(),He.copy(N.boundingSphere.center)):(Ne.boundingSphere===null&&Ne.computeBoundingSphere(),He.copy(Ne.boundingSphere.center)),He.applyMatrix4(N.matrixWorld).applyMatrix4(fe)),Array.isArray(ke)){const pe=Ne.groups;for(let ft=0,$e=pe.length;ft<$e;ft++){const qe=pe[ft],vt=ke[qe.materialIndex];vt&&vt.visible&&y.push(N,Ne,vt,te,He.z,qe)}}else ke.visible&&y.push(N,Ne,ke,te,He.z,null)}}const Te=N.children;for(let Ne=0,ke=Te.length;Ne<ke;Ne++)En(Te[Ne],q,te,ce)}function yi(N,q,te,ce){const se=N.opaque,Te=N.transmissive,Ne=N.transparent;x.setupLightsView(te),ne===!0&&Ke.setGlobalState(S.clippingPlanes,te),Te.length>0&&Ui(se,Te,q,te),ce&&Me.viewport(I.copy(ce)),se.length>0&&ni(se,q,te),Te.length>0&&ni(Te,q,te),Ne.length>0&&ni(Ne,q,te),Me.buffers.depth.setTest(!0),Me.buffers.depth.setMask(!0),Me.buffers.color.setMask(!0),Me.setPolygonOffset(!1)}function Ui(N,q,te,ce){if((te.isScene===!0?te.overrideMaterial:null)!==null)return;const Te=De.isWebGL2;de===null&&(de=new Mn(1,1,{generateMipmaps:!0,type:ye.has("EXT_color_buffer_half_float")?ei:vi,minFilter:_a,samples:Te?4:0})),S.getDrawingBufferSize(Se),Te?de.setSize(Se.x,Se.y):de.setSize(L0(Se.x),L0(Se.y));const Ne=S.getRenderTarget();S.setRenderTarget(de),S.getClearColor(Q),U=S.getClearAlpha(),U<1&&S.setClearColor(16777215,.5),S.clear();const ke=S.toneMapping;S.toneMapping=Xs,ni(N,te,ce),Oe.updateMultisampleRenderTarget(de),Oe.updateRenderTargetMipmap(de);let pe=!1;for(let ft=0,$e=q.length;ft<$e;ft++){const qe=q[ft],vt=qe.object,St=qe.geometry,wt=qe.material,Lt=qe.group;if(wt.side===Ii&&vt.layers.test(ce.layers)){const pt=wt.side;wt.side=Ai,wt.needsUpdate=!0,Yn(vt,te,ce,St,wt,Lt),wt.side=pt,wt.needsUpdate=!0,pe=!0}}pe===!0&&(Oe.updateMultisampleRenderTarget(de),Oe.updateRenderTargetMipmap(de)),S.setRenderTarget(Ne),S.setClearColor(Q,U),S.toneMapping=ke}function ni(N,q,te){const ce=q.isScene===!0?q.overrideMaterial:null;for(let se=0,Te=N.length;se<Te;se++){const Ne=N[se],ke=Ne.object,pe=Ne.geometry,ft=ce===null?Ne.material:ce,$e=Ne.group;ke.layers.test(te.layers)&&Yn(ke,q,te,pe,ft,$e)}}function Yn(N,q,te,ce,se,Te){N.onBeforeRender(S,q,te,ce,se,Te),N.modelViewMatrix.multiplyMatrices(te.matrixWorldInverse,N.matrixWorld),N.normalMatrix.getNormalMatrix(N.modelViewMatrix),se.onBeforeRender(S,q,te,ce,N,Te),se.transparent===!0&&se.side===Ii&&se.forceSinglePass===!1?(se.side=Ai,se.needsUpdate=!0,S.renderBufferDirect(te,q,ce,se,N,Te),se.side=Ks,se.needsUpdate=!0,S.renderBufferDirect(te,q,ce,se,N,Te),se.side=Ii):S.renderBufferDirect(te,q,ce,se,N,Te),N.onAfterRender(S,q,te,ce,se,Te)}function Rt(N,q,te){q.isScene!==!0&&(q=Fe);const ce=Ee.get(N),se=x.state.lights,Te=x.state.shadowsArray,Ne=se.state.version,ke=ue.getParameters(N,se.state,Te,q,te),pe=ue.getProgramCacheKey(ke);let ft=ce.programs;ce.environment=N.isMeshStandardMaterial?q.environment:null,ce.fog=q.fog,ce.envMap=(N.isMeshStandardMaterial?be:Je).get(N.envMap||ce.environment),ft===void 0&&(N.addEventListener("dispose",Xe),ft=new Map,ce.programs=ft);let $e=ft.get(pe);if($e!==void 0){if(ce.currentProgram===$e&&ce.lightsStateVersion===Ne)return Ar(N,ke),$e}else ke.uniforms=ue.getUniforms(N),N.onBuild(te,ke,S),N.onBeforeCompile(ke,S),$e=ue.acquireProgram(ke,pe),ft.set(pe,$e),ce.uniforms=ke.uniforms;const qe=ce.uniforms;return(!N.isShaderMaterial&&!N.isRawShaderMaterial||N.clipping===!0)&&(qe.clippingPlanes=Ke.uniform),Ar(N,ke),ce.needsLights=he(N),ce.lightsStateVersion=Ne,ce.needsLights&&(qe.ambientLightColor.value=se.state.ambient,qe.lightProbe.value=se.state.probe,qe.directionalLights.value=se.state.directional,qe.directionalLightShadows.value=se.state.directionalShadow,qe.spotLights.value=se.state.spot,qe.spotLightShadows.value=se.state.spotShadow,qe.rectAreaLights.value=se.state.rectArea,qe.ltc_1.value=se.state.rectAreaLTC1,qe.ltc_2.value=se.state.rectAreaLTC2,qe.pointLights.value=se.state.point,qe.pointLightShadows.value=se.state.pointShadow,qe.hemisphereLights.value=se.state.hemi,qe.directionalShadowMap.value=se.state.directionalShadowMap,qe.directionalShadowMatrix.value=se.state.directionalShadowMatrix,qe.spotShadowMap.value=se.state.spotShadowMap,qe.spotLightMatrix.value=se.state.spotLightMatrix,qe.spotLightMap.value=se.state.spotLightMap,qe.pointShadowMap.value=se.state.pointShadowMap,qe.pointShadowMatrix.value=se.state.pointShadowMatrix),ce.currentProgram=$e,ce.uniformsList=null,$e}function Gn(N){if(N.uniformsList===null){const q=N.currentProgram.getUniforms();N.uniformsList=Wv.seqWithValue(q.seq,N.uniforms)}return N.uniformsList}function Ar(N,q){const te=Ee.get(N);te.outputColorSpace=q.outputColorSpace,te.batching=q.batching,te.instancing=q.instancing,te.instancingColor=q.instancingColor,te.skinning=q.skinning,te.morphTargets=q.morphTargets,te.morphNormals=q.morphNormals,te.morphColors=q.morphColors,te.morphTargetsCount=q.morphTargetsCount,te.numClippingPlanes=q.numClippingPlanes,te.numIntersection=q.numClipIntersection,te.vertexAlphas=q.vertexAlphas,te.vertexTangents=q.vertexTangents,te.toneMapping=q.toneMapping}function F(N,q,te,ce,se){q.isScene!==!0&&(q=Fe),Oe.resetTextureUnits();const Te=q.fog,Ne=ce.isMeshStandardMaterial?q.environment:null,ke=B===null?S.outputColorSpace:B.isXRRenderTarget===!0?B.texture.colorSpace:xr,pe=(ce.isMeshStandardMaterial?be:Je).get(ce.envMap||Ne),ft=ce.vertexColors===!0&&!!te.attributes.color&&te.attributes.color.itemSize===4,$e=!!te.attributes.tangent&&(!!ce.normalMap||ce.anisotropy>0),qe=!!te.morphAttributes.position,vt=!!te.morphAttributes.normal,St=!!te.morphAttributes.color;let wt=Xs;ce.toneMapped&&(B===null||B.isXRRenderTarget===!0)&&(wt=S.toneMapping);const Lt=te.morphAttributes.position||te.morphAttributes.normal||te.morphAttributes.color,pt=Lt!==void 0?Lt.length:0,lt=Ee.get(ce),Ot=x.state.lights;if(ne===!0&&(ae===!0||N!==T)){const Ft=N===T&&ce.id===P;Ke.setState(ce,N,Ft)}let Tt=!1;ce.version===lt.__version?(lt.needsLights&&lt.lightsStateVersion!==Ot.state.version||lt.outputColorSpace!==ke||se.isBatchedMesh&&lt.batching===!1||!se.isBatchedMesh&&lt.batching===!0||se.isInstancedMesh&&lt.instancing===!1||!se.isInstancedMesh&&lt.instancing===!0||se.isSkinnedMesh&&lt.skinning===!1||!se.isSkinnedMesh&&lt.skinning===!0||se.isInstancedMesh&&lt.instancingColor===!0&&se.instanceColor===null||se.isInstancedMesh&&lt.instancingColor===!1&&se.instanceColor!==null||lt.envMap!==pe||ce.fog===!0&&lt.fog!==Te||lt.numClippingPlanes!==void 0&&(lt.numClippingPlanes!==Ke.numPlanes||lt.numIntersection!==Ke.numIntersection)||lt.vertexAlphas!==ft||lt.vertexTangents!==$e||lt.morphTargets!==qe||lt.morphNormals!==vt||lt.morphColors!==St||lt.toneMapping!==wt||De.isWebGL2===!0&&lt.morphTargetsCount!==pt)&&(Tt=!0):(Tt=!0,lt.__version=ce.version);let Pt=lt.currentProgram;Tt===!0&&(Pt=Rt(ce,q,se));let un=!1,yn=!1,xn=!1;const Jt=Pt.getUniforms(),Wt=lt.uniforms;if(Me.useProgram(Pt.program)&&(un=!0,yn=!0,xn=!0),ce.id!==P&&(P=ce.id,yn=!0),un||T!==N){Jt.setValue(X,"projectionMatrix",N.projectionMatrix),Jt.setValue(X,"viewMatrix",N.matrixWorldInverse);const Ft=Jt.map.cameraPosition;Ft!==void 0&&Ft.setValue(X,He.setFromMatrixPosition(N.matrixWorld)),De.logarithmicDepthBuffer&&Jt.setValue(X,"logDepthBufFC",2/(Math.log(N.far+1)/Math.LN2)),(ce.isMeshPhongMaterial||ce.isMeshToonMaterial||ce.isMeshLambertMaterial||ce.isMeshBasicMaterial||ce.isMeshStandardMaterial||ce.isShaderMaterial)&&Jt.setValue(X,"isOrthographic",N.isOrthographicCamera===!0),T!==N&&(T=N,yn=!0,xn=!0)}if(se.isSkinnedMesh){Jt.setOptional(X,se,"bindMatrix"),Jt.setOptional(X,se,"bindMatrixInverse");const Ft=se.skeleton;Ft&&(De.floatVertexTextures?(Ft.boneTexture===null&&Ft.computeBoneTexture(),Jt.setValue(X,"boneTexture",Ft.boneTexture,Oe)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}se.isBatchedMesh&&(Jt.setOptional(X,se,"batchingTexture"),Jt.setValue(X,"batchingTexture",se._matricesTexture,Oe));const An=te.morphAttributes;if((An.position!==void 0||An.normal!==void 0||An.color!==void 0&&De.isWebGL2===!0)&&ct.update(se,te,Pt),(yn||lt.receiveShadow!==se.receiveShadow)&&(lt.receiveShadow=se.receiveShadow,Jt.setValue(X,"receiveShadow",se.receiveShadow)),ce.isMeshGouraudMaterial&&ce.envMap!==null&&(Wt.envMap.value=pe,Wt.flipEnvMap.value=pe.isCubeTexture&&pe.isRenderTargetTexture===!1?-1:1),yn&&(Jt.setValue(X,"toneMappingExposure",S.toneMappingExposure),lt.needsLights&&Y(Wt,xn),Te&&ce.fog===!0&&je.refreshFogUniforms(Wt,Te),je.refreshMaterialUniforms(Wt,ce,oe,$,de),Wv.upload(X,Gn(lt),Wt,Oe)),ce.isShaderMaterial&&ce.uniformsNeedUpdate===!0&&(Wv.upload(X,Gn(lt),Wt,Oe),ce.uniformsNeedUpdate=!1),ce.isSpriteMaterial&&Jt.setValue(X,"center",se.center),Jt.setValue(X,"modelViewMatrix",se.modelViewMatrix),Jt.setValue(X,"normalMatrix",se.normalMatrix),Jt.setValue(X,"modelMatrix",se.matrixWorld),ce.isShaderMaterial||ce.isRawShaderMaterial){const Ft=ce.uniformsGroups;for(let Nt=0,_n=Ft.length;Nt<_n;Nt++)if(De.isWebGL2){const ki=Ft[Nt];Ae.update(ki,Pt),Ae.bind(ki,Pt)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Pt}function Y(N,q){N.ambientLightColor.needsUpdate=q,N.lightProbe.needsUpdate=q,N.directionalLights.needsUpdate=q,N.directionalLightShadows.needsUpdate=q,N.pointLights.needsUpdate=q,N.pointLightShadows.needsUpdate=q,N.spotLights.needsUpdate=q,N.spotLightShadows.needsUpdate=q,N.rectAreaLights.needsUpdate=q,N.hemisphereLights.needsUpdate=q}function he(N){return N.isMeshLambertMaterial||N.isMeshToonMaterial||N.isMeshPhongMaterial||N.isMeshStandardMaterial||N.isShadowMaterial||N.isShaderMaterial&&N.lights===!0}this.getActiveCubeFace=function(){return b},this.getActiveMipmapLevel=function(){return C},this.getRenderTarget=function(){return B},this.setRenderTargetTextures=function(N,q,te){Ee.get(N.texture).__webglTexture=q,Ee.get(N.depthTexture).__webglTexture=te;const ce=Ee.get(N);ce.__hasExternalTextures=!0,ce.__hasExternalTextures&&(ce.__autoAllocateDepthBuffer=te===void 0,ce.__autoAllocateDepthBuffer||ye.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ce.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(N,q){const te=Ee.get(N);te.__webglFramebuffer=q,te.__useDefaultFramebuffer=q===void 0},this.setRenderTarget=function(N,q=0,te=0){B=N,b=q,C=te;let ce=!0,se=null,Te=!1,Ne=!1;if(N){const pe=Ee.get(N);pe.__useDefaultFramebuffer!==void 0?(Me.bindFramebuffer(X.FRAMEBUFFER,null),ce=!1):pe.__webglFramebuffer===void 0?Oe.setupRenderTarget(N):pe.__hasExternalTextures&&Oe.rebindTextures(N,Ee.get(N.texture).__webglTexture,Ee.get(N.depthTexture).__webglTexture);const ft=N.texture;(ft.isData3DTexture||ft.isDataArrayTexture||ft.isCompressedArrayTexture)&&(Ne=!0);const $e=Ee.get(N).__webglFramebuffer;N.isWebGLCubeRenderTarget?(Array.isArray($e[q])?se=$e[q][te]:se=$e[q],Te=!0):De.isWebGL2&&N.samples>0&&Oe.useMultisampledRTT(N)===!1?se=Ee.get(N).__webglMultisampledFramebuffer:Array.isArray($e)?se=$e[te]:se=$e,I.copy(N.viewport),z.copy(N.scissor),G=N.scissorTest}else I.copy(H).multiplyScalar(oe).floor(),z.copy(O).multiplyScalar(oe).floor(),G=j;if(Me.bindFramebuffer(X.FRAMEBUFFER,se)&&De.drawBuffers&&ce&&Me.drawBuffers(N,se),Me.viewport(I),Me.scissor(z),Me.setScissorTest(G),Te){const pe=Ee.get(N.texture);X.framebufferTexture2D(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,X.TEXTURE_CUBE_MAP_POSITIVE_X+q,pe.__webglTexture,te)}else if(Ne){const pe=Ee.get(N.texture),ft=q||0;X.framebufferTextureLayer(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,pe.__webglTexture,te||0,ft)}P=-1},this.readRenderTargetPixels=function(N,q,te,ce,se,Te,Ne){if(!(N&&N.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ke=Ee.get(N).__webglFramebuffer;if(N.isWebGLCubeRenderTarget&&Ne!==void 0&&(ke=ke[Ne]),ke){Me.bindFramebuffer(X.FRAMEBUFFER,ke);try{const pe=N.texture,ft=pe.format,$e=pe.type;if(ft!==gi&&et.convert(ft)!==X.getParameter(X.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const qe=$e===ei&&(ye.has("EXT_color_buffer_half_float")||De.isWebGL2&&ye.has("EXT_color_buffer_float"));if($e!==vi&&et.convert($e)!==X.getParameter(X.IMPLEMENTATION_COLOR_READ_TYPE)&&!($e===$n&&(De.isWebGL2||ye.has("OES_texture_float")||ye.has("WEBGL_color_buffer_float")))&&!qe){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}q>=0&&q<=N.width-ce&&te>=0&&te<=N.height-se&&X.readPixels(q,te,ce,se,et.convert(ft),et.convert($e),Te)}finally{const pe=B!==null?Ee.get(B).__webglFramebuffer:null;Me.bindFramebuffer(X.FRAMEBUFFER,pe)}}},this.copyFramebufferToTexture=function(N,q,te=0){const ce=Math.pow(2,-te),se=Math.floor(q.image.width*ce),Te=Math.floor(q.image.height*ce);Oe.setTexture2D(q,0),X.copyTexSubImage2D(X.TEXTURE_2D,te,0,0,N.x,N.y,se,Te),Me.unbindTexture()},this.copyTextureToTexture=function(N,q,te,ce=0){const se=q.image.width,Te=q.image.height,Ne=et.convert(te.format),ke=et.convert(te.type);Oe.setTexture2D(te,0),X.pixelStorei(X.UNPACK_FLIP_Y_WEBGL,te.flipY),X.pixelStorei(X.UNPACK_PREMULTIPLY_ALPHA_WEBGL,te.premultiplyAlpha),X.pixelStorei(X.UNPACK_ALIGNMENT,te.unpackAlignment),q.isDataTexture?X.texSubImage2D(X.TEXTURE_2D,ce,N.x,N.y,se,Te,Ne,ke,q.image.data):q.isCompressedTexture?X.compressedTexSubImage2D(X.TEXTURE_2D,ce,N.x,N.y,q.mipmaps[0].width,q.mipmaps[0].height,Ne,q.mipmaps[0].data):X.texSubImage2D(X.TEXTURE_2D,ce,N.x,N.y,Ne,ke,q.image),ce===0&&te.generateMipmaps&&X.generateMipmap(X.TEXTURE_2D),Me.unbindTexture()},this.copyTextureToTexture3D=function(N,q,te,ce,se=0){if(S.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Te=N.max.x-N.min.x+1,Ne=N.max.y-N.min.y+1,ke=N.max.z-N.min.z+1,pe=et.convert(ce.format),ft=et.convert(ce.type);let $e;if(ce.isData3DTexture)Oe.setTexture3D(ce,0),$e=X.TEXTURE_3D;else if(ce.isDataArrayTexture)Oe.setTexture2DArray(ce,0),$e=X.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}X.pixelStorei(X.UNPACK_FLIP_Y_WEBGL,ce.flipY),X.pixelStorei(X.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ce.premultiplyAlpha),X.pixelStorei(X.UNPACK_ALIGNMENT,ce.unpackAlignment);const qe=X.getParameter(X.UNPACK_ROW_LENGTH),vt=X.getParameter(X.UNPACK_IMAGE_HEIGHT),St=X.getParameter(X.UNPACK_SKIP_PIXELS),wt=X.getParameter(X.UNPACK_SKIP_ROWS),Lt=X.getParameter(X.UNPACK_SKIP_IMAGES),pt=te.isCompressedTexture?te.mipmaps[0]:te.image;X.pixelStorei(X.UNPACK_ROW_LENGTH,pt.width),X.pixelStorei(X.UNPACK_IMAGE_HEIGHT,pt.height),X.pixelStorei(X.UNPACK_SKIP_PIXELS,N.min.x),X.pixelStorei(X.UNPACK_SKIP_ROWS,N.min.y),X.pixelStorei(X.UNPACK_SKIP_IMAGES,N.min.z),te.isDataTexture||te.isData3DTexture?X.texSubImage3D($e,se,q.x,q.y,q.z,Te,Ne,ke,pe,ft,pt.data):te.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),X.compressedTexSubImage3D($e,se,q.x,q.y,q.z,Te,Ne,ke,pe,pt.data)):X.texSubImage3D($e,se,q.x,q.y,q.z,Te,Ne,ke,pe,ft,pt),X.pixelStorei(X.UNPACK_ROW_LENGTH,qe),X.pixelStorei(X.UNPACK_IMAGE_HEIGHT,vt),X.pixelStorei(X.UNPACK_SKIP_PIXELS,St),X.pixelStorei(X.UNPACK_SKIP_ROWS,wt),X.pixelStorei(X.UNPACK_SKIP_IMAGES,Lt),se===0&&ce.generateMipmaps&&X.generateMipmap($e),Me.unbindTexture()},this.initTexture=function(N){N.isCubeTexture?Oe.setTextureCube(N,0):N.isData3DTexture?Oe.setTexture3D(N,0):N.isDataArrayTexture||N.isCompressedArrayTexture?Oe.setTexture2DArray(N,0):Oe.setTexture2D(N,0),Me.unbindTexture()},this.resetState=function(){b=0,C=0,B=null,Me.reset(),re.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Hs}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=e===yy?"display-p3":"srgb",n.unpackColorSpace=gn.workingColorSpace===jp?"display-p3":"srgb"}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===sn?il:VM}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===il?sn:xr}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class JN extends wy{}JN.prototype.isWebGL1Renderer=!0;class My{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new ht(e),this.density=n}clone(){return new My(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Ey{constructor(e,n=1,i=1e3){this.isFog=!0,this.name="",this.color=new ht(e),this.near=n,this.far=i}clone(){return new Ey(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class gl extends an{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n}}class Yp{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=fp,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=qr()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn('THREE.InterleavedBuffer: "updateRange" is deprecated and removed in r169. Use "addUpdateRange()" instead.'),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,i){e*=this.stride,i*=n.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=n.array[i+r];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=qr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(n,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=qr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const dr=new K;class vl{constructor(e,n,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,i=this.data.count;n<i;n++)dr.fromBufferAttribute(this,n),dr.applyMatrix4(e),this.setXYZ(n,dr.x,dr.y,dr.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)dr.fromBufferAttribute(this,n),dr.applyNormalMatrix(e),this.setXYZ(n,dr.x,dr.y,dr.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)dr.fromBufferAttribute(this,n),dr.transformDirection(e),this.setXYZ(n,dr.x,dr.y,dr.z);return this}setX(e,n){return this.normalized&&(n=Kt(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=Kt(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=Kt(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=Kt(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=Br(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=Br(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=Br(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=Br(n,this.array)),n}setXY(e,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=Kt(n,this.array),i=Kt(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this}setXYZ(e,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=Kt(n,this.array),i=Kt(i,this.array),r=Kt(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,n,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=Kt(n,this.array),i=Kt(i,this.array),r=Kt(r,this.array),s=Kt(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[r+s])}return new $t(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new vl(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class eE extends ui{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new ht(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Lu;const Gd=new K,Du=new K,Nu=new K,Fu=new Ie,zd=new Ie,YN=new bt,zg=new K,Hd=new K,Hg=new K,LR=new Ie,n_=new Ie,DR=new Ie;class KN extends an{constructor(e=new eE){if(super(),this.isSprite=!0,this.type="Sprite",Lu===void 0){Lu=new zt;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Yp(n,5);Lu.setIndex([0,1,2,0,2,3]),Lu.setAttribute("position",new vl(i,3,0,!1)),Lu.setAttribute("uv",new vl(i,2,3,!1))}this.geometry=Lu,this.material=e,this.center=new Ie(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Du.setFromMatrixScale(this.matrixWorld),YN.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Nu.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Du.multiplyScalar(-Nu.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const a=this.center;Vg(zg.set(-.5,-.5,0),Nu,a,Du,r,s),Vg(Hd.set(.5,-.5,0),Nu,a,Du,r,s),Vg(Hg.set(.5,.5,0),Nu,a,Du,r,s),LR.set(0,0),n_.set(1,0),DR.set(1,1);let o=e.ray.intersectTriangle(zg,Hd,Hg,!1,Gd);if(o===null&&(Vg(Hd.set(-.5,.5,0),Nu,a,Du,r,s),n_.set(0,1),o=e.ray.intersectTriangle(zg,Hg,Hd,!1,Gd),o===null))return;const l=e.ray.origin.distanceTo(Gd);l<e.near||l>e.far||n.push({distance:l,point:Gd.clone(),uv:Pr.getInterpolation(Gd,zg,Hd,Hg,LR,n_,DR,new Ie),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Vg(t,e,n,i,r,s){Fu.subVectors(t,n).addScalar(.5).multiply(i),r!==void 0?(zd.x=s*Fu.x-r*Fu.y,zd.y=r*Fu.x+s*Fu.y):zd.copy(Fu),t.copy(e),t.x+=zd.x,t.y+=zd.y,t.applyMatrix4(YN)}const jg=new K,NR=new K;class QN extends an{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let i=0,r=n.length;i<r;i++){const s=n[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,i=0){n=Math.abs(n);const r=this.levels;let s;for(s=0;s<r.length&&!(n<r[s].distance);s++);return r.splice(s,0,{distance:n,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let i,r;for(i=1,r=n.length;i<r;i++){let s=n[i].distance;if(n[i].object.visible&&(s-=s*n[i].hysteresis),e<s)break}return n[i-1].object}return null}raycast(e,n){if(this.levels.length>0){jg.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(jg);this.getObjectForDistance(r).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){jg.setFromMatrixPosition(e.matrixWorld),NR.setFromMatrixPosition(this.matrixWorld);const i=jg.distanceTo(NR)/e.zoom;n[0].object.visible=!0;let r,s;for(r=1,s=n.length;r<s;r++){let a=n[r].distance;if(n[r].object.visible&&(a-=a*n[r].hysteresis),i>=a)n[r-1].object.visible=!1,n[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)n[r].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const a=i[r];n.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return n}}const FR=new K,UR=new on,kR=new on,lJ=new K,OR=new bt,Wg=new K,i_=new Fi,GR=new bt,r_=new Qc;class tE extends Sn{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=eA,this.bindMatrix=new bt,this.bindMatrixInverse=new bt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Ni),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let i=0;i<n.count;i++)this.getVertexPosition(i,Wg),this.boundingBox.expandByPoint(Wg)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Fi),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let i=0;i<n.count;i++)this.getVertexPosition(i,Wg),this.boundingSphere.expandByPoint(Wg)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),i_.copy(this.boundingSphere),i_.applyMatrix4(r),e.ray.intersectsSphere(i_)!==!1&&(GR.copy(r).invert(),r_.copy(e.ray).applyMatrix4(GR),!(this.boundingBox!==null&&r_.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,r_)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new on,n=this.geometry.attributes.skinWeight;for(let i=0,r=n.count;i<r;i++){e.fromBufferAttribute(n,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),n.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===eA?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===mN?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const i=this.skeleton,r=this.geometry;UR.fromBufferAttribute(r.attributes.skinIndex,e),kR.fromBufferAttribute(r.attributes.skinWeight,e),FR.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let s=0;s<4;s++){const a=kR.getComponent(s);if(a!==0){const o=UR.getComponent(s);OR.multiplyMatrices(i.bones[o].matrixWorld,i.boneInverses[o]),n.addScaledVector(lJ.copy(FR).applyMatrix4(OR),a)}}return n.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,n){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,n)}}class by extends an{constructor(){super(),this.isBone=!0,this.type="Bone"}}class rl extends pn{constructor(e=null,n=1,i=1,r,s,a,o,l,c=Rn,u=Rn,h,f){super(null,a,o,l,c,u,r,s,h,f),this.isDataTexture=!0,this.image={data:e,width:n,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const zR=new bt,cJ=new bt;class Kp{constructor(e=[],n=[]){this.uuid=qr(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new bt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const i=new bt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,n=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,a=e.length;s<a;s++){const o=e[s]?e[s].matrixWorld:cJ;zR.multiplyMatrices(o,n[s]),zR.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Kp(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const i=new rl(n,e,e,gi,$n);return i.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=i,this}getBoneByName(e){for(let n=0,i=this.bones.length;n<i;n++){const r=this.bones[n];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let a=n[s];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),a=new by),this.bones.push(a),this.boneInverses.push(new bt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,i=this.boneInverses;for(let r=0,s=n.length;r<s;r++){const a=n[r];e.bones.push(a.uuid);const o=i[r];e.boneInverses.push(o.toArray())}return e}}class yl extends $t{constructor(e,n,i,r=1){super(e,n,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Uu=new bt,HR=new bt,Xg=[],VR=new Ni,uJ=new bt,Vd=new Sn,jd=new Fi;class nE extends Sn{constructor(e,n,i){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new yl(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,uJ)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new Ni),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<n;i++)this.getMatrixAt(i,Uu),VR.copy(e.boundingBox).applyMatrix4(Uu),this.boundingBox.union(VR)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new Fi),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<n;i++)this.getMatrixAt(i,Uu),jd.copy(e.boundingSphere).applyMatrix4(Uu),this.boundingSphere.union(jd)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}raycast(e,n){const i=this.matrixWorld,r=this.count;if(Vd.geometry=this.geometry,Vd.material=this.material,Vd.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),jd.copy(this.boundingSphere),jd.applyMatrix4(i),e.ray.intersectsSphere(jd)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,Uu),HR.multiplyMatrices(i,Uu),Vd.matrixWorld=HR,Vd.raycast(e,Xg);for(let a=0,o=Xg.length;a<o;a++){const l=Xg[a];l.instanceId=s,l.object=this,n.push(l)}Xg.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new yl(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function hJ(t,e){return t.z-e.z}function dJ(t,e){return e.z-t.z}class fJ{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,n){const i=this.pool,r=this.list;this.index>=i.length&&i.push({start:-1,count:-1,z:-1});const s=i[this.index];r.push(s),this.index++,s.start=e.start,s.count=e.count,s.z=n}reset(){this.list.length=0,this.index=0}}const ku="batchId",Po=new bt,jR=new bt,pJ=new bt,WR=new bt,s_=new Jp,Jg=new Ni,Zl=new Fi,Wd=new K,a_=new fJ,er=new Sn,Yg=[];function mJ(t,e,n=0){const i=e.itemSize;if(t.isInterleavedBufferAttribute||t.array.constructor!==e.array.constructor){const r=t.count;for(let s=0;s<r;s++)for(let a=0;a<i;a++)e.setComponent(s+n,a,t.getComponent(s,a))}else e.array.set(t.array,n*i);e.needsUpdate=!0}class ZN extends Sn{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,n,i=n*2,r){super(new zt,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=n,this._maxIndexCount=i,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4),i=new rl(n,e,e,gi,$n);this._matricesTexture=i}_initializeGeometry(e){const n=this.geometry,i=this._maxVertexCount,r=this._maxGeometryCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const o in e.attributes){const l=e.getAttribute(o),{array:c,itemSize:u,normalized:h}=l,f=new c.constructor(i*u),m=new l.constructor(f,u,h);m.setUsage(l.usage),n.setAttribute(o,m)}if(e.getIndex()!==null){const o=i>65536?new Uint32Array(s):new Uint16Array(s);n.setIndex(new $t(o,1))}const a=r>65536?new Uint32Array(i):new Uint16Array(i);n.setAttribute(ku,new $t(a,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(ku))throw new Error(`BatchedMesh: Geometry cannot use attribute "${ku}"`);const n=this.geometry;if(!!e.getIndex()!=!!n.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const i in n.attributes){if(i===ku)continue;if(!e.hasAttribute(i))throw new Error(`BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=n.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ni);const e=this._geometryCount,n=this.boundingBox,i=this._active;n.makeEmpty();for(let r=0;r<e;r++)i[r]!==!1&&(this.getMatrixAt(r,Po),this.getBoundingBoxAt(r,Jg).applyMatrix4(Po),n.union(Jg))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Fi);const e=this._geometryCount,n=this.boundingSphere,i=this._active;n.makeEmpty();for(let r=0;r<e;r++)i[r]!==!1&&(this.getMatrixAt(r,Po),this.getBoundingSphereAt(r,Zl).applyMatrix4(Po),n.union(Zl))}addGeometry(e,n=-1,i=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const r={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const a=this._reservedRanges,o=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=a[a.length-1]),n===-1?r.vertexCount=e.getAttribute("position").count:r.vertexCount=n,s===null?r.vertexStart=0:r.vertexStart=s.vertexStart+s.vertexCount;const c=e.getIndex(),u=c!==null;if(u&&(i===-1?r.indexCount=c.count:r.indexCount=i,s===null?r.indexStart=0:r.indexStart=s.indexStart+s.indexCount),r.indexStart!==-1&&r.indexStart+r.indexCount>this._maxIndexCount||r.vertexStart+r.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const h=this._visibility,f=this._active,m=this._matricesTexture,g=this._matricesTexture.image.data;h.push(!0),f.push(!0);const y=this._geometryCount;this._geometryCount++,pJ.toArray(g,y*16),m.needsUpdate=!0,a.push(r),o.push({start:u?r.indexStart:r.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new Ni,sphereInitialized:!1,sphere:new Fi});const x=this.geometry.getAttribute(ku);for(let v=0;v<r.vertexCount;v++)x.setX(r.vertexStart+v,y);return x.needsUpdate=!0,this.setGeometryAt(y,e),y}setGeometryAt(e,n){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(n);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),a=n.getIndex(),o=this._reservedRanges[e];if(r&&a.count>o.indexCount||n.attributes.position.count>o.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=o.vertexStart,c=o.vertexCount;for(const m in i.attributes){if(m===ku)continue;const g=n.getAttribute(m),y=i.getAttribute(m);mJ(g,y,l);const x=g.itemSize;for(let v=g.count,_=c;v<_;v++){const S=l+v;for(let M=0;M<x;M++)y.setComponent(S,M,0)}y.needsUpdate=!0}if(r){const m=o.indexStart;for(let g=0;g<a.count;g++)s.setX(m+g,l+a.getX(g));for(let g=a.count,y=o.indexCount;g<y;g++)s.setX(m+g,l);s.needsUpdate=!0}const u=this._bounds[e];n.boundingBox!==null?(u.box.copy(n.boundingBox),u.boxInitialized=!0):u.boxInitialized=!1,n.boundingSphere!==null?(u.sphere.copy(n.boundingSphere),u.sphereInitialized=!0):u.sphereInitialized=!1;const h=this._drawRanges[e],f=n.getAttribute("position");return h.count=r?a.count:f.count,this._visibilityChanged=!0,e}deleteGeometry(e){const n=this._active;return e>=n.length||n[e]===!1?this:(n[e]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(e,n){if(this._active[e]===!1)return this;const r=this._bounds[e],s=r.box,a=this.geometry;if(r.boxInitialized===!1){s.makeEmpty();const o=a.index,l=a.attributes.position,c=this._drawRanges[e];for(let u=c.start,h=c.start+c.count;u<h;u++){let f=u;o&&(f=o.getX(f)),s.expandByPoint(Wd.fromBufferAttribute(l,f))}r.boxInitialized=!0}return n.copy(s),n}getBoundingSphereAt(e,n){if(this._active[e]===!1)return this;const r=this._bounds[e],s=r.sphere,a=this.geometry;if(r.sphereInitialized===!1){s.makeEmpty(),this.getBoundingBoxAt(e,Jg),Jg.getCenter(s.center);const o=a.index,l=a.attributes.position,c=this._drawRanges[e];let u=0;for(let h=c.start,f=c.start+c.count;h<f;h++){let m=h;o&&(m=o.getX(m)),Wd.fromBufferAttribute(l,m),u=Math.max(u,s.center.distanceToSquared(Wd))}s.radius=Math.sqrt(u),r.sphereInitialized=!0}return n.copy(s),n}setMatrixAt(e,n){const i=this._active,r=this._matricesTexture,s=this._matricesTexture.image.data,a=this._geometryCount;return e>=a||i[e]===!1?this:(n.toArray(s,e*16),r.needsUpdate=!0,this)}getMatrixAt(e,n){const i=this._active,r=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||i[e]===!1?null:n.fromArray(r,e*16)}setVisibleAt(e,n){const i=this._visibility,r=this._active,s=this._geometryCount;return e>=s||r[e]===!1||i[e]===n?this:(i[e]=n,this._visibilityChanged=!0,this)}getVisibleAt(e){const n=this._visibility,i=this._active,r=this._geometryCount;return e>=r||i[e]===!1?!1:n[e]}raycast(e,n){const i=this._visibility,r=this._active,s=this._drawRanges,a=this._geometryCount,o=this.matrixWorld,l=this.geometry;er.material=this.material,er.geometry.index=l.index,er.geometry.attributes=l.attributes,er.geometry.boundingBox===null&&(er.geometry.boundingBox=new Ni),er.geometry.boundingSphere===null&&(er.geometry.boundingSphere=new Fi);for(let c=0;c<a;c++){if(!i[c]||!r[c])continue;const u=s[c];er.geometry.setDrawRange(u.start,u.count),this.getMatrixAt(c,er.matrixWorld).premultiply(o),this.getBoundingBoxAt(c,er.geometry.boundingBox),this.getBoundingSphereAt(c,er.geometry.boundingSphere),er.raycast(e,Yg);for(let h=0,f=Yg.length;h<f;h++){const m=Yg[h];m.object=this,m.batchId=c,n.push(m)}Yg.length=0}er.material=null,er.geometry.index=null,er.geometry.attributes={},er.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(n=>({...n})),this._reservedRanges=e._reservedRanges.map(n=>({...n})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(n=>({boxInitialized:n.boxInitialized,box:n.box.clone(),sphereInitialized:n.sphereInitialized,sphere:n.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,n,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=r.getIndex(),o=a===null?1:a.array.BYTES_PER_ELEMENT,l=this._visibility,c=this._multiDrawStarts,u=this._multiDrawCounts,h=this._drawRanges,f=this.perObjectFrustumCulled;f&&(WR.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),s_.setFromProjectionMatrix(WR,e.isWebGPURenderer?Nh:Hs));let m=0;if(this.sortObjects){jR.copy(this.matrixWorld).invert(),Wd.setFromMatrixPosition(i.matrixWorld).applyMatrix4(jR);for(let x=0,v=l.length;x<v;x++)if(l[x]){this.getMatrixAt(x,Po),this.getBoundingSphereAt(x,Zl).applyMatrix4(Po);let _=!1;if(f&&(_=!s_.intersectsSphere(Zl)),!_){const S=Wd.distanceTo(Zl.center);a_.push(h[x],S)}}const g=a_.list,y=this.customSort;y===null?g.sort(s.transparent?dJ:hJ):y.call(this,g,i);for(let x=0,v=g.length;x<v;x++){const _=g[x];c[m]=_.start*o,u[m]=_.count,m++}a_.reset()}else for(let g=0,y=l.length;g<y;g++)if(l[g]){let x=!1;if(f&&(this.getMatrixAt(g,Po),this.getBoundingSphereAt(g,Zl).applyMatrix4(Po),x=!s_.intersectsSphere(Zl)),!x){const v=h[g];c[m]=v.start*o,u[m]=v.count,m++}}this._multiDrawCount=m,this._visibilityChanged=!1}onBeforeShadow(e,n,i,r,s,a){this.onBeforeRender(e,null,r,s,a)}}class sr extends ui{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ht(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const XR=new K,JR=new K,YR=new bt,o_=new Qc,Kg=new Fi;class co extends an{constructor(e=new zt,n=new sr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[0];for(let r=1,s=n.count;r<s;r++)XR.fromBufferAttribute(n,r-1),JR.fromBufferAttribute(n,r),i[r]=i[r-1],i[r]+=XR.distanceTo(JR);e.setAttribute("lineDistance",new _t(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Kg.copy(i.boundingSphere),Kg.applyMatrix4(r),Kg.radius+=s,e.ray.intersectsSphere(Kg)===!1)return;YR.copy(r).invert(),o_.copy(e.ray).applyMatrix4(YR);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=new K,u=new K,h=new K,f=new K,m=this.isLineSegments?2:1,g=i.index,x=i.attributes.position;if(g!==null){const v=Math.max(0,a.start),_=Math.min(g.count,a.start+a.count);for(let S=v,M=_-1;S<M;S+=m){const b=g.getX(S),C=g.getX(S+1);if(c.fromBufferAttribute(x,b),u.fromBufferAttribute(x,C),o_.distanceSqToSegment(c,u,f,h)>l)continue;f.applyMatrix4(this.matrixWorld);const P=e.ray.origin.distanceTo(f);P<e.near||P>e.far||n.push({distance:P,point:h.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}else{const v=Math.max(0,a.start),_=Math.min(x.count,a.start+a.count);for(let S=v,M=_-1;S<M;S+=m){if(c.fromBufferAttribute(x,S),u.fromBufferAttribute(x,S+1),o_.distanceSqToSegment(c,u,f,h)>l)continue;f.applyMatrix4(this.matrixWorld);const C=e.ray.origin.distanceTo(f);C<e.near||C>e.far||n.push({distance:C,point:h.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}const KR=new K,QR=new K;class $s extends co{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[];for(let r=0,s=n.count;r<s;r+=2)KR.fromBufferAttribute(n,r),QR.fromBufferAttribute(n,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+KR.distanceTo(QR);e.setAttribute("lineDistance",new _t(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class iE extends co{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class Ty extends ui{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ht(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const ZR=new bt,IA=new Qc,Qg=new Fi,Zg=new K;class rE extends an{constructor(e=new zt,n=new Ty){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Qg.copy(i.boundingSphere),Qg.applyMatrix4(r),Qg.radius+=s,e.ray.intersectsSphere(Qg)===!1)return;ZR.copy(r).invert(),IA.copy(e.ray).applyMatrix4(ZR);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=i.index,h=i.attributes.position;if(c!==null){const f=Math.max(0,a.start),m=Math.min(c.count,a.start+a.count);for(let g=f,y=m;g<y;g++){const x=c.getX(g);Zg.fromBufferAttribute(h,x),qR(Zg,x,l,r,e,n,this)}}else{const f=Math.max(0,a.start),m=Math.min(h.count,a.start+a.count);for(let g=f,y=m;g<y;g++)Zg.fromBufferAttribute(h,g),qR(Zg,g,l,r,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}function qR(t,e,n,i,r,s,a){const o=IA.distanceSqToPoint(t);if(o<n){const l=new K;IA.closestPointToPoint(t,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(o),point:l,index:e,face:null,object:a})}}class gJ extends pn{constructor(e,n,i,r,s,a,o,l,c){super(e,n,i,r,s,a,o,l,c),this.isVideoTexture=!0,this.minFilter=a!==void 0?a:kt,this.magFilter=s!==void 0?s:kt,this.generateMipmaps=!1;const u=this;function h(){u.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class vJ extends pn{constructor(e,n){super({width:e,height:n}),this.isFramebufferTexture=!0,this.magFilter=Rn,this.minFilter=Rn,this.generateMipmaps=!1,this.needsUpdate=!0}}class Cy extends pn{constructor(e,n,i,r,s,a,o,l,c,u,h,f){super(null,a,o,l,c,u,r,s,h,f),this.isCompressedTexture=!0,this.image={width:n,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class yJ extends Cy{constructor(e,n,i,r,s,a){super(e,n,i,s,a),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Dn}}class xJ extends Cy{constructor(e,n,i){super(void 0,e[0].width,e[0].height,n,i,xa),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class _J extends pn{constructor(e,n,i,r,s,a,o,l,c){super(e,n,i,r,s,a,o,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class ea{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const i=this.getUtoTmapping(e);return this.getPoint(i,n)}getPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return n}getSpacedPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPointAt(i/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let i,r=this.getPoint(0),s=0;n.push(0);for(let a=1;a<=e;a++)i=this.getPoint(a/e),s+=i.distanceTo(r),n.push(s),r=i;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const i=this.getLengths();let r=0;const s=i.length;let a;n?a=n:a=e*i[s-1];let o=0,l=s-1,c;for(;o<=l;)if(r=Math.floor(o+(l-o)/2),c=i[r]-a,c<0)o=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,i[r]===a)return r/(s-1);const u=i[r],f=i[r+1]-u,m=(a-u)/f;return(r+m)/(s-1)}getTangent(e,n){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const a=this.getPoint(r),o=this.getPoint(s),l=n||(a.isVector2?new Ie:new K);return l.copy(o).sub(a).normalize(),l}getTangentAt(e,n){const i=this.getUtoTmapping(e);return this.getTangent(i,n)}computeFrenetFrames(e,n){const i=new K,r=[],s=[],a=[],o=new K,l=new bt;for(let m=0;m<=e;m++){const g=m/e;r[m]=this.getTangentAt(g,new K)}s[0]=new K,a[0]=new K;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),h=Math.abs(r[0].y),f=Math.abs(r[0].z);u<=c&&(c=u,i.set(1,0,0)),h<=c&&(c=h,i.set(0,1,0)),f<=c&&i.set(0,0,1),o.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],o),a[0].crossVectors(r[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),a[m]=a[m-1].clone(),o.crossVectors(r[m-1],r[m]),o.length()>Number.EPSILON){o.normalize();const g=Math.acos(qn(r[m-1].dot(r[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(o,g))}a[m].crossVectors(r[m],s[m])}if(n===!0){let m=Math.acos(qn(s[0].dot(s[e]),-1,1));m/=e,r[0].dot(o.crossVectors(s[0],s[e]))>0&&(m=-m);for(let g=1;g<=e;g++)s[g].applyMatrix4(l.makeRotationAxis(r[g],m*g)),a[g].crossVectors(r[g],s[g])}return{tangents:r,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Ry extends ea{constructor(e=0,n=0,i=1,r=1,s=0,a=Math.PI*2,o=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=o,this.aRotation=l}getPoint(e,n){const i=n||new Ie,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(a?s=0:s=r),this.aClockwise===!0&&!a&&(s===r?s=-r:s=s-r);const o=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(o),c=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const u=Math.cos(this.aRotation),h=Math.sin(this.aRotation),f=l-this.aX,m=c-this.aY;l=f*u-m*h+this.aX,c=f*h+m*u+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class qN extends Ry{constructor(e,n,i,r,s,a){super(e,n,i,i,r,s,a),this.isArcCurve=!0,this.type="ArcCurve"}}function sE(){let t=0,e=0,n=0,i=0;function r(s,a,o,l){t=s,e=o,n=-3*s+3*a-2*o-l,i=2*s-2*a+o+l}return{initCatmullRom:function(s,a,o,l,c){r(a,o,c*(o-s),c*(l-a))},initNonuniformCatmullRom:function(s,a,o,l,c,u,h){let f=(a-s)/c-(o-s)/(c+u)+(o-a)/u,m=(o-a)/u-(l-a)/(u+h)+(l-o)/h;f*=u,m*=u,r(a,o,f,m)},calc:function(s){const a=s*s,o=a*s;return t+e*s+n*a+i*o}}}const qg=new K,l_=new sE,c_=new sE,u_=new sE;class $N extends ea{constructor(e=[],n=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=i,this.tension=r}getPoint(e,n=new K){const i=n,r=this.points,s=r.length,a=(s-(this.closed?0:1))*e;let o=Math.floor(a),l=a-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/s)+1)*s:l===0&&o===s-1&&(o=s-2,l=1);let c,u;this.closed||o>0?c=r[(o-1)%s]:(qg.subVectors(r[0],r[1]).add(r[0]),c=qg);const h=r[o%s],f=r[(o+1)%s];if(this.closed||o+2<s?u=r[(o+2)%s]:(qg.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=qg),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let g=Math.pow(c.distanceToSquared(h),m),y=Math.pow(h.distanceToSquared(f),m),x=Math.pow(f.distanceToSquared(u),m);y<1e-4&&(y=1),g<1e-4&&(g=y),x<1e-4&&(x=y),l_.initNonuniformCatmullRom(c.x,h.x,f.x,u.x,g,y,x),c_.initNonuniformCatmullRom(c.y,h.y,f.y,u.y,g,y,x),u_.initNonuniformCatmullRom(c.z,h.z,f.z,u.z,g,y,x)}else this.curveType==="catmullrom"&&(l_.initCatmullRom(c.x,h.x,f.x,u.x,this.tension),c_.initCatmullRom(c.y,h.y,f.y,u.y,this.tension),u_.initCatmullRom(c.z,h.z,f.z,u.z,this.tension));return i.set(l_.calc(l),c_.calc(l),u_.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const r=this.points[n];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(new K().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function $R(t,e,n,i,r){const s=(i-e)*.5,a=(r-n)*.5,o=t*t,l=t*o;return(2*n-2*i+s+a)*l+(-3*n+3*i-2*s-a)*o+s*t+n}function SJ(t,e){const n=1-t;return n*n*e}function AJ(t,e){return 2*(1-t)*t*e}function wJ(t,e){return t*t*e}function Rf(t,e,n,i){return SJ(t,e)+AJ(t,n)+wJ(t,i)}function MJ(t,e){const n=1-t;return n*n*n*e}function EJ(t,e){const n=1-t;return 3*n*n*t*e}function bJ(t,e){return 3*(1-t)*t*t*e}function TJ(t,e){return t*t*t*e}function Pf(t,e,n,i,r){return MJ(t,e)+EJ(t,n)+bJ(t,i)+TJ(t,r)}class aE extends ea{constructor(e=new Ie,n=new Ie,i=new Ie,r=new Ie){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=i,this.v3=r}getPoint(e,n=new Ie){const i=n,r=this.v0,s=this.v1,a=this.v2,o=this.v3;return i.set(Pf(e,r.x,s.x,a.x,o.x),Pf(e,r.y,s.y,a.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class eF extends ea{constructor(e=new K,n=new K,i=new K,r=new K){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=i,this.v3=r}getPoint(e,n=new K){const i=n,r=this.v0,s=this.v1,a=this.v2,o=this.v3;return i.set(Pf(e,r.x,s.x,a.x,o.x),Pf(e,r.y,s.y,a.y,o.y),Pf(e,r.z,s.z,a.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class oE extends ea{constructor(e=new Ie,n=new Ie){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new Ie){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new Ie){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class tF extends ea{constructor(e=new K,n=new K){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new K){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new K){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class lE extends ea{constructor(e=new Ie,n=new Ie,i=new Ie){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new Ie){const i=n,r=this.v0,s=this.v1,a=this.v2;return i.set(Rf(e,r.x,s.x,a.x),Rf(e,r.y,s.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class cE extends ea{constructor(e=new K,n=new K,i=new K){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new K){const i=n,r=this.v0,s=this.v1,a=this.v2;return i.set(Rf(e,r.x,s.x,a.x),Rf(e,r.y,s.y,a.y),Rf(e,r.z,s.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class uE extends ea{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new Ie){const i=n,r=this.points,s=(r.length-1)*e,a=Math.floor(s),o=s-a,l=r[a===0?a:a-1],c=r[a],u=r[a>r.length-2?r.length-1:a+1],h=r[a>r.length-3?r.length-1:a+2];return i.set($R(o,l.x,c.x,u.x,h.x),$R(o,l.y,c.y,u.y,h.y)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const r=this.points[n];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(new Ie().fromArray(r))}return this}}var D0=Object.freeze({__proto__:null,ArcCurve:qN,CatmullRomCurve3:$N,CubicBezierCurve:aE,CubicBezierCurve3:eF,EllipseCurve:Ry,LineCurve:oE,LineCurve3:tF,QuadraticBezierCurve:lE,QuadraticBezierCurve3:cE,SplineCurve:uE});class nF extends ea{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(n)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new D0[i](n,e))}return this}getPoint(e,n){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const a=r[s]-i,o=this.curves[s],l=o.getLength(),c=l===0?0:1-a/l;return o.getPointAt(c,n)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let i=0,r=this.curves.length;i<r;i++)n+=this.curves[i].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const a=s[r],o=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,l=a.getPoints(o);for(let c=0;c<l.length;c++){const u=l[c];i&&i.equals(u)||(n.push(u),i=u)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){const r=e.curves[n];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,i=this.curves.length;n<i;n++){const r=this.curves[n];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){const r=e.curves[n];this.curves.push(new D0[r.type]().fromJSON(r))}return this}}class gp extends nF{constructor(e){super(),this.type="Path",this.currentPoint=new Ie,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,i=e.length;n<i;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const i=new oE(this.currentPoint.clone(),new Ie(e,n));return this.curves.push(i),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,i,r){const s=new lE(this.currentPoint.clone(),new Ie(e,n),new Ie(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,n,i,r,s,a){const o=new aE(this.currentPoint.clone(),new Ie(e,n),new Ie(i,r),new Ie(s,a));return this.curves.push(o),this.currentPoint.set(s,a),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),i=new uE(n);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,i,r,s,a){const o=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+o,n+l,i,r,s,a),this}absarc(e,n,i,r,s,a){return this.absellipse(e,n,i,i,r,s,a),this}ellipse(e,n,i,r,s,a,o,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,n+u,i,r,s,a,o,l),this}absellipse(e,n,i,r,s,a,o,l){const c=new Ry(e,n,i,r,s,a,o,l);if(this.curves.length>0){const h=c.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Qp extends zt{constructor(e=[new Ie(0,-.5),new Ie(.5,0),new Ie(0,.5)],n=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:i,phiLength:r},n=Math.floor(n),r=qn(r,0,Math.PI*2);const s=[],a=[],o=[],l=[],c=[],u=1/n,h=new K,f=new Ie,m=new K,g=new K,y=new K;let x=0,v=0;for(let _=0;_<=e.length-1;_++)switch(_){case 0:x=e[_+1].x-e[_].x,v=e[_+1].y-e[_].y,m.x=v*1,m.y=-x,m.z=v*0,y.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(y.x,y.y,y.z);break;default:x=e[_+1].x-e[_].x,v=e[_+1].y-e[_].y,m.x=v*1,m.y=-x,m.z=v*0,g.copy(m),m.x+=y.x,m.y+=y.y,m.z+=y.z,m.normalize(),l.push(m.x,m.y,m.z),y.copy(g)}for(let _=0;_<=n;_++){const S=i+_*u*r,M=Math.sin(S),b=Math.cos(S);for(let C=0;C<=e.length-1;C++){h.x=e[C].x*M,h.y=e[C].y,h.z=e[C].x*b,a.push(h.x,h.y,h.z),f.x=_/n,f.y=C/(e.length-1),o.push(f.x,f.y);const B=l[3*C+0]*M,P=l[3*C+1],T=l[3*C+0]*b;c.push(B,P,T)}}for(let _=0;_<n;_++)for(let S=0;S<e.length-1;S++){const M=S+_*e.length,b=M,C=M+e.length,B=M+e.length+1,P=M+1;s.push(b,C,P),s.push(B,P,C)}this.setIndex(s),this.setAttribute("position",new _t(a,3)),this.setAttribute("uv",new _t(o,2)),this.setAttribute("normal",new _t(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qp(e.points,e.segments,e.phiStart,e.phiLength)}}class Py extends Qp{constructor(e=1,n=1,i=4,r=8){const s=new gp;s.absarc(0,-n/2,e,Math.PI*1.5,0),s.absarc(0,n/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:n,capSegments:i,radialSegments:r}}static fromJSON(e){return new Py(e.radius,e.length,e.capSegments,e.radialSegments)}}class By extends zt{constructor(e=1,n=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:i,thetaLength:r},n=Math.max(3,n);const s=[],a=[],o=[],l=[],c=new K,u=new Ie;a.push(0,0,0),o.push(0,0,1),l.push(.5,.5);for(let h=0,f=3;h<=n;h++,f+=3){const m=i+h/n*r;c.x=e*Math.cos(m),c.y=e*Math.sin(m),a.push(c.x,c.y,c.z),o.push(0,0,1),u.x=(a[f]/e+1)/2,u.y=(a[f+1]/e+1)/2,l.push(u.x,u.y)}for(let h=1;h<=n;h++)s.push(h,h+1,0);this.setIndex(s),this.setAttribute("position",new _t(a,3)),this.setAttribute("normal",new _t(o,3)),this.setAttribute("uv",new _t(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new By(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Qh extends zt{constructor(e=1,n=1,i=1,r=32,s=1,a=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:i,radialSegments:r,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const u=[],h=[],f=[],m=[];let g=0;const y=[],x=i/2;let v=0;_(),a===!1&&(e>0&&S(!0),n>0&&S(!1)),this.setIndex(u),this.setAttribute("position",new _t(h,3)),this.setAttribute("normal",new _t(f,3)),this.setAttribute("uv",new _t(m,2));function _(){const M=new K,b=new K;let C=0;const B=(n-e)/i;for(let P=0;P<=s;P++){const T=[],I=P/s,z=I*(n-e)+e;for(let G=0;G<=r;G++){const Q=G/r,U=Q*l+o,ee=Math.sin(U),$=Math.cos(U);b.x=z*ee,b.y=-I*i+x,b.z=z*$,h.push(b.x,b.y,b.z),M.set(ee,B,$).normalize(),f.push(M.x,M.y,M.z),m.push(Q,1-I),T.push(g++)}y.push(T)}for(let P=0;P<r;P++)for(let T=0;T<s;T++){const I=y[T][P],z=y[T+1][P],G=y[T+1][P+1],Q=y[T][P+1];u.push(I,z,Q),u.push(z,G,Q),C+=6}c.addGroup(v,C,0),v+=C}function S(M){const b=g,C=new Ie,B=new K;let P=0;const T=M===!0?e:n,I=M===!0?1:-1;for(let G=1;G<=r;G++)h.push(0,x*I,0),f.push(0,I,0),m.push(.5,.5),g++;const z=g;for(let G=0;G<=r;G++){const U=G/r*l+o,ee=Math.cos(U),$=Math.sin(U);B.x=T*$,B.y=x*I,B.z=T*ee,h.push(B.x,B.y,B.z),f.push(0,I,0),C.x=ee*.5+.5,C.y=$*.5*I+.5,m.push(C.x,C.y),g++}for(let G=0;G<r;G++){const Q=b+G,U=z+G;M===!0?u.push(U,U+1,Q):u.push(U+1,U,Q),P+=3}c.addGroup(v,P,M===!0?1:2),v+=P}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qh(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Iy extends Qh{constructor(e=1,n=1,i=32,r=1,s=!1,a=0,o=Math.PI*2){super(0,e,n,i,r,s,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:a,thetaLength:o}}static fromJSON(e){return new Iy(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Rl extends zt{constructor(e=[],n=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:i,detail:r};const s=[],a=[];o(r),c(i),u(),this.setAttribute("position",new _t(s,3)),this.setAttribute("normal",new _t(s.slice(),3)),this.setAttribute("uv",new _t(a,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function o(_){const S=new K,M=new K,b=new K;for(let C=0;C<n.length;C+=3)m(n[C+0],S),m(n[C+1],M),m(n[C+2],b),l(S,M,b,_)}function l(_,S,M,b){const C=b+1,B=[];for(let P=0;P<=C;P++){B[P]=[];const T=_.clone().lerp(M,P/C),I=S.clone().lerp(M,P/C),z=C-P;for(let G=0;G<=z;G++)G===0&&P===C?B[P][G]=T:B[P][G]=T.clone().lerp(I,G/z)}for(let P=0;P<C;P++)for(let T=0;T<2*(C-P)-1;T++){const I=Math.floor(T/2);T%2===0?(f(B[P][I+1]),f(B[P+1][I]),f(B[P][I])):(f(B[P][I+1]),f(B[P+1][I+1]),f(B[P+1][I]))}}function c(_){const S=new K;for(let M=0;M<s.length;M+=3)S.x=s[M+0],S.y=s[M+1],S.z=s[M+2],S.normalize().multiplyScalar(_),s[M+0]=S.x,s[M+1]=S.y,s[M+2]=S.z}function u(){const _=new K;for(let S=0;S<s.length;S+=3){_.x=s[S+0],_.y=s[S+1],_.z=s[S+2];const M=x(_)/2/Math.PI+.5,b=v(_)/Math.PI+.5;a.push(M,1-b)}g(),h()}function h(){for(let _=0;_<a.length;_+=6){const S=a[_+0],M=a[_+2],b=a[_+4],C=Math.max(S,M,b),B=Math.min(S,M,b);C>.9&&B<.1&&(S<.2&&(a[_+0]+=1),M<.2&&(a[_+2]+=1),b<.2&&(a[_+4]+=1))}}function f(_){s.push(_.x,_.y,_.z)}function m(_,S){const M=_*3;S.x=e[M+0],S.y=e[M+1],S.z=e[M+2]}function g(){const _=new K,S=new K,M=new K,b=new K,C=new Ie,B=new Ie,P=new Ie;for(let T=0,I=0;T<s.length;T+=9,I+=6){_.set(s[T+0],s[T+1],s[T+2]),S.set(s[T+3],s[T+4],s[T+5]),M.set(s[T+6],s[T+7],s[T+8]),C.set(a[I+0],a[I+1]),B.set(a[I+2],a[I+3]),P.set(a[I+4],a[I+5]),b.copy(_).add(S).add(M).divideScalar(3);const z=x(b);y(C,I+0,_,z),y(B,I+2,S,z),y(P,I+4,M,z)}}function y(_,S,M,b){b<0&&_.x===1&&(a[S]=_.x-1),M.x===0&&M.z===0&&(a[S]=b/2/Math.PI+.5)}function x(_){return Math.atan2(_.z,-_.x)}function v(_){return Math.atan2(-_.y,Math.sqrt(_.x*_.x+_.z*_.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Rl(e.vertices,e.indices,e.radius,e.details)}}class Ly extends Rl{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,a,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Ly(e.radius,e.detail)}}const $g=new K,ev=new K,h_=new K,tv=new Pr;class iF extends zt{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const r=Math.pow(10,4),s=Math.cos(Ic*n),a=e.getIndex(),o=e.getAttribute("position"),l=a?a.count:o.count,c=[0,0,0],u=["a","b","c"],h=new Array(3),f={},m=[];for(let g=0;g<l;g+=3){a?(c[0]=a.getX(g),c[1]=a.getX(g+1),c[2]=a.getX(g+2)):(c[0]=g,c[1]=g+1,c[2]=g+2);const{a:y,b:x,c:v}=tv;if(y.fromBufferAttribute(o,c[0]),x.fromBufferAttribute(o,c[1]),v.fromBufferAttribute(o,c[2]),tv.getNormal(h_),h[0]=`${Math.round(y.x*r)},${Math.round(y.y*r)},${Math.round(y.z*r)}`,h[1]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,h[2]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,!(h[0]===h[1]||h[1]===h[2]||h[2]===h[0]))for(let _=0;_<3;_++){const S=(_+1)%3,M=h[_],b=h[S],C=tv[u[_]],B=tv[u[S]],P=`${M}_${b}`,T=`${b}_${M}`;T in f&&f[T]?(h_.dot(f[T].normal)<=s&&(m.push(C.x,C.y,C.z),m.push(B.x,B.y,B.z)),f[T]=null):P in f||(f[P]={index0:c[_],index1:c[S],normal:h_.clone()})}}for(const g in f)if(f[g]){const{index0:y,index1:x}=f[g];$g.fromBufferAttribute(o,y),ev.fromBufferAttribute(o,x),m.push($g.x,$g.y,$g.z),m.push(ev.x,ev.y,ev.z)}this.setAttribute("position",new _t(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class sl extends gp{constructor(e){super(e),this.uuid=qr(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let i=0,r=this.holes.length;i<r;i++)n[i]=this.holes[i].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){const r=e.holes[n];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,i=this.holes.length;n<i;n++){const r=this.holes[n];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){const r=e.holes[n];this.holes.push(new gp().fromJSON(r))}return this}}const CJ={triangulate:function(t,e,n=2){const i=e&&e.length,r=i?e[0]*n:t.length;let s=rF(t,0,r,n,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,c,u,h,f,m;if(i&&(s=LJ(t,e,s,n)),t.length>80*n){o=c=t[0],l=u=t[1];for(let g=n;g<r;g+=n)h=t[g],f=t[g+1],h<o&&(o=h),f<l&&(l=f),h>c&&(c=h),f>u&&(u=f);m=Math.max(c-o,u-l),m=m!==0?32767/m:0}return vp(s,a,n,o,l,m,0),a}};function rF(t,e,n,i,r){let s,a;if(r===jJ(t,e,n,i)>0)for(s=e;s<n;s+=i)a=eP(s,t[s],t[s+1],a);else for(s=n-i;s>=e;s-=i)a=eP(s,t[s],t[s+1],a);return a&&Dy(a,a.next)&&(xp(a),a=a.next),a}function zc(t,e){if(!t)return t;e||(e=t);let n=t,i;do if(i=!1,!n.steiner&&(Dy(n,n.next)||Wn(n.prev,n,n.next)===0)){if(xp(n),n=e=n.prev,n===n.next)break;i=!0}else n=n.next;while(i||n!==e);return e}function vp(t,e,n,i,r,s,a){if(!t)return;!a&&s&&kJ(t,i,r,s);let o=t,l,c;for(;t.prev!==t.next;){if(l=t.prev,c=t.next,s?PJ(t,i,r,s):RJ(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(c.i/n|0),xp(t),t=c.next,o=c.next;continue}if(t=c,t===o){a?a===1?(t=BJ(zc(t),e,n),vp(t,e,n,i,r,s,2)):a===2&&IJ(t,e,n,i,r,s):vp(zc(t),e,n,i,r,s,1);break}}}function RJ(t){const e=t.prev,n=t,i=t.next;if(Wn(e,n,i)>=0)return!1;const r=e.x,s=n.x,a=i.x,o=e.y,l=n.y,c=i.y,u=r<s?r<a?r:a:s<a?s:a,h=o<l?o<c?o:c:l<c?l:c,f=r>s?r>a?r:a:s>a?s:a,m=o>l?o>c?o:c:l>c?l:c;let g=i.next;for(;g!==e;){if(g.x>=u&&g.x<=f&&g.y>=h&&g.y<=m&&lh(r,o,s,l,a,c,g.x,g.y)&&Wn(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function PJ(t,e,n,i){const r=t.prev,s=t,a=t.next;if(Wn(r,s,a)>=0)return!1;const o=r.x,l=s.x,c=a.x,u=r.y,h=s.y,f=a.y,m=o<l?o<c?o:c:l<c?l:c,g=u<h?u<f?u:f:h<f?h:f,y=o>l?o>c?o:c:l>c?l:c,x=u>h?u>f?u:f:h>f?h:f,v=LA(m,g,e,n,i),_=LA(y,x,e,n,i);let S=t.prevZ,M=t.nextZ;for(;S&&S.z>=v&&M&&M.z<=_;){if(S.x>=m&&S.x<=y&&S.y>=g&&S.y<=x&&S!==r&&S!==a&&lh(o,u,l,h,c,f,S.x,S.y)&&Wn(S.prev,S,S.next)>=0||(S=S.prevZ,M.x>=m&&M.x<=y&&M.y>=g&&M.y<=x&&M!==r&&M!==a&&lh(o,u,l,h,c,f,M.x,M.y)&&Wn(M.prev,M,M.next)>=0))return!1;M=M.nextZ}for(;S&&S.z>=v;){if(S.x>=m&&S.x<=y&&S.y>=g&&S.y<=x&&S!==r&&S!==a&&lh(o,u,l,h,c,f,S.x,S.y)&&Wn(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;M&&M.z<=_;){if(M.x>=m&&M.x<=y&&M.y>=g&&M.y<=x&&M!==r&&M!==a&&lh(o,u,l,h,c,f,M.x,M.y)&&Wn(M.prev,M,M.next)>=0)return!1;M=M.nextZ}return!0}function BJ(t,e,n){let i=t;do{const r=i.prev,s=i.next.next;!Dy(r,s)&&sF(r,i,i.next,s)&&yp(r,s)&&yp(s,r)&&(e.push(r.i/n|0),e.push(i.i/n|0),e.push(s.i/n|0),xp(i),xp(i.next),i=t=s),i=i.next}while(i!==t);return zc(i)}function IJ(t,e,n,i,r,s){let a=t;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&zJ(a,o)){let l=aF(a,o);a=zc(a,a.next),l=zc(l,l.next),vp(a,e,n,i,r,s,0),vp(l,e,n,i,r,s,0);return}o=o.next}a=a.next}while(a!==t)}function LJ(t,e,n,i){const r=[];let s,a,o,l,c;for(s=0,a=e.length;s<a;s++)o=e[s]*i,l=s<a-1?e[s+1]*i:t.length,c=rF(t,o,l,i,!1),c===c.next&&(c.steiner=!0),r.push(GJ(c));for(r.sort(DJ),s=0;s<r.length;s++)n=NJ(r[s],n);return n}function DJ(t,e){return t.x-e.x}function NJ(t,e){const n=FJ(t,e);if(!n)return e;const i=aF(n,t);return zc(i,i.next),zc(n,n.next)}function FJ(t,e){let n=e,i=-1/0,r;const s=t.x,a=t.y;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){const f=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(f<=s&&f>i&&(i=f,r=n.x<n.next.x?n:n.next,f===s))return r}n=n.next}while(n!==e);if(!r)return null;const o=r,l=r.x,c=r.y;let u=1/0,h;n=r;do s>=n.x&&n.x>=l&&s!==n.x&&lh(a<c?s:i,a,l,c,a<c?i:s,a,n.x,n.y)&&(h=Math.abs(a-n.y)/(s-n.x),yp(n,t)&&(h<u||h===u&&(n.x>r.x||n.x===r.x&&UJ(r,n)))&&(r=n,u=h)),n=n.next;while(n!==o);return r}function UJ(t,e){return Wn(t.prev,t,e.prev)<0&&Wn(e.next,t,t.next)<0}function kJ(t,e,n,i){let r=t;do r.z===0&&(r.z=LA(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,OJ(r)}function OJ(t){let e,n,i,r,s,a,o,l,c=1;do{for(n=t,t=null,s=null,a=0;n;){for(a++,i=n,o=0,e=0;e<c&&(o++,i=i.nextZ,!!i);e++);for(l=c;o>0||l>0&&i;)o!==0&&(l===0||!i||n.z<=i.z)?(r=n,n=n.nextZ,o--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;n=i}s.nextZ=null,c*=2}while(a>1);return t}function LA(t,e,n,i,r){return t=(t-n)*r|0,e=(e-i)*r|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function GJ(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function lh(t,e,n,i,r,s,a,o){return(r-a)*(e-o)>=(t-a)*(s-o)&&(t-a)*(i-o)>=(n-a)*(e-o)&&(n-a)*(s-o)>=(r-a)*(i-o)}function zJ(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!HJ(t,e)&&(yp(t,e)&&yp(e,t)&&VJ(t,e)&&(Wn(t.prev,t,e.prev)||Wn(t,e.prev,e))||Dy(t,e)&&Wn(t.prev,t,t.next)>0&&Wn(e.prev,e,e.next)>0)}function Wn(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Dy(t,e){return t.x===e.x&&t.y===e.y}function sF(t,e,n,i){const r=iv(Wn(t,e,n)),s=iv(Wn(t,e,i)),a=iv(Wn(n,i,t)),o=iv(Wn(n,i,e));return!!(r!==s&&a!==o||r===0&&nv(t,n,e)||s===0&&nv(t,i,e)||a===0&&nv(n,t,i)||o===0&&nv(n,e,i))}function nv(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function iv(t){return t>0?1:t<0?-1:0}function HJ(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&sF(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function yp(t,e){return Wn(t.prev,t,t.next)<0?Wn(t,e,t.next)>=0&&Wn(t,t.prev,e)>=0:Wn(t,e,t.prev)<0||Wn(t,t.next,e)<0}function VJ(t,e){let n=t,i=!1;const r=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==t);return i}function aF(t,e){const n=new DA(t.i,t.x,t.y),i=new DA(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function eP(t,e,n,i){const r=new DA(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function xp(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function DA(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function jJ(t,e,n,i){let r=0;for(let s=e,a=n-i;s<n;s+=i)r+=(t[a]-t[s])*(t[s+1]+t[a+1]),a=s;return r}class ya{static area(e){const n=e.length;let i=0;for(let r=n-1,s=0;s<n;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return ya.area(e)<0}static triangulateShape(e,n){const i=[],r=[],s=[];tP(e),nP(i,e);let a=e.length;n.forEach(tP);for(let l=0;l<n.length;l++)r.push(a),a+=n[l].length,nP(i,n[l]);const o=CJ.triangulate(i,r);for(let l=0;l<o.length;l+=3)s.push(o.slice(l,l+3));return s}}function tP(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function nP(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class Ny extends zt{constructor(e=new sl([new Ie(.5,.5),new Ie(-.5,.5),new Ie(-.5,-.5),new Ie(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let o=0,l=e.length;o<l;o++){const c=e[o];a(c)}this.setAttribute("position",new _t(r,3)),this.setAttribute("uv",new _t(s,2)),this.computeVertexNormals();function a(o){const l=[],c=n.curveSegments!==void 0?n.curveSegments:12,u=n.steps!==void 0?n.steps:1,h=n.depth!==void 0?n.depth:1;let f=n.bevelEnabled!==void 0?n.bevelEnabled:!0,m=n.bevelThickness!==void 0?n.bevelThickness:.2,g=n.bevelSize!==void 0?n.bevelSize:m-.1,y=n.bevelOffset!==void 0?n.bevelOffset:0,x=n.bevelSegments!==void 0?n.bevelSegments:3;const v=n.extrudePath,_=n.UVGenerator!==void 0?n.UVGenerator:WJ;let S,M=!1,b,C,B,P;v&&(S=v.getSpacedPoints(u),M=!0,f=!1,b=v.computeFrenetFrames(u,!1),C=new K,B=new K,P=new K),f||(x=0,m=0,g=0,y=0);const T=o.extractPoints(c);let I=T.shape;const z=T.holes;if(!ya.isClockWise(I)){I=I.reverse();for(let X=0,Re=z.length;X<Re;X++){const ye=z[X];ya.isClockWise(ye)&&(z[X]=ye.reverse())}}const Q=ya.triangulateShape(I,z),U=I;for(let X=0,Re=z.length;X<Re;X++){const ye=z[X];I=I.concat(ye)}function ee(X,Re,ye){return Re||console.error("THREE.ExtrudeGeometry: vec does not exist"),X.clone().addScaledVector(Re,ye)}const $=I.length,oe=Q.length;function Z(X,Re,ye){let De,Me,Qe;const Ee=X.x-Re.x,Oe=X.y-Re.y,Je=ye.x-X.x,be=ye.y-X.y,rt=Ee*Ee+Oe*Oe,V=Ee*be-Oe*Je;if(Math.abs(V)>Number.EPSILON){const k=Math.sqrt(rt),ue=Math.sqrt(Je*Je+be*be),je=Re.x-Oe/k,_e=Re.y+Ee/k,Le=ye.x-be/ue,Ke=ye.y+Je/ue,We=((Le-je)*be-(Ke-_e)*Je)/(Ee*be-Oe*Je);De=je+Ee*We-X.x,Me=_e+Oe*We-X.y;const Ze=De*De+Me*Me;if(Ze<=2)return new Ie(De,Me);Qe=Math.sqrt(Ze/2)}else{let k=!1;Ee>Number.EPSILON?Je>Number.EPSILON&&(k=!0):Ee<-Number.EPSILON?Je<-Number.EPSILON&&(k=!0):Math.sign(Oe)===Math.sign(be)&&(k=!0),k?(De=-Oe,Me=Ee,Qe=Math.sqrt(rt)):(De=Ee,Me=Oe,Qe=Math.sqrt(rt/2))}return new Ie(De/Qe,Me/Qe)}const J=[];for(let X=0,Re=U.length,ye=Re-1,De=X+1;X<Re;X++,ye++,De++)ye===Re&&(ye=0),De===Re&&(De=0),J[X]=Z(U[X],U[ye],U[De]);const H=[];let O,j=J.concat();for(let X=0,Re=z.length;X<Re;X++){const ye=z[X];O=[];for(let De=0,Me=ye.length,Qe=Me-1,Ee=De+1;De<Me;De++,Qe++,Ee++)Qe===Me&&(Qe=0),Ee===Me&&(Ee=0),O[De]=Z(ye[De],ye[Qe],ye[Ee]);H.push(O),j=j.concat(O)}for(let X=0;X<x;X++){const Re=X/x,ye=m*Math.cos(Re*Math.PI/2),De=g*Math.sin(Re*Math.PI/2)+y;for(let Me=0,Qe=U.length;Me<Qe;Me++){const Ee=ee(U[Me],J[Me],De);fe(Ee.x,Ee.y,-ye)}for(let Me=0,Qe=z.length;Me<Qe;Me++){const Ee=z[Me];O=H[Me];for(let Oe=0,Je=Ee.length;Oe<Je;Oe++){const be=ee(Ee[Oe],O[Oe],De);fe(be.x,be.y,-ye)}}}const W=g+y;for(let X=0;X<$;X++){const Re=f?ee(I[X],j[X],W):I[X];M?(B.copy(b.normals[0]).multiplyScalar(Re.x),C.copy(b.binormals[0]).multiplyScalar(Re.y),P.copy(S[0]).add(B).add(C),fe(P.x,P.y,P.z)):fe(Re.x,Re.y,0)}for(let X=1;X<=u;X++)for(let Re=0;Re<$;Re++){const ye=f?ee(I[Re],j[Re],W):I[Re];M?(B.copy(b.normals[X]).multiplyScalar(ye.x),C.copy(b.binormals[X]).multiplyScalar(ye.y),P.copy(S[X]).add(B).add(C),fe(P.x,P.y,P.z)):fe(ye.x,ye.y,h/u*X)}for(let X=x-1;X>=0;X--){const Re=X/x,ye=m*Math.cos(Re*Math.PI/2),De=g*Math.sin(Re*Math.PI/2)+y;for(let Me=0,Qe=U.length;Me<Qe;Me++){const Ee=ee(U[Me],J[Me],De);fe(Ee.x,Ee.y,h+ye)}for(let Me=0,Qe=z.length;Me<Qe;Me++){const Ee=z[Me];O=H[Me];for(let Oe=0,Je=Ee.length;Oe<Je;Oe++){const be=ee(Ee[Oe],O[Oe],De);M?fe(be.x,be.y+S[u-1].y,S[u-1].x+ye):fe(be.x,be.y,h+ye)}}}ne(),ae();function ne(){const X=r.length/3;if(f){let Re=0,ye=$*Re;for(let De=0;De<oe;De++){const Me=Q[De];Se(Me[2]+ye,Me[1]+ye,Me[0]+ye)}Re=u+x*2,ye=$*Re;for(let De=0;De<oe;De++){const Me=Q[De];Se(Me[0]+ye,Me[1]+ye,Me[2]+ye)}}else{for(let Re=0;Re<oe;Re++){const ye=Q[Re];Se(ye[2],ye[1],ye[0])}for(let Re=0;Re<oe;Re++){const ye=Q[Re];Se(ye[0]+$*u,ye[1]+$*u,ye[2]+$*u)}}i.addGroup(X,r.length/3-X,0)}function ae(){const X=r.length/3;let Re=0;de(U,Re),Re+=U.length;for(let ye=0,De=z.length;ye<De;ye++){const Me=z[ye];de(Me,Re),Re+=Me.length}i.addGroup(X,r.length/3-X,1)}function de(X,Re){let ye=X.length;for(;--ye>=0;){const De=ye;let Me=ye-1;Me<0&&(Me=X.length-1);for(let Qe=0,Ee=u+x*2;Qe<Ee;Qe++){const Oe=$*Qe,Je=$*(Qe+1),be=Re+De+Oe,rt=Re+Me+Oe,V=Re+Me+Je,k=Re+De+Je;He(be,rt,V,k)}}}function fe(X,Re,ye){l.push(X),l.push(Re),l.push(ye)}function Se(X,Re,ye){Fe(X),Fe(Re),Fe(ye);const De=r.length/3,Me=_.generateTopUV(i,r,De-3,De-2,De-1);ge(Me[0]),ge(Me[1]),ge(Me[2])}function He(X,Re,ye,De){Fe(X),Fe(Re),Fe(De),Fe(Re),Fe(ye),Fe(De);const Me=r.length/3,Qe=_.generateSideWallUV(i,r,Me-6,Me-3,Me-2,Me-1);ge(Qe[0]),ge(Qe[1]),ge(Qe[3]),ge(Qe[1]),ge(Qe[2]),ge(Qe[3])}function Fe(X){r.push(l[X*3+0]),r.push(l[X*3+1]),r.push(l[X*3+2])}function ge(X){s.push(X.x),s.push(X.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,i=this.parameters.options;return XJ(n,i,e)}static fromJSON(e,n){const i=[];for(let s=0,a=e.shapes.length;s<a;s++){const o=n[e.shapes[s]];i.push(o)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new D0[r.type]().fromJSON(r)),new Ny(i,e.options)}}const WJ={generateTopUV:function(t,e,n,i,r){const s=e[n*3],a=e[n*3+1],o=e[i*3],l=e[i*3+1],c=e[r*3],u=e[r*3+1];return[new Ie(s,a),new Ie(o,l),new Ie(c,u)]},generateSideWallUV:function(t,e,n,i,r,s){const a=e[n*3],o=e[n*3+1],l=e[n*3+2],c=e[i*3],u=e[i*3+1],h=e[i*3+2],f=e[r*3],m=e[r*3+1],g=e[r*3+2],y=e[s*3],x=e[s*3+1],v=e[s*3+2];return Math.abs(o-u)<Math.abs(a-c)?[new Ie(a,1-l),new Ie(c,1-h),new Ie(f,1-g),new Ie(y,1-v)]:[new Ie(o,1-l),new Ie(u,1-h),new Ie(m,1-g),new Ie(x,1-v)]}};function XJ(t,e,n){if(n.shapes=[],Array.isArray(t))for(let i=0,r=t.length;i<r;i++){const s=t[i];n.shapes.push(s.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class Zp extends Rl{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Zp(e.radius,e.detail)}}class qp extends Rl{constructor(e=1,n=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new qp(e.radius,e.detail)}}class $p extends zt{constructor(e=.5,n=1,i=32,r=1,s=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:a},i=Math.max(3,i),r=Math.max(1,r);const o=[],l=[],c=[],u=[];let h=e;const f=(n-e)/r,m=new K,g=new Ie;for(let y=0;y<=r;y++){for(let x=0;x<=i;x++){const v=s+x/i*a;m.x=h*Math.cos(v),m.y=h*Math.sin(v),l.push(m.x,m.y,m.z),c.push(0,0,1),g.x=(m.x/n+1)/2,g.y=(m.y/n+1)/2,u.push(g.x,g.y)}h+=f}for(let y=0;y<r;y++){const x=y*(i+1);for(let v=0;v<i;v++){const _=v+x,S=_,M=_+i+1,b=_+i+2,C=_+1;o.push(S,M,C),o.push(M,b,C)}}this.setIndex(o),this.setAttribute("position",new _t(l,3)),this.setAttribute("normal",new _t(c,3)),this.setAttribute("uv",new _t(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $p(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Fy extends zt{constructor(e=new sl([new Ie(0,.5),new Ie(-.5,-.5),new Ie(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const i=[],r=[],s=[],a=[];let o=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(o,l,u),o+=l,l=0;this.setIndex(i),this.setAttribute("position",new _t(r,3)),this.setAttribute("normal",new _t(s,3)),this.setAttribute("uv",new _t(a,2));function c(u){const h=r.length/3,f=u.extractPoints(n);let m=f.shape;const g=f.holes;ya.isClockWise(m)===!1&&(m=m.reverse());for(let x=0,v=g.length;x<v;x++){const _=g[x];ya.isClockWise(_)===!0&&(g[x]=_.reverse())}const y=ya.triangulateShape(m,g);for(let x=0,v=g.length;x<v;x++){const _=g[x];m=m.concat(_)}for(let x=0,v=m.length;x<v;x++){const _=m[x];r.push(_.x,_.y,0),s.push(0,0,1),a.push(_.x,_.y)}for(let x=0,v=y.length;x<v;x++){const _=y[x],S=_[0]+h,M=_[1]+h,b=_[2]+h;i.push(S,M,b),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return JJ(n,e)}static fromJSON(e,n){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const a=n[e.shapes[r]];i.push(a)}return new Fy(i,e.curveSegments)}}function JJ(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,i=t.length;n<i;n++){const r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}class em extends zt{constructor(e=1,n=32,i=16,r=0,s=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:i,phiStart:r,phiLength:s,thetaStart:a,thetaLength:o},n=Math.max(3,Math.floor(n)),i=Math.max(2,Math.floor(i));const l=Math.min(a+o,Math.PI);let c=0;const u=[],h=new K,f=new K,m=[],g=[],y=[],x=[];for(let v=0;v<=i;v++){const _=[],S=v/i;let M=0;v===0&&a===0?M=.5/n:v===i&&l===Math.PI&&(M=-.5/n);for(let b=0;b<=n;b++){const C=b/n;h.x=-e*Math.cos(r+C*s)*Math.sin(a+S*o),h.y=e*Math.cos(a+S*o),h.z=e*Math.sin(r+C*s)*Math.sin(a+S*o),g.push(h.x,h.y,h.z),f.copy(h).normalize(),y.push(f.x,f.y,f.z),x.push(C+M,1-S),_.push(c++)}u.push(_)}for(let v=0;v<i;v++)for(let _=0;_<n;_++){const S=u[v][_+1],M=u[v][_],b=u[v+1][_],C=u[v+1][_+1];(v!==0||a>0)&&m.push(S,M,C),(v!==i-1||l<Math.PI)&&m.push(M,b,C)}this.setIndex(m),this.setAttribute("position",new _t(g,3)),this.setAttribute("normal",new _t(y,3)),this.setAttribute("uv",new _t(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new em(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Uy extends Rl{constructor(e=1,n=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Uy(e.radius,e.detail)}}class ky extends zt{constructor(e=1,n=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const a=[],o=[],l=[],c=[],u=new K,h=new K,f=new K;for(let m=0;m<=i;m++)for(let g=0;g<=r;g++){const y=g/r*s,x=m/i*Math.PI*2;h.x=(e+n*Math.cos(x))*Math.cos(y),h.y=(e+n*Math.cos(x))*Math.sin(y),h.z=n*Math.sin(x),o.push(h.x,h.y,h.z),u.x=e*Math.cos(y),u.y=e*Math.sin(y),f.subVectors(h,u).normalize(),l.push(f.x,f.y,f.z),c.push(g/r),c.push(m/i)}for(let m=1;m<=i;m++)for(let g=1;g<=r;g++){const y=(r+1)*m+g-1,x=(r+1)*(m-1)+g-1,v=(r+1)*(m-1)+g,_=(r+1)*m+g;a.push(y,x,_),a.push(x,v,_)}this.setIndex(a),this.setAttribute("position",new _t(o,3)),this.setAttribute("normal",new _t(l,3)),this.setAttribute("uv",new _t(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ky(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Oy extends zt{constructor(e=1,n=.4,i=64,r=8,s=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:i,radialSegments:r,p:s,q:a},i=Math.floor(i),r=Math.floor(r);const o=[],l=[],c=[],u=[],h=new K,f=new K,m=new K,g=new K,y=new K,x=new K,v=new K;for(let S=0;S<=i;++S){const M=S/i*s*Math.PI*2;_(M,s,a,e,m),_(M+.01,s,a,e,g),x.subVectors(g,m),v.addVectors(g,m),y.crossVectors(x,v),v.crossVectors(y,x),y.normalize(),v.normalize();for(let b=0;b<=r;++b){const C=b/r*Math.PI*2,B=-n*Math.cos(C),P=n*Math.sin(C);h.x=m.x+(B*v.x+P*y.x),h.y=m.y+(B*v.y+P*y.y),h.z=m.z+(B*v.z+P*y.z),l.push(h.x,h.y,h.z),f.subVectors(h,m).normalize(),c.push(f.x,f.y,f.z),u.push(S/i),u.push(b/r)}}for(let S=1;S<=i;S++)for(let M=1;M<=r;M++){const b=(r+1)*(S-1)+(M-1),C=(r+1)*S+(M-1),B=(r+1)*S+M,P=(r+1)*(S-1)+M;o.push(b,C,P),o.push(C,B,P)}this.setIndex(o),this.setAttribute("position",new _t(l,3)),this.setAttribute("normal",new _t(c,3)),this.setAttribute("uv",new _t(u,2));function _(S,M,b,C,B){const P=Math.cos(S),T=Math.sin(S),I=b/M*S,z=Math.cos(I);B.x=C*(2+z)*.5*P,B.y=C*(2+z)*T*.5,B.z=C*Math.sin(I)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Oy(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Gy extends zt{constructor(e=new cE(new K(-1,-1,0),new K(-1,1,0),new K(1,1,0)),n=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:i,radialSegments:r,closed:s};const a=e.computeFrenetFrames(n,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const o=new K,l=new K,c=new Ie;let u=new K;const h=[],f=[],m=[],g=[];y(),this.setIndex(g),this.setAttribute("position",new _t(h,3)),this.setAttribute("normal",new _t(f,3)),this.setAttribute("uv",new _t(m,2));function y(){for(let S=0;S<n;S++)x(S);x(s===!1?n:0),_(),v()}function x(S){u=e.getPointAt(S/n,u);const M=a.normals[S],b=a.binormals[S];for(let C=0;C<=r;C++){const B=C/r*Math.PI*2,P=Math.sin(B),T=-Math.cos(B);l.x=T*M.x+P*b.x,l.y=T*M.y+P*b.y,l.z=T*M.z+P*b.z,l.normalize(),f.push(l.x,l.y,l.z),o.x=u.x+i*l.x,o.y=u.y+i*l.y,o.z=u.z+i*l.z,h.push(o.x,o.y,o.z)}}function v(){for(let S=1;S<=n;S++)for(let M=1;M<=r;M++){const b=(r+1)*(S-1)+(M-1),C=(r+1)*S+(M-1),B=(r+1)*S+M,P=(r+1)*(S-1)+M;g.push(b,C,P),g.push(C,B,P)}}function _(){for(let S=0;S<=n;S++)for(let M=0;M<=r;M++)c.x=S/n,c.y=M/r,m.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Gy(new D0[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class oF extends zt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],i=new Set,r=new K,s=new K;if(e.index!==null){const a=e.attributes.position,o=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:o.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const h=l[c],f=h.start,m=h.count;for(let g=f,y=f+m;g<y;g+=3)for(let x=0;x<3;x++){const v=o.getX(g+x),_=o.getX(g+(x+1)%3);r.fromBufferAttribute(a,v),s.fromBufferAttribute(a,_),iP(r,s,i)===!0&&(n.push(r.x,r.y,r.z),n.push(s.x,s.y,s.z))}}}else{const a=e.attributes.position;for(let o=0,l=a.count/3;o<l;o++)for(let c=0;c<3;c++){const u=3*o+c,h=3*o+(c+1)%3;r.fromBufferAttribute(a,u),s.fromBufferAttribute(a,h),iP(r,s,i)===!0&&(n.push(r.x,r.y,r.z),n.push(s.x,s.y,s.z))}}this.setAttribute("position",new _t(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function iP(t,e,n){const i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(i)===!0||n.has(r)===!0?!1:(n.add(i),n.add(r),!0)}var rP=Object.freeze({__proto__:null,BoxGeometry:Zc,CapsuleGeometry:Py,CircleGeometry:By,ConeGeometry:Iy,CylinderGeometry:Qh,DodecahedronGeometry:Ly,EdgesGeometry:iF,ExtrudeGeometry:Ny,IcosahedronGeometry:Zp,LatheGeometry:Qp,OctahedronGeometry:qp,PlaneGeometry:Aa,PolyhedronGeometry:Rl,RingGeometry:$p,ShapeGeometry:Fy,SphereGeometry:em,TetrahedronGeometry:Uy,TorusGeometry:ky,TorusKnotGeometry:Oy,TubeGeometry:Gy,WireframeGeometry:oF});class lF extends ui{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new ht(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class cF extends ti{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Zh extends ui{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ht(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Cl,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ts extends Zh{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ie(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return qn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ht(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ht(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ht(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class uF extends ui{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ht(16777215),this.specular=new ht(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Cl,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Hp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class hF extends ui{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ht(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Cl,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class hE extends ui{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Cl,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class dF extends ui{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ht(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Cl,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Hp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class fF extends ui{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ht(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Cl,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class pF extends sr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Ec(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function mF(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function gF(t){function e(r,s){return t[r]-t[s]}const n=t.length,i=new Array(n);for(let r=0;r!==n;++r)i[r]=r;return i.sort(e),i}function NA(t,e,n){const i=t.length,r=new t.constructor(i);for(let s=0,a=0;a!==i;++s){const o=n[s]*e;for(let l=0;l!==e;++l)r[a++]=t[o+l]}return r}function dE(t,e,n,i){let r=1,s=t[0];for(;s!==void 0&&s[i]===void 0;)s=t[r++];if(s===void 0)return;let a=s[i];if(a!==void 0)if(Array.isArray(a))do a=s[i],a!==void 0&&(e.push(s.time),n.push.apply(n,a)),s=t[r++];while(s!==void 0);else if(a.toArray!==void 0)do a=s[i],a!==void 0&&(e.push(s.time),a.toArray(n,n.length)),s=t[r++];while(s!==void 0);else do a=s[i],a!==void 0&&(e.push(s.time),n.push(a)),s=t[r++];while(s!==void 0)}function YJ(t,e,n,i,r=30){const s=t.clone();s.name=e;const a=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),h=[],f=[];for(let m=0;m<c.times.length;++m){const g=c.times[m]*r;if(!(g<n||g>=i)){h.push(c.times[m]);for(let y=0;y<u;++y)f.push(c.values[m*u+y])}}h.length!==0&&(c.times=Ec(h,c.times.constructor),c.values=Ec(f,c.values.constructor),a.push(c))}s.tracks=a;let o=1/0;for(let l=0;l<s.tracks.length;++l)o>s.tracks[l].times[0]&&(o=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*o);return s.resetDuration(),s}function KJ(t,e=0,n=t,i=30){i<=0&&(i=30);const r=n.tracks.length,s=e/i;for(let a=0;a<r;++a){const o=n.tracks[a],l=o.ValueTypeName;if(l==="bool"||l==="string")continue;const c=t.tracks.find(function(v){return v.name===o.name&&v.ValueTypeName===l});if(c===void 0)continue;let u=0;const h=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=h/3);let f=0;const m=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=m/3);const g=o.times.length-1;let y;if(s<=o.times[0]){const v=u,_=h-u;y=o.values.slice(v,_)}else if(s>=o.times[g]){const v=g*h+u,_=v+h-u;y=o.values.slice(v,_)}else{const v=o.createInterpolant(),_=u,S=h-u;v.evaluate(s),y=v.resultBuffer.slice(_,S)}l==="quaternion"&&new wi().fromArray(y).normalize().conjugate().toArray(y);const x=c.times.length;for(let v=0;v<x;++v){const _=v*m+f;if(l==="quaternion")wi.multiplyQuaternionsFlat(c.values,_,y,0,c.values,_);else{const S=m-f*2;for(let M=0;M<S;++M)c.values[_+M]-=y[M]}}}return t.blendMode=zM,t}const QJ={convertArray:Ec,isTypedArray:mF,getKeyframeOrder:gF,sortedArray:NA,flattenJSON:dE,subclip:YJ,makeClipAdditive:KJ};class qh{constructor(e,n,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new n.constructor(i),this.sampleValues=n,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let i=this._cachedIndex,r=n[i],s=n[i-1];e:{t:{let a;n:{i:if(!(e<r)){for(let o=i+2;;){if(r===void 0){if(e<s)break i;return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===o)break;if(s=r,r=n[++i],e<r)break t}a=n.length;break n}if(!(e>=s)){const o=n[1];e<o&&(i=2,s=o);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=n[--i-1],e>=s)break t}a=i,i=0;break n}break e}for(;i<a;){const o=i+a>>>1;e<n[o]?a=o:i=o+1}if(r=n[i],s=n[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let a=0;a!==r;++a)n[a]=i[s+a];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class vF extends qh{constructor(e,n,i,r){super(e,n,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Sc,endingEnd:Sc}}intervalChanged_(e,n,i){const r=this.parameterPositions;let s=e-2,a=e+1,o=r[s],l=r[a];if(o===void 0)switch(this.getSettings_().endingStart){case Ac:s=e,o=2*n-i;break;case cp:s=r.length-2,o=n+r[s]-r[s+1];break;default:s=e,o=i}if(l===void 0)switch(this.getSettings_().endingEnd){case Ac:a=e,l=2*i-n;break;case cp:a=1,l=i+r[1]-r[0];break;default:a=e-1,l=n}const c=(i-n)*.5,u=this.valueSize;this._weightPrev=c/(n-o),this._weightNext=c/(l-i),this._offsetPrev=s*u,this._offsetNext=a*u}interpolate_(e,n,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,c=l-o,u=this._offsetPrev,h=this._offsetNext,f=this._weightPrev,m=this._weightNext,g=(i-n)/(r-n),y=g*g,x=y*g,v=-f*x+2*f*y-f*g,_=(1+f)*x+(-1.5-2*f)*y+(-.5+f)*g+1,S=(-1-m)*x+(1.5+m)*y+.5*g,M=m*x-m*y;for(let b=0;b!==o;++b)s[b]=v*a[u+b]+_*a[c+b]+S*a[l+b]+M*a[h+b];return s}}class fE extends qh{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e,n,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,c=l-o,u=(i-n)/(r-n),h=1-u;for(let f=0;f!==o;++f)s[f]=a[c+f]*h+a[l+f]*u;return s}}class yF extends qh{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class ta{constructor(e,n,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Ec(n,this.TimeBufferType),this.values=Ec(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let i;if(n.toJSON!==this.toJSON)i=n.toJSON(e);else{i={name:e.name,times:Ec(e.times,Array),values:Ec(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new yF(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new fE(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new vF(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case Dh:n=this.InterpolantFactoryMethodDiscrete;break;case Gc:n=this.InterpolantFactoryMethodLinear;break;case jv:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Dh;case this.InterpolantFactoryMethodLinear:return Gc;case this.InterpolantFactoryMethodSmooth:return jv}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]*=e}return this}trim(e,n){const i=this.times,r=i.length;let s=0,a=r-1;for(;s!==r&&i[s]<e;)++s;for(;a!==-1&&i[a]>n;)--a;if(++a,s!==0||a!==r){s>=a&&(a=Math.max(a,1),s=a-1);const o=this.getValueSize();this.times=i.slice(s,a),this.values=this.values.slice(s*o,a*o)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let o=0;o!==s;o++){const l=i[o];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,l),e=!1;break}if(a!==null&&a>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,l,a),e=!1;break}a=l}if(r!==void 0&&mF(r))for(let o=0,l=r.length;o!==l;++o){const c=r[o];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===jv,s=e.length-1;let a=1;for(let o=1;o<s;++o){let l=!1;const c=e[o],u=e[o+1];if(c!==u&&(o!==1||c!==e[0]))if(r)l=!0;else{const h=o*i,f=h-i,m=h+i;for(let g=0;g!==i;++g){const y=n[h+g];if(y!==n[f+g]||y!==n[m+g]){l=!0;break}}}if(l){if(o!==a){e[a]=e[o];const h=o*i,f=a*i;for(let m=0;m!==i;++m)n[f+m]=n[h+m]}++a}}if(s>0){e[a]=e[s];for(let o=s*i,l=a*i,c=0;c!==i;++c)n[l+c]=n[o+c];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=n.slice(0,a*i)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),i=this.constructor,r=new i(this.name,e,n);return r.createInterpolant=this.createInterpolant,r}}ta.prototype.TimeBufferType=Float32Array;ta.prototype.ValueBufferType=Float32Array;ta.prototype.DefaultInterpolation=Gc;class $c extends ta{}$c.prototype.ValueTypeName="bool";$c.prototype.ValueBufferType=Array;$c.prototype.DefaultInterpolation=Dh;$c.prototype.InterpolantFactoryMethodLinear=void 0;$c.prototype.InterpolantFactoryMethodSmooth=void 0;class pE extends ta{}pE.prototype.ValueTypeName="color";class Hc extends ta{}Hc.prototype.ValueTypeName="number";class xF extends qh{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e,n,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=(i-n)/(r-n);let c=e*o;for(let u=c+o;c!==u;c+=4)wi.slerpFlat(s,0,a,c-o,a,c,l);return s}}class xl extends ta{InterpolantFactoryMethodLinear(e){return new xF(this.times,this.values,this.getValueSize(),e)}}xl.prototype.ValueTypeName="quaternion";xl.prototype.DefaultInterpolation=Gc;xl.prototype.InterpolantFactoryMethodSmooth=void 0;class eu extends ta{}eu.prototype.ValueTypeName="string";eu.prototype.ValueBufferType=Array;eu.prototype.DefaultInterpolation=Dh;eu.prototype.InterpolantFactoryMethodLinear=void 0;eu.prototype.InterpolantFactoryMethodSmooth=void 0;class Vc extends ta{}Vc.prototype.ValueTypeName="vector";class kh{constructor(e,n=-1,i,r=vy){this.name=e,this.tracks=i,this.duration=n,this.blendMode=r,this.uuid=qr(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],i=e.tracks,r=1/(e.fps||1);for(let a=0,o=i.length;a!==o;++a)n.push(qJ(i[a]).scale(r));const s=new this(e.name,e.duration,n,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const n=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,a=i.length;s!==a;++s)n.push(ta.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,n,i,r){const s=n.length,a=[];for(let o=0;o<s;o++){let l=[],c=[];l.push((o+s-1)%s,o,(o+1)%s),c.push(0,1,0);const u=gF(l);l=NA(l,1,u),c=NA(c,1,u),!r&&l[0]===0&&(l.push(s),c.push(c[0])),a.push(new Hc(".morphTargetInfluences["+n[o].name+"]",l,c).scale(1/i))}return new this(e,-1,a)}static findByName(e,n){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===n)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,n,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let o=0,l=e.length;o<l;o++){const c=e[o],u=c.name.match(s);if(u&&u.length>1){const h=u[1];let f=r[h];f||(r[h]=f=[]),f.push(c)}}const a=[];for(const o in r)a.push(this.CreateFromMorphTargetSequence(o,r[o],n,i));return a}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(h,f,m,g,y){if(m.length!==0){const x=[],v=[];dE(m,x,v,g),x.length!==0&&y.push(new h(f,x,v))}},r=[],s=e.name||"default",a=e.fps||30,o=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let h=0;h<c.length;h++){const f=c[h].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const m={};let g;for(g=0;g<f.length;g++)if(f[g].morphTargets)for(let y=0;y<f[g].morphTargets.length;y++)m[f[g].morphTargets[y]]=-1;for(const y in m){const x=[],v=[];for(let _=0;_!==f[g].morphTargets.length;++_){const S=f[g];x.push(S.time),v.push(S.morphTarget===y?1:0)}r.push(new Hc(".morphTargetInfluence["+y+"]",x,v))}l=m.length*a}else{const m=".bones["+n[h].name+"]";i(Vc,m+".position",f,"pos",r),i(xl,m+".quaternion",f,"rot",r),i(Vc,m+".scale",f,"scl",r)}}return r.length===0?null:new this(s,l,r,o)}resetDuration(){const e=this.tracks;let n=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];n=Math.max(n,s.times[s.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function ZJ(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Hc;case"vector":case"vector2":case"vector3":case"vector4":return Vc;case"color":return pE;case"quaternion":return xl;case"bool":case"boolean":return $c;case"string":return eu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function qJ(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=ZJ(t.type);if(t.times===void 0){const n=[],i=[];dE(t.keys,n,i,"value"),t.times=n,t.values=i}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const jc={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class zy{constructor(e,n,i){const r=this;let s=!1,a=0,o=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=i,this.itemStart=function(u){o++,s===!1&&r.onStart!==void 0&&r.onStart(u,a,o),s=!0},this.itemEnd=function(u){a++,r.onProgress!==void 0&&r.onProgress(u,a,o),a===o&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(u){r.onError!==void 0&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,h){return c.push(u,h),this},this.removeHandler=function(u){const h=c.indexOf(u);return h!==-1&&c.splice(h,2),this},this.getHandler=function(u){for(let h=0,f=c.length;h<f;h+=2){const m=c[h],g=c[h+1];if(m.global&&(m.lastIndex=0),m.test(u))return g}return null}}}const _F=new zy;class Wi{constructor(e){this.manager=e!==void 0?e:_F,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const i=this;return new Promise(function(r,s){i.load(e,r,n,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Wi.DEFAULT_MATERIAL_NAME="__DEFAULT";const ka={};class $J extends Error{constructor(e,n){super(e),this.response=n}}class Vi extends Wi{constructor(e){super(e)}load(e,n,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=jc.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(s),this.manager.itemEnd(e)},0),s;if(ka[e]!==void 0){ka[e].push({onLoad:n,onProgress:i,onError:r});return}ka[e]=[],ka[e].push({onLoad:n,onProgress:i,onError:r});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,l=this.responseType;fetch(a).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=ka[e],h=c.body.getReader(),f=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),m=f?parseInt(f):0,g=m!==0;let y=0;const x=new ReadableStream({start(v){_();function _(){h.read().then(({done:S,value:M})=>{if(S)v.close();else{y+=M.byteLength;const b=new ProgressEvent("progress",{lengthComputable:g,loaded:y,total:m});for(let C=0,B=u.length;C<B;C++){const P=u[C];P.onProgress&&P.onProgress(b)}v.enqueue(M),_()}})}}});return new Response(x)}else throw new $J(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,o));case"json":return c.json();default:if(o===void 0)return c.text();{const h=/charset="?([^;"\s]*)"?/i.exec(o),f=h&&h[1]?h[1].toLowerCase():void 0,m=new TextDecoder(f);return c.arrayBuffer().then(g=>m.decode(g))}}}).then(c=>{jc.add(e,c);const u=ka[e];delete ka[e];for(let h=0,f=u.length;h<f;h++){const m=u[h];m.onLoad&&m.onLoad(c)}}).catch(c=>{const u=ka[e];if(u===void 0)throw this.manager.itemError(e),c;delete ka[e];for(let h=0,f=u.length;h<f;h++){const m=u[h];m.onError&&m.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class eY extends Wi{constructor(e){super(e)}load(e,n,i,r){const s=this,a=new Vi(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){try{n(s.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const n=[];for(let i=0;i<e.length;i++){const r=kh.parse(e[i]);n.push(r)}return n}}class tY extends Wi{constructor(e){super(e)}load(e,n,i,r){const s=this,a=[],o=new Cy,l=new Vi(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(h){l.load(e[h],function(f){const m=s.parse(f,!0);a[h]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},c+=1,c===6&&(m.mipmapCount===1&&(o.minFilter=kt),o.image=a,o.format=m.format,o.needsUpdate=!0,n&&n(o))},i,r)}if(Array.isArray(e))for(let h=0,f=e.length;h<f;++h)u(h);else l.load(e,function(h){const f=s.parse(h,!0);if(f.isCubemap){const m=f.mipmaps.length/f.mipmapCount;for(let g=0;g<m;g++){a[g]={mipmaps:[]};for(let y=0;y<f.mipmapCount;y++)a[g].mipmaps.push(f.mipmaps[g*f.mipmapCount+y]),a[g].format=f.format,a[g].width=f.width,a[g].height=f.height}o.image=a}else o.image.width=f.width,o.image.height=f.height,o.mipmaps=f.mipmaps;f.mipmapCount===1&&(o.minFilter=kt),o.format=f.format,o.needsUpdate=!0,n&&n(o)},i,r);return o}}class _p extends Wi{constructor(e){super(e)}load(e,n,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=jc.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(a),s.manager.itemEnd(e)},0),a;const o=mp("img");function l(){u(),jc.add(e,this),n&&n(this),s.manager.itemEnd(e)}function c(h){u(),r&&r(h),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){o.removeEventListener("load",l,!1),o.removeEventListener("error",c,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),s.manager.itemStart(e),o.src=e,o}}class SF extends Wi{constructor(e){super(e)}load(e,n,i,r){const s=new Xp;s.colorSpace=sn;const a=new _p(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let o=0;function l(c){a.load(e[c],function(u){s.images[c]=u,o++,o===6&&(s.needsUpdate=!0,n&&n(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class mE extends Wi{constructor(e){super(e)}load(e,n,i,r){const s=this,a=new rl,o=new Vi(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(s.withCredentials),o.load(e,function(l){let c;try{c=s.parse(l)}catch(u){if(r!==void 0)r(u);else{console.error(u);return}}c.image!==void 0?a.image=c.image:c.data!==void 0&&(a.image.width=c.width,a.image.height=c.height,a.image.data=c.data),a.wrapS=c.wrapS!==void 0?c.wrapS:Dn,a.wrapT=c.wrapT!==void 0?c.wrapT:Dn,a.magFilter=c.magFilter!==void 0?c.magFilter:kt,a.minFilter=c.minFilter!==void 0?c.minFilter:kt,a.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0?a.colorSpace=c.colorSpace:c.encoding!==void 0&&(a.encoding=c.encoding),c.flipY!==void 0&&(a.flipY=c.flipY),c.format!==void 0&&(a.format=c.format),c.type!==void 0&&(a.type=c.type),c.mipmaps!==void 0&&(a.mipmaps=c.mipmaps,a.minFilter=_a),c.mipmapCount===1&&(a.minFilter=kt),c.generateMipmaps!==void 0&&(a.generateMipmaps=c.generateMipmaps),a.needsUpdate=!0,n&&n(a,c)},i,r),a}}class AF extends Wi{constructor(e){super(e)}load(e,n,i,r){const s=new pn,a=new _p(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(o){s.image=o,s.needsUpdate=!0,n!==void 0&&n(s)},i,r),s}}class Pl extends an{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new ht(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class wF extends Pl{constructor(e,n,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(an.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ht(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const d_=new bt,sP=new K,aP=new K;class gE{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ie(512,512),this.map=null,this.mapPass=null,this.matrix=new bt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Jp,this._frameExtents=new Ie(1,1),this._viewportCount=1,this._viewports=[new on(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,i=this.matrix;sP.setFromMatrixPosition(e.matrixWorld),n.position.copy(sP),aP.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(aP),n.updateMatrixWorld(),d_.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(d_),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(d_)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class nY extends gE{constructor(){super(new Pn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,i=Fh*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||n.far;(i!==n.fov||r!==n.aspect||s!==n.far)&&(n.fov=i,n.aspect=r,n.far=s,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class vE extends Pl{constructor(e,n,i=0,r=Math.PI/3,s=0,a=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(an.DEFAULT_UP),this.updateMatrix(),this.target=new an,this.distance=i,this.angle=r,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new nY}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const oP=new bt,Xd=new K,f_=new K;class iY extends gE{constructor(){super(new Pn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ie(4,2),this._viewportCount=6,this._viewports=[new on(2,1,1,1),new on(0,1,1,1),new on(3,1,1,1),new on(1,1,1,1),new on(3,0,1,1),new on(1,0,1,1)],this._cubeDirections=[new K(1,0,0),new K(-1,0,0),new K(0,0,1),new K(0,0,-1),new K(0,1,0),new K(0,-1,0)],this._cubeUps=[new K(0,1,0),new K(0,1,0),new K(0,1,0),new K(0,1,0),new K(0,0,1),new K(0,0,-1)]}updateMatrices(e,n=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Xd.setFromMatrixPosition(e.matrixWorld),i.position.copy(Xd),f_.copy(i.position),f_.add(this._cubeDirections[n]),i.up.copy(this._cubeUps[n]),i.lookAt(f_),i.updateMatrixWorld(),r.makeTranslation(-Xd.x,-Xd.y,-Xd.z),oP.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(oP)}}class yE extends Pl{constructor(e,n,i=0,r=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new iY}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class rY extends gE{constructor(){super(new ws(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class xE extends Pl{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(an.DEFAULT_UP),this.updateMatrix(),this.target=new an,this.shadow=new rY}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class MF extends Pl{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class EF extends Pl{constructor(e,n,i=10,r=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class bF{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new K)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const i=e.x,r=e.y,s=e.z,a=this.coefficients;return n.copy(a[0]).multiplyScalar(.282095),n.addScaledVector(a[1],.488603*r),n.addScaledVector(a[2],.488603*s),n.addScaledVector(a[3],.488603*i),n.addScaledVector(a[4],1.092548*(i*r)),n.addScaledVector(a[5],1.092548*(r*s)),n.addScaledVector(a[6],.315392*(3*s*s-1)),n.addScaledVector(a[7],1.092548*(i*s)),n.addScaledVector(a[8],.546274*(i*i-r*r)),n}getIrradianceAt(e,n){const i=e.x,r=e.y,s=e.z,a=this.coefficients;return n.copy(a[0]).multiplyScalar(.886227),n.addScaledVector(a[1],2*.511664*r),n.addScaledVector(a[2],2*.511664*s),n.addScaledVector(a[3],2*.511664*i),n.addScaledVector(a[4],2*.429043*i*r),n.addScaledVector(a[5],2*.429043*r*s),n.addScaledVector(a[6],.743125*s*s-.247708),n.addScaledVector(a[7],2*.429043*i*s),n.addScaledVector(a[8],.429043*(i*i-r*r)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,n+r*3);return this}toArray(e=[],n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,n+r*3);return e}static getBasisAt(e,n){const i=e.x,r=e.y,s=e.z;n[0]=.282095,n[1]=.488603*r,n[2]=.488603*s,n[3]=.488603*i,n[4]=1.092548*i*r,n[5]=1.092548*r*s,n[6]=.315392*(3*s*s-1),n[7]=1.092548*i*s,n[8]=.546274*(i*i-r*r)}}class TF extends Pl{constructor(e=new bF,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class Hy extends Wi{constructor(e){super(e),this.textures={}}load(e,n,i,r){const s=this,a=new Vi(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{n(s.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const n=this.textures;function i(s){return n[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),n[s]}const r=Hy.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new ht().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const a=e.uniforms[s];switch(r.uniforms[s]={},a.type){case"t":r.uniforms[s].value=i(a.value);break;case"c":r.uniforms[s].value=new ht().setHex(a.value);break;case"v2":r.uniforms[s].value=new Ie().fromArray(a.value);break;case"v3":r.uniforms[s].value=new K().fromArray(a.value);break;case"v4":r.uniforms[s].value=new on().fromArray(a.value);break;case"m3":r.uniforms[s].value=new Yt().fromArray(a.value);break;case"m4":r.uniforms[s].value=new bt().fromArray(a.value);break;default:r.uniforms[s].value=a.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new Ie().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Ie().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const n={ShadowMaterial:lF,SpriteMaterial:eE,RawShaderMaterial:cF,ShaderMaterial:ti,PointsMaterial:Ty,MeshPhysicalMaterial:Ts,MeshStandardMaterial:Zh,MeshPhongMaterial:uF,MeshToonMaterial:hF,MeshNormalMaterial:hE,MeshLambertMaterial:dF,MeshDepthMaterial:Sy,MeshDistanceMaterial:Ay,MeshBasicMaterial:vr,MeshMatcapMaterial:fF,LineDashedMaterial:pF,LineBasicMaterial:sr,Material:ui};return new n[e]}}class al{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let i=0,r=e.length;i<r;i++)n+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class _E extends zt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class CF extends Wi{constructor(e){super(e)}load(e,n,i,r){const s=this,a=new Vi(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{n(s.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const n={},i={};function r(m,g){if(n[g]!==void 0)return n[g];const x=m.interleavedBuffers[g],v=s(m,x.buffer),_=ah(x.type,v),S=new Yp(_,x.stride);return S.uuid=x.uuid,n[g]=S,S}function s(m,g){if(i[g]!==void 0)return i[g];const x=m.arrayBuffers[g],v=new Uint32Array(x).buffer;return i[g]=v,v}const a=e.isInstancedBufferGeometry?new _E:new zt,o=e.data.index;if(o!==void 0){const m=ah(o.type,o.array);a.setIndex(new $t(m,1))}const l=e.data.attributes;for(const m in l){const g=l[m];let y;if(g.isInterleavedBufferAttribute){const x=r(e.data,g.data);y=new vl(x,g.itemSize,g.offset,g.normalized)}else{const x=ah(g.type,g.array),v=g.isInstancedBufferAttribute?yl:$t;y=new v(x,g.itemSize,g.normalized)}g.name!==void 0&&(y.name=g.name),g.usage!==void 0&&y.setUsage(g.usage),a.setAttribute(m,y)}const c=e.data.morphAttributes;if(c)for(const m in c){const g=c[m],y=[];for(let x=0,v=g.length;x<v;x++){const _=g[x];let S;if(_.isInterleavedBufferAttribute){const M=r(e.data,_.data);S=new vl(M,_.itemSize,_.offset,_.normalized)}else{const M=ah(_.type,_.array);S=new $t(M,_.itemSize,_.normalized)}_.name!==void 0&&(S.name=_.name),y.push(S)}a.morphAttributes[m]=y}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let m=0,g=h.length;m!==g;++m){const y=h[m];a.addGroup(y.start,y.count,y.materialIndex)}const f=e.data.boundingSphere;if(f!==void 0){const m=new K;f.center!==void 0&&m.fromArray(f.center),a.boundingSphere=new Fi(m,f.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class sY extends Wi{constructor(e){super(e)}load(e,n,i,r){const s=this,a=this.path===""?al.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const o=new Vi(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(h){r!==void 0&&r(h),console.error("THREE:ObjectLoader: Can't parse "+e+".",h.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,n)},i,r)}async loadAsync(e,n){const i=this,r=this.path===""?al.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new Vi(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const a=await s.loadAsync(e,n),o=JSON.parse(a),l=o.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(o)}parse(e,n){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,function(){n!==void 0&&n(c)}),o=this.parseTextures(e.textures,a),l=this.parseMaterials(e.materials,o),c=this.parseObject(e.object,s,l,o,i),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),n!==void 0){let h=!1;for(const f in a)if(a[f].data instanceof HTMLImageElement){h=!0;break}h===!1&&n(c)}return c}async parseAsync(e){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,s),o=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,r,o,a,n),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const n={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new sl().fromJSON(e[i]);n[s.uuid]=s}return n}parseSkeletons(e,n){const i={},r={};if(n.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=new Kp().fromJSON(e[s],r);i[o.uuid]=o}return i}parseGeometries(e,n){const i={};if(e!==void 0){const r=new CF;for(let s=0,a=e.length;s<a;s++){let o;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(l);break;default:l.type in rP?o=rP[l.type].fromJSON(l,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}o.uuid=l.uuid,l.name!==void 0&&(o.name=l.name),l.userData!==void 0&&(o.userData=l.userData),i[l.uuid]=o}}return i}parseMaterials(e,n){const i={},r={};if(e!==void 0){const s=new Hy;s.setTextures(n);for(let a=0,o=e.length;a<o;a++){const l=e[a];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const n={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=kh.parse(r);n[s.uuid]=s}return n}parseImages(e,n){const i=this,r={};let s;function a(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function o(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return a(u)}else return l.data?{data:ah(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new zy(n);s=new _p(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const h=e[c],f=h.url;if(Array.isArray(f)){const m=[];for(let g=0,y=f.length;g<y;g++){const x=f[g],v=o(x);v!==null&&(v instanceof HTMLImageElement?m.push(v):m.push(new rl(v.data,v.width,v.height)))}r[h.uuid]=new wc(m)}else{const m=o(h.url);r[h.uuid]=new wc(m)}}}return r}async parseImagesAsync(e){const n=this,i={};let r;async function s(a){if(typeof a=="string"){const o=a,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:n.resourcePath+o;return await r.loadAsync(l)}else return a.data?{data:ah(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){r=new _p(this.manager),r.setCrossOrigin(this.crossOrigin);for(let a=0,o=e.length;a<o;a++){const l=e[a],c=l.url;if(Array.isArray(c)){const u=[];for(let h=0,f=c.length;h<f;h++){const m=c[h],g=await s(m);g!==null&&(g instanceof HTMLImageElement?u.push(g):u.push(new rl(g.data,g.width,g.height)))}i[l.uuid]=new wc(u)}else{const u=await s(l.url);i[l.uuid]=new wc(u)}}}return i}parseTextures(e,n){function i(s,a){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),a[s])}const r={};if(e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=e[s];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),n[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const l=n[o.image],c=l.data;let u;Array.isArray(c)?(u=new Xp,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new rl:u=new pn,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=o.uuid,o.name!==void 0&&(u.name=o.name),o.mapping!==void 0&&(u.mapping=i(o.mapping,aY)),o.channel!==void 0&&(u.channel=o.channel),o.offset!==void 0&&u.offset.fromArray(o.offset),o.repeat!==void 0&&u.repeat.fromArray(o.repeat),o.center!==void 0&&u.center.fromArray(o.center),o.rotation!==void 0&&(u.rotation=o.rotation),o.wrap!==void 0&&(u.wrapS=i(o.wrap[0],lP),u.wrapT=i(o.wrap[1],lP)),o.format!==void 0&&(u.format=o.format),o.internalFormat!==void 0&&(u.internalFormat=o.internalFormat),o.type!==void 0&&(u.type=o.type),o.colorSpace!==void 0&&(u.colorSpace=o.colorSpace),o.encoding!==void 0&&(u.encoding=o.encoding),o.minFilter!==void 0&&(u.minFilter=i(o.minFilter,cP)),o.magFilter!==void 0&&(u.magFilter=i(o.magFilter,cP)),o.anisotropy!==void 0&&(u.anisotropy=o.anisotropy),o.flipY!==void 0&&(u.flipY=o.flipY),o.generateMipmaps!==void 0&&(u.generateMipmaps=o.generateMipmaps),o.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(u.unpackAlignment=o.unpackAlignment),o.compareFunction!==void 0&&(u.compareFunction=o.compareFunction),o.userData!==void 0&&(u.userData=o.userData),r[o.uuid]=u}return r}parseObject(e,n,i,r,s){let a;function o(f){return n[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",f),n[f]}function l(f){if(f!==void 0){if(Array.isArray(f)){const m=[];for(let g=0,y=f.length;g<y;g++){const x=f[g];i[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",x),m.push(i[x])}return m}return i[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",f),i[f]}}function c(f){return r[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",f),r[f]}let u,h;switch(e.type){case"Scene":a=new gl,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new ht(e.background):a.background=c(e.background)),e.environment!==void 0&&(a.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new Ey(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new My(e.fog.color,e.fog.density)),e.fog.name!==""&&(a.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(a.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":a=new Pn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new ws(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new MF(e.color,e.intensity);break;case"DirectionalLight":a=new xE(e.color,e.intensity);break;case"PointLight":a=new yE(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new EF(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new vE(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new wF(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new TF().fromJSON(e);break;case"SkinnedMesh":u=o(e.geometry),h=l(e.material),a=new tE(u,h),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":u=o(e.geometry),h=l(e.material),a=new Sn(u,h);break;case"InstancedMesh":u=o(e.geometry),h=l(e.material);const f=e.count,m=e.instanceMatrix,g=e.instanceColor;a=new nE(u,h,f),a.instanceMatrix=new yl(new Float32Array(m.array),16),g!==void 0&&(a.instanceColor=new yl(new Float32Array(g.array),g.itemSize));break;case"BatchedMesh":u=o(e.geometry),h=l(e.material),a=new ZN(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,h),a.geometry=u,a.perObjectFrustumCulled=e.perObjectFrustumCulled,a.sortObjects=e.sortObjects,a._drawRanges=e.drawRanges,a._reservedRanges=e.reservedRanges,a._visibility=e.visibility,a._active=e.active,a._bounds=e.bounds.map(y=>{const x=new Ni;x.min.fromArray(y.boxMin),x.max.fromArray(y.boxMax);const v=new Fi;return v.radius=y.sphereRadius,v.center.fromArray(y.sphereCenter),{boxInitialized:y.boxInitialized,box:x,sphereInitialized:y.sphereInitialized,sphere:v}}),a._maxGeometryCount=e.maxGeometryCount,a._maxVertexCount=e.maxVertexCount,a._maxIndexCount=e.maxIndexCount,a._geometryInitialized=e.geometryInitialized,a._geometryCount=e.geometryCount,a._matricesTexture=c(e.matricesTexture.uuid);break;case"LOD":a=new QN;break;case"Line":a=new co(o(e.geometry),l(e.material));break;case"LineLoop":a=new iE(o(e.geometry),l(e.material));break;case"LineSegments":a=new $s(o(e.geometry),l(e.material));break;case"PointCloud":case"Points":a=new rE(o(e.geometry),l(e.material));break;case"Sprite":a=new KN(l(e.material));break;case"Group":a=new Ya;break;case"Bone":a=new by;break;default:a=new an}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.up!==void 0&&a.up.fromArray(e.up),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const f=e.children;for(let m=0;m<f.length;m++)a.add(this.parseObject(f[m],n,i,r,s))}if(e.animations!==void 0){const f=e.animations;for(let m=0;m<f.length;m++){const g=f[m];a.animations.push(s[g])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const f=e.levels;for(let m=0;m<f.length;m++){const g=f[m],y=a.getObjectByProperty("uuid",g.object);y!==void 0&&a.addLevel(y,g.distance,g.hysteresis)}}return a}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=n[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const aY={UVMapping:dl,CubeReflectionMapping:xa,CubeRefractionMapping:fl,EquirectangularReflectionMapping:Ih,EquirectangularRefractionMapping:op,CubeUVReflectionMapping:Jh},lP={RepeatWrapping:pl,ClampToEdgeWrapping:Dn,MirroredRepeatWrapping:Lh},cP={NearestFilter:Rn,NearestMipmapNearestFilter:lp,NearestMipmapLinearFilter:gh,LinearFilter:kt,LinearMipmapNearestFilter:my,LinearMipmapLinearFilter:_a};class RF extends Wi{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=jc.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(a),s.manager.itemEnd(e)},0),a;const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){jc.add(e,l),n&&n(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let rv;class SE{static getContext(){return rv===void 0&&(rv=new(window.AudioContext||window.webkitAudioContext)),rv}static setContext(e){rv=e}}class oY extends Wi{constructor(e){super(e)}load(e,n,i,r){const s=this,a=new Vi(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){try{const c=l.slice(0);SE.getContext().decodeAudioData(c,function(h){n(h)}).catch(o)}catch(c){o(c)}},i,r);function o(l){r?r(l):console.error(l),s.manager.itemError(e)}}}const uP=new bt,hP=new bt,ql=new bt;class lY{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Pn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Pn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,ql.copy(e.projectionMatrix);const r=n.eyeSep/2,s=r*n.near/n.focus,a=n.near*Math.tan(Ic*n.fov*.5)/n.zoom;let o,l;hP.elements[12]=-r,uP.elements[12]=r,o=-a*n.aspect+s,l=a*n.aspect+s,ql.elements[0]=2*n.near/(l-o),ql.elements[8]=(l+o)/(l-o),this.cameraL.projectionMatrix.copy(ql),o=-a*n.aspect-s,l=a*n.aspect-s,ql.elements[0]=2*n.near/(l-o),ql.elements[8]=(l+o)/(l-o),this.cameraR.projectionMatrix.copy(ql)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(hP),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(uP)}}class AE{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=dP(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=dP();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function dP(){return(typeof performance>"u"?Date:performance).now()}const $l=new K,fP=new wi,cY=new K,ec=new K;class uY extends an{constructor(){super(),this.type="AudioListener",this.context=SE.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new AE}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose($l,fP,cY),ec.set(0,0,-1).applyQuaternion(fP),n.positionX){const r=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime($l.x,r),n.positionY.linearRampToValueAtTime($l.y,r),n.positionZ.linearRampToValueAtTime($l.z,r),n.forwardX.linearRampToValueAtTime(ec.x,r),n.forwardY.linearRampToValueAtTime(ec.y,r),n.forwardZ.linearRampToValueAtTime(ec.z,r),n.upX.linearRampToValueAtTime(i.x,r),n.upY.linearRampToValueAtTime(i.y,r),n.upZ.linearRampToValueAtTime(i.z,r)}else n.setPosition($l.x,$l.y,$l.z),n.setOrientation(ec.x,ec.y,ec.z,i.x,i.y,i.z)}}class PF extends an{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const tc=new K,pP=new wi,hY=new K,nc=new K;class dY extends PF{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(tc,pP,hY),nc.set(0,0,1).applyQuaternion(pP);const n=this.panner;if(n.positionX){const i=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(tc.x,i),n.positionY.linearRampToValueAtTime(tc.y,i),n.positionZ.linearRampToValueAtTime(tc.z,i),n.orientationX.linearRampToValueAtTime(nc.x,i),n.orientationY.linearRampToValueAtTime(nc.y,i),n.orientationZ.linearRampToValueAtTime(nc.z,i)}else n.setPosition(tc.x,tc.y,tc.z),n.setOrientation(nc.x,nc.y,nc.z)}}class fY{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let i=0;i<n.length;i++)e+=n[i];return e/n.length}}class BF{constructor(e,n,i){this.binding=e,this.valueSize=i;let r,s,a;switch(n){case"quaternion":r=this._slerp,s=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const i=this.buffer,r=this.valueSize,s=e*r+r;let a=this.cumulativeWeight;if(a===0){for(let o=0;o!==r;++o)i[s+o]=i[o];a=n}else{a+=n;const o=n/a;this._mixBufferRegion(i,s,0,o,r)}this.cumulativeWeight=a}accumulateAdditive(e){const n=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,i=this.buffer,r=e*n+n,s=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=n*this._origIndex;this._mixBufferRegion(i,r,l,1-s,n)}a>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*n,1,n);for(let l=n,c=n+n;l!==c;++l)if(i[l]!==i[l+n]){o.setValue(i,r);break}}saveOriginalState(){const e=this.binding,n=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(n,r);for(let s=i,a=r;s!==a;++s)n[s]=n[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let i=e;i<n;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[n+i]=this.buffer[e+i]}_select(e,n,i,r,s){if(r>=.5)for(let a=0;a!==s;++a)e[n+a]=e[i+a]}_slerp(e,n,i,r){wi.slerpFlat(e,n,e,n,e,i,r)}_slerpAdditive(e,n,i,r,s){const a=this._workIndex*s;wi.multiplyQuaternionsFlat(e,a,e,n,e,i),wi.slerpFlat(e,n,e,n,e,a,r)}_lerp(e,n,i,r,s){const a=1-r;for(let o=0;o!==s;++o){const l=n+o;e[l]=e[l]*a+e[i+o]*r}}_lerpAdditive(e,n,i,r,s){for(let a=0;a!==s;++a){const o=n+a;e[o]=e[o]+e[i+a]*r}}}const wE="\\[\\]\\.:\\/",pY=new RegExp("["+wE+"]","g"),ME="[^"+wE+"]",mY="[^"+wE.replace("\\.","")+"]",gY=/((?:WC+[\/:])*)/.source.replace("WC",ME),vY=/(WCOD+)?/.source.replace("WCOD",mY),yY=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",ME),xY=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",ME),_Y=new RegExp("^"+gY+vY+yY+xY+"$"),SY=["material","materials","bones","map"];class AY{constructor(e,n,i){const r=i||ln.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,r)}getValue(e,n){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,n)}setValue(e,n){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].unbind()}}class ln{constructor(e,n,i){this.path=n,this.parsedPath=i||ln.parseTrackName(n),this.node=ln.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,i){return e&&e.isAnimationObjectGroup?new ln.Composite(e,n,i):new ln(e,n,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(pY,"")}static parseTrackName(e){const n=_Y.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);SY.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(n);if(i!==void 0)return i}if(e.children){const i=function(s){for(let a=0;a<s.length;a++){const o=s[a];if(o.name===n||o.uuid===n)return o;const l=i(o.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[n++]=i[r]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,i=n.objectName,r=n.propertyName;let s=n.propertyIndex;if(e||(e=ln.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let c=n.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const a=e[r];if(a===void 0){const c=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}ln.Composite=AY;ln.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};ln.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};ln.prototype.GetterByBindingType=[ln.prototype._getValue_direct,ln.prototype._getValue_array,ln.prototype._getValue_arrayElement,ln.prototype._getValue_toArray];ln.prototype.SetterByBindingTypeAndVersioning=[[ln.prototype._setValue_direct,ln.prototype._setValue_direct_setNeedsUpdate,ln.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ln.prototype._setValue_array,ln.prototype._setValue_array_setNeedsUpdate,ln.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ln.prototype._setValue_arrayElement,ln.prototype._setValue_arrayElement_setNeedsUpdate,ln.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ln.prototype._setValue_fromArray,ln.prototype._setValue_fromArray_setNeedsUpdate,ln.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class wY{constructor(){this.isAnimationObjectGroup=!0,this.uuid=qr(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,a=s.length;let o,l=e.length,c=this.nCachedObjects_;for(let u=0,h=arguments.length;u!==h;++u){const f=arguments[u],m=f.uuid;let g=n[m];if(g===void 0){g=l++,n[m]=g,e.push(f);for(let y=0,x=a;y!==x;++y)s[y].push(new ln(f,i[y],r[y]))}else if(g<c){o=e[g];const y=--c,x=e[y];n[x.uuid]=g,e[g]=x,n[m]=y,e[y]=f;for(let v=0,_=a;v!==_;++v){const S=s[v],M=S[y];let b=S[g];S[g]=M,b===void 0&&(b=new ln(f,i[v],r[v])),S[y]=b}}else e[g]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,n=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let a=0,o=arguments.length;a!==o;++a){const l=arguments[a],c=l.uuid,u=n[c];if(u!==void 0&&u>=s){const h=s++,f=e[h];n[f.uuid]=u,e[u]=f,n[c]=h,e[h]=l;for(let m=0,g=r;m!==g;++m){const y=i[m],x=y[h],v=y[u];y[u]=x,y[h]=v}}}this.nCachedObjects_=s}uncache(){const e=this._objects,n=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,a=e.length;for(let o=0,l=arguments.length;o!==l;++o){const c=arguments[o],u=c.uuid,h=n[u];if(h!==void 0)if(delete n[u],h<s){const f=--s,m=e[f],g=--a,y=e[g];n[m.uuid]=h,e[h]=m,n[y.uuid]=f,e[f]=y,e.pop();for(let x=0,v=r;x!==v;++x){const _=i[x],S=_[f],M=_[g];_[h]=S,_[f]=M,_.pop()}}else{const f=--a,m=e[f];f>0&&(n[m.uuid]=h),e[h]=m,e.pop();for(let g=0,y=r;g!==y;++g){const x=i[g];x[h]=x[f],x.pop()}}}this.nCachedObjects_=s}subscribe_(e,n){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const a=this._paths,o=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,h=new Array(c);r=s.length,i[e]=r,a.push(e),o.push(n),s.push(h);for(let f=u,m=l.length;f!==m;++f){const g=l[f];h[f]=new ln(g,e,n)}return h}unsubscribe_(e){const n=this._bindingsIndicesByPath,i=n[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,a=this._bindings,o=a.length-1,l=a[o],c=e[o];n[c]=i,a[i]=l,a.pop(),s[i]=s[o],s.pop(),r[i]=r[o],r.pop()}}}class IF{constructor(e,n,i=null,r=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=i,this.blendMode=r;const s=n.tracks,a=s.length,o=new Array(a),l={endingStart:Sc,endingEnd:Sc};for(let c=0;c!==a;++c){const u=s[c].createInterpolant(null);o[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=AN,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,i){if(e.fadeOut(n),this.fadeIn(n),i){const r=this._clip.duration,s=e._clip.duration,a=s/r,o=r/s;e.warp(1,a,n),this.warp(o,1,n)}return this}crossFadeTo(e,n,i){return e.crossFadeFrom(this,n,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,i){const r=this._mixer,s=r.time,a=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);const l=o.parameterPositions,c=o.sampleValues;return l[0]=s,l[1]=s+i,c[0]=e/a,c[1]=n/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?n=0:(this._startTime=null,n=i*l)}n*=this._updateTimeScale(e);const a=this._updateTime(n),o=this._updateWeight(e);if(o>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case zM:for(let u=0,h=l.length;u!==h;++u)l[u].evaluate(a),c[u].accumulateAdditive(o);break;case vy:default:for(let u=0,h=l.length;u!==h;++u)l[u].evaluate(a),c[u].accumulate(r,o)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];n*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];n*=r,e>i.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const a=i===wN;if(e===0)return s===-1?r:a&&(s&1)===1?n-r:r;if(i===SN){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=n)r=n;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),r>=n||r<0){const o=Math.floor(r/n);r-=n*o,s+=Math.abs(o);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?n:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,a)}else this._setEndings(!1,!1,a);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(a&&(s&1)===1)return n-r}return r}_setEndings(e,n,i){const r=this._interpolantSettings;i?(r.endingStart=Ac,r.endingEnd=Ac):(e?r.endingStart=this.zeroSlopeAtStart?Ac:Sc:r.endingStart=cp,n?r.endingEnd=this.zeroSlopeAtEnd?Ac:Sc:r.endingEnd=cp)}_scheduleFading(e,n,i){const r=this._mixer,s=r.time;let a=this._weightInterpolant;a===null&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);const o=a.parameterPositions,l=a.sampleValues;return o[0]=s,l[0]=n,o[1]=s+e,l[1]=i,this}}const MY=new Float32Array(1);class LF extends bs{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,a=e._propertyBindings,o=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let h=0;h!==s;++h){const f=r[h],m=f.name;let g=u[m];if(g!==void 0)++g.referenceCount,a[h]=g;else{if(g=a[h],g!==void 0){g._cacheIndex===null&&(++g.referenceCount,this._addInactiveBinding(g,l,m));continue}const y=n&&n._propertyBindings[h].binding.parsedPath;g=new BF(ln.create(i,m,y),f.ValueTypeName,f.getValueSize()),++g.referenceCount,this._addInactiveBinding(g,l,m),a[h]=g}o[h].resultBuffer=g.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const s=n[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const s=n[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,i){const r=this._actions,s=this._actionsByClip;let a=s[n];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[n]=a;else{const o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[i]=e}_removeInactiveAction(e){const n=this._actions,i=n[n.length-1],r=e._cacheIndex;i._cacheIndex=r,n[r]=i,n.pop(),e._cacheIndex=null;const s=e._clip.uuid,a=this._actionsByClip,o=a[s],l=o.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const h=o.actionByRoot,f=(e._localRoot||this._root).uuid;delete h[f],l.length===0&&delete a[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const s=n[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const n=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_takeBackAction(e){const n=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_addInactiveBinding(e,n,i){const r=this._bindingsByRootAndName,s=this._bindings;let a=r[n];a===void 0&&(a={},r[n]=a),a[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const n=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,a=this._bindingsByRootAndName,o=a[r],l=n[n.length-1],c=e._cacheIndex;l._cacheIndex=c,n[c]=l,n.pop(),delete o[s],Object.keys(o).length===0&&delete a[r]}_lendBinding(e){const n=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_takeBackBinding(e){const n=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let i=e[n];return i===void 0&&(i=new fE(new Float32Array(2),new Float32Array(2),1,MY),i.__cacheIndex=n,e[n]=i),i}_takeBackControlInterpolant(e){const n=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=n[r];e.__cacheIndex=r,n[r]=e,s.__cacheIndex=i,n[i]=s}clipAction(e,n,i){const r=n||this._root,s=r.uuid;let a=typeof e=="string"?kh.findByName(r,e):e;const o=a!==null?a.uuid:e,l=this._actionsByClip[o];let c=null;if(i===void 0&&(a!==null?i=a.blendMode:i=vy),l!==void 0){const h=l.actionByRoot[s];if(h!==void 0&&h.blendMode===i)return h;c=l.knownActions[0],a===null&&(a=c._clip)}if(a===null)return null;const u=new IF(this,a,n,i);return this._bindAction(u,c),this._addInactiveAction(u,o,s),u}existingAction(e,n){const i=n||this._root,r=i.uuid,s=typeof e=="string"?kh.findByName(i,e):e,a=s?s.uuid:e,o=this._actionsByClip[a];return o!==void 0&&o.actionByRoot[r]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let i=n-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const n=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),a=this._accuIndex^=1;for(let c=0;c!==i;++c)n[c]._update(r,e,s,a);const o=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)o[c].apply(a);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const a=s.knownActions;for(let o=0,l=a.length;o!==l;++o){const c=a[o];this._deactivateAction(c);const u=c._cacheIndex,h=n[n.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,h._cacheIndex=u,n[u]=h,n.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const n=e.uuid,i=this._actionsByClip;for(const a in i){const o=i[a].actionByRoot,l=o[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[n];if(s!==void 0)for(const a in s){const o=s[a];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,n){const i=this.existingAction(e,n);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class Ut{constructor(e){this.value=e}clone(){return new Ut(this.value.clone===void 0?this.value:this.value.clone())}}let EY=0;class bY extends bs{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:EY++}),this.name="",this.usage=fp,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let i=0,r=n.length;i<r;i++)this.uniforms.push(n[i].clone());return this}clone(){return new this.constructor().copy(this)}}class TY extends Yp{constructor(e,n,i=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class CY{constructor(e,n,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class EE{constructor(e,n,i=0,r=1/0){this.ray=new Qc(e,n),this.near=i,this.far=r,this.camera=null,this.layers=new Lc,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}intersectObject(e,n=!0,i=[]){return FA(e,this,i,n),i.sort(mP),i}intersectObjects(e,n=!0,i=[]){for(let r=0,s=e.length;r<s;r++)FA(e[r],this,i,n);return i.sort(mP),i}}function mP(t,e){return t.distance-e.distance}function FA(t,e,n,i){if(t.layers.test(e.layers)&&t.raycast(e,n),i===!0){const r=t.children;for(let s=0,a=r.length;s<a;s++)FA(r[s],e,n,!0)}}class UA{constructor(e=1,n=0,i=0){return this.radius=e,this.phi=n,this.theta=i,this}set(e,n,i){return this.radius=e,this.phi=n,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+n*n+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(qn(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class RY{constructor(e=1,n=0,i=0){return this.radius=e,this.theta=n,this.y=i,this}set(e,n,i){return this.radius=e,this.theta=n,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=n,this}clone(){return new this.constructor().copy(this)}}const gP=new Ie;class PY{constructor(e=new Ie(1/0,1/0),n=new Ie(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=gP.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,gP).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const vP=new K,sv=new K;class BY{constructor(e=new K,n=new K){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){vP.subVectors(e,this.start),sv.subVectors(this.end,this.start);const i=sv.dot(sv);let s=sv.dot(vP)/i;return n&&(s=qn(s,0,1)),s}closestPointToPoint(e,n,i){const r=this.closestPointToPointParameter(e,n);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const yP=new K;class IY extends an{constructor(e,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const i=new zt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,o=1,l=32;a<l;a++,o++){const c=a/l*Math.PI*2,u=o/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}i.setAttribute("position",new _t(r,3));const s=new sr({fog:!1,toneMapped:!1});this.cone=new $s(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),yP.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(yP),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Bo=new K,av=new bt,p_=new bt;class LY extends $s{constructor(e){const n=DF(e),i=new zt,r=[],s=[],a=new ht(0,0,1),o=new ht(0,1,0);for(let c=0;c<n.length;c++){const u=n[c];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(a.r,a.g,a.b),s.push(o.r,o.g,o.b))}i.setAttribute("position",new _t(r,3)),i.setAttribute("color",new _t(s,3));const l=new sr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,i=this.geometry,r=i.getAttribute("position");p_.copy(this.root.matrixWorld).invert();for(let s=0,a=0;s<n.length;s++){const o=n[s];o.parent&&o.parent.isBone&&(av.multiplyMatrices(p_,o.matrixWorld),Bo.setFromMatrixPosition(av),r.setXYZ(a,Bo.x,Bo.y,Bo.z),av.multiplyMatrices(p_,o.parent.matrixWorld),Bo.setFromMatrixPosition(av),r.setXYZ(a+1,Bo.x,Bo.y,Bo.z),a+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function DF(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,DF(t.children[n]));return e}class DY extends Sn{constructor(e,n,i){const r=new em(n,4,2),s=new vr({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const NY=new K,xP=new ht,_P=new ht;class FY extends an{constructor(e,n,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new qp(n);r.rotateY(Math.PI*.5),this.material=new vr({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),a=new Float32Array(s.count*3);r.setAttribute("color",new $t(a,3)),this.add(new Sn(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");xP.copy(this.light.color),_P.copy(this.light.groundColor);for(let i=0,r=n.count;i<r;i++){const s=i<r/2?xP:_P;n.setXYZ(i,s.r,s.g,s.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(NY.setFromMatrixPosition(this.light.matrixWorld).negate())}}class UY extends $s{constructor(e=10,n=10,i=4473924,r=8947848){i=new ht(i),r=new ht(r);const s=n/2,a=e/n,o=e/2,l=[],c=[];for(let f=0,m=0,g=-o;f<=n;f++,g+=a){l.push(-o,0,g,o,0,g),l.push(g,0,-o,g,0,o);const y=f===s?i:r;y.toArray(c,m),m+=3,y.toArray(c,m),m+=3,y.toArray(c,m),m+=3,y.toArray(c,m),m+=3}const u=new zt;u.setAttribute("position",new _t(l,3)),u.setAttribute("color",new _t(c,3));const h=new sr({vertexColors:!0,toneMapped:!1});super(u,h),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class kY extends $s{constructor(e=10,n=16,i=8,r=64,s=4473924,a=8947848){s=new ht(s),a=new ht(a);const o=[],l=[];if(n>1)for(let h=0;h<n;h++){const f=h/n*(Math.PI*2),m=Math.sin(f)*e,g=Math.cos(f)*e;o.push(0,0,0),o.push(m,0,g);const y=h&1?s:a;l.push(y.r,y.g,y.b),l.push(y.r,y.g,y.b)}for(let h=0;h<i;h++){const f=h&1?s:a,m=e-e/i*h;for(let g=0;g<r;g++){let y=g/r*(Math.PI*2),x=Math.sin(y)*m,v=Math.cos(y)*m;o.push(x,0,v),l.push(f.r,f.g,f.b),y=(g+1)/r*(Math.PI*2),x=Math.sin(y)*m,v=Math.cos(y)*m,o.push(x,0,v),l.push(f.r,f.g,f.b)}}const c=new zt;c.setAttribute("position",new _t(o,3)),c.setAttribute("color",new _t(l,3));const u=new sr({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const SP=new K,ov=new K,AP=new K;class OY extends an{constructor(e,n,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",n===void 0&&(n=1);let r=new zt;r.setAttribute("position",new _t([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const s=new sr({fog:!1,toneMapped:!1});this.lightPlane=new co(r,s),this.add(this.lightPlane),r=new zt,r.setAttribute("position",new _t([0,0,0,0,0,1],3)),this.targetLine=new co(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),SP.setFromMatrixPosition(this.light.matrixWorld),ov.setFromMatrixPosition(this.light.target.matrixWorld),AP.subVectors(ov,SP),this.lightPlane.lookAt(ov),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(ov),this.targetLine.scale.z=AP.length()}}const lv=new K,Qn=new qc;class GY extends $s{constructor(e){const n=new zt,i=new sr({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],a={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(g,y){l(g),l(y)}function l(g){r.push(0,0,0),s.push(0,0,0),a[g]===void 0&&(a[g]=[]),a[g].push(r.length/3-1)}n.setAttribute("position",new _t(r,3)),n.setAttribute("color",new _t(s,3)),super(n,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const c=new ht(16755200),u=new ht(16711680),h=new ht(43775),f=new ht(16777215),m=new ht(3355443);this.setColors(c,u,h,f,m)}setColors(e,n,i,r,s){const o=this.geometry.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,n.r,n.g,n.b),o.setXYZ(25,n.r,n.g,n.b),o.setXYZ(26,n.r,n.g,n.b),o.setXYZ(27,n.r,n.g,n.b),o.setXYZ(28,n.r,n.g,n.b),o.setXYZ(29,n.r,n.g,n.b),o.setXYZ(30,n.r,n.g,n.b),o.setXYZ(31,n.r,n.g,n.b),o.setXYZ(32,i.r,i.g,i.b),o.setXYZ(33,i.r,i.g,i.b),o.setXYZ(34,i.r,i.g,i.b),o.setXYZ(35,i.r,i.g,i.b),o.setXYZ(36,i.r,i.g,i.b),o.setXYZ(37,i.r,i.g,i.b),o.setXYZ(38,r.r,r.g,r.b),o.setXYZ(39,r.r,r.g,r.b),o.setXYZ(40,s.r,s.g,s.b),o.setXYZ(41,s.r,s.g,s.b),o.setXYZ(42,s.r,s.g,s.b),o.setXYZ(43,s.r,s.g,s.b),o.setXYZ(44,s.r,s.g,s.b),o.setXYZ(45,s.r,s.g,s.b),o.setXYZ(46,s.r,s.g,s.b),o.setXYZ(47,s.r,s.g,s.b),o.setXYZ(48,s.r,s.g,s.b),o.setXYZ(49,s.r,s.g,s.b),o.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,i=1,r=1;Qn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),oi("c",n,e,Qn,0,0,-1),oi("t",n,e,Qn,0,0,1),oi("n1",n,e,Qn,-i,-r,-1),oi("n2",n,e,Qn,i,-r,-1),oi("n3",n,e,Qn,-i,r,-1),oi("n4",n,e,Qn,i,r,-1),oi("f1",n,e,Qn,-i,-r,1),oi("f2",n,e,Qn,i,-r,1),oi("f3",n,e,Qn,-i,r,1),oi("f4",n,e,Qn,i,r,1),oi("u1",n,e,Qn,i*.7,r*1.1,-1),oi("u2",n,e,Qn,-i*.7,r*1.1,-1),oi("u3",n,e,Qn,0,r*2,-1),oi("cf1",n,e,Qn,-i,0,1),oi("cf2",n,e,Qn,i,0,1),oi("cf3",n,e,Qn,0,-r,1),oi("cf4",n,e,Qn,0,r,1),oi("cn1",n,e,Qn,-i,0,-1),oi("cn2",n,e,Qn,i,0,-1),oi("cn3",n,e,Qn,0,-r,-1),oi("cn4",n,e,Qn,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function oi(t,e,n,i,r,s,a){lv.set(r,s,a).unproject(i);const o=e[t];if(o!==void 0){const l=n.getAttribute("position");for(let c=0,u=o.length;c<u;c++)l.setXYZ(o[c],lv.x,lv.y,lv.z)}}const cv=new Ni;class zY extends $s{constructor(e,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new zt;s.setIndex(new $t(i,1)),s.setAttribute("position",new $t(r,3)),super(s,new sr({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&cv.setFromObject(this.object),cv.isEmpty())return;const n=cv.min,i=cv.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=n.x,s[4]=i.y,s[5]=i.z,s[6]=n.x,s[7]=n.y,s[8]=i.z,s[9]=i.x,s[10]=n.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=n.z,s[15]=n.x,s[16]=i.y,s[17]=n.z,s[18]=n.x,s[19]=n.y,s[20]=n.z,s[21]=i.x,s[22]=n.y,s[23]=n.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class HY extends $s{constructor(e,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new zt;s.setIndex(new $t(i,1)),s.setAttribute("position",new _t(r,3)),super(s,new sr({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class VY extends co{constructor(e,n=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new zt;a.setAttribute("position",new _t(s,3)),a.computeBoundingSphere(),super(a,new sr({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new zt;l.setAttribute("position",new _t(o,3)),l.computeBoundingSphere(),this.add(new Sn(l,new vr({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const wP=new K;let uv,m_;class jY extends an{constructor(e=new K(0,0,1),n=new K(0,0,0),i=1,r=16776960,s=i*.2,a=s*.2){super(),this.type="ArrowHelper",uv===void 0&&(uv=new zt,uv.setAttribute("position",new _t([0,0,0,0,1,0],3)),m_=new Qh(0,.5,1,5,1),m_.translate(0,-.5,0)),this.position.copy(n),this.line=new co(uv,new sr({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Sn(m_,new vr({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{wP.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(wP,n)}}setLength(e,n=e*.2,i=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(i,n,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class WY extends $s{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new zt;r.setAttribute("position",new _t(n,3)),r.setAttribute("color",new _t(i,3));const s=new sr({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,n,i){const r=new ht,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(n),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class XY{constructor(){this.type="ShapePath",this.color=new ht,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new gp,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,i,r){return this.currentPath.quadraticCurveTo(e,n,i,r),this}bezierCurveTo(e,n,i,r,s,a){return this.currentPath.bezierCurveTo(e,n,i,r,s,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(v){const _=[];for(let S=0,M=v.length;S<M;S++){const b=v[S],C=new sl;C.curves=b.curves,_.push(C)}return _}function i(v,_){const S=_.length;let M=!1;for(let b=S-1,C=0;C<S;b=C++){let B=_[b],P=_[C],T=P.x-B.x,I=P.y-B.y;if(Math.abs(I)>Number.EPSILON){if(I<0&&(B=_[C],T=-T,P=_[b],I=-I),v.y<B.y||v.y>P.y)continue;if(v.y===B.y){if(v.x===B.x)return!0}else{const z=I*(v.x-B.x)-T*(v.y-B.y);if(z===0)return!0;if(z<0)continue;M=!M}}else{if(v.y!==B.y)continue;if(P.x<=v.x&&v.x<=B.x||B.x<=v.x&&v.x<=P.x)return!0}}return M}const r=ya.isClockWise,s=this.subPaths;if(s.length===0)return[];let a,o,l;const c=[];if(s.length===1)return o=s[0],l=new sl,l.curves=o.curves,c.push(l),c;let u=!r(s[0].getPoints());u=e?!u:u;const h=[],f=[];let m=[],g=0,y;f[g]=void 0,m[g]=[];for(let v=0,_=s.length;v<_;v++)o=s[v],y=o.getPoints(),a=r(y),a=e?!a:a,a?(!u&&f[g]&&g++,f[g]={s:new sl,p:y},f[g].s.curves=o.curves,u&&g++,m[g]=[]):m[g].push({h:o,p:y[0]});if(!f[0])return n(s);if(f.length>1){let v=!1,_=0;for(let S=0,M=f.length;S<M;S++)h[S]=[];for(let S=0,M=f.length;S<M;S++){const b=m[S];for(let C=0;C<b.length;C++){const B=b[C];let P=!0;for(let T=0;T<f.length;T++)i(B.p,f[T].p)&&(S!==T&&_++,P?(P=!1,h[T].push(B)):v=!0);P&&h[S].push(B)}}_>0&&v===!1&&(m=h)}let x;for(let v=0,_=f.length;v<_;v++){l=f[v].s,c.push(l),x=m[v];for(let S=0,M=x.length;S<M;S++)l.holes.push(x[S].h)}return c}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:bl}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=bl);const NF=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:BM,AddEquation:Ho,AddOperation:uN,AdditiveAnimationBlendMode:zM,AdditiveBlending:sp,AlphaFormat:gN,AlwaysCompare:IN,AlwaysDepth:iN,AlwaysStencilFunc:TA,AmbientLight:MF,AnimationAction:IF,AnimationClip:kh,AnimationLoader:eY,AnimationMixer:LF,AnimationObjectGroup:wY,AnimationUtils:QJ,ArcCurve:qN,ArrayCamera:XN,ArrowHelper:jY,AttachedBindMode:eA,Audio:PF,AudioAnalyser:fY,AudioContext:SE,AudioListener:uY,AudioLoader:oY,AxesHelper:WY,BackSide:Ai,BasicDepthPacking:Tl,BasicShadowMap:OD,BatchedMesh:ZN,Bone:by,BooleanKeyframeTrack:$c,Box2:PY,Box3:Ni,Box3Helper:HY,BoxGeometry:Zc,BoxHelper:zY,BufferAttribute:$t,BufferGeometry:zt,BufferGeometryLoader:CF,ByteType:IM,Cache:jc,Camera:qc,CameraHelper:GY,CanvasTexture:_J,CapsuleGeometry:Py,CatmullRomCurve3:$N,CineonToneMapping:fN,CircleGeometry:By,ClampToEdgeWrapping:Dn,Clock:AE,Color:ht,ColorKeyframeTrack:pE,ColorManagement:gn,CompressedArrayTexture:yJ,CompressedCubeTexture:xJ,CompressedTexture:Cy,CompressedTextureLoader:tY,ConeGeometry:Iy,ConstantAlphaFactor:eN,ConstantColorFactor:qD,CubeCamera:kN,CubeReflectionMapping:xa,CubeRefractionMapping:fl,CubeTexture:Xp,CubeTextureLoader:SF,CubeUVReflectionMapping:Jh,CubicBezierCurve:aE,CubicBezierCurve3:eF,CubicInterpolant:vF,CullFaceBack:KS,CullFaceFront:kD,CullFaceFrontBack:pV,CullFaceNone:UD,Curve:ea,CurvePath:nF,CustomBlending:GD,CustomToneMapping:pN,CylinderGeometry:Qh,Cylindrical:RY,Data3DTexture:YM,DataArrayTexture:xy,DataTexture:rl,DataTextureLoader:mE,DataUtils:Mc,DecrementStencilOp:AV,DecrementWrapStencilOp:MV,DefaultLoadingManager:_F,DepthFormat:eo,DepthStencilFormat:ml,DepthTexture:Yh,DetachedBindMode:mN,DirectionalLight:xE,DirectionalLightHelper:OY,DiscreteInterpolant:yF,DisplayP3ColorSpace:yy,DodecahedronGeometry:Ly,DoubleSide:Ii,DstAlphaFactor:JD,DstColorFactor:KD,DynamicCopyUsage:OV,DynamicDrawUsage:LV,DynamicReadUsage:FV,EdgesGeometry:iF,EllipseCurve:Ry,EqualCompare:CN,EqualDepth:sN,EqualStencilFunc:CV,EquirectangularReflectionMapping:Ih,EquirectangularRefractionMapping:op,Euler:Wp,EventDispatcher:bs,ExtrudeGeometry:Ny,FileLoader:Vi,Float16BufferAttribute:Mj,Float32BufferAttribute:_t,Float64BufferAttribute:Ej,FloatType:$n,Fog:Ey,FogExp2:My,FramebufferTexture:vJ,FrontSide:Ks,Frustum:Jp,GLBufferAttribute:CY,GLSL1:zV,GLSL3:CA,GreaterCompare:RN,GreaterDepth:oN,GreaterEqualCompare:BN,GreaterEqualDepth:aN,GreaterEqualStencilFunc:IV,GreaterStencilFunc:PV,GridHelper:UY,Group:Ya,HalfFloatType:ei,HemisphereLight:wF,HemisphereLightHelper:FY,IcosahedronGeometry:Zp,ImageBitmapLoader:RF,ImageLoader:_p,ImageUtils:JM,IncrementStencilOp:SV,IncrementWrapStencilOp:wV,InstancedBufferAttribute:yl,InstancedBufferGeometry:_E,InstancedInterleavedBuffer:TY,InstancedMesh:nE,Int16BufferAttribute:Aj,Int32BufferAttribute:wj,Int8BufferAttribute:xj,IntType:gy,InterleavedBuffer:Yp,InterleavedBufferAttribute:vl,Interpolant:qh,InterpolateDiscrete:Dh,InterpolateLinear:Gc,InterpolateSmooth:jv,InvertStencilOp:EV,KeepStencilOp:fc,KeyframeTrack:ta,LOD:QN,LatheGeometry:Qp,Layers:Lc,LessCompare:TN,LessDepth:rN,LessEqualCompare:WM,LessEqualDepth:ap,LessEqualStencilFunc:RV,LessStencilFunc:TV,Light:Pl,LightProbe:TF,Line:co,Line3:BY,LineBasicMaterial:sr,LineCurve:oE,LineCurve3:tF,LineDashedMaterial:pF,LineLoop:iE,LineSegments:$s,LinearDisplayP3ColorSpace:jp,LinearEncoding:VM,LinearFilter:kt,LinearInterpolant:fE,LinearMipMapLinearFilter:tA,LinearMipMapNearestFilter:yV,LinearMipmapLinearFilter:_a,LinearMipmapNearestFilter:my,LinearSRGBColorSpace:xr,LinearToneMapping:hN,LinearTransfer:up,Loader:Wi,LoaderUtils:al,LoadingManager:zy,LoopOnce:SN,LoopPingPong:wN,LoopRepeat:AN,LuminanceAlphaFormat:yN,LuminanceFormat:vN,MOUSE:hc,Material:ui,MaterialLoader:Hy,MathUtils:pp,Matrix3:Yt,Matrix4:bt,MaxEquation:$S,Mesh:Sn,MeshBasicMaterial:vr,MeshDepthMaterial:Sy,MeshDistanceMaterial:Ay,MeshLambertMaterial:dF,MeshMatcapMaterial:fF,MeshNormalMaterial:hE,MeshPhongMaterial:uF,MeshPhysicalMaterial:Ts,MeshStandardMaterial:Zh,MeshToonMaterial:hF,MinEquation:qS,MirroredRepeatWrapping:Lh,MixOperation:cN,MultiplyBlending:ZS,MultiplyOperation:Hp,NearestFilter:Rn,NearestMipMapLinearFilter:vV,NearestMipMapNearestFilter:gV,NearestMipmapLinearFilter:gh,NearestMipmapNearestFilter:lp,NeverCompare:bN,NeverDepth:nN,NeverStencilFunc:bV,NoBlending:Di,NoColorSpace:gr,NoToneMapping:Xs,NormalAnimationBlendMode:vy,NormalBlending:Bc,NotEqualCompare:PN,NotEqualDepth:lN,NotEqualStencilFunc:BV,NumberKeyframeTrack:Hc,Object3D:an,ObjectLoader:sY,ObjectSpaceNormalMap:EN,OctahedronGeometry:qp,OneFactor:jD,OneMinusConstantAlphaFactor:tN,OneMinusConstantColorFactor:$D,OneMinusDstAlphaFactor:YD,OneMinusDstColorFactor:QD,OneMinusSrcAlphaFactor:P0,OneMinusSrcColorFactor:XD,OrthographicCamera:ws,P3Primaries:dp,PCFShadowMap:py,PCFSoftShadowMap:bf,PMREMGenerator:PA,Path:gp,PerspectiveCamera:Pn,Plane:da,PlaneGeometry:Aa,PlaneHelper:VY,PointLight:yE,PointLightHelper:DY,Points:rE,PointsMaterial:Ty,PolarGridHelper:kY,PolyhedronGeometry:Rl,PositionalAudio:dY,PropertyBinding:ln,PropertyMixer:BF,QuadraticBezierCurve:lE,QuadraticBezierCurve3:cE,Quaternion:wi,QuaternionKeyframeTrack:xl,QuaternionLinearInterpolant:xF,RED_GREEN_RGTC2_Format:EA,RED_RGTC1_Format:_N,REVISION:bl,RGBADepthPacking:jM,RGBAFormat:gi,RGBAIntegerFormat:OM,RGBA_ASTC_10x10_Format:xA,RGBA_ASTC_10x5_Format:gA,RGBA_ASTC_10x6_Format:vA,RGBA_ASTC_10x8_Format:yA,RGBA_ASTC_12x10_Format:_A,RGBA_ASTC_12x12_Format:SA,RGBA_ASTC_4x4_Format:lA,RGBA_ASTC_5x4_Format:cA,RGBA_ASTC_5x5_Format:uA,RGBA_ASTC_6x5_Format:hA,RGBA_ASTC_6x6_Format:dA,RGBA_ASTC_8x5_Format:fA,RGBA_ASTC_8x6_Format:pA,RGBA_ASTC_8x8_Format:mA,RGBA_BPTC_Format:Vv,RGBA_ETC2_EAC_Format:oA,RGBA_PVRTC_2BPPV1_Format:sA,RGBA_PVRTC_4BPPV1_Format:rA,RGBA_S3TC_DXT1_Format:Gv,RGBA_S3TC_DXT3_Format:zv,RGBA_S3TC_DXT5_Format:Hv,RGB_BPTC_SIGNED_Format:AA,RGB_BPTC_UNSIGNED_Format:wA,RGB_ETC1_Format:GM,RGB_ETC2_Format:aA,RGB_PVRTC_2BPPV1_Format:iA,RGB_PVRTC_4BPPV1_Format:nA,RGB_S3TC_DXT1_Format:Ov,RGFormat:xN,RGIntegerFormat:kM,RawShaderMaterial:cF,Ray:Qc,Raycaster:EE,Rec709Primaries:hp,RectAreaLight:EF,RedFormat:FM,RedIntegerFormat:UM,ReinhardToneMapping:dN,RenderTarget:NN,RepeatWrapping:pl,ReplaceStencilOp:_V,ReverseSubtractEquation:HD,RingGeometry:$p,SIGNED_RED_GREEN_RGTC2_Format:bA,SIGNED_RED_RGTC1_Format:MA,SRGBColorSpace:sn,SRGBTransfer:bn,Scene:gl,ShaderChunk:Xt,ShaderLib:Os,ShaderMaterial:ti,ShadowMaterial:lF,Shape:sl,ShapeGeometry:Fy,ShapePath:XY,ShapeUtils:ya,ShortType:LM,Skeleton:Kp,SkeletonHelper:LY,SkinnedMesh:tE,Source:wc,Sphere:Fi,SphereGeometry:em,Spherical:UA,SphericalHarmonics3:bF,SplineCurve:uE,SpotLight:vE,SpotLightHelper:IY,Sprite:KN,SpriteMaterial:eE,SrcAlphaFactor:R0,SrcAlphaSaturateFactor:ZD,SrcColorFactor:WD,StaticCopyUsage:kV,StaticDrawUsage:fp,StaticReadUsage:NV,StereoCamera:lY,StreamCopyUsage:GV,StreamDrawUsage:DV,StreamReadUsage:UV,StringKeyframeTrack:eu,SubtractEquation:zD,SubtractiveBlending:QS,TOUCH:dc,TangentSpaceNormalMap:Cl,TetrahedronGeometry:Uy,Texture:pn,TextureLoader:AF,TorusGeometry:ky,TorusKnotGeometry:Oy,Triangle:Pr,TriangleFanDrawMode:B0,TriangleStripDrawMode:HM,TrianglesDrawMode:MN,TubeGeometry:Gy,TwoPassDoubleSide:mV,UVMapping:dl,Uint16BufferAttribute:KM,Uint32BufferAttribute:QM,Uint8BufferAttribute:_j,Uint8ClampedBufferAttribute:Sj,Uniform:Ut,UniformsGroup:bY,UniformsLib:dt,UniformsUtils:ZM,UnsignedByteType:vi,UnsignedInt248Type:$a,UnsignedIntType:zs,UnsignedShort4444Type:DM,UnsignedShort5551Type:NM,UnsignedShortType:Vp,VSMShadowMap:Fs,Vector2:Ie,Vector3:K,Vector4:on,VectorKeyframeTrack:Vc,VideoTexture:gJ,WebGL1Renderer:JN,WebGL3DRenderTarget:oj,WebGLArrayRenderTarget:aj,WebGLCoordinateSystem:Hs,WebGLCubeRenderTarget:qM,WebGLMultipleRenderTargets:lj,WebGLRenderTarget:Mn,WebGLRenderer:wy,WebGLUtils:WN,WebGPUCoordinateSystem:Nh,WireframeGeometry:oF,WrapAroundEnding:cp,ZeroCurvatureEnding:Sc,ZeroFactor:VD,ZeroSlopeEnding:Ac,ZeroStencilOp:xV,_SRGBAFormat:I0,createCanvasElement:DN,sRGBEncoding:il},Symbol.toStringTag,{value:"Module"}));var FF={exports:{}},tu={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */tu.ConcurrentRoot=1;tu.ContinuousEventPriority=4;tu.DefaultEventPriority=16;tu.DiscreteEventPriority=1;tu.IdleEventPriority=536870912;tu.LegacyRoot=0;FF.exports=tu;var ch=FF.exports;function JY(t){let e;const n=new Set,i=(c,u)=>{const h=typeof c=="function"?c(e):c;if(h!==e){const f=e;e=u?h:Object.assign({},e,h),n.forEach(m=>m(e,f))}},r=()=>e,s=(c,u=r,h=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let f=u(e);function m(){const g=u(e);if(!h(f,g)){const y=f;c(f=g,y)}}return n.add(m),()=>n.delete(m)},l={setState:i,getState:r,subscribe:(c,u,h)=>u||h?s(c,u,h):(n.add(c),()=>n.delete(c)),destroy:()=>n.clear()};return e=t(i,r,l),l}const YY=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),MP=YY?D.useEffect:D.useLayoutEffect;function UF(t){const e=typeof t=="function"?JY(t):t,n=(i=e.getState,r=Object.is)=>{const[,s]=D.useReducer(x=>x+1,0),a=e.getState(),o=D.useRef(a),l=D.useRef(i),c=D.useRef(r),u=D.useRef(!1),h=D.useRef();h.current===void 0&&(h.current=i(a));let f,m=!1;(o.current!==a||l.current!==i||c.current!==r||u.current)&&(f=i(a),m=!r(h.current,f)),MP(()=>{m&&(h.current=f),o.current=a,l.current=i,c.current=r,u.current=!1});const g=D.useRef(a);MP(()=>{const x=()=>{try{const _=e.getState(),S=l.current(_);c.current(h.current,S)||(o.current=_,h.current=S,s())}catch{u.current=!0,s()}},v=e.subscribe(x);return e.getState()!==g.current&&x(),v},[]);const y=m?f:h.current;return D.useDebugValue(y),y};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[n,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},n}const KY=t=>typeof t=="object"&&typeof t.then=="function",bc=[];function kF(t,e,n=(i,r)=>i===r){if(t===e)return!0;if(!t||!e)return!1;const i=t.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!n(t[r],e[r]))return!1;return!0}function OF(t,e=null,n=!1,i={}){e===null&&(e=[t]);for(const s of bc)if(kF(e,s.keys,s.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!n)throw s.promise}const r={keys:e,equal:i.equal,remove:()=>{const s=bc.indexOf(r);s!==-1&&bc.splice(s,1)},promise:(KY(t)?t:t(...e)).then(s=>{r.response=s,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(s=>r.error=s)};if(bc.push(r),!n)throw r.promise}const GF=(t,e,n)=>OF(t,e,!1,n),QY=(t,e,n)=>void OF(t,e,!0,n),ZY=t=>{if(t===void 0||t.length===0)bc.splice(0,bc.length);else{const e=bc.find(n=>kF(t,n.keys,n.equal));e&&e.remove()}};var zF={exports:{}},HF={exports:{}},VF={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Z,J){var H=Z.length;Z.push(J);e:for(;0<H;){var O=H-1>>>1,j=Z[O];if(0<r(j,J))Z[O]=J,Z[H]=j,H=O;else break e}}function n(Z){return Z.length===0?null:Z[0]}function i(Z){if(Z.length===0)return null;var J=Z[0],H=Z.pop();if(H!==J){Z[0]=H;e:for(var O=0,j=Z.length,W=j>>>1;O<W;){var ne=2*(O+1)-1,ae=Z[ne],de=ne+1,fe=Z[de];if(0>r(ae,H))de<j&&0>r(fe,ae)?(Z[O]=fe,Z[de]=H,O=de):(Z[O]=ae,Z[ne]=H,O=ne);else if(de<j&&0>r(fe,H))Z[O]=fe,Z[de]=H,O=de;else break e}}return J}function r(Z,J){var H=Z.sortIndex-J.sortIndex;return H!==0?H:Z.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,h=null,f=3,m=!1,g=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(Z){for(var J=n(c);J!==null;){if(J.callback===null)i(c);else if(J.startTime<=Z)i(c),J.sortIndex=J.expirationTime,e(l,J);else break;J=n(c)}}function M(Z){if(y=!1,S(Z),!g)if(n(l)!==null)g=!0,$(b);else{var J=n(c);J!==null&&oe(M,J.startTime-Z)}}function b(Z,J){g=!1,y&&(y=!1,v(P),P=-1),m=!0;var H=f;try{for(S(J),h=n(l);h!==null&&(!(h.expirationTime>J)||Z&&!z());){var O=h.callback;if(typeof O=="function"){h.callback=null,f=h.priorityLevel;var j=O(h.expirationTime<=J);J=t.unstable_now(),typeof j=="function"?h.callback=j:h===n(l)&&i(l),S(J)}else i(l);h=n(l)}if(h!==null)var W=!0;else{var ne=n(c);ne!==null&&oe(M,ne.startTime-J),W=!1}return W}finally{h=null,f=H,m=!1}}var C=!1,B=null,P=-1,T=5,I=-1;function z(){return!(t.unstable_now()-I<T)}function G(){if(B!==null){var Z=t.unstable_now();I=Z;var J=!0;try{J=B(!0,Z)}finally{J?Q():(C=!1,B=null)}}else C=!1}var Q;if(typeof _=="function")Q=function(){_(G)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,ee=U.port2;U.port1.onmessage=G,Q=function(){ee.postMessage(null)}}else Q=function(){x(G,0)};function $(Z){B=Z,C||(C=!0,Q())}function oe(Z,J){P=x(function(){Z(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Z){Z.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,$(b))},t.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<Z?Math.floor(1e3/Z):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(Z){switch(f){case 1:case 2:case 3:var J=3;break;default:J=f}var H=f;f=J;try{return Z()}finally{f=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Z,J){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var H=f;f=Z;try{return J()}finally{f=H}},t.unstable_scheduleCallback=function(Z,J,H){var O=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?O+H:O):H=O,Z){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=H+j,Z={id:u++,callback:J,priorityLevel:Z,startTime:H,expirationTime:j,sortIndex:-1},H>O?(Z.sortIndex=H,e(c,Z),n(l)===null&&Z===n(c)&&(y?(v(P),P=-1):y=!0,oe(M,H-O))):(Z.sortIndex=j,e(l,Z),g||m||(g=!0,$(b))),Z},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(Z){var J=f;return function(){var H=f;f=J;try{return Z.apply(this,arguments)}finally{f=H}}}})(VF);HF.exports=VF;var kA=HF.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qY=function(e){var n={},i=D,r=kA,s=Object.assign;function a(d){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+d,A=1;A<arguments.length;A++)p+="&args[]="+encodeURIComponent(arguments[A]);return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),g=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),M=Symbol.for("react.offscreen"),b=Symbol.iterator;function C(d){return d===null||typeof d!="object"?null:(d=b&&d[b]||d["@@iterator"],typeof d=="function"?d:null)}function B(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case u:return"Fragment";case c:return"Portal";case f:return"Profiler";case h:return"StrictMode";case x:return"Suspense";case v:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case g:return(d.displayName||"Context")+".Consumer";case m:return(d._context.displayName||"Context")+".Provider";case y:var p=d.render;return d=d.displayName,d||(d=p.displayName||p.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case _:return p=d.displayName||null,p!==null?p:B(d.type)||"Memo";case S:p=d._payload,d=d._init;try{return B(d(p))}catch{}}return null}function P(d){var p=d.type;switch(d.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=p.render,d=d.displayName||d.name||"",p.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(p);case 8:return p===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function T(d){var p=d,A=d;if(d.alternate)for(;p.return;)p=p.return;else{d=p;do p=d,p.flags&4098&&(A=p.return),d=p.return;while(d)}return p.tag===3?A:null}function I(d){if(T(d)!==d)throw Error(a(188))}function z(d){var p=d.alternate;if(!p){if(p=T(d),p===null)throw Error(a(188));return p!==d?null:d}for(var A=d,E=p;;){var R=A.return;if(R===null)break;var L=R.alternate;if(L===null){if(E=R.return,E!==null){A=E;continue}break}if(R.child===L.child){for(L=R.child;L;){if(L===A)return I(R),d;if(L===E)return I(R),p;L=L.sibling}throw Error(a(188))}if(A.return!==E.return)A=R,E=L;else{for(var ie=!1,me=R.child;me;){if(me===A){ie=!0,A=R,E=L;break}if(me===E){ie=!0,E=R,A=L;break}me=me.sibling}if(!ie){for(me=L.child;me;){if(me===A){ie=!0,A=L,E=R;break}if(me===E){ie=!0,E=L,A=R;break}me=me.sibling}if(!ie)throw Error(a(189))}}if(A.alternate!==E)throw Error(a(190))}if(A.tag!==3)throw Error(a(188));return A.stateNode.current===A?d:p}function G(d){return d=z(d),d!==null?Q(d):null}function Q(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var p=Q(d);if(p!==null)return p;d=d.sibling}return null}function U(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){if(d.tag!==4){var p=U(d);if(p!==null)return p}d=d.sibling}return null}var ee=Array.isArray,$=e.getPublicInstance,oe=e.getRootHostContext,Z=e.getChildHostContext,J=e.prepareForCommit,H=e.resetAfterCommit,O=e.createInstance,j=e.appendInitialChild,W=e.finalizeInitialChildren,ne=e.prepareUpdate,ae=e.shouldSetTextContent,de=e.createTextInstance,fe=e.scheduleTimeout,Se=e.cancelTimeout,He=e.noTimeout,Fe=e.isPrimaryRenderer,ge=e.supportsMutation,X=e.supportsPersistence,Re=e.supportsHydration,ye=e.getInstanceFromNode,De=e.preparePortalMount,Me=e.getCurrentEventPriority,Qe=e.detachDeletedInstance,Ee=e.supportsMicrotasks,Oe=e.scheduleMicrotask,Je=e.supportsTestSelectors,be=e.findFiberRoot,rt=e.getBoundingRect,V=e.getTextContent,k=e.isHiddenSubtree,ue=e.matchAccessibilityRole,je=e.setFocusIfFocusable,_e=e.setupIntersectionObserver,Le=e.appendChild,Ke=e.appendChildToContainer,We=e.commitTextUpdate,Ze=e.commitMount,ct=e.commitUpdate,ot=e.insertBefore,Pe=e.insertInContainerBefore,et=e.removeChild,re=e.removeChildFromContainer,Ae=e.resetTextContent,Ge=e.hideInstance,Ve=e.hideTextInstance,xe=e.unhideInstance,le=e.unhideTextInstance,nt=e.clearContainer,Xe=e.cloneInstance,we=e.createContainerChildSet,Ye=e.appendChildToContainerChildSet,st=e.finalizeContainerChildren,at=e.replaceContainerChildren,Et=e.cloneHiddenInstance,jt=e.cloneHiddenTextInstance,Ct=e.canHydrateInstance,Zt=e.canHydrateTextInstance,En=e.canHydrateSuspenseInstance,yi=e.isSuspenseInstancePending,Ui=e.isSuspenseInstanceFallback,ni=e.registerSuspenseInstanceRetry,Yn=e.getNextHydratableSibling,Rt=e.getFirstHydratableChild,Gn=e.getFirstHydratableChildWithinContainer,Ar=e.getFirstHydratableChildWithinSuspenseInstance,F=e.hydrateInstance,Y=e.hydrateTextInstance,he=e.hydrateSuspenseInstance,N=e.getNextHydratableInstanceAfterSuspenseInstance,q=e.commitHydratedContainer,te=e.commitHydratedSuspenseInstance,ce=e.clearSuspenseBoundary,se=e.clearSuspenseBoundaryFromContainer,Te=e.shouldDeleteUnhydratedTailInstances,Ne=e.didNotMatchHydratedContainerTextInstance,ke=e.didNotMatchHydratedTextInstance,pe;function ft(d){if(pe===void 0)try{throw Error()}catch(A){var p=A.stack.trim().match(/\n( *(at )?)/);pe=p&&p[1]||""}return`
`+pe+d}var $e=!1;function qe(d,p){if(!d||$e)return"";$e=!0;var A=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(it){var E=it}Reflect.construct(d,[],p)}else{try{p.call()}catch(it){E=it}d.call(p.prototype)}else{try{throw Error()}catch(it){E=it}d()}}catch(it){if(it&&E&&typeof it.stack=="string"){for(var R=it.stack.split(`
`),L=E.stack.split(`
`),ie=R.length-1,me=L.length-1;1<=ie&&0<=me&&R[ie]!==L[me];)me--;for(;1<=ie&&0<=me;ie--,me--)if(R[ie]!==L[me]){if(ie!==1||me!==1)do if(ie--,me--,0>me||R[ie]!==L[me]){var ze=`
`+R[ie].replace(" at new "," at ");return d.displayName&&ze.includes("<anonymous>")&&(ze=ze.replace("<anonymous>",d.displayName)),ze}while(1<=ie&&0<=me);break}}}finally{$e=!1,Error.prepareStackTrace=A}return(d=d?d.displayName||d.name:"")?ft(d):""}var vt=Object.prototype.hasOwnProperty,St=[],wt=-1;function Lt(d){return{current:d}}function pt(d){0>wt||(d.current=St[wt],St[wt]=null,wt--)}function lt(d,p){wt++,St[wt]=d.current,d.current=p}var Ot={},Tt=Lt(Ot),Pt=Lt(!1),un=Ot;function yn(d,p){var A=d.type.contextTypes;if(!A)return Ot;var E=d.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===p)return E.__reactInternalMemoizedMaskedChildContext;var R={},L;for(L in A)R[L]=p[L];return E&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=p,d.__reactInternalMemoizedMaskedChildContext=R),R}function xn(d){return d=d.childContextTypes,d!=null}function Jt(){pt(Pt),pt(Tt)}function Wt(d,p,A){if(Tt.current!==Ot)throw Error(a(168));lt(Tt,p),lt(Pt,A)}function An(d,p,A){var E=d.stateNode;if(p=p.childContextTypes,typeof E.getChildContext!="function")return A;E=E.getChildContext();for(var R in E)if(!(R in p))throw Error(a(108,P(d)||"Unknown",R));return s({},A,E)}function Ft(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||Ot,un=Tt.current,lt(Tt,d),lt(Pt,Pt.current),!0}function Nt(d,p,A){var E=d.stateNode;if(!E)throw Error(a(169));A?(d=An(d,p,un),E.__reactInternalMemoizedMergedChildContext=d,pt(Pt),pt(Tt),lt(Tt,d)):pt(Pt),lt(Pt,A)}var _n=Math.clz32?Math.clz32:Or,ki=Math.log,ii=Math.LN2;function Or(d){return d>>>=0,d===0?32:31-(ki(d)/ii|0)|0}var wa=64,Ma=4194304;function Ea(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function Bl(d,p){var A=d.pendingLanes;if(A===0)return 0;var E=0,R=d.suspendedLanes,L=d.pingedLanes,ie=A&268435455;if(ie!==0){var me=ie&~R;me!==0?E=Ea(me):(L&=ie,L!==0&&(E=Ea(L)))}else ie=A&~R,ie!==0?E=Ea(ie):L!==0&&(E=Ea(L));if(E===0)return 0;if(p!==0&&p!==E&&!(p&R)&&(R=E&-E,L=p&-p,R>=L||R===16&&(L&4194240)!==0))return p;if(E&4&&(E|=A&16),p=d.entangledLanes,p!==0)for(d=d.entanglements,p&=E;0<p;)A=31-_n(p),R=1<<A,E|=d[A],p&=~R;return E}function lm(d,p){switch(d){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function td(d,p){for(var A=d.suspendedLanes,E=d.pingedLanes,R=d.expirationTimes,L=d.pendingLanes;0<L;){var ie=31-_n(L),me=1<<ie,ze=R[ie];ze===-1?(!(me&A)||me&E)&&(R[ie]=lm(me,p)):ze<=p&&(d.expiredLanes|=me),L&=~me}}function ba(d){return d=d.pendingLanes&-1073741825,d!==0?d:d&1073741824?1073741824:0}function iu(d){for(var p=[],A=0;31>A;A++)p.push(d);return p}function na(d,p,A){d.pendingLanes|=p,p!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,p=31-_n(p),d[p]=A}function po(d,p){var A=d.pendingLanes&~p;d.pendingLanes=p,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=p,d.mutableReadLanes&=p,d.entangledLanes&=p,p=d.entanglements;var E=d.eventTimes;for(d=d.expirationTimes;0<A;){var R=31-_n(A),L=1<<R;p[R]=0,E[R]=-1,d[R]=-1,A&=~L}}function ia(d,p){var A=d.entangledLanes|=p;for(d=d.entanglements;A;){var E=31-_n(A),R=1<<E;R&p|d[E]&p&&(d[E]|=p),A&=~R}}var en=0;function nd(d){return d&=-d,1<d?4<d?d&268435455?16:536870912:4:1}var Ta=r.unstable_scheduleCallback,ru=r.unstable_cancelCallback,id=r.unstable_shouldYield,cm=r.unstable_requestPaint,zn=r.unstable_now,Il=r.unstable_ImmediatePriority,um=r.unstable_UserBlockingPriority,ar=r.unstable_NormalPriority,rd=r.unstable_IdlePriority,Ll=null,Gr=null;function sd(d){if(Gr&&typeof Gr.onCommitFiberRoot=="function")try{Gr.onCommitFiberRoot(Ll,d,void 0,(d.current.flags&128)===128)}catch{}}function hm(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var zr=typeof Object.is=="function"?Object.is:hm,or=null,ra=!1,is=!1;function ad(d){or===null?or=[d]:or.push(d)}function od(d){ra=!0,ad(d)}function wr(){if(!is&&or!==null){is=!0;var d=0,p=en;try{var A=or;for(en=1;d<A.length;d++){var E=A[d];do E=E(!0);while(E!==null)}or=null,ra=!1}catch(R){throw or!==null&&(or=or.slice(d+1)),Ta(Il,wr),R}finally{en=p,is=!1}}return null}var Dl=o.ReactCurrentBatchConfig;function Nl(d,p){if(zr(d,p))return!0;if(typeof d!="object"||d===null||typeof p!="object"||p===null)return!1;var A=Object.keys(d),E=Object.keys(p);if(A.length!==E.length)return!1;for(E=0;E<A.length;E++){var R=A[E];if(!vt.call(p,R)||!zr(d[R],p[R]))return!1}return!0}function Fl(d){switch(d.tag){case 5:return ft(d.type);case 16:return ft("Lazy");case 13:return ft("Suspense");case 19:return ft("SuspenseList");case 0:case 2:case 15:return d=qe(d.type,!1),d;case 11:return d=qe(d.type.render,!1),d;case 1:return d=qe(d.type,!0),d;default:return""}}function lr(d,p){if(d&&d.defaultProps){p=s({},p),d=d.defaultProps;for(var A in d)p[A]===void 0&&(p[A]=d[A]);return p}return p}var bi=Lt(null),su=null,Cs=null,mo=null;function au(){mo=Cs=su=null}function dm(d,p,A){Fe?(lt(bi,p._currentValue),p._currentValue=A):(lt(bi,p._currentValue2),p._currentValue2=A)}function Ti(d){var p=bi.current;pt(bi),Fe?d._currentValue=p:d._currentValue2=p}function cr(d,p,A){for(;d!==null;){var E=d.alternate;if((d.childLanes&p)!==p?(d.childLanes|=p,E!==null&&(E.childLanes|=p)):E!==null&&(E.childLanes&p)!==p&&(E.childLanes|=p),d===A)break;d=d.return}}function ri(d,p){su=d,mo=Cs=null,d=d.dependencies,d!==null&&d.firstContext!==null&&(d.lanes&p&&(Wr=!0),d.firstContext=null)}function si(d){var p=Fe?d._currentValue:d._currentValue2;if(mo!==d)if(d={context:d,memoizedValue:p,next:null},Cs===null){if(su===null)throw Error(a(308));Cs=d,su.dependencies={lanes:0,firstContext:d}}else Cs=Cs.next=d;return p}var Hr=null,go=!1;function $y(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sb(d,p){d=d.updateQueue,p.updateQueue===d&&(p.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function Ca(d,p){return{eventTime:d,lane:p,tag:0,payload:null,callback:null,next:null}}function vo(d,p){var A=d.updateQueue;A!==null&&(A=A.shared,hi!==null&&d.mode&1&&!(qt&2)?(d=A.interleaved,d===null?(p.next=p,Hr===null?Hr=[A]:Hr.push(A)):(p.next=d.next,d.next=p),A.interleaved=p):(d=A.pending,d===null?p.next=p:(p.next=d.next,d.next=p),A.pending=p))}function fm(d,p,A){if(p=p.updateQueue,p!==null&&(p=p.shared,(A&4194240)!==0)){var E=p.lanes;E&=d.pendingLanes,A|=E,p.lanes=A,ia(d,A)}}function ab(d,p){var A=d.updateQueue,E=d.alternate;if(E!==null&&(E=E.updateQueue,A===E)){var R=null,L=null;if(A=A.firstBaseUpdate,A!==null){do{var ie={eventTime:A.eventTime,lane:A.lane,tag:A.tag,payload:A.payload,callback:A.callback,next:null};L===null?R=L=ie:L=L.next=ie,A=A.next}while(A!==null);L===null?R=L=p:L=L.next=p}else R=L=p;A={baseState:E.baseState,firstBaseUpdate:R,lastBaseUpdate:L,shared:E.shared,effects:E.effects},d.updateQueue=A;return}d=A.lastBaseUpdate,d===null?A.firstBaseUpdate=p:d.next=p,A.lastBaseUpdate=p}function pm(d,p,A,E){var R=d.updateQueue;go=!1;var L=R.firstBaseUpdate,ie=R.lastBaseUpdate,me=R.shared.pending;if(me!==null){R.shared.pending=null;var ze=me,it=ze.next;ze.next=null,ie===null?L=it:ie.next=it,ie=ze;var xt=d.alternate;xt!==null&&(xt=xt.updateQueue,me=xt.lastBaseUpdate,me!==ie&&(me===null?xt.firstBaseUpdate=it:me.next=it,xt.lastBaseUpdate=ze))}if(L!==null){var Ht=R.baseState;ie=0,xt=it=ze=null,me=L;do{var Bt=me.lane,wn=me.eventTime;if((E&Bt)===Bt){xt!==null&&(xt=xt.next={eventTime:wn,lane:0,tag:me.tag,payload:me.payload,callback:me.callback,next:null});e:{var Mt=d,Ki=me;switch(Bt=p,wn=A,Ki.tag){case 1:if(Mt=Ki.payload,typeof Mt=="function"){Ht=Mt.call(wn,Ht,Bt);break e}Ht=Mt;break e;case 3:Mt.flags=Mt.flags&-65537|128;case 0:if(Mt=Ki.payload,Bt=typeof Mt=="function"?Mt.call(wn,Ht,Bt):Mt,Bt==null)break e;Ht=s({},Ht,Bt);break e;case 2:go=!0}}me.callback!==null&&me.lane!==0&&(d.flags|=64,Bt=R.effects,Bt===null?R.effects=[me]:Bt.push(me))}else wn={eventTime:wn,lane:Bt,tag:me.tag,payload:me.payload,callback:me.callback,next:null},xt===null?(it=xt=wn,ze=Ht):xt=xt.next=wn,ie|=Bt;if(me=me.next,me===null){if(me=R.shared.pending,me===null)break;Bt=me,me=Bt.next,Bt.next=null,R.lastBaseUpdate=Bt,R.shared.pending=null}}while(!0);if(xt===null&&(ze=Ht),R.baseState=ze,R.firstBaseUpdate=it,R.lastBaseUpdate=xt,p=R.shared.interleaved,p!==null){R=p;do ie|=R.lane,R=R.next;while(R!==p)}else L===null&&(R.shared.lanes=0);mu|=ie,d.lanes=ie,d.memoizedState=Ht}}function ob(d,p,A){if(d=p.effects,p.effects=null,d!==null)for(p=0;p<d.length;p++){var E=d[p],R=E.callback;if(R!==null){if(E.callback=null,E=A,typeof R!="function")throw Error(a(191,R));R.call(E)}}}var lb=new i.Component().refs;function ex(d,p,A,E){p=d.memoizedState,A=A(E,p),A=A==null?p:s({},p,A),d.memoizedState=A,d.lanes===0&&(d.updateQueue.baseState=A)}var mm={isMounted:function(d){return(d=d._reactInternals)?T(d)===d:!1},enqueueSetState:function(d,p,A){d=d._reactInternals;var E=hr(),R=_o(d),L=Ca(E,R);L.payload=p,A!=null&&(L.callback=A),vo(d,L),p=ls(d,R,E),p!==null&&fm(p,d,R)},enqueueReplaceState:function(d,p,A){d=d._reactInternals;var E=hr(),R=_o(d),L=Ca(E,R);L.tag=1,L.payload=p,A!=null&&(L.callback=A),vo(d,L),p=ls(d,R,E),p!==null&&fm(p,d,R)},enqueueForceUpdate:function(d,p){d=d._reactInternals;var A=hr(),E=_o(d),R=Ca(A,E);R.tag=2,p!=null&&(R.callback=p),vo(d,R),p=ls(d,E,A),p!==null&&fm(p,d,E)}};function cb(d,p,A,E,R,L,ie){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(E,L,ie):p.prototype&&p.prototype.isPureReactComponent?!Nl(A,E)||!Nl(R,L):!0}function ub(d,p,A){var E=!1,R=Ot,L=p.contextType;return typeof L=="object"&&L!==null?L=si(L):(R=xn(p)?un:Tt.current,E=p.contextTypes,L=(E=E!=null)?yn(d,R):Ot),p=new p(A,L),d.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=mm,d.stateNode=p,p._reactInternals=d,E&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=R,d.__reactInternalMemoizedMaskedChildContext=L),p}function hb(d,p,A,E){d=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(A,E),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(A,E),p.state!==d&&mm.enqueueReplaceState(p,p.state,null)}function tx(d,p,A,E){var R=d.stateNode;R.props=A,R.state=d.memoizedState,R.refs=lb,$y(d);var L=p.contextType;typeof L=="object"&&L!==null?R.context=si(L):(L=xn(p)?un:Tt.current,R.context=yn(d,L)),R.state=d.memoizedState,L=p.getDerivedStateFromProps,typeof L=="function"&&(ex(d,p,L,A),R.state=d.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(p=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),p!==R.state&&mm.enqueueReplaceState(R,R.state,null),pm(d,A,R,E),R.state=d.memoizedState),typeof R.componentDidMount=="function"&&(d.flags|=4194308)}var ou=[],lu=0,gm=null,vm=0,rs=[],ss=0,Ul=null,Ra=1,Pa="";function kl(d,p){ou[lu++]=vm,ou[lu++]=gm,gm=d,vm=p}function db(d,p,A){rs[ss++]=Ra,rs[ss++]=Pa,rs[ss++]=Ul,Ul=d;var E=Ra;d=Pa;var R=32-_n(E)-1;E&=~(1<<R),A+=1;var L=32-_n(p)+R;if(30<L){var ie=R-R%5;L=(E&(1<<ie)-1).toString(32),E>>=ie,R-=ie,Ra=1<<32-_n(p)+R|A<<R|E,Pa=L+d}else Ra=1<<L|A<<R|E,Pa=d}function nx(d){d.return!==null&&(kl(d,1),db(d,1,0))}function ix(d){for(;d===gm;)gm=ou[--lu],ou[lu]=null,vm=ou[--lu],ou[lu]=null;for(;d===Ul;)Ul=rs[--ss],rs[ss]=null,Pa=rs[--ss],rs[ss]=null,Ra=rs[--ss],rs[ss]=null}var Vr=null,jr=null,Un=!1,ld=!1,Rs=null;function fb(d,p){var A=cs(5,null,null,0);A.elementType="DELETED",A.stateNode=p,A.return=d,p=d.deletions,p===null?(d.deletions=[A],d.flags|=16):p.push(A)}function pb(d,p){switch(d.tag){case 5:return p=Ct(p,d.type,d.pendingProps),p!==null?(d.stateNode=p,Vr=d,jr=Rt(p),!0):!1;case 6:return p=Zt(p,d.pendingProps),p!==null?(d.stateNode=p,Vr=d,jr=null,!0):!1;case 13:if(p=En(p),p!==null){var A=Ul!==null?{id:Ra,overflow:Pa}:null;return d.memoizedState={dehydrated:p,treeContext:A,retryLane:1073741824},A=cs(18,null,null,0),A.stateNode=p,A.return=d,d.child=A,Vr=d,jr=null,!0}return!1;default:return!1}}function rx(d){return(d.mode&1)!==0&&(d.flags&128)===0}function sx(d){if(Un){var p=jr;if(p){var A=p;if(!pb(d,p)){if(rx(d))throw Error(a(418));p=Yn(A);var E=Vr;p&&pb(d,p)?fb(E,A):(d.flags=d.flags&-4097|2,Un=!1,Vr=d)}}else{if(rx(d))throw Error(a(418));d.flags=d.flags&-4097|2,Un=!1,Vr=d}}}function mb(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;Vr=d}function cd(d){if(!Re||d!==Vr)return!1;if(!Un)return mb(d),Un=!0,!1;if(d.tag!==3&&(d.tag!==5||Te(d.type)&&!ae(d.type,d.memoizedProps))){var p=jr;if(p){if(rx(d)){for(d=jr;d;)d=Yn(d);throw Error(a(418))}for(;p;)fb(d,p),p=Yn(p)}}if(mb(d),d.tag===13){if(!Re)throw Error(a(316));if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(a(317));jr=N(d)}else jr=Vr?Yn(d.stateNode):null;return!0}function cu(){Re&&(jr=Vr=null,ld=Un=!1)}function ax(d){Rs===null?Rs=[d]:Rs.push(d)}function ud(d,p,A){if(d=A.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if(A._owner){if(A=A._owner,A){if(A.tag!==1)throw Error(a(309));var E=A.stateNode}if(!E)throw Error(a(147,d));var R=E,L=""+d;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===L?p.ref:(p=function(ie){var me=R.refs;me===lb&&(me=R.refs={}),ie===null?delete me[L]:me[L]=ie},p._stringRef=L,p)}if(typeof d!="string")throw Error(a(284));if(!A._owner)throw Error(a(290,d))}return d}function ym(d,p){throw d=Object.prototype.toString.call(p),Error(a(31,d==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":d))}function gb(d){var p=d._init;return p(d._payload)}function vb(d){function p(Ce,ve){if(d){var Ue=Ce.deletions;Ue===null?(Ce.deletions=[ve],Ce.flags|=16):Ue.push(ve)}}function A(Ce,ve){if(!d)return null;for(;ve!==null;)p(Ce,ve),ve=ve.sibling;return null}function E(Ce,ve){for(Ce=new Map;ve!==null;)ve.key!==null?Ce.set(ve.key,ve):Ce.set(ve.index,ve),ve=ve.sibling;return Ce}function R(Ce,ve){return Ce=Ao(Ce,ve),Ce.index=0,Ce.sibling=null,Ce}function L(Ce,ve,Ue){return Ce.index=Ue,d?(Ue=Ce.alternate,Ue!==null?(Ue=Ue.index,Ue<ve?(Ce.flags|=2,ve):Ue):(Ce.flags|=2,ve)):(Ce.flags|=1048576,ve)}function ie(Ce){return d&&Ce.alternate===null&&(Ce.flags|=2),Ce}function me(Ce,ve,Ue,gt){return ve===null||ve.tag!==6?(ve=Vx(Ue,Ce.mode,gt),ve.return=Ce,ve):(ve=R(ve,Ue),ve.return=Ce,ve)}function ze(Ce,ve,Ue,gt){var At=Ue.type;return At===u?xt(Ce,ve,Ue.props.children,gt,Ue.key):ve!==null&&(ve.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===S&&gb(At)===ve.type)?(gt=R(ve,Ue.props),gt.ref=ud(Ce,ve,Ue),gt.return=Ce,gt):(gt=Km(Ue.type,Ue.key,Ue.props,null,Ce.mode,gt),gt.ref=ud(Ce,ve,Ue),gt.return=Ce,gt)}function it(Ce,ve,Ue,gt){return ve===null||ve.tag!==4||ve.stateNode.containerInfo!==Ue.containerInfo||ve.stateNode.implementation!==Ue.implementation?(ve=jx(Ue,Ce.mode,gt),ve.return=Ce,ve):(ve=R(ve,Ue.children||[]),ve.return=Ce,ve)}function xt(Ce,ve,Ue,gt,At){return ve===null||ve.tag!==7?(ve=Wl(Ue,Ce.mode,gt,At),ve.return=Ce,ve):(ve=R(ve,Ue),ve.return=Ce,ve)}function Ht(Ce,ve,Ue){if(typeof ve=="string"&&ve!==""||typeof ve=="number")return ve=Vx(""+ve,Ce.mode,Ue),ve.return=Ce,ve;if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case l:return Ue=Km(ve.type,ve.key,ve.props,null,Ce.mode,Ue),Ue.ref=ud(Ce,null,ve),Ue.return=Ce,Ue;case c:return ve=jx(ve,Ce.mode,Ue),ve.return=Ce,ve;case S:var gt=ve._init;return Ht(Ce,gt(ve._payload),Ue)}if(ee(ve)||C(ve))return ve=Wl(ve,Ce.mode,Ue,null),ve.return=Ce,ve;ym(Ce,ve)}return null}function Bt(Ce,ve,Ue,gt){var At=ve!==null?ve.key:null;if(typeof Ue=="string"&&Ue!==""||typeof Ue=="number")return At!==null?null:me(Ce,ve,""+Ue,gt);if(typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case l:return Ue.key===At?ze(Ce,ve,Ue,gt):null;case c:return Ue.key===At?it(Ce,ve,Ue,gt):null;case S:return At=Ue._init,Bt(Ce,ve,At(Ue._payload),gt)}if(ee(Ue)||C(Ue))return At!==null?null:xt(Ce,ve,Ue,gt,null);ym(Ce,Ue)}return null}function wn(Ce,ve,Ue,gt,At){if(typeof gt=="string"&&gt!==""||typeof gt=="number")return Ce=Ce.get(Ue)||null,me(ve,Ce,""+gt,At);if(typeof gt=="object"&&gt!==null){switch(gt.$$typeof){case l:return Ce=Ce.get(gt.key===null?Ue:gt.key)||null,ze(ve,Ce,gt,At);case c:return Ce=Ce.get(gt.key===null?Ue:gt.key)||null,it(ve,Ce,gt,At);case S:var Qt=gt._init;return wn(Ce,ve,Ue,Qt(gt._payload),At)}if(ee(gt)||C(gt))return Ce=Ce.get(Ue)||null,xt(ve,Ce,gt,At,null);ym(ve,gt)}return null}function Mt(Ce,ve,Ue,gt){for(var At=null,Qt=null,Vt=ve,hn=ve=0,Ri=null;Vt!==null&&hn<Ue.length;hn++){Vt.index>hn?(Ri=Vt,Vt=null):Ri=Vt.sibling;var dn=Bt(Ce,Vt,Ue[hn],gt);if(dn===null){Vt===null&&(Vt=Ri);break}d&&Vt&&dn.alternate===null&&p(Ce,Vt),ve=L(dn,ve,hn),Qt===null?At=dn:Qt.sibling=dn,Qt=dn,Vt=Ri}if(hn===Ue.length)return A(Ce,Vt),Un&&kl(Ce,hn),At;if(Vt===null){for(;hn<Ue.length;hn++)Vt=Ht(Ce,Ue[hn],gt),Vt!==null&&(ve=L(Vt,ve,hn),Qt===null?At=Vt:Qt.sibling=Vt,Qt=Vt);return Un&&kl(Ce,hn),At}for(Vt=E(Ce,Vt);hn<Ue.length;hn++)Ri=wn(Vt,Ce,hn,Ue[hn],gt),Ri!==null&&(d&&Ri.alternate!==null&&Vt.delete(Ri.key===null?hn:Ri.key),ve=L(Ri,ve,hn),Qt===null?At=Ri:Qt.sibling=Ri,Qt=Ri);return d&&Vt.forEach(function(wo){return p(Ce,wo)}),Un&&kl(Ce,hn),At}function Ki(Ce,ve,Ue,gt){var At=C(Ue);if(typeof At!="function")throw Error(a(150));if(Ue=At.call(Ue),Ue==null)throw Error(a(151));for(var Qt=At=null,Vt=ve,hn=ve=0,Ri=null,dn=Ue.next();Vt!==null&&!dn.done;hn++,dn=Ue.next()){Vt.index>hn?(Ri=Vt,Vt=null):Ri=Vt.sibling;var wo=Bt(Ce,Vt,dn.value,gt);if(wo===null){Vt===null&&(Vt=Ri);break}d&&Vt&&wo.alternate===null&&p(Ce,Vt),ve=L(wo,ve,hn),Qt===null?At=wo:Qt.sibling=wo,Qt=wo,Vt=Ri}if(dn.done)return A(Ce,Vt),Un&&kl(Ce,hn),At;if(Vt===null){for(;!dn.done;hn++,dn=Ue.next())dn=Ht(Ce,dn.value,gt),dn!==null&&(ve=L(dn,ve,hn),Qt===null?At=dn:Qt.sibling=dn,Qt=dn);return Un&&kl(Ce,hn),At}for(Vt=E(Ce,Vt);!dn.done;hn++,dn=Ue.next())dn=wn(Vt,Ce,hn,dn.value,gt),dn!==null&&(d&&dn.alternate!==null&&Vt.delete(dn.key===null?hn:dn.key),ve=L(dn,ve,hn),Qt===null?At=dn:Qt.sibling=dn,Qt=dn);return d&&Vt.forEach(function(Qk){return p(Ce,Qk)}),Un&&kl(Ce,hn),At}function us(Ce,ve,Ue,gt){if(typeof Ue=="object"&&Ue!==null&&Ue.type===u&&Ue.key===null&&(Ue=Ue.props.children),typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case l:e:{for(var At=Ue.key,Qt=ve;Qt!==null;){if(Qt.key===At){if(At=Ue.type,At===u){if(Qt.tag===7){A(Ce,Qt.sibling),ve=R(Qt,Ue.props.children),ve.return=Ce,Ce=ve;break e}}else if(Qt.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===S&&gb(At)===Qt.type){A(Ce,Qt.sibling),ve=R(Qt,Ue.props),ve.ref=ud(Ce,Qt,Ue),ve.return=Ce,Ce=ve;break e}A(Ce,Qt);break}else p(Ce,Qt);Qt=Qt.sibling}Ue.type===u?(ve=Wl(Ue.props.children,Ce.mode,gt,Ue.key),ve.return=Ce,Ce=ve):(gt=Km(Ue.type,Ue.key,Ue.props,null,Ce.mode,gt),gt.ref=ud(Ce,ve,Ue),gt.return=Ce,Ce=gt)}return ie(Ce);case c:e:{for(Qt=Ue.key;ve!==null;){if(ve.key===Qt)if(ve.tag===4&&ve.stateNode.containerInfo===Ue.containerInfo&&ve.stateNode.implementation===Ue.implementation){A(Ce,ve.sibling),ve=R(ve,Ue.children||[]),ve.return=Ce,Ce=ve;break e}else{A(Ce,ve);break}else p(Ce,ve);ve=ve.sibling}ve=jx(Ue,Ce.mode,gt),ve.return=Ce,Ce=ve}return ie(Ce);case S:return Qt=Ue._init,us(Ce,ve,Qt(Ue._payload),gt)}if(ee(Ue))return Mt(Ce,ve,Ue,gt);if(C(Ue))return Ki(Ce,ve,Ue,gt);ym(Ce,Ue)}return typeof Ue=="string"&&Ue!==""||typeof Ue=="number"?(Ue=""+Ue,ve!==null&&ve.tag===6?(A(Ce,ve.sibling),ve=R(ve,Ue),ve.return=Ce,Ce=ve):(A(Ce,ve),ve=Vx(Ue,Ce.mode,gt),ve.return=Ce,Ce=ve),ie(Ce)):A(Ce,ve)}return us}var uu=vb(!0),yb=vb(!1),hd={},as=Lt(hd),dd=Lt(hd),hu=Lt(hd);function sa(d){if(d===hd)throw Error(a(174));return d}function ox(d,p){lt(hu,p),lt(dd,d),lt(as,hd),d=oe(p),pt(as),lt(as,d)}function du(){pt(as),pt(dd),pt(hu)}function xb(d){var p=sa(hu.current),A=sa(as.current);p=Z(A,d.type,p),A!==p&&(lt(dd,d),lt(as,p))}function lx(d){dd.current===d&&(pt(as),pt(dd))}var Hn=Lt(0);function xm(d){for(var p=d;p!==null;){if(p.tag===13){var A=p.memoizedState;if(A!==null&&(A=A.dehydrated,A===null||yi(A)||Ui(A)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if(p.flags&128)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var cx=[];function ux(){for(var d=0;d<cx.length;d++){var p=cx[d];Fe?p._workInProgressVersionPrimary=null:p._workInProgressVersionSecondary=null}cx.length=0}var _m=o.ReactCurrentDispatcher,os=o.ReactCurrentBatchConfig,fu=0,Kn=null,Xi=null,Ci=null,Sm=!1,fd=!1,pd=0,Sk=0;function Ji(){throw Error(a(321))}function hx(d,p){if(p===null)return!1;for(var A=0;A<p.length&&A<d.length;A++)if(!zr(d[A],p[A]))return!1;return!0}function dx(d,p,A,E,R,L){if(fu=L,Kn=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,_m.current=d===null||d.memoizedState===null?Ek:bk,d=A(E,R),fd){L=0;do{if(fd=!1,pd=0,25<=L)throw Error(a(301));L+=1,Ci=Xi=null,p.updateQueue=null,_m.current=Tk,d=A(E,R)}while(fd)}if(_m.current=bm,p=Xi!==null&&Xi.next!==null,fu=0,Ci=Xi=Kn=null,Sm=!1,p)throw Error(a(300));return d}function fx(){var d=pd!==0;return pd=0,d}function Ba(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ci===null?Kn.memoizedState=Ci=d:Ci=Ci.next=d,Ci}function aa(){if(Xi===null){var d=Kn.alternate;d=d!==null?d.memoizedState:null}else d=Xi.next;var p=Ci===null?Kn.memoizedState:Ci.next;if(p!==null)Ci=p,Xi=d;else{if(d===null)throw Error(a(310));Xi=d,d={memoizedState:Xi.memoizedState,baseState:Xi.baseState,baseQueue:Xi.baseQueue,queue:Xi.queue,next:null},Ci===null?Kn.memoizedState=Ci=d:Ci=Ci.next=d}return Ci}function Ol(d,p){return typeof p=="function"?p(d):p}function Am(d){var p=aa(),A=p.queue;if(A===null)throw Error(a(311));A.lastRenderedReducer=d;var E=Xi,R=E.baseQueue,L=A.pending;if(L!==null){if(R!==null){var ie=R.next;R.next=L.next,L.next=ie}E.baseQueue=R=L,A.pending=null}if(R!==null){L=R.next,E=E.baseState;var me=ie=null,ze=null,it=L;do{var xt=it.lane;if((fu&xt)===xt)ze!==null&&(ze=ze.next={lane:0,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null}),E=it.hasEagerState?it.eagerState:d(E,it.action);else{var Ht={lane:xt,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null};ze===null?(me=ze=Ht,ie=E):ze=ze.next=Ht,Kn.lanes|=xt,mu|=xt}it=it.next}while(it!==null&&it!==L);ze===null?ie=E:ze.next=me,zr(E,p.memoizedState)||(Wr=!0),p.memoizedState=E,p.baseState=ie,p.baseQueue=ze,A.lastRenderedState=E}if(d=A.interleaved,d!==null){R=d;do L=R.lane,Kn.lanes|=L,mu|=L,R=R.next;while(R!==d)}else R===null&&(A.lanes=0);return[p.memoizedState,A.dispatch]}function wm(d){var p=aa(),A=p.queue;if(A===null)throw Error(a(311));A.lastRenderedReducer=d;var E=A.dispatch,R=A.pending,L=p.memoizedState;if(R!==null){A.pending=null;var ie=R=R.next;do L=d(L,ie.action),ie=ie.next;while(ie!==R);zr(L,p.memoizedState)||(Wr=!0),p.memoizedState=L,p.baseQueue===null&&(p.baseState=L),A.lastRenderedState=L}return[L,E]}function _b(){}function Sb(d,p){var A=Kn,E=aa(),R=p(),L=!zr(E.memoizedState,R);if(L&&(E.memoizedState=R,Wr=!0),E=E.queue,gd(Mb.bind(null,A,E,d),[d]),E.getSnapshot!==p||L||Ci!==null&&Ci.memoizedState.tag&1){if(A.flags|=2048,md(9,wb.bind(null,A,E,R,p),void 0,null),hi===null)throw Error(a(349));fu&30||Ab(A,p,R)}return R}function Ab(d,p,A){d.flags|=16384,d={getSnapshot:p,value:A},p=Kn.updateQueue,p===null?(p={lastEffect:null,stores:null},Kn.updateQueue=p,p.stores=[d]):(A=p.stores,A===null?p.stores=[d]:A.push(d))}function wb(d,p,A,E){p.value=A,p.getSnapshot=E,Eb(p)&&ls(d,1,-1)}function Mb(d,p,A){return A(function(){Eb(p)&&ls(d,1,-1)})}function Eb(d){var p=d.getSnapshot;d=d.value;try{var A=p();return!zr(d,A)}catch{return!0}}function px(d){var p=Ba();return typeof d=="function"&&(d=d()),p.memoizedState=p.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ol,lastRenderedState:d},p.queue=d,d=d.dispatch=Mk.bind(null,Kn,d),[p.memoizedState,d]}function md(d,p,A,E){return d={tag:d,create:p,destroy:A,deps:E,next:null},p=Kn.updateQueue,p===null?(p={lastEffect:null,stores:null},Kn.updateQueue=p,p.lastEffect=d.next=d):(A=p.lastEffect,A===null?p.lastEffect=d.next=d:(E=A.next,A.next=d,d.next=E,p.lastEffect=d)),d}function bb(){return aa().memoizedState}function Mm(d,p,A,E){var R=Ba();Kn.flags|=d,R.memoizedState=md(1|p,A,void 0,E===void 0?null:E)}function Em(d,p,A,E){var R=aa();E=E===void 0?null:E;var L=void 0;if(Xi!==null){var ie=Xi.memoizedState;if(L=ie.destroy,E!==null&&hx(E,ie.deps)){R.memoizedState=md(p,A,L,E);return}}Kn.flags|=d,R.memoizedState=md(1|p,A,L,E)}function mx(d,p){return Mm(8390656,8,d,p)}function gd(d,p){return Em(2048,8,d,p)}function Tb(d,p){return Em(4,2,d,p)}function Cb(d,p){return Em(4,4,d,p)}function Rb(d,p){if(typeof p=="function")return d=d(),p(d),function(){p(null)};if(p!=null)return d=d(),p.current=d,function(){p.current=null}}function Pb(d,p,A){return A=A!=null?A.concat([d]):null,Em(4,4,Rb.bind(null,p,d),A)}function gx(){}function Bb(d,p){var A=aa();p=p===void 0?null:p;var E=A.memoizedState;return E!==null&&p!==null&&hx(p,E[1])?E[0]:(A.memoizedState=[d,p],d)}function Ib(d,p){var A=aa();p=p===void 0?null:p;var E=A.memoizedState;return E!==null&&p!==null&&hx(p,E[1])?E[0]:(d=d(),A.memoizedState=[d,p],d)}function Ak(d,p){var A=en;en=A!==0&&4>A?A:4,d(!0);var E=os.transition;os.transition={};try{d(!1),p()}finally{en=A,os.transition=E}}function Lb(){return aa().memoizedState}function wk(d,p,A){var E=_o(d);A={lane:E,action:A,hasEagerState:!1,eagerState:null,next:null},Db(d)?Nb(p,A):(Fb(d,p,A),A=hr(),d=ls(d,E,A),d!==null&&Ub(d,p,E))}function Mk(d,p,A){var E=_o(d),R={lane:E,action:A,hasEagerState:!1,eagerState:null,next:null};if(Db(d))Nb(p,R);else{Fb(d,p,R);var L=d.alternate;if(d.lanes===0&&(L===null||L.lanes===0)&&(L=p.lastRenderedReducer,L!==null))try{var ie=p.lastRenderedState,me=L(ie,A);if(R.hasEagerState=!0,R.eagerState=me,zr(me,ie))return}catch{}finally{}A=hr(),d=ls(d,E,A),d!==null&&Ub(d,p,E)}}function Db(d){var p=d.alternate;return d===Kn||p!==null&&p===Kn}function Nb(d,p){fd=Sm=!0;var A=d.pending;A===null?p.next=p:(p.next=A.next,A.next=p),d.pending=p}function Fb(d,p,A){hi!==null&&d.mode&1&&!(qt&2)?(d=p.interleaved,d===null?(A.next=A,Hr===null?Hr=[p]:Hr.push(p)):(A.next=d.next,d.next=A),p.interleaved=A):(d=p.pending,d===null?A.next=A:(A.next=d.next,d.next=A),p.pending=A)}function Ub(d,p,A){if(A&4194240){var E=p.lanes;E&=d.pendingLanes,A|=E,p.lanes=A,ia(d,A)}}var bm={readContext:si,useCallback:Ji,useContext:Ji,useEffect:Ji,useImperativeHandle:Ji,useInsertionEffect:Ji,useLayoutEffect:Ji,useMemo:Ji,useReducer:Ji,useRef:Ji,useState:Ji,useDebugValue:Ji,useDeferredValue:Ji,useTransition:Ji,useMutableSource:Ji,useSyncExternalStore:Ji,useId:Ji,unstable_isNewReconciler:!1},Ek={readContext:si,useCallback:function(d,p){return Ba().memoizedState=[d,p===void 0?null:p],d},useContext:si,useEffect:mx,useImperativeHandle:function(d,p,A){return A=A!=null?A.concat([d]):null,Mm(4194308,4,Rb.bind(null,p,d),A)},useLayoutEffect:function(d,p){return Mm(4194308,4,d,p)},useInsertionEffect:function(d,p){return Mm(4,2,d,p)},useMemo:function(d,p){var A=Ba();return p=p===void 0?null:p,d=d(),A.memoizedState=[d,p],d},useReducer:function(d,p,A){var E=Ba();return p=A!==void 0?A(p):p,E.memoizedState=E.baseState=p,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:p},E.queue=d,d=d.dispatch=wk.bind(null,Kn,d),[E.memoizedState,d]},useRef:function(d){var p=Ba();return d={current:d},p.memoizedState=d},useState:px,useDebugValue:gx,useDeferredValue:function(d){var p=px(d),A=p[0],E=p[1];return mx(function(){var R=os.transition;os.transition={};try{E(d)}finally{os.transition=R}},[d]),A},useTransition:function(){var d=px(!1),p=d[0];return d=Ak.bind(null,d[1]),Ba().memoizedState=d,[p,d]},useMutableSource:function(){},useSyncExternalStore:function(d,p,A){var E=Kn,R=Ba();if(Un){if(A===void 0)throw Error(a(407));A=A()}else{if(A=p(),hi===null)throw Error(a(349));fu&30||Ab(E,p,A)}R.memoizedState=A;var L={value:A,getSnapshot:p};return R.queue=L,mx(Mb.bind(null,E,L,d),[d]),E.flags|=2048,md(9,wb.bind(null,E,L,A,p),void 0,null),A},useId:function(){var d=Ba(),p=hi.identifierPrefix;if(Un){var A=Pa,E=Ra;A=(E&~(1<<32-_n(E)-1)).toString(32)+A,p=":"+p+"R"+A,A=pd++,0<A&&(p+="H"+A.toString(32)),p+=":"}else A=Sk++,p=":"+p+"r"+A.toString(32)+":";return d.memoizedState=p},unstable_isNewReconciler:!1},bk={readContext:si,useCallback:Bb,useContext:si,useEffect:gd,useImperativeHandle:Pb,useInsertionEffect:Tb,useLayoutEffect:Cb,useMemo:Ib,useReducer:Am,useRef:bb,useState:function(){return Am(Ol)},useDebugValue:gx,useDeferredValue:function(d){var p=Am(Ol),A=p[0],E=p[1];return gd(function(){var R=os.transition;os.transition={};try{E(d)}finally{os.transition=R}},[d]),A},useTransition:function(){var d=Am(Ol)[0],p=aa().memoizedState;return[d,p]},useMutableSource:_b,useSyncExternalStore:Sb,useId:Lb,unstable_isNewReconciler:!1},Tk={readContext:si,useCallback:Bb,useContext:si,useEffect:gd,useImperativeHandle:Pb,useInsertionEffect:Tb,useLayoutEffect:Cb,useMemo:Ib,useReducer:wm,useRef:bb,useState:function(){return wm(Ol)},useDebugValue:gx,useDeferredValue:function(d){var p=wm(Ol),A=p[0],E=p[1];return gd(function(){var R=os.transition;os.transition={};try{E(d)}finally{os.transition=R}},[d]),A},useTransition:function(){var d=wm(Ol)[0],p=aa().memoizedState;return[d,p]},useMutableSource:_b,useSyncExternalStore:Sb,useId:Lb,unstable_isNewReconciler:!1};function vx(d,p){try{var A="",E=p;do A+=Fl(E),E=E.return;while(E);var R=A}catch(L){R=`
Error generating stack: `+L.message+`
`+L.stack}return{value:d,source:p,stack:R}}function yx(d,p){try{console.error(p.value)}catch(A){setTimeout(function(){throw A})}}var Ck=typeof WeakMap=="function"?WeakMap:Map;function kb(d,p,A){A=Ca(-1,A),A.tag=3,A.payload={element:null};var E=p.value;return A.callback=function(){Hm||(Hm=!0,Fx=E),yx(d,p)},A}function Ob(d,p,A){A=Ca(-1,A),A.tag=3;var E=d.type.getDerivedStateFromError;if(typeof E=="function"){var R=p.value;A.payload=function(){return E(R)},A.callback=function(){yx(d,p)}}var L=d.stateNode;return L!==null&&typeof L.componentDidCatch=="function"&&(A.callback=function(){yx(d,p),typeof E!="function"&&(yo===null?yo=new Set([this]):yo.add(this));var ie=p.stack;this.componentDidCatch(p.value,{componentStack:ie!==null?ie:""})}),A}function Gb(d,p,A){var E=d.pingCache;if(E===null){E=d.pingCache=new Ck;var R=new Set;E.set(p,R)}else R=E.get(p),R===void 0&&(R=new Set,E.set(p,R));R.has(A)||(R.add(A),d=Hk.bind(null,d,p,A),p.then(d,d))}function zb(d){do{var p;if((p=d.tag===13)&&(p=d.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return d;d=d.return}while(d!==null);return null}function Hb(d,p,A,E,R){return d.mode&1?(d.flags|=65536,d.lanes=R,d):(d===p?d.flags|=65536:(d.flags|=128,A.flags|=131072,A.flags&=-52805,A.tag===1&&(A.alternate===null?A.tag=17:(p=Ca(-1,1),p.tag=2,vo(A,p))),A.lanes|=1),d)}function oa(d){d.flags|=4}function Vb(d,p){if(d!==null&&d.child===p.child)return!0;if(p.flags&16)return!1;for(d=p.child;d!==null;){if(d.flags&12854||d.subtreeFlags&12854)return!1;d=d.sibling}return!0}var vd,yd,Tm,Cm;if(ge)vd=function(d,p){for(var A=p.child;A!==null;){if(A.tag===5||A.tag===6)j(d,A.stateNode);else if(A.tag!==4&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===p)break;for(;A.sibling===null;){if(A.return===null||A.return===p)return;A=A.return}A.sibling.return=A.return,A=A.sibling}},yd=function(){},Tm=function(d,p,A,E,R){if(d=d.memoizedProps,d!==E){var L=p.stateNode,ie=sa(as.current);A=ne(L,A,d,E,R,ie),(p.updateQueue=A)&&oa(p)}},Cm=function(d,p,A,E){A!==E&&oa(p)};else if(X){vd=function(d,p,A,E){for(var R=p.child;R!==null;){if(R.tag===5){var L=R.stateNode;A&&E&&(L=Et(L,R.type,R.memoizedProps,R)),j(d,L)}else if(R.tag===6)L=R.stateNode,A&&E&&(L=jt(L,R.memoizedProps,R)),j(d,L);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)L=R.child,L!==null&&(L.return=R),vd(d,R,!0,!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===p)break;for(;R.sibling===null;){if(R.return===null||R.return===p)return;R=R.return}R.sibling.return=R.return,R=R.sibling}};var jb=function(d,p,A,E){for(var R=p.child;R!==null;){if(R.tag===5){var L=R.stateNode;A&&E&&(L=Et(L,R.type,R.memoizedProps,R)),Ye(d,L)}else if(R.tag===6)L=R.stateNode,A&&E&&(L=jt(L,R.memoizedProps,R)),Ye(d,L);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)L=R.child,L!==null&&(L.return=R),jb(d,R,!0,!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===p)break;for(;R.sibling===null;){if(R.return===null||R.return===p)return;R=R.return}R.sibling.return=R.return,R=R.sibling}};yd=function(d,p){var A=p.stateNode;if(!Vb(d,p)){d=A.containerInfo;var E=we(d);jb(E,p,!1,!1),A.pendingChildren=E,oa(p),st(d,E)}},Tm=function(d,p,A,E,R){var L=d.stateNode,ie=d.memoizedProps;if((d=Vb(d,p))&&ie===E)p.stateNode=L;else{var me=p.stateNode,ze=sa(as.current),it=null;ie!==E&&(it=ne(me,A,ie,E,R,ze)),d&&it===null?p.stateNode=L:(L=Xe(L,it,A,ie,E,p,d,me),W(L,A,E,R,ze)&&oa(p),p.stateNode=L,d?oa(p):vd(L,p,!1,!1))}},Cm=function(d,p,A,E){A!==E?(d=sa(hu.current),A=sa(as.current),p.stateNode=de(E,d,A,p),oa(p)):p.stateNode=d.stateNode}}else yd=function(){},Tm=function(){},Cm=function(){};function xd(d,p){if(!Un)switch(d.tailMode){case"hidden":p=d.tail;for(var A=null;p!==null;)p.alternate!==null&&(A=p),p=p.sibling;A===null?d.tail=null:A.sibling=null;break;case"collapsed":A=d.tail;for(var E=null;A!==null;)A.alternate!==null&&(E=A),A=A.sibling;E===null?p||d.tail===null?d.tail=null:d.tail.sibling=null:E.sibling=null}}function Yi(d){var p=d.alternate!==null&&d.alternate.child===d.child,A=0,E=0;if(p)for(var R=d.child;R!==null;)A|=R.lanes|R.childLanes,E|=R.subtreeFlags&14680064,E|=R.flags&14680064,R.return=d,R=R.sibling;else for(R=d.child;R!==null;)A|=R.lanes|R.childLanes,E|=R.subtreeFlags,E|=R.flags,R.return=d,R=R.sibling;return d.subtreeFlags|=E,d.childLanes=A,p}function Rk(d,p,A){var E=p.pendingProps;switch(ix(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yi(p),null;case 1:return xn(p.type)&&Jt(),Yi(p),null;case 3:return E=p.stateNode,du(),pt(Pt),pt(Tt),ux(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(d===null||d.child===null)&&(cd(p)?oa(p):d===null||d.memoizedState.isDehydrated&&!(p.flags&256)||(p.flags|=1024,Rs!==null&&(Ox(Rs),Rs=null))),yd(d,p),Yi(p),null;case 5:lx(p),A=sa(hu.current);var R=p.type;if(d!==null&&p.stateNode!=null)Tm(d,p,R,E,A),d.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!E){if(p.stateNode===null)throw Error(a(166));return Yi(p),null}if(d=sa(as.current),cd(p)){if(!Re)throw Error(a(175));d=F(p.stateNode,p.type,p.memoizedProps,A,d,p,!ld),p.updateQueue=d,d!==null&&oa(p)}else{var L=O(R,E,A,d,p);vd(L,p,!1,!1),p.stateNode=L,W(L,R,E,A,d)&&oa(p)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return Yi(p),null;case 6:if(d&&p.stateNode!=null)Cm(d,p,d.memoizedProps,E);else{if(typeof E!="string"&&p.stateNode===null)throw Error(a(166));if(d=sa(hu.current),A=sa(as.current),cd(p)){if(!Re)throw Error(a(176));if(d=p.stateNode,E=p.memoizedProps,(A=Y(d,E,p,!ld))&&(R=Vr,R!==null))switch(L=(R.mode&1)!==0,R.tag){case 3:Ne(R.stateNode.containerInfo,d,E,L);break;case 5:ke(R.type,R.memoizedProps,R.stateNode,d,E,L)}A&&oa(p)}else p.stateNode=de(E,d,A,p)}return Yi(p),null;case 13:if(pt(Hn),E=p.memoizedState,Un&&jr!==null&&p.mode&1&&!(p.flags&128)){for(d=jr;d;)d=Yn(d);return cu(),p.flags|=98560,p}if(E!==null&&E.dehydrated!==null){if(E=cd(p),d===null){if(!E)throw Error(a(318));if(!Re)throw Error(a(344));if(d=p.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(a(317));he(d,p)}else cu(),!(p.flags&128)&&(p.memoizedState=null),p.flags|=4;return Yi(p),null}return Rs!==null&&(Ox(Rs),Rs=null),p.flags&128?(p.lanes=A,p):(E=E!==null,A=!1,d===null?cd(p):A=d.memoizedState!==null,E&&!A&&(p.child.flags|=8192,p.mode&1&&(d===null||Hn.current&1?xi===0&&(xi=3):zx())),p.updateQueue!==null&&(p.flags|=4),Yi(p),null);case 4:return du(),yd(d,p),d===null&&De(p.stateNode.containerInfo),Yi(p),null;case 10:return Ti(p.type._context),Yi(p),null;case 17:return xn(p.type)&&Jt(),Yi(p),null;case 19:if(pt(Hn),R=p.memoizedState,R===null)return Yi(p),null;if(E=(p.flags&128)!==0,L=R.rendering,L===null)if(E)xd(R,!1);else{if(xi!==0||d!==null&&d.flags&128)for(d=p.child;d!==null;){if(L=xm(d),L!==null){for(p.flags|=128,xd(R,!1),d=L.updateQueue,d!==null&&(p.updateQueue=d,p.flags|=4),p.subtreeFlags=0,d=A,E=p.child;E!==null;)A=E,R=d,A.flags&=14680066,L=A.alternate,L===null?(A.childLanes=0,A.lanes=R,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=L.childLanes,A.lanes=L.lanes,A.child=L.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=L.memoizedProps,A.memoizedState=L.memoizedState,A.updateQueue=L.updateQueue,A.type=L.type,R=L.dependencies,A.dependencies=R===null?null:{lanes:R.lanes,firstContext:R.firstContext}),E=E.sibling;return lt(Hn,Hn.current&1|2),p.child}d=d.sibling}R.tail!==null&&zn()>Nx&&(p.flags|=128,E=!0,xd(R,!1),p.lanes=4194304)}else{if(!E)if(d=xm(L),d!==null){if(p.flags|=128,E=!0,d=d.updateQueue,d!==null&&(p.updateQueue=d,p.flags|=4),xd(R,!0),R.tail===null&&R.tailMode==="hidden"&&!L.alternate&&!Un)return Yi(p),null}else 2*zn()-R.renderingStartTime>Nx&&A!==1073741824&&(p.flags|=128,E=!0,xd(R,!1),p.lanes=4194304);R.isBackwards?(L.sibling=p.child,p.child=L):(d=R.last,d!==null?d.sibling=L:p.child=L,R.last=L)}return R.tail!==null?(p=R.tail,R.rendering=p,R.tail=p.sibling,R.renderingStartTime=zn(),p.sibling=null,d=Hn.current,lt(Hn,E?d&1|2:d&1),p):(Yi(p),null);case 22:case 23:return Gx(),E=p.memoizedState!==null,d!==null&&d.memoizedState!==null!==E&&(p.flags|=8192),E&&p.mode&1?Xr&1073741824&&(Yi(p),ge&&p.subtreeFlags&6&&(p.flags|=8192)):Yi(p),null;case 24:return null;case 25:return null}throw Error(a(156,p.tag))}var Pk=o.ReactCurrentOwner,Wr=!1;function ur(d,p,A,E){p.child=d===null?yb(p,null,A,E):uu(p,d.child,A,E)}function Wb(d,p,A,E,R){A=A.render;var L=p.ref;return ri(p,R),E=dx(d,p,A,E,L,R),A=fx(),d!==null&&!Wr?(p.updateQueue=d.updateQueue,p.flags&=-2053,d.lanes&=~R,Ia(d,p,R)):(Un&&A&&nx(p),p.flags|=1,ur(d,p,E,R),p.child)}function Xb(d,p,A,E,R){if(d===null){var L=A.type;return typeof L=="function"&&!Hx(L)&&L.defaultProps===void 0&&A.compare===null&&A.defaultProps===void 0?(p.tag=15,p.type=L,Jb(d,p,L,E,R)):(d=Km(A.type,null,E,p,p.mode,R),d.ref=p.ref,d.return=p,p.child=d)}if(L=d.child,!(d.lanes&R)){var ie=L.memoizedProps;if(A=A.compare,A=A!==null?A:Nl,A(ie,E)&&d.ref===p.ref)return Ia(d,p,R)}return p.flags|=1,d=Ao(L,E),d.ref=p.ref,d.return=p,p.child=d}function Jb(d,p,A,E,R){if(d!==null&&Nl(d.memoizedProps,E)&&d.ref===p.ref)if(Wr=!1,(d.lanes&R)!==0)d.flags&131072&&(Wr=!0);else return p.lanes=d.lanes,Ia(d,p,R);return xx(d,p,A,E,R)}function Yb(d,p,A){var E=p.pendingProps,R=E.children,L=d!==null?d.memoizedState:null;if(E.mode==="hidden")if(!(p.mode&1))p.memoizedState={baseLanes:0,cachePool:null},lt(pu,Xr),Xr|=A;else if(A&1073741824)p.memoizedState={baseLanes:0,cachePool:null},E=L!==null?L.baseLanes:A,lt(pu,Xr),Xr|=E;else return d=L!==null?L.baseLanes|A:A,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:d,cachePool:null},p.updateQueue=null,lt(pu,Xr),Xr|=d,null;else L!==null?(E=L.baseLanes|A,p.memoizedState=null):E=A,lt(pu,Xr),Xr|=E;return ur(d,p,R,A),p.child}function Kb(d,p){var A=p.ref;(d===null&&A!==null||d!==null&&d.ref!==A)&&(p.flags|=512,p.flags|=2097152)}function xx(d,p,A,E,R){var L=xn(A)?un:Tt.current;return L=yn(p,L),ri(p,R),A=dx(d,p,A,E,L,R),E=fx(),d!==null&&!Wr?(p.updateQueue=d.updateQueue,p.flags&=-2053,d.lanes&=~R,Ia(d,p,R)):(Un&&E&&nx(p),p.flags|=1,ur(d,p,A,R),p.child)}function Qb(d,p,A,E,R){if(xn(A)){var L=!0;Ft(p)}else L=!1;if(ri(p,R),p.stateNode===null)d!==null&&(d.alternate=null,p.alternate=null,p.flags|=2),ub(p,A,E),tx(p,A,E,R),E=!0;else if(d===null){var ie=p.stateNode,me=p.memoizedProps;ie.props=me;var ze=ie.context,it=A.contextType;typeof it=="object"&&it!==null?it=si(it):(it=xn(A)?un:Tt.current,it=yn(p,it));var xt=A.getDerivedStateFromProps,Ht=typeof xt=="function"||typeof ie.getSnapshotBeforeUpdate=="function";Ht||typeof ie.UNSAFE_componentWillReceiveProps!="function"&&typeof ie.componentWillReceiveProps!="function"||(me!==E||ze!==it)&&hb(p,ie,E,it),go=!1;var Bt=p.memoizedState;ie.state=Bt,pm(p,E,ie,R),ze=p.memoizedState,me!==E||Bt!==ze||Pt.current||go?(typeof xt=="function"&&(ex(p,A,xt,E),ze=p.memoizedState),(me=go||cb(p,A,me,E,Bt,ze,it))?(Ht||typeof ie.UNSAFE_componentWillMount!="function"&&typeof ie.componentWillMount!="function"||(typeof ie.componentWillMount=="function"&&ie.componentWillMount(),typeof ie.UNSAFE_componentWillMount=="function"&&ie.UNSAFE_componentWillMount()),typeof ie.componentDidMount=="function"&&(p.flags|=4194308)):(typeof ie.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=E,p.memoizedState=ze),ie.props=E,ie.state=ze,ie.context=it,E=me):(typeof ie.componentDidMount=="function"&&(p.flags|=4194308),E=!1)}else{ie=p.stateNode,sb(d,p),me=p.memoizedProps,it=p.type===p.elementType?me:lr(p.type,me),ie.props=it,Ht=p.pendingProps,Bt=ie.context,ze=A.contextType,typeof ze=="object"&&ze!==null?ze=si(ze):(ze=xn(A)?un:Tt.current,ze=yn(p,ze));var wn=A.getDerivedStateFromProps;(xt=typeof wn=="function"||typeof ie.getSnapshotBeforeUpdate=="function")||typeof ie.UNSAFE_componentWillReceiveProps!="function"&&typeof ie.componentWillReceiveProps!="function"||(me!==Ht||Bt!==ze)&&hb(p,ie,E,ze),go=!1,Bt=p.memoizedState,ie.state=Bt,pm(p,E,ie,R);var Mt=p.memoizedState;me!==Ht||Bt!==Mt||Pt.current||go?(typeof wn=="function"&&(ex(p,A,wn,E),Mt=p.memoizedState),(it=go||cb(p,A,it,E,Bt,Mt,ze)||!1)?(xt||typeof ie.UNSAFE_componentWillUpdate!="function"&&typeof ie.componentWillUpdate!="function"||(typeof ie.componentWillUpdate=="function"&&ie.componentWillUpdate(E,Mt,ze),typeof ie.UNSAFE_componentWillUpdate=="function"&&ie.UNSAFE_componentWillUpdate(E,Mt,ze)),typeof ie.componentDidUpdate=="function"&&(p.flags|=4),typeof ie.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof ie.componentDidUpdate!="function"||me===d.memoizedProps&&Bt===d.memoizedState||(p.flags|=4),typeof ie.getSnapshotBeforeUpdate!="function"||me===d.memoizedProps&&Bt===d.memoizedState||(p.flags|=1024),p.memoizedProps=E,p.memoizedState=Mt),ie.props=E,ie.state=Mt,ie.context=ze,E=it):(typeof ie.componentDidUpdate!="function"||me===d.memoizedProps&&Bt===d.memoizedState||(p.flags|=4),typeof ie.getSnapshotBeforeUpdate!="function"||me===d.memoizedProps&&Bt===d.memoizedState||(p.flags|=1024),E=!1)}return _x(d,p,A,E,L,R)}function _x(d,p,A,E,R,L){Kb(d,p);var ie=(p.flags&128)!==0;if(!E&&!ie)return R&&Nt(p,A,!1),Ia(d,p,L);E=p.stateNode,Pk.current=p;var me=ie&&typeof A.getDerivedStateFromError!="function"?null:E.render();return p.flags|=1,d!==null&&ie?(p.child=uu(p,d.child,null,L),p.child=uu(p,null,me,L)):ur(d,p,me,L),p.memoizedState=E.state,R&&Nt(p,A,!0),p.child}function Zb(d){var p=d.stateNode;p.pendingContext?Wt(d,p.pendingContext,p.pendingContext!==p.context):p.context&&Wt(d,p.context,!1),ox(d,p.containerInfo)}function qb(d,p,A,E,R){return cu(),ax(R),p.flags|=256,ur(d,p,A,E),p.child}var Rm={dehydrated:null,treeContext:null,retryLane:0};function Pm(d){return{baseLanes:d,cachePool:null}}function $b(d,p,A){var E=p.pendingProps,R=Hn.current,L=!1,ie=(p.flags&128)!==0,me;if((me=ie)||(me=d!==null&&d.memoizedState===null?!1:(R&2)!==0),me?(L=!0,p.flags&=-129):(d===null||d.memoizedState!==null)&&(R|=1),lt(Hn,R&1),d===null)return sx(p),d=p.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?(p.mode&1?Ui(d)?p.lanes=8:p.lanes=1073741824:p.lanes=1,null):(R=E.children,d=E.fallback,L?(E=p.mode,L=p.child,R={mode:"hidden",children:R},!(E&1)&&L!==null?(L.childLanes=0,L.pendingProps=R):L=Qm(R,E,0,null),d=Wl(d,E,A,null),L.return=p,d.return=p,L.sibling=d,p.child=L,p.child.memoizedState=Pm(A),p.memoizedState=Rm,d):Sx(p,R));if(R=d.memoizedState,R!==null){if(me=R.dehydrated,me!==null){if(ie)return p.flags&256?(p.flags&=-257,Bm(d,p,A,Error(a(422)))):p.memoizedState!==null?(p.child=d.child,p.flags|=128,null):(L=E.fallback,R=p.mode,E=Qm({mode:"visible",children:E.children},R,0,null),L=Wl(L,R,A,null),L.flags|=2,E.return=p,L.return=p,E.sibling=L,p.child=E,p.mode&1&&uu(p,d.child,null,A),p.child.memoizedState=Pm(A),p.memoizedState=Rm,L);if(!(p.mode&1))p=Bm(d,p,A,null);else if(Ui(me))p=Bm(d,p,A,Error(a(419)));else if(E=(A&d.childLanes)!==0,Wr||E){if(E=hi,E!==null){switch(A&-A){case 4:L=2;break;case 16:L=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:L=32;break;case 536870912:L=268435456;break;default:L=0}E=L&(E.suspendedLanes|A)?0:L,E!==0&&E!==R.retryLane&&(R.retryLane=E,ls(d,E,-1))}zx(),p=Bm(d,p,A,Error(a(421)))}else yi(me)?(p.flags|=128,p.child=d.child,p=Vk.bind(null,d),ni(me,p),p=null):(A=R.treeContext,Re&&(jr=Ar(me),Vr=p,Un=!0,Rs=null,ld=!1,A!==null&&(rs[ss++]=Ra,rs[ss++]=Pa,rs[ss++]=Ul,Ra=A.id,Pa=A.overflow,Ul=p)),p=Sx(p,p.pendingProps.children),p.flags|=4096);return p}return L?(E=tT(d,p,E.children,E.fallback,A),L=p.child,R=d.child.memoizedState,L.memoizedState=R===null?Pm(A):{baseLanes:R.baseLanes|A,cachePool:null},L.childLanes=d.childLanes&~A,p.memoizedState=Rm,E):(A=eT(d,p,E.children,A),p.memoizedState=null,A)}return L?(E=tT(d,p,E.children,E.fallback,A),L=p.child,R=d.child.memoizedState,L.memoizedState=R===null?Pm(A):{baseLanes:R.baseLanes|A,cachePool:null},L.childLanes=d.childLanes&~A,p.memoizedState=Rm,E):(A=eT(d,p,E.children,A),p.memoizedState=null,A)}function Sx(d,p){return p=Qm({mode:"visible",children:p},d.mode,0,null),p.return=d,d.child=p}function eT(d,p,A,E){var R=d.child;return d=R.sibling,A=Ao(R,{mode:"visible",children:A}),!(p.mode&1)&&(A.lanes=E),A.return=p,A.sibling=null,d!==null&&(E=p.deletions,E===null?(p.deletions=[d],p.flags|=16):E.push(d)),p.child=A}function tT(d,p,A,E,R){var L=p.mode;d=d.child;var ie=d.sibling,me={mode:"hidden",children:A};return!(L&1)&&p.child!==d?(A=p.child,A.childLanes=0,A.pendingProps=me,p.deletions=null):(A=Ao(d,me),A.subtreeFlags=d.subtreeFlags&14680064),ie!==null?E=Ao(ie,E):(E=Wl(E,L,R,null),E.flags|=2),E.return=p,A.return=p,A.sibling=E,p.child=A,E}function Bm(d,p,A,E){return E!==null&&ax(E),uu(p,d.child,null,A),d=Sx(p,p.pendingProps.children),d.flags|=2,p.memoizedState=null,d}function nT(d,p,A){d.lanes|=p;var E=d.alternate;E!==null&&(E.lanes|=p),cr(d.return,p,A)}function Ax(d,p,A,E,R){var L=d.memoizedState;L===null?d.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:E,tail:A,tailMode:R}:(L.isBackwards=p,L.rendering=null,L.renderingStartTime=0,L.last=E,L.tail=A,L.tailMode=R)}function iT(d,p,A){var E=p.pendingProps,R=E.revealOrder,L=E.tail;if(ur(d,p,E.children,A),E=Hn.current,E&2)E=E&1|2,p.flags|=128;else{if(d!==null&&d.flags&128)e:for(d=p.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&nT(d,A,p);else if(d.tag===19)nT(d,A,p);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===p)break e;for(;d.sibling===null;){if(d.return===null||d.return===p)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}E&=1}if(lt(Hn,E),!(p.mode&1))p.memoizedState=null;else switch(R){case"forwards":for(A=p.child,R=null;A!==null;)d=A.alternate,d!==null&&xm(d)===null&&(R=A),A=A.sibling;A=R,A===null?(R=p.child,p.child=null):(R=A.sibling,A.sibling=null),Ax(p,!1,R,A,L);break;case"backwards":for(A=null,R=p.child,p.child=null;R!==null;){if(d=R.alternate,d!==null&&xm(d)===null){p.child=R;break}d=R.sibling,R.sibling=A,A=R,R=d}Ax(p,!0,A,null,L);break;case"together":Ax(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function Ia(d,p,A){if(d!==null&&(p.dependencies=d.dependencies),mu|=p.lanes,!(A&p.childLanes))return null;if(d!==null&&p.child!==d.child)throw Error(a(153));if(p.child!==null){for(d=p.child,A=Ao(d,d.pendingProps),p.child=A,A.return=p;d.sibling!==null;)d=d.sibling,A=A.sibling=Ao(d,d.pendingProps),A.return=p;A.sibling=null}return p.child}function Bk(d,p,A){switch(p.tag){case 3:Zb(p),cu();break;case 5:xb(p);break;case 1:xn(p.type)&&Ft(p);break;case 4:ox(p,p.stateNode.containerInfo);break;case 10:dm(p,p.type._context,p.memoizedProps.value);break;case 13:var E=p.memoizedState;if(E!==null)return E.dehydrated!==null?(lt(Hn,Hn.current&1),p.flags|=128,null):A&p.child.childLanes?$b(d,p,A):(lt(Hn,Hn.current&1),d=Ia(d,p,A),d!==null?d.sibling:null);lt(Hn,Hn.current&1);break;case 19:if(E=(A&p.childLanes)!==0,d.flags&128){if(E)return iT(d,p,A);p.flags|=128}var R=p.memoizedState;if(R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),lt(Hn,Hn.current),E)break;return null;case 22:case 23:return p.lanes=0,Yb(d,p,A)}return Ia(d,p,A)}function Ik(d,p){switch(ix(p),p.tag){case 1:return xn(p.type)&&Jt(),d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 3:return du(),pt(Pt),pt(Tt),ux(),d=p.flags,d&65536&&!(d&128)?(p.flags=d&-65537|128,p):null;case 5:return lx(p),null;case 13:if(pt(Hn),d=p.memoizedState,d!==null&&d.dehydrated!==null){if(p.alternate===null)throw Error(a(340));cu()}return d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 19:return pt(Hn),null;case 4:return du(),null;case 10:return Ti(p.type._context),null;case 22:case 23:return Gx(),null;case 24:return null;default:return null}}var Im=!1,Gl=!1,Lk=typeof WeakSet=="function"?WeakSet:Set,mt=null;function Lm(d,p){var A=d.ref;if(A!==null)if(typeof A=="function")try{A(null)}catch(E){br(d,p,E)}else A.current=null}function wx(d,p,A){try{A()}catch(E){br(d,p,E)}}var rT=!1;function Dk(d,p){for(J(d.containerInfo),mt=p;mt!==null;)if(d=mt,p=d.child,(d.subtreeFlags&1028)!==0&&p!==null)p.return=d,mt=p;else for(;mt!==null;){d=mt;try{var A=d.alternate;if(d.flags&1024)switch(d.tag){case 0:case 11:case 15:break;case 1:if(A!==null){var E=A.memoizedProps,R=A.memoizedState,L=d.stateNode,ie=L.getSnapshotBeforeUpdate(d.elementType===d.type?E:lr(d.type,E),R);L.__reactInternalSnapshotBeforeUpdate=ie}break;case 3:ge&&nt(d.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(me){br(d,d.return,me)}if(p=d.sibling,p!==null){p.return=d.return,mt=p;break}mt=d.return}return A=rT,rT=!1,A}function zl(d,p,A){var E=p.updateQueue;if(E=E!==null?E.lastEffect:null,E!==null){var R=E=E.next;do{if((R.tag&d)===d){var L=R.destroy;R.destroy=void 0,L!==void 0&&wx(p,A,L)}R=R.next}while(R!==E)}}function _d(d,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var A=p=p.next;do{if((A.tag&d)===d){var E=A.create;A.destroy=E()}A=A.next}while(A!==p)}}function Mx(d){var p=d.ref;if(p!==null){var A=d.stateNode;switch(d.tag){case 5:d=$(A);break;default:d=A}typeof p=="function"?p(d):p.current=d}}function sT(d,p,A){if(Gr&&typeof Gr.onCommitFiberUnmount=="function")try{Gr.onCommitFiberUnmount(Ll,p)}catch{}switch(p.tag){case 0:case 11:case 14:case 15:if(d=p.updateQueue,d!==null&&(d=d.lastEffect,d!==null)){var E=d=d.next;do{var R=E,L=R.destroy;R=R.tag,L!==void 0&&(R&2||R&4)&&wx(p,A,L),E=E.next}while(E!==d)}break;case 1:if(Lm(p,A),d=p.stateNode,typeof d.componentWillUnmount=="function")try{d.props=p.memoizedProps,d.state=p.memoizedState,d.componentWillUnmount()}catch(ie){br(p,A,ie)}break;case 5:Lm(p,A);break;case 4:ge?hT(d,p,A):X&&X&&(p=p.stateNode.containerInfo,A=we(p),at(p,A))}}function aT(d,p,A){for(var E=p;;)if(sT(d,E,A),E.child===null||ge&&E.tag===4){if(E===p)break;for(;E.sibling===null;){if(E.return===null||E.return===p)return;E=E.return}E.sibling.return=E.return,E=E.sibling}else E.child.return=E,E=E.child}function oT(d){var p=d.alternate;p!==null&&(d.alternate=null,oT(p)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(p=d.stateNode,p!==null&&Qe(p)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function lT(d){return d.tag===5||d.tag===3||d.tag===4}function cT(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||lT(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function uT(d){if(ge){e:{for(var p=d.return;p!==null;){if(lT(p))break e;p=p.return}throw Error(a(160))}var A=p;switch(A.tag){case 5:p=A.stateNode,A.flags&32&&(Ae(p),A.flags&=-33),A=cT(d),bx(d,A,p);break;case 3:case 4:p=A.stateNode.containerInfo,A=cT(d),Ex(d,A,p);break;default:throw Error(a(161))}}}function Ex(d,p,A){var E=d.tag;if(E===5||E===6)d=d.stateNode,p?Pe(A,d,p):Ke(A,d);else if(E!==4&&(d=d.child,d!==null))for(Ex(d,p,A),d=d.sibling;d!==null;)Ex(d,p,A),d=d.sibling}function bx(d,p,A){var E=d.tag;if(E===5||E===6)d=d.stateNode,p?ot(A,d,p):Le(A,d);else if(E!==4&&(d=d.child,d!==null))for(bx(d,p,A),d=d.sibling;d!==null;)bx(d,p,A),d=d.sibling}function hT(d,p,A){for(var E=p,R=!1,L,ie;;){if(!R){R=E.return;e:for(;;){if(R===null)throw Error(a(160));switch(L=R.stateNode,R.tag){case 5:ie=!1;break e;case 3:L=L.containerInfo,ie=!0;break e;case 4:L=L.containerInfo,ie=!0;break e}R=R.return}R=!0}if(E.tag===5||E.tag===6)aT(d,E,A),ie?re(L,E.stateNode):et(L,E.stateNode);else if(E.tag===18)ie?se(L,E.stateNode):ce(L,E.stateNode);else if(E.tag===4){if(E.child!==null){L=E.stateNode.containerInfo,ie=!0,E.child.return=E,E=E.child;continue}}else if(sT(d,E,A),E.child!==null){E.child.return=E,E=E.child;continue}if(E===p)break;for(;E.sibling===null;){if(E.return===null||E.return===p)return;E=E.return,E.tag===4&&(R=!1)}E.sibling.return=E.return,E=E.sibling}}function Tx(d,p){if(ge){switch(p.tag){case 0:case 11:case 14:case 15:zl(3,p,p.return),_d(3,p),zl(5,p,p.return);return;case 1:return;case 5:var A=p.stateNode;if(A!=null){var E=p.memoizedProps;d=d!==null?d.memoizedProps:E;var R=p.type,L=p.updateQueue;p.updateQueue=null,L!==null&&ct(A,L,R,d,E,p)}return;case 6:if(p.stateNode===null)throw Error(a(162));A=p.memoizedProps,We(p.stateNode,d!==null?d.memoizedProps:A,A);return;case 3:Re&&d!==null&&d.memoizedState.isDehydrated&&q(p.stateNode.containerInfo);return;case 12:return;case 13:Dm(p);return;case 19:Dm(p);return;case 17:return}throw Error(a(163))}switch(p.tag){case 0:case 11:case 14:case 15:zl(3,p,p.return),_d(3,p),zl(5,p,p.return);return;case 12:return;case 13:Dm(p);return;case 19:Dm(p);return;case 3:Re&&d!==null&&d.memoizedState.isDehydrated&&q(p.stateNode.containerInfo);break;case 22:case 23:return}e:if(X){switch(p.tag){case 1:case 5:case 6:break e;case 3:case 4:p=p.stateNode,at(p.containerInfo,p.pendingChildren);break e}throw Error(a(163))}}function Dm(d){var p=d.updateQueue;if(p!==null){d.updateQueue=null;var A=d.stateNode;A===null&&(A=d.stateNode=new Lk),p.forEach(function(E){var R=jk.bind(null,d,E);A.has(E)||(A.add(E),E.then(R,R))})}}function Nk(d,p){for(mt=p;mt!==null;){p=mt;var A=p.deletions;if(A!==null)for(var E=0;E<A.length;E++){var R=A[E];try{var L=d;ge?hT(L,R,p):aT(L,R,p);var ie=R.alternate;ie!==null&&(ie.return=null),R.return=null}catch(At){br(R,p,At)}}if(A=p.child,p.subtreeFlags&12854&&A!==null)A.return=p,mt=A;else for(;mt!==null;){p=mt;try{var me=p.flags;if(me&32&&ge&&Ae(p.stateNode),me&512){var ze=p.alternate;if(ze!==null){var it=ze.ref;it!==null&&(typeof it=="function"?it(null):it.current=null)}}if(me&8192)switch(p.tag){case 13:if(p.memoizedState!==null){var xt=p.alternate;(xt===null||xt.memoizedState===null)&&(Dx=zn())}break;case 22:var Ht=p.memoizedState!==null,Bt=p.alternate,wn=Bt!==null&&Bt.memoizedState!==null;if(A=p,ge){e:if(E=A,R=Ht,L=null,ge)for(var Mt=E;;){if(Mt.tag===5){if(L===null){L=Mt;var Ki=Mt.stateNode;R?Ge(Ki):xe(Mt.stateNode,Mt.memoizedProps)}}else if(Mt.tag===6){if(L===null){var us=Mt.stateNode;R?Ve(us):le(us,Mt.memoizedProps)}}else if((Mt.tag!==22&&Mt.tag!==23||Mt.memoizedState===null||Mt===E)&&Mt.child!==null){Mt.child.return=Mt,Mt=Mt.child;continue}if(Mt===E)break;for(;Mt.sibling===null;){if(Mt.return===null||Mt.return===E)break e;L===Mt&&(L=null),Mt=Mt.return}L===Mt&&(L=null),Mt.sibling.return=Mt.return,Mt=Mt.sibling}}if(Ht&&!wn&&A.mode&1){mt=A;for(var Ce=A.child;Ce!==null;){for(A=mt=Ce;mt!==null;){E=mt;var ve=E.child;switch(E.tag){case 0:case 11:case 14:case 15:zl(4,E,E.return);break;case 1:Lm(E,E.return);var Ue=E.stateNode;if(typeof Ue.componentWillUnmount=="function"){var gt=E.return;try{Ue.props=E.memoizedProps,Ue.state=E.memoizedState,Ue.componentWillUnmount()}catch(At){br(E,gt,At)}}break;case 5:Lm(E,E.return);break;case 22:if(E.memoizedState!==null){pT(A);continue}}ve!==null?(ve.return=E,mt=ve):pT(A)}Ce=Ce.sibling}}}switch(me&4102){case 2:uT(p),p.flags&=-3;break;case 6:uT(p),p.flags&=-3,Tx(p.alternate,p);break;case 4096:p.flags&=-4097;break;case 4100:p.flags&=-4097,Tx(p.alternate,p);break;case 4:Tx(p.alternate,p)}}catch(At){br(p,p.return,At)}if(A=p.sibling,A!==null){A.return=p.return,mt=A;break}mt=p.return}}}function Fk(d,p,A){mt=d,dT(d)}function dT(d,p,A){for(var E=(d.mode&1)!==0;mt!==null;){var R=mt,L=R.child;if(R.tag===22&&E){var ie=R.memoizedState!==null||Im;if(!ie){var me=R.alternate,ze=me!==null&&me.memoizedState!==null||Gl;me=Im;var it=Gl;if(Im=ie,(Gl=ze)&&!it)for(mt=R;mt!==null;)ie=mt,ze=ie.child,ie.tag===22&&ie.memoizedState!==null?mT(R):ze!==null?(ze.return=ie,mt=ze):mT(R);for(;L!==null;)mt=L,dT(L),L=L.sibling;mt=R,Im=me,Gl=it}fT(d)}else R.subtreeFlags&8772&&L!==null?(L.return=R,mt=L):fT(d)}}function fT(d){for(;mt!==null;){var p=mt;if(p.flags&8772){var A=p.alternate;try{if(p.flags&8772)switch(p.tag){case 0:case 11:case 15:Gl||_d(5,p);break;case 1:var E=p.stateNode;if(p.flags&4&&!Gl)if(A===null)E.componentDidMount();else{var R=p.elementType===p.type?A.memoizedProps:lr(p.type,A.memoizedProps);E.componentDidUpdate(R,A.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var L=p.updateQueue;L!==null&&ob(p,L,E);break;case 3:var ie=p.updateQueue;if(ie!==null){if(A=null,p.child!==null)switch(p.child.tag){case 5:A=$(p.child.stateNode);break;case 1:A=p.child.stateNode}ob(p,ie,A)}break;case 5:var me=p.stateNode;A===null&&p.flags&4&&Ze(me,p.type,p.memoizedProps,p);break;case 6:break;case 4:break;case 12:break;case 13:if(Re&&p.memoizedState===null){var ze=p.alternate;if(ze!==null){var it=ze.memoizedState;if(it!==null){var xt=it.dehydrated;xt!==null&&te(xt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(a(163))}Gl||p.flags&512&&Mx(p)}catch(Ht){br(p,p.return,Ht)}}if(p===d){mt=null;break}if(A=p.sibling,A!==null){A.return=p.return,mt=A;break}mt=p.return}}function pT(d){for(;mt!==null;){var p=mt;if(p===d){mt=null;break}var A=p.sibling;if(A!==null){A.return=p.return,mt=A;break}mt=p.return}}function mT(d){for(;mt!==null;){var p=mt;try{switch(p.tag){case 0:case 11:case 15:var A=p.return;try{_d(4,p)}catch(ze){br(p,A,ze)}break;case 1:var E=p.stateNode;if(typeof E.componentDidMount=="function"){var R=p.return;try{E.componentDidMount()}catch(ze){br(p,R,ze)}}var L=p.return;try{Mx(p)}catch(ze){br(p,L,ze)}break;case 5:var ie=p.return;try{Mx(p)}catch(ze){br(p,ie,ze)}}}catch(ze){br(p,p.return,ze)}if(p===d){mt=null;break}var me=p.sibling;if(me!==null){me.return=p.return,mt=me;break}mt=p.return}}var Nm=0,Fm=1,Um=2,km=3,Om=4;if(typeof Symbol=="function"&&Symbol.for){var Sd=Symbol.for;Nm=Sd("selector.component"),Fm=Sd("selector.has_pseudo_class"),Um=Sd("selector.role"),km=Sd("selector.test_id"),Om=Sd("selector.text")}function Cx(d){var p=ye(d);if(p!=null){if(typeof p.memoizedProps["data-testname"]!="string")throw Error(a(364));return p}if(d=be(d),d===null)throw Error(a(362));return d.stateNode.current}function Rx(d,p){switch(p.$$typeof){case Nm:if(d.type===p.value)return!0;break;case Fm:e:{p=p.value,d=[d,0];for(var A=0;A<d.length;){var E=d[A++],R=d[A++],L=p[R];if(E.tag!==5||!k(E)){for(;L!=null&&Rx(E,L);)R++,L=p[R];if(R===p.length){p=!0;break e}else for(E=E.child;E!==null;)d.push(E,R),E=E.sibling}}p=!1}return p;case Um:if(d.tag===5&&ue(d.stateNode,p.value))return!0;break;case Om:if((d.tag===5||d.tag===6)&&(d=V(d),d!==null&&0<=d.indexOf(p.value)))return!0;break;case km:if(d.tag===5&&(d=d.memoizedProps["data-testname"],typeof d=="string"&&d.toLowerCase()===p.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function Px(d){switch(d.$$typeof){case Nm:return"<"+(B(d.value)||"Unknown")+">";case Fm:return":has("+(Px(d)||"")+")";case Um:return'[role="'+d.value+'"]';case Om:return'"'+d.value+'"';case km:return'[data-testname="'+d.value+'"]';default:throw Error(a(365))}}function gT(d,p){var A=[];d=[d,0];for(var E=0;E<d.length;){var R=d[E++],L=d[E++],ie=p[L];if(R.tag!==5||!k(R)){for(;ie!=null&&Rx(R,ie);)L++,ie=p[L];if(L===p.length)A.push(R);else for(R=R.child;R!==null;)d.push(R,L),R=R.sibling}}return A}function Bx(d,p){if(!Je)throw Error(a(363));d=Cx(d),d=gT(d,p),p=[],d=Array.from(d);for(var A=0;A<d.length;){var E=d[A++];if(E.tag===5)k(E)||p.push(E.stateNode);else for(E=E.child;E!==null;)d.push(E),E=E.sibling}return p}var Uk=Math.ceil,Gm=o.ReactCurrentDispatcher,Ix=o.ReactCurrentOwner,ai=o.ReactCurrentBatchConfig,qt=0,hi=null,di=null,Oi=0,Xr=0,pu=Lt(0),xi=0,Ad=null,mu=0,zm=0,Lx=0,wd=null,Mr=null,Dx=0,Nx=1/0;function gu(){Nx=zn()+500}var Hm=!1,Fx=null,yo=null,Vm=!1,xo=null,jm=0,Md=0,Ux=null,Wm=-1,Xm=0;function hr(){return qt&6?zn():Wm!==-1?Wm:Wm=zn()}function _o(d){return d.mode&1?qt&2&&Oi!==0?Oi&-Oi:Dl.transition!==null?(Xm===0&&(d=wa,wa<<=1,!(wa&4194240)&&(wa=64),Xm=d),Xm):(d=en,d!==0?d:Me()):1}function ls(d,p,A){if(50<Md)throw Md=0,Ux=null,Error(a(185));var E=Jm(d,p);return E===null?null:(na(E,p,A),(!(qt&2)||E!==hi)&&(E===hi&&(!(qt&2)&&(zm|=p),xi===4&&So(E,Oi)),Er(E,A),p===1&&qt===0&&!(d.mode&1)&&(gu(),ra&&wr())),E)}function Jm(d,p){d.lanes|=p;var A=d.alternate;for(A!==null&&(A.lanes|=p),A=d,d=d.return;d!==null;)d.childLanes|=p,A=d.alternate,A!==null&&(A.childLanes|=p),A=d,d=d.return;return A.tag===3?A.stateNode:null}function Er(d,p){var A=d.callbackNode;td(d,p);var E=Bl(d,d===hi?Oi:0);if(E===0)A!==null&&ru(A),d.callbackNode=null,d.callbackPriority=0;else if(p=E&-E,d.callbackPriority!==p){if(A!=null&&ru(A),p===1)d.tag===0?od(yT.bind(null,d)):ad(yT.bind(null,d)),Ee?Oe(function(){qt===0&&wr()}):Ta(Il,wr),A=null;else{switch(nd(E)){case 1:A=Il;break;case 4:A=um;break;case 16:A=ar;break;case 536870912:A=rd;break;default:A=ar}A=TT(A,vT.bind(null,d))}d.callbackPriority=p,d.callbackNode=A}}function vT(d,p){if(Wm=-1,Xm=0,qt&6)throw Error(a(327));var A=d.callbackNode;if(jl()&&d.callbackNode!==A)return null;var E=Bl(d,d===hi?Oi:0);if(E===0)return null;if(E&30||E&d.expiredLanes||p)p=Ym(d,E);else{p=E;var R=qt;qt|=2;var L=ST();(hi!==d||Oi!==p)&&(gu(),Hl(d,p));do try{Gk();break}catch(me){_T(d,me)}while(!0);au(),Gm.current=L,qt=R,di!==null?p=0:(hi=null,Oi=0,p=xi)}if(p!==0){if(p===2&&(R=ba(d),R!==0&&(E=R,p=kx(d,R))),p===1)throw A=Ad,Hl(d,0),So(d,E),Er(d,zn()),A;if(p===6)So(d,E);else{if(R=d.current.alternate,!(E&30)&&!kk(R)&&(p=Ym(d,E),p===2&&(L=ba(d),L!==0&&(E=L,p=kx(d,L))),p===1))throw A=Ad,Hl(d,0),So(d,E),Er(d,zn()),A;switch(d.finishedWork=R,d.finishedLanes=E,p){case 0:case 1:throw Error(a(345));case 2:Vl(d,Mr);break;case 3:if(So(d,E),(E&130023424)===E&&(p=Dx+500-zn(),10<p)){if(Bl(d,0)!==0)break;if(R=d.suspendedLanes,(R&E)!==E){hr(),d.pingedLanes|=d.suspendedLanes&R;break}d.timeoutHandle=fe(Vl.bind(null,d,Mr),p);break}Vl(d,Mr);break;case 4:if(So(d,E),(E&4194240)===E)break;for(p=d.eventTimes,R=-1;0<E;){var ie=31-_n(E);L=1<<ie,ie=p[ie],ie>R&&(R=ie),E&=~L}if(E=R,E=zn()-E,E=(120>E?120:480>E?480:1080>E?1080:1920>E?1920:3e3>E?3e3:4320>E?4320:1960*Uk(E/1960))-E,10<E){d.timeoutHandle=fe(Vl.bind(null,d,Mr),E);break}Vl(d,Mr);break;case 5:Vl(d,Mr);break;default:throw Error(a(329))}}}return Er(d,zn()),d.callbackNode===A?vT.bind(null,d):null}function kx(d,p){var A=wd;return d.current.memoizedState.isDehydrated&&(Hl(d,p).flags|=256),d=Ym(d,p),d!==2&&(p=Mr,Mr=A,p!==null&&Ox(p)),d}function Ox(d){Mr===null?Mr=d:Mr.push.apply(Mr,d)}function kk(d){for(var p=d;;){if(p.flags&16384){var A=p.updateQueue;if(A!==null&&(A=A.stores,A!==null))for(var E=0;E<A.length;E++){var R=A[E],L=R.getSnapshot;R=R.value;try{if(!zr(L(),R))return!1}catch{return!1}}}if(A=p.child,p.subtreeFlags&16384&&A!==null)A.return=p,p=A;else{if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function So(d,p){for(p&=~Lx,p&=~zm,d.suspendedLanes|=p,d.pingedLanes&=~p,d=d.expirationTimes;0<p;){var A=31-_n(p),E=1<<A;d[A]=-1,p&=~E}}function yT(d){if(qt&6)throw Error(a(327));jl();var p=Bl(d,0);if(!(p&1))return Er(d,zn()),null;var A=Ym(d,p);if(d.tag!==0&&A===2){var E=ba(d);E!==0&&(p=E,A=kx(d,E))}if(A===1)throw A=Ad,Hl(d,0),So(d,p),Er(d,zn()),A;if(A===6)throw Error(a(345));return d.finishedWork=d.current.alternate,d.finishedLanes=p,Vl(d,Mr),Er(d,zn()),null}function xT(d){xo!==null&&xo.tag===0&&!(qt&6)&&jl();var p=qt;qt|=1;var A=ai.transition,E=en;try{if(ai.transition=null,en=1,d)return d()}finally{en=E,ai.transition=A,qt=p,!(qt&6)&&wr()}}function Gx(){Xr=pu.current,pt(pu)}function Hl(d,p){d.finishedWork=null,d.finishedLanes=0;var A=d.timeoutHandle;if(A!==He&&(d.timeoutHandle=He,Se(A)),di!==null)for(A=di.return;A!==null;){var E=A;switch(ix(E),E.tag){case 1:E=E.type.childContextTypes,E!=null&&Jt();break;case 3:du(),pt(Pt),pt(Tt),ux();break;case 5:lx(E);break;case 4:du();break;case 13:pt(Hn);break;case 19:pt(Hn);break;case 10:Ti(E.type._context);break;case 22:case 23:Gx()}A=A.return}if(hi=d,di=d=Ao(d.current,null),Oi=Xr=p,xi=0,Ad=null,Lx=zm=mu=0,Mr=wd=null,Hr!==null){for(p=0;p<Hr.length;p++)if(A=Hr[p],E=A.interleaved,E!==null){A.interleaved=null;var R=E.next,L=A.pending;if(L!==null){var ie=L.next;L.next=R,E.next=ie}A.pending=E}Hr=null}return d}function _T(d,p){do{var A=di;try{if(au(),_m.current=bm,Sm){for(var E=Kn.memoizedState;E!==null;){var R=E.queue;R!==null&&(R.pending=null),E=E.next}Sm=!1}if(fu=0,Ci=Xi=Kn=null,fd=!1,pd=0,Ix.current=null,A===null||A.return===null){xi=1,Ad=p,di=null;break}e:{var L=d,ie=A.return,me=A,ze=p;if(p=Oi,me.flags|=32768,ze!==null&&typeof ze=="object"&&typeof ze.then=="function"){var it=ze,xt=me,Ht=xt.tag;if(!(xt.mode&1)&&(Ht===0||Ht===11||Ht===15)){var Bt=xt.alternate;Bt?(xt.updateQueue=Bt.updateQueue,xt.memoizedState=Bt.memoizedState,xt.lanes=Bt.lanes):(xt.updateQueue=null,xt.memoizedState=null)}var wn=zb(ie);if(wn!==null){wn.flags&=-257,Hb(wn,ie,me,L,p),wn.mode&1&&Gb(L,it,p),p=wn,ze=it;var Mt=p.updateQueue;if(Mt===null){var Ki=new Set;Ki.add(ze),p.updateQueue=Ki}else Mt.add(ze);break e}else{if(!(p&1)){Gb(L,it,p),zx();break e}ze=Error(a(426))}}else if(Un&&me.mode&1){var us=zb(ie);if(us!==null){!(us.flags&65536)&&(us.flags|=256),Hb(us,ie,me,L,p),ax(ze);break e}}L=ze,xi!==4&&(xi=2),wd===null?wd=[L]:wd.push(L),ze=vx(ze,me),me=ie;do{switch(me.tag){case 3:me.flags|=65536,p&=-p,me.lanes|=p;var Ce=kb(me,ze,p);ab(me,Ce);break e;case 1:L=ze;var ve=me.type,Ue=me.stateNode;if(!(me.flags&128)&&(typeof ve.getDerivedStateFromError=="function"||Ue!==null&&typeof Ue.componentDidCatch=="function"&&(yo===null||!yo.has(Ue)))){me.flags|=65536,p&=-p,me.lanes|=p;var gt=Ob(me,L,p);ab(me,gt);break e}}me=me.return}while(me!==null)}wT(A)}catch(At){p=At,di===A&&A!==null&&(di=A=A.return);continue}break}while(!0)}function ST(){var d=Gm.current;return Gm.current=bm,d===null?bm:d}function zx(){(xi===0||xi===3||xi===2)&&(xi=4),hi===null||!(mu&268435455)&&!(zm&268435455)||So(hi,Oi)}function Ym(d,p){var A=qt;qt|=2;var E=ST();hi===d&&Oi===p||Hl(d,p);do try{Ok();break}catch(R){_T(d,R)}while(!0);if(au(),qt=A,Gm.current=E,di!==null)throw Error(a(261));return hi=null,Oi=0,xi}function Ok(){for(;di!==null;)AT(di)}function Gk(){for(;di!==null&&!id();)AT(di)}function AT(d){var p=bT(d.alternate,d,Xr);d.memoizedProps=d.pendingProps,p===null?wT(d):di=p,Ix.current=null}function wT(d){var p=d;do{var A=p.alternate;if(d=p.return,p.flags&32768){if(A=Ik(A,p),A!==null){A.flags&=32767,di=A;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{xi=6,di=null;return}}else if(A=Rk(A,p,Xr),A!==null){di=A;return}if(p=p.sibling,p!==null){di=p;return}di=p=d}while(p!==null);xi===0&&(xi=5)}function Vl(d,p){var A=en,E=ai.transition;try{ai.transition=null,en=1,zk(d,p,A)}finally{ai.transition=E,en=A}return null}function zk(d,p,A){do jl();while(xo!==null);if(qt&6)throw Error(a(327));var E=d.finishedWork,R=d.finishedLanes;if(E===null)return null;if(d.finishedWork=null,d.finishedLanes=0,E===d.current)throw Error(a(177));d.callbackNode=null,d.callbackPriority=0;var L=E.lanes|E.childLanes;if(po(d,L),d===hi&&(di=hi=null,Oi=0),!(E.subtreeFlags&2064)&&!(E.flags&2064)||Vm||(Vm=!0,TT(ar,function(){return jl(),null})),L=(E.flags&15990)!==0,E.subtreeFlags&15990||L){L=ai.transition,ai.transition=null;var ie=en;en=1;var me=qt;qt|=4,Ix.current=null,Dk(d,E),Nk(d,E),H(d.containerInfo),d.current=E,Fk(E),cm(),qt=me,en=ie,ai.transition=L}else d.current=E;if(Vm&&(Vm=!1,xo=d,jm=R),L=d.pendingLanes,L===0&&(yo=null),sd(E.stateNode),Er(d,zn()),p!==null)for(A=d.onRecoverableError,E=0;E<p.length;E++)A(p[E]);if(Hm)throw Hm=!1,d=Fx,Fx=null,d;return jm&1&&d.tag!==0&&jl(),L=d.pendingLanes,L&1?d===Ux?Md++:(Md=0,Ux=d):Md=0,wr(),null}function jl(){if(xo!==null){var d=nd(jm),p=ai.transition,A=en;try{if(ai.transition=null,en=16>d?16:d,xo===null)var E=!1;else{if(d=xo,xo=null,jm=0,qt&6)throw Error(a(331));var R=qt;for(qt|=4,mt=d.current;mt!==null;){var L=mt,ie=L.child;if(mt.flags&16){var me=L.deletions;if(me!==null){for(var ze=0;ze<me.length;ze++){var it=me[ze];for(mt=it;mt!==null;){var xt=mt;switch(xt.tag){case 0:case 11:case 15:zl(8,xt,L)}var Ht=xt.child;if(Ht!==null)Ht.return=xt,mt=Ht;else for(;mt!==null;){xt=mt;var Bt=xt.sibling,wn=xt.return;if(oT(xt),xt===it){mt=null;break}if(Bt!==null){Bt.return=wn,mt=Bt;break}mt=wn}}}var Mt=L.alternate;if(Mt!==null){var Ki=Mt.child;if(Ki!==null){Mt.child=null;do{var us=Ki.sibling;Ki.sibling=null,Ki=us}while(Ki!==null)}}mt=L}}if(L.subtreeFlags&2064&&ie!==null)ie.return=L,mt=ie;else e:for(;mt!==null;){if(L=mt,L.flags&2048)switch(L.tag){case 0:case 11:case 15:zl(9,L,L.return)}var Ce=L.sibling;if(Ce!==null){Ce.return=L.return,mt=Ce;break e}mt=L.return}}var ve=d.current;for(mt=ve;mt!==null;){ie=mt;var Ue=ie.child;if(ie.subtreeFlags&2064&&Ue!==null)Ue.return=ie,mt=Ue;else e:for(ie=ve;mt!==null;){if(me=mt,me.flags&2048)try{switch(me.tag){case 0:case 11:case 15:_d(9,me)}}catch(At){br(me,me.return,At)}if(me===ie){mt=null;break e}var gt=me.sibling;if(gt!==null){gt.return=me.return,mt=gt;break e}mt=me.return}}if(qt=R,wr(),Gr&&typeof Gr.onPostCommitFiberRoot=="function")try{Gr.onPostCommitFiberRoot(Ll,d)}catch{}E=!0}return E}finally{en=A,ai.transition=p}}return!1}function MT(d,p,A){p=vx(A,p),p=kb(d,p,1),vo(d,p),p=hr(),d=Jm(d,1),d!==null&&(na(d,1,p),Er(d,p))}function br(d,p,A){if(d.tag===3)MT(d,d,A);else for(;p!==null;){if(p.tag===3){MT(p,d,A);break}else if(p.tag===1){var E=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(yo===null||!yo.has(E))){d=vx(A,d),d=Ob(p,d,1),vo(p,d),d=hr(),p=Jm(p,1),p!==null&&(na(p,1,d),Er(p,d));break}}p=p.return}}function Hk(d,p,A){var E=d.pingCache;E!==null&&E.delete(p),p=hr(),d.pingedLanes|=d.suspendedLanes&A,hi===d&&(Oi&A)===A&&(xi===4||xi===3&&(Oi&130023424)===Oi&&500>zn()-Dx?Hl(d,0):Lx|=A),Er(d,p)}function ET(d,p){p===0&&(d.mode&1?(p=Ma,Ma<<=1,!(Ma&130023424)&&(Ma=4194304)):p=1);var A=hr();d=Jm(d,p),d!==null&&(na(d,p,A),Er(d,A))}function Vk(d){var p=d.memoizedState,A=0;p!==null&&(A=p.retryLane),ET(d,A)}function jk(d,p){var A=0;switch(d.tag){case 13:var E=d.stateNode,R=d.memoizedState;R!==null&&(A=R.retryLane);break;case 19:E=d.stateNode;break;default:throw Error(a(314))}E!==null&&E.delete(p),ET(d,A)}var bT;bT=function(d,p,A){if(d!==null)if(d.memoizedProps!==p.pendingProps||Pt.current)Wr=!0;else{if(!(d.lanes&A)&&!(p.flags&128))return Wr=!1,Bk(d,p,A);Wr=!!(d.flags&131072)}else Wr=!1,Un&&p.flags&1048576&&db(p,vm,p.index);switch(p.lanes=0,p.tag){case 2:var E=p.type;d!==null&&(d.alternate=null,p.alternate=null,p.flags|=2),d=p.pendingProps;var R=yn(p,Tt.current);ri(p,A),R=dx(null,p,E,d,R,A);var L=fx();return p.flags|=1,typeof R=="object"&&R!==null&&typeof R.render=="function"&&R.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,xn(E)?(L=!0,Ft(p)):L=!1,p.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,$y(p),R.updater=mm,p.stateNode=R,R._reactInternals=p,tx(p,E,d,A),p=_x(null,p,E,!0,L,A)):(p.tag=0,Un&&L&&nx(p),ur(null,p,R,A),p=p.child),p;case 16:E=p.elementType;e:{switch(d!==null&&(d.alternate=null,p.alternate=null,p.flags|=2),d=p.pendingProps,R=E._init,E=R(E._payload),p.type=E,R=p.tag=Xk(E),d=lr(E,d),R){case 0:p=xx(null,p,E,d,A);break e;case 1:p=Qb(null,p,E,d,A);break e;case 11:p=Wb(null,p,E,d,A);break e;case 14:p=Xb(null,p,E,lr(E.type,d),A);break e}throw Error(a(306,E,""))}return p;case 0:return E=p.type,R=p.pendingProps,R=p.elementType===E?R:lr(E,R),xx(d,p,E,R,A);case 1:return E=p.type,R=p.pendingProps,R=p.elementType===E?R:lr(E,R),Qb(d,p,E,R,A);case 3:e:{if(Zb(p),d===null)throw Error(a(387));E=p.pendingProps,L=p.memoizedState,R=L.element,sb(d,p),pm(p,E,null,A);var ie=p.memoizedState;if(E=ie.element,Re&&L.isDehydrated)if(L={element:E,isDehydrated:!1,cache:ie.cache,transitions:ie.transitions},p.updateQueue.baseState=L,p.memoizedState=L,p.flags&256){R=Error(a(423)),p=qb(d,p,E,A,R);break e}else if(E!==R){R=Error(a(424)),p=qb(d,p,E,A,R);break e}else for(Re&&(jr=Gn(p.stateNode.containerInfo),Vr=p,Un=!0,Rs=null,ld=!1),A=yb(p,null,E,A),p.child=A;A;)A.flags=A.flags&-3|4096,A=A.sibling;else{if(cu(),E===R){p=Ia(d,p,A);break e}ur(d,p,E,A)}p=p.child}return p;case 5:return xb(p),d===null&&sx(p),E=p.type,R=p.pendingProps,L=d!==null?d.memoizedProps:null,ie=R.children,ae(E,R)?ie=null:L!==null&&ae(E,L)&&(p.flags|=32),Kb(d,p),ur(d,p,ie,A),p.child;case 6:return d===null&&sx(p),null;case 13:return $b(d,p,A);case 4:return ox(p,p.stateNode.containerInfo),E=p.pendingProps,d===null?p.child=uu(p,null,E,A):ur(d,p,E,A),p.child;case 11:return E=p.type,R=p.pendingProps,R=p.elementType===E?R:lr(E,R),Wb(d,p,E,R,A);case 7:return ur(d,p,p.pendingProps,A),p.child;case 8:return ur(d,p,p.pendingProps.children,A),p.child;case 12:return ur(d,p,p.pendingProps.children,A),p.child;case 10:e:{if(E=p.type._context,R=p.pendingProps,L=p.memoizedProps,ie=R.value,dm(p,E,ie),L!==null)if(zr(L.value,ie)){if(L.children===R.children&&!Pt.current){p=Ia(d,p,A);break e}}else for(L=p.child,L!==null&&(L.return=p);L!==null;){var me=L.dependencies;if(me!==null){ie=L.child;for(var ze=me.firstContext;ze!==null;){if(ze.context===E){if(L.tag===1){ze=Ca(-1,A&-A),ze.tag=2;var it=L.updateQueue;if(it!==null){it=it.shared;var xt=it.pending;xt===null?ze.next=ze:(ze.next=xt.next,xt.next=ze),it.pending=ze}}L.lanes|=A,ze=L.alternate,ze!==null&&(ze.lanes|=A),cr(L.return,A,p),me.lanes|=A;break}ze=ze.next}}else if(L.tag===10)ie=L.type===p.type?null:L.child;else if(L.tag===18){if(ie=L.return,ie===null)throw Error(a(341));ie.lanes|=A,me=ie.alternate,me!==null&&(me.lanes|=A),cr(ie,A,p),ie=L.sibling}else ie=L.child;if(ie!==null)ie.return=L;else for(ie=L;ie!==null;){if(ie===p){ie=null;break}if(L=ie.sibling,L!==null){L.return=ie.return,ie=L;break}ie=ie.return}L=ie}ur(d,p,R.children,A),p=p.child}return p;case 9:return R=p.type,E=p.pendingProps.children,ri(p,A),R=si(R),E=E(R),p.flags|=1,ur(d,p,E,A),p.child;case 14:return E=p.type,R=lr(E,p.pendingProps),R=lr(E.type,R),Xb(d,p,E,R,A);case 15:return Jb(d,p,p.type,p.pendingProps,A);case 17:return E=p.type,R=p.pendingProps,R=p.elementType===E?R:lr(E,R),d!==null&&(d.alternate=null,p.alternate=null,p.flags|=2),p.tag=1,xn(E)?(d=!0,Ft(p)):d=!1,ri(p,A),ub(p,E,R),tx(p,E,R,A),_x(null,p,E,!0,d,A);case 19:return iT(d,p,A);case 22:return Yb(d,p,A)}throw Error(a(156,p.tag))};function TT(d,p){return Ta(d,p)}function Wk(d,p,A,E){this.tag=d,this.key=A,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cs(d,p,A,E){return new Wk(d,p,A,E)}function Hx(d){return d=d.prototype,!(!d||!d.isReactComponent)}function Xk(d){if(typeof d=="function")return Hx(d)?1:0;if(d!=null){if(d=d.$$typeof,d===y)return 11;if(d===_)return 14}return 2}function Ao(d,p){var A=d.alternate;return A===null?(A=cs(d.tag,p,d.key,d.mode),A.elementType=d.elementType,A.type=d.type,A.stateNode=d.stateNode,A.alternate=d,d.alternate=A):(A.pendingProps=p,A.type=d.type,A.flags=0,A.subtreeFlags=0,A.deletions=null),A.flags=d.flags&14680064,A.childLanes=d.childLanes,A.lanes=d.lanes,A.child=d.child,A.memoizedProps=d.memoizedProps,A.memoizedState=d.memoizedState,A.updateQueue=d.updateQueue,p=d.dependencies,A.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},A.sibling=d.sibling,A.index=d.index,A.ref=d.ref,A}function Km(d,p,A,E,R,L){var ie=2;if(E=d,typeof d=="function")Hx(d)&&(ie=1);else if(typeof d=="string")ie=5;else e:switch(d){case u:return Wl(A.children,R,L,p);case h:ie=8,R|=8;break;case f:return d=cs(12,A,p,R|2),d.elementType=f,d.lanes=L,d;case x:return d=cs(13,A,p,R),d.elementType=x,d.lanes=L,d;case v:return d=cs(19,A,p,R),d.elementType=v,d.lanes=L,d;case M:return Qm(A,R,L,p);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case m:ie=10;break e;case g:ie=9;break e;case y:ie=11;break e;case _:ie=14;break e;case S:ie=16,E=null;break e}throw Error(a(130,d==null?d:typeof d,""))}return p=cs(ie,A,p,R),p.elementType=d,p.type=E,p.lanes=L,p}function Wl(d,p,A,E){return d=cs(7,d,E,p),d.lanes=A,d}function Qm(d,p,A,E){return d=cs(22,d,E,p),d.elementType=M,d.lanes=A,d.stateNode={},d}function Vx(d,p,A){return d=cs(6,d,null,p),d.lanes=A,d}function jx(d,p,A){return p=cs(4,d.children!==null?d.children:[],d.key,p),p.lanes=A,p.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},p}function Jk(d,p,A,E,R){this.tag=p,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=He,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=iu(0),this.expirationTimes=iu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=iu(0),this.identifierPrefix=E,this.onRecoverableError=R,Re&&(this.mutableSourceEagerHydrationData=null)}function CT(d,p,A,E,R,L,ie,me,ze){return d=new Jk(d,p,A,me,ze),p===1?(p=1,L===!0&&(p|=8)):p=0,L=cs(3,null,null,p),d.current=L,L.stateNode=d,L.memoizedState={element:E,isDehydrated:A,cache:null,transitions:null},$y(L),d}function RT(d){if(!d)return Ot;d=d._reactInternals;e:{if(T(d)!==d||d.tag!==1)throw Error(a(170));var p=d;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(xn(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(a(171))}if(d.tag===1){var A=d.type;if(xn(A))return An(d,A,p)}return p}function PT(d){var p=d._reactInternals;if(p===void 0)throw typeof d.render=="function"?Error(a(188)):(d=Object.keys(d).join(","),Error(a(268,d)));return d=G(p),d===null?null:d.stateNode}function BT(d,p){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var A=d.retryLane;d.retryLane=A!==0&&A<p?A:p}}function Wx(d,p){BT(d,p),(d=d.alternate)&&BT(d,p)}function Yk(d){return d=G(d),d===null?null:d.stateNode}function Kk(){return null}return n.attemptContinuousHydration=function(d){if(d.tag===13){var p=hr();ls(d,134217728,p),Wx(d,134217728)}},n.attemptHydrationAtCurrentPriority=function(d){if(d.tag===13){var p=hr(),A=_o(d);ls(d,A,p),Wx(d,A)}},n.attemptSynchronousHydration=function(d){switch(d.tag){case 3:var p=d.stateNode;if(p.current.memoizedState.isDehydrated){var A=Ea(p.pendingLanes);A!==0&&(ia(p,A|1),Er(p,zn()),!(qt&6)&&(gu(),wr()))}break;case 13:var E=hr();xT(function(){return ls(d,1,E)}),Wx(d,1)}},n.batchedUpdates=function(d,p){var A=qt;qt|=1;try{return d(p)}finally{qt=A,qt===0&&(gu(),ra&&wr())}},n.createComponentSelector=function(d){return{$$typeof:Nm,value:d}},n.createContainer=function(d,p,A,E,R,L,ie){return CT(d,p,!1,null,A,E,R,L,ie)},n.createHasPseudoClassSelector=function(d){return{$$typeof:Fm,value:d}},n.createHydrationContainer=function(d,p,A,E,R,L,ie,me,ze){return d=CT(A,E,!0,d,R,L,ie,me,ze),d.context=RT(null),A=d.current,E=hr(),R=_o(A),L=Ca(E,R),L.callback=p??null,vo(A,L),d.current.lanes=R,na(d,R,E),Er(d,E),d},n.createPortal=function(d,p,A){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:E==null?null:""+E,children:d,containerInfo:p,implementation:A}},n.createRoleSelector=function(d){return{$$typeof:Um,value:d}},n.createTestNameSelector=function(d){return{$$typeof:km,value:d}},n.createTextSelector=function(d){return{$$typeof:Om,value:d}},n.deferredUpdates=function(d){var p=en,A=ai.transition;try{return ai.transition=null,en=16,d()}finally{en=p,ai.transition=A}},n.discreteUpdates=function(d,p,A,E,R){var L=en,ie=ai.transition;try{return ai.transition=null,en=1,d(p,A,E,R)}finally{en=L,ai.transition=ie,qt===0&&gu()}},n.findAllNodes=Bx,n.findBoundingRects=function(d,p){if(!Je)throw Error(a(363));p=Bx(d,p),d=[];for(var A=0;A<p.length;A++)d.push(rt(p[A]));for(p=d.length-1;0<p;p--){A=d[p];for(var E=A.x,R=E+A.width,L=A.y,ie=L+A.height,me=p-1;0<=me;me--)if(p!==me){var ze=d[me],it=ze.x,xt=it+ze.width,Ht=ze.y,Bt=Ht+ze.height;if(E>=it&&L>=Ht&&R<=xt&&ie<=Bt){d.splice(p,1);break}else if(E!==it||A.width!==ze.width||Bt<L||Ht>ie){if(!(L!==Ht||A.height!==ze.height||xt<E||it>R)){it>E&&(ze.width+=it-E,ze.x=E),xt<R&&(ze.width=R-it),d.splice(p,1);break}}else{Ht>L&&(ze.height+=Ht-L,ze.y=L),Bt<ie&&(ze.height=ie-Ht),d.splice(p,1);break}}}return d},n.findHostInstance=PT,n.findHostInstanceWithNoPortals=function(d){return d=z(d),d=d!==null?U(d):null,d===null?null:d.stateNode},n.findHostInstanceWithWarning=function(d){return PT(d)},n.flushControlled=function(d){var p=qt;qt|=1;var A=ai.transition,E=en;try{ai.transition=null,en=1,d()}finally{en=E,ai.transition=A,qt=p,qt===0&&(gu(),wr())}},n.flushPassiveEffects=jl,n.flushSync=xT,n.focusWithin=function(d,p){if(!Je)throw Error(a(363));for(d=Cx(d),p=gT(d,p),p=Array.from(p),d=0;d<p.length;){var A=p[d++];if(!k(A)){if(A.tag===5&&je(A.stateNode))return!0;for(A=A.child;A!==null;)p.push(A),A=A.sibling}}return!1},n.getCurrentUpdatePriority=function(){return en},n.getFindAllNodesFailureDescription=function(d,p){if(!Je)throw Error(a(363));var A=0,E=[];d=[Cx(d),0];for(var R=0;R<d.length;){var L=d[R++],ie=d[R++],me=p[ie];if((L.tag!==5||!k(L))&&(Rx(L,me)&&(E.push(Px(me)),ie++,ie>A&&(A=ie)),ie<p.length))for(L=L.child;L!==null;)d.push(L,ie),L=L.sibling}if(A<p.length){for(d=[];A<p.length;A++)d.push(Px(p[A]));return`findAllNodes was able to match part of the selector:
  `+(E.join(" > ")+`

No matching component was found for:
  `)+d.join(" > ")}return null},n.getPublicRootInstance=function(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return $(d.child.stateNode);default:return d.child.stateNode}},n.injectIntoDevTools=function(d){if(d={bundleType:d.bundleType,version:d.version,rendererPackageName:d.rendererPackageName,rendererConfig:d.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:Yk,findFiberByHostInstance:d.findFiberByHostInstance||Kk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")d=!1;else{var p=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(p.isDisabled||!p.supportsFiber)d=!0;else{try{Ll=p.inject(d),Gr=p}catch{}d=!!p.checkDCE}}return d},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(d,p,A,E){if(!Je)throw Error(a(363));d=Bx(d,p);var R=_e(d,A,E).disconnect;return{disconnect:function(){R()}}},n.registerMutableSourceForHydration=function(d,p){var A=p._getVersion;A=A(p._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[p,A]:d.mutableSourceEagerHydrationData.push(p,A)},n.runWithPriority=function(d,p){var A=en;try{return en=d,p()}finally{en=A}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(d,p,A,E){var R=p.current,L=hr(),ie=_o(R);return A=RT(A),p.context===null?p.context=A:p.pendingContext=A,p=Ca(L,ie),p.payload={element:d},E=E===void 0?null:E,E!==null&&(p.callback=E),vo(R,p),d=ls(R,ie,L),d!==null&&fm(d,R,ie),ie},n};zF.exports=qY;var $Y=zF.exports;const eK=kB($Y),bE={},Vy=t=>void Object.assign(bE,t);function tK(t,e){function n(u,{args:h=[],attach:f,...m},g){let y=`${u[0].toUpperCase()}${u.slice(1)}`,x;if(u==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const v=m.object;x=Hu(v,{type:u,root:g,attach:f,primitive:!0})}else{const v=bE[y];if(!v)throw new Error(`R3F: ${y} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(h))throw new Error("R3F: The args prop must be an array!");x=Hu(new v(...h),{type:u,root:g,attach:f,memoizedProps:{args:h}})}return x.__r3f.attach===void 0&&(x.isBufferGeometry?x.__r3f.attach="geometry":x.isMaterial&&(x.__r3f.attach="material")),y!=="inject"&&y_(x,m),x}function i(u,h){let f=!1;if(h){var m,g;(m=h.__r3f)!=null&&m.attach?v_(u,h,h.__r3f.attach):h.isObject3D&&u.isObject3D&&(u.add(h),f=!0),f||(g=u.__r3f)==null||g.objects.push(h),h.__r3f||Hu(h,{}),h.__r3f.parent=u,GA(h),Vu(h)}}function r(u,h,f){let m=!1;if(h){var g,y;if((g=h.__r3f)!=null&&g.attach)v_(u,h,h.__r3f.attach);else if(h.isObject3D&&u.isObject3D){h.parent=u,h.dispatchEvent({type:"added"}),u.dispatchEvent({type:"childadded",child:h});const x=u.children.filter(_=>_!==h),v=x.indexOf(f);u.children=[...x.slice(0,v),h,...x.slice(v)],m=!0}m||(y=u.__r3f)==null||y.objects.push(h),h.__r3f||Hu(h,{}),h.__r3f.parent=u,GA(h),Vu(h)}}function s(u,h,f=!1){u&&[...u].forEach(m=>a(h,m,f))}function a(u,h,f){if(h){var m,g,y;if(h.__r3f&&(h.__r3f.parent=null),(m=u.__r3f)!=null&&m.objects&&(u.__r3f.objects=u.__r3f.objects.filter(M=>M!==h)),(g=h.__r3f)!=null&&g.attach)RP(u,h,h.__r3f.attach);else if(h.isObject3D&&u.isObject3D){var x;u.remove(h),(x=h.__r3f)!=null&&x.root&&lK(Xv(h),h)}const _=(y=h.__r3f)==null?void 0:y.primitive,S=!_&&(f===void 0?h.dispose!==null:f);if(!_){var v;s((v=h.__r3f)==null?void 0:v.objects,h,S),s(h.children,h,S)}if(delete h.__r3f,S&&h.dispose&&h.type!=="Scene"){const M=()=>{try{h.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?kA.unstable_scheduleCallback(kA.unstable_IdlePriority,M):M()}Vu(u)}}function o(u,h,f,m){var g;const y=(g=u.__r3f)==null?void 0:g.parent;if(!y)return;const x=n(h,f,u.__r3f.root);if(u.children){for(const v of u.children)v.__r3f&&i(x,v);u.children=u.children.filter(v=>!v.__r3f)}u.__r3f.objects.forEach(v=>i(x,v)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||a(y,u),x.parent&&(x.__r3f.autoRemovedBeforeAppend=!0),i(y,x),x.raycast&&x.__r3f.eventCount&&Xv(x).getState().internal.interaction.push(x),[m,m.alternate].forEach(v=>{v!==null&&(v.stateNode=x,v.ref&&(typeof v.ref=="function"?v.ref(x):v.ref.current=x))})}const l=()=>{};return{reconciler:eK({createInstance:n,removeChild:a,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,h)=>{if(!h)return;const f=u.getState().scene;f.__r3f&&(f.__r3f.root=u,i(f,h))},removeChildFromContainer:(u,h)=>{h&&a(u.getState().scene,h)},insertInContainerBefore:(u,h,f)=>{if(!h||!f)return;const m=u.getState().scene;m.__r3f&&r(m,h,f)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var h;return!!((h=u==null?void 0:u.__r3f)!=null?h:{}).handlers},prepareUpdate(u,h,f,m){var g;if(((g=u==null?void 0:u.__r3f)!=null?g:{}).primitive&&m.object&&m.object!==u)return[!0];{const{args:x=[],children:v,..._}=m,{args:S=[],children:M,...b}=f;if(!Array.isArray(x))throw new Error("R3F: the args prop must be an array!");if(x.some((B,P)=>B!==S[P]))return[!0];const C=QF(u,_,b,!0);return C.changes.length?[!1,C]:null}},commitUpdate(u,[h,f],m,g,y,x){h?o(u,m,y,x):y_(u,f)},commitMount(u,h,f,m){var g;const y=(g=u.__r3f)!=null?g:{};u.raycast&&y.handlers&&y.eventCount&&Xv(u).getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>Hu(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var h;const{attach:f,parent:m}=(h=u.__r3f)!=null?h:{};f&&m&&RP(m,u,f),u.isObject3D&&(u.visible=!1),Vu(u)},unhideInstance(u,h){var f;const{attach:m,parent:g}=(f=u.__r3f)!=null?f:{};m&&g&&v_(g,u,m),(u.isObject3D&&h.visible==null||h.visible)&&(u.visible=!0),Vu(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():ch.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Tn.fun(performance.now)?performance.now:Tn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Tn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Tn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:y_}}var EP,bP;const g_=t=>"colorSpace"in t||"outputColorSpace"in t,jF=()=>{var t;return(t=bE.ColorManagement)!=null?t:null},WF=t=>t&&t.isOrthographicCamera,nK=t=>t&&t.hasOwnProperty("current"),tm=typeof window<"u"&&((EP=window.document)!=null&&EP.createElement||((bP=window.navigator)==null?void 0:bP.product)==="ReactNative")?D.useLayoutEffect:D.useEffect;function XF(t){const e=D.useRef(t);return tm(()=>void(e.current=t),[t]),e}function iK({set:t}){return tm(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}class JF extends D.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}JF.getDerivedStateFromError=()=>({error:!0});const YF="__default",TP=new Map,rK=t=>t&&!!t.memoized&&!!t.changes;function KF(t){var e;const n=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}const Jd=t=>{var e;return(e=t.__r3f)==null?void 0:e.root.getState()};function Xv(t){let e=t.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Tn={obj:t=>t===Object(t)&&!Tn.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:i="reference",strict:r=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(Tn.str(t)||Tn.num(t)||Tn.boo(t))return t===e;const s=Tn.obj(t);if(s&&i==="reference")return t===e;const a=Tn.arr(t);if(a&&n==="reference")return t===e;if((a||s)&&t===e)return!0;let o;for(o in t)if(!(o in e))return!1;if(s&&n==="shallow"&&i==="shallow"){for(o in r?e:t)if(!Tn.equ(t[o],e[o],{strict:r,objects:"reference"}))return!1}else for(o in r?e:t)if(t[o]!==e[o])return!1;if(Tn.und(o)){if(a&&t.length===0&&e.length===0||s&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function sK(t){const e={nodes:{},materials:{}};return t&&t.traverse(n=>{n.name&&(e.nodes[n.name]=n),n.material&&!e.materials[n.material.name]&&(e.materials[n.material.name]=n.material)}),e}function aK(t){t.dispose&&t.type!=="Scene"&&t.dispose();for(const e in t)e.dispose==null||e.dispose(),delete t[e]}function Hu(t,e){const n=t;return n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},t}function OA(t,e){let n=t;if(e.includes("-")){const i=e.split("-"),r=i.pop();return n=i.reduce((s,a)=>s[a],t),{target:n,key:r}}else return{target:n,key:e}}const CP=/-\d+$/;function v_(t,e,n){if(Tn.str(n)){if(CP.test(n)){const s=n.replace(CP,""),{target:a,key:o}=OA(t,s);Array.isArray(a[o])||(a[o]=[])}const{target:i,key:r}=OA(t,n);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=n(t,e)}function RP(t,e,n){var i,r;if(Tn.str(n)){const{target:s,key:a}=OA(t,n),o=e.__r3f.previousAttach;o===void 0?delete s[a]:s[a]=o}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(t,e);(r=e.__r3f)==null||delete r.previousAttach}function QF(t,{children:e,key:n,ref:i,...r},{children:s,key:a,ref:o,...l}={},c=!1){const u=t.__r3f,h=Object.entries(r),f=[];if(c){const g=Object.keys(l);for(let y=0;y<g.length;y++)r.hasOwnProperty(g[y])||h.unshift([g[y],YF+"remove"])}h.forEach(([g,y])=>{var x;if((x=t.__r3f)!=null&&x.primitive&&g==="object"||Tn.equ(y,l[g]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(g))return f.push([g,y,!0,[]]);let v=[];g.includes("-")&&(v=g.split("-")),f.push([g,y,!1,v]);for(const _ in r){const S=r[_];_.startsWith(`${g}-`)&&f.push([_,S,!1,_.split("-")])}});const m={...r};return u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.args&&(m.args=u.memoizedProps.args),u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.attach&&(m.attach=u.memoizedProps.attach),{memoized:m,changes:f}}function y_(t,e){var n;const i=t.__r3f,r=i==null?void 0:i.root,s=r==null||r.getState==null?void 0:r.getState(),{memoized:a,changes:o}=rK(e)?e:QF(t,e),l=i==null?void 0:i.eventCount;t.__r3f&&(t.__r3f.memoizedProps=a);for(let f=0;f<o.length;f++){let[m,g,y,x]=o[f];if(g_(t)){const M="srgb",b="srgb-linear";m==="encoding"?(m="colorSpace",g=g===3001?M:b):m==="outputEncoding"&&(m="outputColorSpace",g=g===3001?M:b)}let v=t,_=v[m];if(x.length&&(_=x.reduce((S,M)=>S[M],t),!(_&&_.set))){const[S,...M]=x.reverse();v=M.reverse().reduce((b,C)=>b[C],t),m=S}if(g===YF+"remove")if(v.constructor){let S=TP.get(v.constructor);S||(S=new v.constructor,TP.set(v.constructor,S)),g=S[m]}else g=0;if(y&&i)g?i.handlers[m]=g:delete i.handlers[m],i.eventCount=Object.keys(i.handlers).length;else if(_&&_.set&&(_.copy||_ instanceof Lc)){if(Array.isArray(g))_.fromArray?_.fromArray(g):_.set(...g);else if(_.copy&&g&&g.constructor&&_.constructor===g.constructor)_.copy(g);else if(g!==void 0){var c;const S=(c=_)==null?void 0:c.isColor;!S&&_.setScalar?_.setScalar(g):_ instanceof Lc&&g instanceof Lc?_.mask=g.mask:_.set(g),!jF()&&s&&!s.linear&&S&&_.convertSRGBToLinear()}}else{var u;if(v[m]=g,(u=v[m])!=null&&u.isTexture&&v[m].format===gi&&v[m].type===vi&&s){const S=v[m];g_(S)&&g_(s.gl)?S.colorSpace=s.gl.outputColorSpace:S.encoding=s.gl.outputEncoding}}Vu(t)}if(i&&i.parent&&t.raycast&&l!==i.eventCount){const f=Xv(t).getState().internal,m=f.interaction.indexOf(t);m>-1&&f.interaction.splice(m,1),i.eventCount&&f.interaction.push(t)}return!(o.length===1&&o[0][0]==="onUpdate")&&o.length&&(n=t.__r3f)!=null&&n.parent&&GA(t),t}function Vu(t){var e,n;const i=(e=t.__r3f)==null||(n=e.root)==null||n.getState==null?void 0:n.getState();i&&i.internal.frames===0&&i.invalidate()}function GA(t){t.onUpdate==null||t.onUpdate(t)}function ZF(t,e){t.manual||(WF(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function hv(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function oK(){var t;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return ch.DefaultEventPriority;switch((t=e.event)==null?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return ch.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return ch.ContinuousEventPriority;default:return ch.DefaultEventPriority}}function qF(t,e,n,i){const r=n.get(e);r&&(n.delete(e),n.size===0&&(t.delete(i),r.target.releasePointerCapture(i)))}function lK(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(i=>i!==e),n.initialHits=n.initialHits.filter(i=>i!==e),n.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&n.hovered.delete(r)}),n.capturedMap.forEach((i,r)=>{qF(n.capturedMap,e,i,r)})}function cK(t){function e(l){const{internal:c}=t.getState(),u=l.offsetX-c.initialClick[0],h=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+h*h))}function n(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var h;return(h=c.__r3f)==null?void 0:h.handlers["onPointer"+u]}))}function i(l,c){const u=t.getState(),h=new Set,f=[],m=c?c(u.internal.interaction):u.internal.interaction;for(let v=0;v<m.length;v++){const _=Jd(m[v]);_&&(_.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function g(v){const _=Jd(v);if(!_||!_.events.enabled||_.raycaster.camera===null)return[];if(_.raycaster.camera===void 0){var S;_.events.compute==null||_.events.compute(l,_,(S=_.previousRoot)==null?void 0:S.getState()),_.raycaster.camera===void 0&&(_.raycaster.camera=null)}return _.raycaster.camera?_.raycaster.intersectObject(v,!0):[]}let y=m.flatMap(g).sort((v,_)=>{const S=Jd(v.object),M=Jd(_.object);return!S||!M?v.distance-_.distance:M.events.priority-S.events.priority||v.distance-_.distance}).filter(v=>{const _=hv(v);return h.has(_)?!1:(h.add(_),!0)});u.events.filter&&(y=u.events.filter(y,u));for(const v of y){let _=v.object;for(;_;){var x;(x=_.__r3f)!=null&&x.eventCount&&f.push({...v,eventObject:_}),_=_.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let v of u.internal.capturedMap.get(l.pointerId).values())h.has(hv(v.intersection))||f.push(v.intersection);return f}function r(l,c,u,h){const f=t.getState();if(l.length){const m={stopped:!1};for(const g of l){const y=Jd(g.object)||f,{raycaster:x,pointer:v,camera:_,internal:S}=y,M=new K(v.x,v.y,0).unproject(_),b=I=>{var z,G;return(z=(G=S.capturedMap.get(I))==null?void 0:G.has(g.eventObject))!=null?z:!1},C=I=>{const z={intersection:g,target:c.target};S.capturedMap.has(I)?S.capturedMap.get(I).set(g.eventObject,z):S.capturedMap.set(I,new Map([[g.eventObject,z]])),c.target.setPointerCapture(I)},B=I=>{const z=S.capturedMap.get(I);z&&qF(S.capturedMap,g.eventObject,z,I)};let P={};for(let I in c){let z=c[I];typeof z!="function"&&(P[I]=z)}let T={...g,...P,pointer:v,intersections:l,stopped:m.stopped,delta:u,unprojectedPoint:M,ray:x.ray,camera:_,stopPropagation(){const I="pointerId"in c&&S.capturedMap.get(c.pointerId);if((!I||I.has(g.eventObject))&&(T.stopped=m.stopped=!0,S.hovered.size&&Array.from(S.hovered.values()).find(z=>z.eventObject===g.eventObject))){const z=l.slice(0,l.indexOf(g));s([...z,g])}},target:{hasPointerCapture:b,setPointerCapture:C,releasePointerCapture:B},currentTarget:{hasPointerCapture:b,setPointerCapture:C,releasePointerCapture:B},nativeEvent:c};if(h(T),m.stopped===!0)break}}return l}function s(l){const{internal:c}=t.getState();for(const u of c.hovered.values())if(!l.length||!l.find(h=>h.object===u.object&&h.index===u.index&&h.instanceId===u.instanceId)){const f=u.eventObject.__r3f,m=f==null?void 0:f.handlers;if(c.hovered.delete(hv(u)),f!=null&&f.eventCount){const g={...u,intersections:l};m.onPointerOut==null||m.onPointerOut(g),m.onPointerLeave==null||m.onPointerLeave(g)}}}function a(l,c){for(let u=0;u<c.length;u++){const h=c[u].__r3f;h==null||h.handlers.onPointerMissed==null||h.handlers.onPointerMissed(l)}}function o(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:u}=t.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),s([]))})}}return function(u){const{onPointerMissed:h,internal:f}=t.getState();f.lastEvent.current=u;const m=l==="onPointerMove",g=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",x=i(u,m?n:void 0),v=g?e(u):0;l==="onPointerDown"&&(f.initialClick=[u.offsetX,u.offsetY],f.initialHits=x.map(S=>S.eventObject)),g&&!x.length&&v<=2&&(a(u,f.interaction),h&&h(u)),m&&s(x);function _(S){const M=S.eventObject,b=M.__r3f,C=b==null?void 0:b.handlers;if(b!=null&&b.eventCount)if(m){if(C.onPointerOver||C.onPointerEnter||C.onPointerOut||C.onPointerLeave){const B=hv(S),P=f.hovered.get(B);P?P.stopped&&S.stopPropagation():(f.hovered.set(B,S),C.onPointerOver==null||C.onPointerOver(S),C.onPointerEnter==null||C.onPointerEnter(S))}C.onPointerMove==null||C.onPointerMove(S)}else{const B=C[l];B?(!g||f.initialHits.includes(M))&&(a(u,f.interaction.filter(P=>!f.initialHits.includes(P))),B(S)):g&&f.initialHits.includes(M)&&a(u,f.interaction.filter(P=>!f.initialHits.includes(P)))}}r(x,u,v,_)}}return{handlePointer:o}}const uK=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],$F=t=>!!(t!=null&&t.render),TE=D.createContext(null),hK=(t,e)=>{const n=UF((o,l)=>{const c=new K,u=new K,h=new K;function f(v=l().camera,_=u,S=l().size){const{width:M,height:b,top:C,left:B}=S,P=M/b;_.isVector3?h.copy(_):h.set(..._);const T=v.getWorldPosition(c).distanceTo(h);if(WF(v))return{width:M/v.zoom,height:b/v.zoom,top:C,left:B,factor:1,distance:T,aspect:P};{const I=v.fov*Math.PI/180,z=2*Math.tan(I/2)*T,G=z*(M/b);return{width:G,height:z,top:C,left:B,factor:M/G,distance:T,aspect:P}}}let m;const g=v=>o(_=>({performance:{..._.performance,current:v}})),y=new Ie;return{set:o,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(v=1)=>t(l(),v),advance:(v,_)=>e(v,_,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new AE,pointer:y,mouse:y,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const v=l();m&&clearTimeout(m),v.performance.current!==v.performance.min&&g(v.performance.min),m=setTimeout(()=>g(l().performance.max),v.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:f},setEvents:v=>o(_=>({..._,events:{..._.events,...v}})),setSize:(v,_,S,M,b)=>{const C=l().camera,B={width:v,height:_,top:M||0,left:b||0,updateStyle:S};o(P=>({size:B,viewport:{...P.viewport,...f(C,u,B)}}))},setDpr:v=>o(_=>{const S=KF(v);return{viewport:{..._.viewport,dpr:S,initialDpr:_.viewport.initialDpr||S}}}),setFrameloop:(v="always")=>{const _=l().clock;_.stop(),_.elapsedTime=0,v!=="never"&&(_.start(),_.elapsedTime=0),o(()=>({frameloop:v}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:D.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(v,_,S)=>{const M=l().internal;return M.priority=M.priority+(_>0?1:0),M.subscribers.push({ref:v,priority:_,store:S}),M.subscribers=M.subscribers.sort((b,C)=>b.priority-C.priority),()=>{const b=l().internal;b!=null&&b.subscribers&&(b.priority=b.priority-(_>0?1:0),b.subscribers=b.subscribers.filter(C=>C.ref!==v))}}}}}),i=n.getState();let r=i.size,s=i.viewport.dpr,a=i.camera;return n.subscribe(()=>{const{camera:o,size:l,viewport:c,gl:u,set:h}=n.getState();if(l.width!==r.width||l.height!==r.height||c.dpr!==s){var f;r=l,s=c.dpr,ZF(o,l),u.setPixelRatio(c.dpr);const m=(f=l.updateStyle)!=null?f:typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,m)}o!==a&&(a=o,h(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(o)}})))}),n.subscribe(o=>t(o)),n};function dK(t,e){const n={callback:t};return e.add(n),()=>void e.delete(n)}let dv,eU=new Set,fK=new Set,pK=new Set;const mK=t=>dK(t,eU);function x_(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function Yd(t,e){switch(t){case"before":return x_(eU,e);case"after":return x_(fK,e);case"tail":return x_(pK,e)}}let __,S_;function A_(t,e,n){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof t=="number"&&(i=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),__=e.internal.subscribers,dv=0;dv<__.length;dv++)S_=__[dv],S_.ref.current(S_.store.getState(),i,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function gK(t){let e=!1,n=!1,i,r,s;function a(c){r=requestAnimationFrame(a),e=!0,i=0,Yd("before",c),n=!0;for(const h of t.values()){var u;s=h.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((u=s.gl.xr)!=null&&u.isPresenting)&&(i+=A_(c,s))}if(n=!1,Yd("after",c),i===0)return Yd("tail",c),e=!1,cancelAnimationFrame(r)}function o(c,u=1){var h;if(!c)return t.forEach(f=>o(f.store.getState(),u));(h=c.gl.xr)!=null&&h.isPresenting||!c.internal.active||c.frameloop==="never"||(u>1?c.internal.frames=Math.min(60,c.internal.frames+u):n?c.internal.frames=2:c.internal.frames=1,e||(e=!0,requestAnimationFrame(a)))}function l(c,u=!0,h,f){if(u&&Yd("before",c),h)A_(c,h,f);else for(const m of t.values())A_(c,m.store.getState());u&&Yd("after",c)}return{loop:a,invalidate:o,advance:l}}function CE(){const t=D.useContext(TE);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function Cn(t=n=>n,e){return CE()(t,e)}function Ur(t,e=0){const n=CE(),i=n.getState().internal.subscribe,r=XF(t);return tm(()=>i(r,e,n),[e,i,n]),null}const PP=new WeakMap;function tU(t,e){return function(n,...i){let r=PP.get(n);return r||(r=new n,PP.set(n,r)),t&&t(r),Promise.all(i.map(s=>new Promise((a,o)=>r.load(s,l=>{l.scene&&Object.assign(l,sK(l.scene)),a(l)},e,l=>o(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`))))))}}function uo(t,e,n,i){const r=Array.isArray(e)?e:[e],s=GF(tU(n,i),[t,...r],{equal:Tn.equ});return Array.isArray(e)?s:s[0]}uo.preload=function(t,e,n){const i=Array.isArray(e)?e:[e];return QY(tU(n),[t,...i])};uo.clear=function(t,e){const n=Array.isArray(e)?e:[e];return ZY([t,...n])};const Oh=new Map,{invalidate:BP,advance:IP}=gK(Oh),{reconciler:Sp,applyProps:Va}=tK(Oh,oK),Ou={objects:"shallow",strict:!1},vK=(t,e)=>{const n=typeof t=="function"?t(e):t;return $F(n)?n:new wy({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function yK(t,e){const n=typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement;if(e){const{width:i,height:r,top:s,left:a,updateStyle:o=n}=e;return{width:i,height:r,top:s,left:a,updateStyle:o}}else if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:i,height:r,top:s,left:a}=t.parentElement.getBoundingClientRect();return{width:i,height:r,top:s,left:a,updateStyle:n}}else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height,top:0,left:0,updateStyle:n};return{width:0,height:0,top:0,left:0}}function xK(t){const e=Oh.get(t),n=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||hK(BP,IP),a=n||Sp.createContainer(s,ch.ConcurrentRoot,null,!1,null,"",r,null);e||Oh.set(t,{fiber:a,store:s});let o,l=!1,c;return{configure(u={}){let{gl:h,size:f,scene:m,events:g,onCreated:y,shadows:x=!1,linear:v=!1,flat:_=!1,legacy:S=!1,orthographic:M=!1,frameloop:b="always",dpr:C=[1,2],performance:B,raycaster:P,camera:T,onPointerMissed:I}=u,z=s.getState(),G=z.gl;z.gl||z.set({gl:G=vK(h,t)});let Q=z.raycaster;Q||z.set({raycaster:Q=new EE});const{params:U,...ee}=P||{};if(Tn.equ(ee,Q,Ou)||Va(Q,{...ee}),Tn.equ(U,Q.params,Ou)||Va(Q,{params:{...Q.params,...U}}),!z.camera||z.camera===c&&!Tn.equ(c,T,Ou)){c=T;const H=T instanceof qc,O=H?T:M?new ws(0,0,0,0,.1,1e3):new Pn(75,0,.1,1e3);H||(O.position.z=5,T&&(Va(O,T),("aspect"in T||"left"in T||"right"in T||"bottom"in T||"top"in T)&&(O.manual=!0,O.updateProjectionMatrix())),!z.camera&&!(T!=null&&T.rotation)&&O.lookAt(0,0,0)),z.set({camera:O}),Q.camera=O}if(!z.scene){let H;m!=null&&m.isScene?H=m:(H=new gl,m&&Va(H,m)),z.set({scene:Hu(H)})}if(!z.xr){var $;const H=(W,ne)=>{const ae=s.getState();ae.frameloop!=="never"&&IP(W,!0,ae,ne)},O=()=>{const W=s.getState();W.gl.xr.enabled=W.gl.xr.isPresenting,W.gl.xr.setAnimationLoop(W.gl.xr.isPresenting?H:null),W.gl.xr.isPresenting||BP(W)},j={connect(){const W=s.getState().gl;W.xr.addEventListener("sessionstart",O),W.xr.addEventListener("sessionend",O)},disconnect(){const W=s.getState().gl;W.xr.removeEventListener("sessionstart",O),W.xr.removeEventListener("sessionend",O)}};typeof(($=G.xr)==null?void 0:$.addEventListener)=="function"&&j.connect(),z.set({xr:j})}if(G.shadowMap){const H=G.shadowMap.enabled,O=G.shadowMap.type;if(G.shadowMap.enabled=!!x,Tn.boo(x))G.shadowMap.type=bf;else if(Tn.str(x)){var oe;const j={basic:OD,percentage:py,soft:bf,variance:Fs};G.shadowMap.type=(oe=j[x])!=null?oe:bf}else Tn.obj(x)&&Object.assign(G.shadowMap,x);(H!==G.shadowMap.enabled||O!==G.shadowMap.type)&&(G.shadowMap.needsUpdate=!0)}const Z=jF();Z&&("enabled"in Z?Z.enabled=!S:"legacyMode"in Z&&(Z.legacyMode=S)),l||Va(G,{outputEncoding:v?3e3:3001,toneMapping:_?Xs:BM}),z.legacy!==S&&z.set(()=>({legacy:S})),z.linear!==v&&z.set(()=>({linear:v})),z.flat!==_&&z.set(()=>({flat:_})),h&&!Tn.fun(h)&&!$F(h)&&!Tn.equ(h,G,Ou)&&Va(G,h),g&&!z.events.handlers&&z.set({events:g(s)});const J=yK(t,f);return Tn.equ(J,z.size,Ou)||z.setSize(J.width,J.height,J.updateStyle,J.top,J.left),C&&z.viewport.dpr!==KF(C)&&z.setDpr(C),z.frameloop!==b&&z.setFrameloop(b),z.onPointerMissed||z.set({onPointerMissed:I}),B&&!Tn.equ(B,z.performance,Ou)&&z.set(H=>({performance:{...H.performance,...B}})),o=y,l=!0,this},render(u){return l||this.configure(),Sp.updateContainer(w.jsx(_K,{store:s,children:u,onCreated:o,rootElement:t}),a,null,()=>{}),s},unmount(){nU(t)}}}function _K({store:t,children:e,onCreated:n,rootElement:i}){return tm(()=>{const r=t.getState();r.set(s=>({internal:{...s.internal,active:!0}})),n&&n(r),t.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),w.jsx(TE.Provider,{value:t,children:e})}function nU(t,e){const n=Oh.get(t),i=n==null?void 0:n.fiber;if(i){const r=n==null?void 0:n.store.getState();r&&(r.internal.active=!1),Sp.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,a,o,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(a=s.renderLists)==null||a.dispose==null||a.dispose(),(o=r.gl)==null||o.forceContextLoss==null||o.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),aK(r),Oh.delete(t)}catch{}},500)})}}function SK(t,e,n){return w.jsx(AK,{children:t,container:e,state:n},e.uuid)}function AK({state:t={},children:e,container:n}){const{events:i,size:r,...s}=t,a=CE(),[o]=D.useState(()=>new EE),[l]=D.useState(()=>new Ie),c=D.useCallback((h,f)=>{const m={...h};Object.keys(h).forEach(y=>{(uK.includes(y)||h[y]!==f[y]&&f[y])&&delete m[y]});let g;if(f&&r){const y=f.camera;g=h.viewport.getCurrentViewport(y,new K,r),y!==h.camera&&ZF(y,r)}return{...m,scene:n,raycaster:o,pointer:l,mouse:l,previousRoot:a,events:{...h.events,...f==null?void 0:f.events,...i},size:{...h.size,...r},viewport:{...h.viewport,...g},...s}},[t]),[u]=D.useState(()=>{const h=a.getState();return UF((m,g)=>({...h,scene:n,raycaster:o,pointer:l,mouse:l,previousRoot:a,events:{...h.events,...i},size:{...h.size,...r},...s,set:m,get:g,setEvents:y=>m(x=>({...x,events:{...x.events,...y}}))}))});return D.useEffect(()=>{const h=a.subscribe(f=>u.setState(m=>c(f,m)));return()=>{h()}},[c]),D.useEffect(()=>{u.setState(h=>c(a.getState(),h))},[c]),D.useEffect(()=>()=>{u.destroy()},[]),w.jsx(w.Fragment,{children:Sp.createPortal(w.jsx(TE.Provider,{value:u,children:e}),u,null)})}Sp.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:D.version});const w_={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function wK(t){const{handlePointer:e}=cK(t);return{priority:1,enabled:!0,compute(n,i,r){i.pointer.set(n.offsetX/i.size.width*2-1,-(n.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(w_).reduce((n,i)=>({...n,[i]:e(i)}),{}),update:()=>{var n;const{events:i,internal:r}=t.getState();(n=r.lastEvent)!=null&&n.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:n=>{var i;const{set:r,events:s}=t.getState();s.disconnect==null||s.disconnect(),r(a=>({events:{...a.events,connected:n}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([a,o])=>{const[l,c]=w_[a];n.addEventListener(l,o,{passive:c})})},disconnect:()=>{const{set:n,events:i}=t.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,a])=>{if(i&&i.connected instanceof HTMLElement){const[o]=w_[s];i.connected.removeEventListener(o,a)}}),n(s=>({events:{...s.events,connected:void 0}}))}}}}function LP(t,e){let n;return(...i)=>{window.clearTimeout(n),n=window.setTimeout(()=>t(...i),e)}}function MK({debounce:t,scroll:e,polyfill:n,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,a]=D.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),o=D.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=t?typeof t=="number"?t:t.scroll:null,c=t?typeof t=="number"?t:t.resize:null,u=D.useRef(!1);D.useEffect(()=>(u.current=!0,()=>void(u.current=!1)));const[h,f,m]=D.useMemo(()=>{const v=()=>{if(!o.current.element)return;const{left:_,top:S,width:M,height:b,bottom:C,right:B,x:P,y:T}=o.current.element.getBoundingClientRect(),I={left:_,top:S,width:M,height:b,bottom:C,right:B,x:P,y:T};o.current.element instanceof HTMLElement&&i&&(I.height=o.current.element.offsetHeight,I.width=o.current.element.offsetWidth),Object.freeze(I),u.current&&!CK(o.current.lastBounds,I)&&a(o.current.lastBounds=I)};return[v,c?LP(v,c):v,l?LP(v,l):v]},[a,i,l,c]);function g(){o.current.scrollContainers&&(o.current.scrollContainers.forEach(v=>v.removeEventListener("scroll",m,!0)),o.current.scrollContainers=null),o.current.resizeObserver&&(o.current.resizeObserver.disconnect(),o.current.resizeObserver=null),o.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",o.current.orientationHandler))}function y(){o.current.element&&(o.current.resizeObserver=new r(m),o.current.resizeObserver.observe(o.current.element),e&&o.current.scrollContainers&&o.current.scrollContainers.forEach(v=>v.addEventListener("scroll",m,{capture:!0,passive:!0})),o.current.orientationHandler=()=>{m()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",o.current.orientationHandler))}const x=v=>{!v||v===o.current.element||(g(),o.current.element=v,o.current.scrollContainers=iU(v),y())};return bK(m,!!e),EK(f),D.useEffect(()=>{g(),y()},[e,m,f]),D.useEffect(()=>g,[]),[x,s,h]}function EK(t){D.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function bK(t,e){D.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function iU(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:i,overflowY:r}=window.getComputedStyle(t);return[n,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(t),[...e,...iU(t.parentElement)]}const TK=["x","y","top","bottom","left","right","width","height"],CK=(t,e)=>TK.every(n=>t[n]===e[n]);var RK=Object.defineProperty,PK=Object.defineProperties,BK=Object.getOwnPropertyDescriptors,DP=Object.getOwnPropertySymbols,IK=Object.prototype.hasOwnProperty,LK=Object.prototype.propertyIsEnumerable,NP=(t,e,n)=>e in t?RK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,FP=(t,e)=>{for(var n in e||(e={}))IK.call(e,n)&&NP(t,n,e[n]);if(DP)for(var n of DP(e))LK.call(e,n)&&NP(t,n,e[n]);return t},DK=(t,e)=>PK(t,BK(e)),UP,kP;typeof window<"u"&&((UP=window.document)!=null&&UP.createElement||((kP=window.navigator)==null?void 0:kP.product)==="ReactNative")?D.useLayoutEffect:D.useEffect;function rU(t,e,n){if(!t)return;if(n(t)===!0)return t;let i=t.child;for(;i;){const r=rU(i,e,n);if(r)return r;i=i.sibling}}function sU(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const OP=console.error;console.error=function(){const t=[...arguments].join("");if(t!=null&&t.startsWith("Warning:")&&t.includes("useContext")){console.error=OP;return}return OP.apply(this,arguments)};const RE=sU(D.createContext(null));class aU extends D.Component{render(){return D.createElement(RE.Provider,{value:this._reactInternals},this.props.children)}}function NK(){const t=D.useContext(RE);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=D.useId();return D.useMemo(()=>{for(const i of[t,t==null?void 0:t.alternate]){if(!i)continue;const r=rU(i,!1,s=>{let a=s.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(r)return r}},[t,e])}function FK(){const t=NK(),[e]=D.useState(()=>new Map);e.clear();let n=t;for(;n;){if(n.type&&typeof n.type=="object"){const r=n.type._context===void 0&&n.type.Provider===n.type?n.type:n.type._context;r&&r!==RE&&!e.has(r)&&e.set(r,D.useContext(sU(r)))}n=n.return}return e}function UK(){const t=FK();return D.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>i=>D.createElement(e,null,D.createElement(n.Provider,DK(FP({},i),{value:t.get(n)}))),e=>D.createElement(aU,FP({},e))),[t])}const kK=D.forwardRef(function({children:e,fallback:n,resize:i,style:r,gl:s,events:a=wK,eventSource:o,eventPrefix:l,shadows:c,linear:u,flat:h,legacy:f,orthographic:m,frameloop:g,dpr:y,performance:x,raycaster:v,camera:_,scene:S,onPointerMissed:M,onCreated:b,...C},B){D.useMemo(()=>Vy(NF),[]);const P=UK(),[T,I]=MK({scroll:!0,debounce:{scroll:50,resize:0},...i}),z=D.useRef(null),G=D.useRef(null);D.useImperativeHandle(B,()=>z.current);const Q=XF(M),[U,ee]=D.useState(!1),[$,oe]=D.useState(!1);if(U)throw U;if($)throw $;const Z=D.useRef(null);tm(()=>{const H=z.current;I.width>0&&I.height>0&&H&&(Z.current||(Z.current=xK(H)),Z.current.configure({gl:s,events:a,shadows:c,linear:u,flat:h,legacy:f,orthographic:m,frameloop:g,dpr:y,performance:x,raycaster:v,camera:_,scene:S,size:I,onPointerMissed:(...O)=>Q.current==null?void 0:Q.current(...O),onCreated:O=>{O.events.connect==null||O.events.connect(o?nK(o)?o.current:o:G.current),l&&O.setEvents({compute:(j,W)=>{const ne=j[l+"X"],ae=j[l+"Y"];W.pointer.set(ne/W.size.width*2-1,-(ae/W.size.height)*2+1),W.raycaster.setFromCamera(W.pointer,W.camera)}}),b==null||b(O)}}),Z.current.render(w.jsx(P,{children:w.jsx(JF,{set:oe,children:w.jsx(D.Suspense,{fallback:w.jsx(iK,{set:ee}),children:e??null})})})))}),D.useEffect(()=>{const H=z.current;if(H)return()=>nU(H)},[]);const J=o?"none":"auto";return w.jsx("div",{ref:G,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:J,...r},...C,children:w.jsx("div",{ref:T,style:{width:"100%",height:"100%"},children:w.jsx("canvas",{ref:z,style:{display:"block"},children:n})})})}),$h=D.forwardRef(function(e,n){return w.jsx(aU,{children:w.jsx(kK,{...e,ref:n})})});function Sa(){return Sa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Sa.apply(null,arguments)}const nm=new K,PE=new K,OK=new K,GP=new Ie;function GK(t,e,n){const i=nm.setFromMatrixPosition(t.matrixWorld);i.project(e);const r=n.width/2,s=n.height/2;return[i.x*r+r,-(i.y*s)+s]}function zK(t,e){const n=nm.setFromMatrixPosition(t.matrixWorld),i=PE.setFromMatrixPosition(e.matrixWorld),r=n.sub(i),s=e.getWorldDirection(OK);return r.angleTo(s)>Math.PI/2}function HK(t,e,n,i){const r=nm.setFromMatrixPosition(t.matrixWorld),s=r.clone();s.project(e),GP.set(s.x,s.y),n.setFromCamera(GP,e);const a=n.intersectObjects(i,!0);if(a.length){const o=a[0].distance;return r.distanceTo(n.ray.origin)<o}return!0}function VK(t,e){if(e instanceof ws)return e.zoom;if(e instanceof Pn){const n=nm.setFromMatrixPosition(t.matrixWorld),i=PE.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,s=n.distanceTo(i);return 1/(2*Math.tan(r/2)*s)}else return 1}function jK(t,e,n){if(e instanceof Pn||e instanceof ws){const i=nm.setFromMatrixPosition(t.matrixWorld),r=PE.setFromMatrixPosition(e.matrixWorld),s=i.distanceTo(r),a=(n[1]-n[0])/(e.far-e.near),o=n[1]-a*e.far;return Math.round(a*s+o)}}const zA=t=>Math.abs(t)<1e-10?0:t;function oU(t,e,n=""){let i="matrix3d(";for(let r=0;r!==16;r++)i+=zA(e[r]*t.elements[r])+(r!==15?",":")");return n+i}const WK=(t=>e=>oU(e,t))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),XK=(t=>(e,n)=>oU(e,t(n),"translate(-50%,-50%)"))(t=>[1/t,1/t,1/t,1,-1/t,-1/t,-1/t,-1,1/t,1/t,1/t,1,1,1,1,1]);function JK(t){return t&&typeof t=="object"&&"current"in t}const YK=D.forwardRef(({children:t,eps:e=.001,style:n,className:i,prepend:r,center:s,fullscreen:a,portal:o,distanceFactor:l,sprite:c=!1,transform:u=!1,occlude:h,onOcclude:f,castShadow:m,receiveShadow:g,material:y,geometry:x,zIndexRange:v=[16777271,0],calculatePosition:_=GK,as:S="div",wrapperClass:M,pointerEvents:b="auto",...C},B)=>{const{gl:P,camera:T,scene:I,size:z,raycaster:G,events:Q,viewport:U}=Cn(),[ee]=D.useState(()=>document.createElement(S)),$=D.useRef(),oe=D.useRef(null),Z=D.useRef(0),J=D.useRef([0,0]),H=D.useRef(null),O=D.useRef(null),j=(o==null?void 0:o.current)||Q.connected||P.domElement.parentNode,W=D.useRef(null),ne=D.useRef(!1),ae=D.useMemo(()=>h&&h!=="blending"||Array.isArray(h)&&h.length&&JK(h[0]),[h]);D.useLayoutEffect(()=>{const Fe=P.domElement;h&&h==="blending"?(Fe.style.zIndex=`${Math.floor(v[0]/2)}`,Fe.style.position="absolute",Fe.style.pointerEvents="none"):(Fe.style.zIndex=null,Fe.style.position=null,Fe.style.pointerEvents=null)},[h]),D.useLayoutEffect(()=>{if(oe.current){const Fe=$.current=Z3(ee);if(I.updateMatrixWorld(),u)ee.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const ge=_(oe.current,T,z);ee.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${ge[0]}px,${ge[1]}px,0);transform-origin:0 0;`}return j&&(r?j.prepend(ee):j.appendChild(ee)),()=>{j&&j.removeChild(ee),Fe.unmount()}}},[j,u]),D.useLayoutEffect(()=>{M&&(ee.className=M)},[M]);const de=D.useMemo(()=>u?{position:"absolute",top:0,left:0,width:z.width,height:z.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...a&&{top:-z.height/2,left:-z.width/2,width:z.width,height:z.height},...n},[n,s,a,z,u]),fe=D.useMemo(()=>({position:"absolute",pointerEvents:b}),[b]);D.useLayoutEffect(()=>{if(ne.current=!1,u){var Fe;(Fe=$.current)==null||Fe.render(D.createElement("div",{ref:H,style:de},D.createElement("div",{ref:O,style:fe},D.createElement("div",{ref:B,className:i,style:n,children:t}))))}else{var ge;(ge=$.current)==null||ge.render(D.createElement("div",{ref:B,style:de,className:i,children:t}))}});const Se=D.useRef(!0);Ur(Fe=>{if(oe.current){T.updateMatrixWorld(),oe.current.updateWorldMatrix(!0,!1);const ge=u?J.current:_(oe.current,T,z);if(u||Math.abs(Z.current-T.zoom)>e||Math.abs(J.current[0]-ge[0])>e||Math.abs(J.current[1]-ge[1])>e){const X=zK(oe.current,T);let Re=!1;ae&&(Array.isArray(h)?Re=h.map(Qe=>Qe.current):h!=="blending"&&(Re=[I]));const ye=Se.current;if(Re){const Qe=HK(oe.current,T,G,Re);Se.current=Qe&&!X}else Se.current=!X;ye!==Se.current&&(f?f(!Se.current):ee.style.display=Se.current?"block":"none");const De=Math.floor(v[0]/2),Me=h?ae?[v[0],De]:[De-1,0]:v;if(ee.style.zIndex=`${jK(oe.current,T,Me)}`,u){const[Qe,Ee]=[z.width/2,z.height/2],Oe=T.projectionMatrix.elements[5]*Ee,{isOrthographicCamera:Je,top:be,left:rt,bottom:V,right:k}=T,ue=WK(T.matrixWorldInverse),je=Je?`scale(${Oe})translate(${zA(-(k+rt)/2)}px,${zA((be+V)/2)}px)`:`translateZ(${Oe}px)`;let _e=oe.current.matrixWorld;c&&(_e=T.matrixWorldInverse.clone().transpose().copyPosition(_e).scale(oe.current.scale),_e.elements[3]=_e.elements[7]=_e.elements[11]=0,_e.elements[15]=1),ee.style.width=z.width+"px",ee.style.height=z.height+"px",ee.style.perspective=Je?"":`${Oe}px`,H.current&&O.current&&(H.current.style.transform=`${je}${ue}translate(${Qe}px,${Ee}px)`,O.current.style.transform=XK(_e,1/((l||10)/400)))}else{const Qe=l===void 0?1:VK(oe.current,T)*l;ee.style.transform=`translate3d(${ge[0]}px,${ge[1]}px,0) scale(${Qe})`}J.current=ge,Z.current=T.zoom}}if(!ae&&W.current&&!ne.current)if(u){if(H.current){const ge=H.current.children[0];if(ge!=null&&ge.clientWidth&&ge!=null&&ge.clientHeight){const{isOrthographicCamera:X}=T;if(X||x)C.scale&&(Array.isArray(C.scale)?C.scale instanceof K?W.current.scale.copy(C.scale.clone().divideScalar(1)):W.current.scale.set(1/C.scale[0],1/C.scale[1],1/C.scale[2]):W.current.scale.setScalar(1/C.scale));else{const Re=(l||10)/400,ye=ge.clientWidth*Re,De=ge.clientHeight*Re;W.current.scale.set(ye,De,1)}ne.current=!0}}}else{const ge=ee.children[0];if(ge!=null&&ge.clientWidth&&ge!=null&&ge.clientHeight){const X=1/U.factor,Re=ge.clientWidth*X,ye=ge.clientHeight*X;W.current.scale.set(Re,ye,1),ne.current=!0}W.current.lookAt(Fe.camera.position)}});const He=D.useMemo(()=>({vertexShader:u?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[u]);return D.createElement("group",Sa({},C,{ref:oe}),h&&!ae&&D.createElement("mesh",{castShadow:m,receiveShadow:g,ref:W},x||D.createElement("planeGeometry",null),y||D.createElement("shaderMaterial",{side:Ii,vertexShader:He.vertexShader,fragmentShader:He.fragmentShader})))});var BE=rm(),Gt=t=>im(t,BE),IE=rm();Gt.write=t=>im(t,IE);var jy=rm();Gt.onStart=t=>im(t,jy);var LE=rm();Gt.onFrame=t=>im(t,LE);var DE=rm();Gt.onFinish=t=>im(t,DE);var yh=[];Gt.setTimeout=(t,e)=>{const n=Gt.now()+e,i=()=>{const s=yh.findIndex(a=>a.cancel==i);~s&&yh.splice(s,1),Xo-=~s?1:0},r={time:n,handler:t,cancel:i};return yh.splice(lU(n),0,r),Xo+=1,cU(),r};var lU=t=>~(~yh.findIndex(e=>e.time>t)||~yh.length);Gt.cancel=t=>{jy.delete(t),LE.delete(t),DE.delete(t),BE.delete(t),IE.delete(t)};Gt.sync=t=>{HA=!0,Gt.batchedUpdates(t),HA=!1};Gt.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function i(...r){e=r,Gt.onStart(n)}return i.handler=t,i.cancel=()=>{jy.delete(n),e=null},i};var NE=typeof window<"u"?window.requestAnimationFrame:()=>{};Gt.use=t=>NE=t;Gt.now=typeof performance<"u"?()=>performance.now():Date.now;Gt.batchedUpdates=t=>t();Gt.catch=console.error;Gt.frameLoop="always";Gt.advance=()=>{Gt.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):hU()};var Wo=-1,Xo=0,HA=!1;function im(t,e){HA?(e.delete(t),t(0)):(e.add(t),cU())}function cU(){Wo<0&&(Wo=0,Gt.frameLoop!=="demand"&&NE(uU))}function KK(){Wo=-1}function uU(){~Wo&&(NE(uU),Gt.batchedUpdates(hU))}function hU(){const t=Wo;Wo=Gt.now();const e=lU(Wo);if(e&&(dU(yh.splice(0,e),n=>n.handler()),Xo-=e),!Xo){KK();return}jy.flush(),BE.flush(t?Math.min(64,Wo-t):16.667),LE.flush(),IE.flush(),DE.flush()}function rm(){let t=new Set,e=t;return{add(n){Xo+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return Xo-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,Xo-=e.size,dU(e,i=>i(n)&&t.add(i)),Xo+=t.size,e=t)}}}function dU(t,e){t.forEach(n=>{try{e(n)}catch(i){Gt.catch(i)}})}var QK=Object.defineProperty,ZK=(t,e)=>{for(var n in e)QK(t,n,{get:e[n],enumerable:!0})},Qs={};ZK(Qs,{assign:()=>$K,colors:()=>ol,createStringInterpolator:()=>UE,skipAnimation:()=>pU,to:()=>fU,willAdvance:()=>kE});function VA(){}var qK=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),ut={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function Ga(t,e){if(ut.arr(t)){if(!ut.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var mn=(t,e)=>t.forEach(e);function ho(t,e,n){if(ut.arr(t)){for(let i=0;i<t.length;i++)e.call(n,t[i],`${i}`);return}for(const i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i)}var Ss=t=>ut.und(t)?[]:ut.arr(t)?t:[t];function Bf(t,e){if(t.size){const n=Array.from(t);t.clear(),mn(n,e)}}var hf=(t,...e)=>Bf(t,n=>n(...e)),FE=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),UE,fU,ol=null,pU=!1,kE=VA,$K=t=>{t.to&&(fU=t.to),t.now&&(Gt.now=t.now),t.colors!==void 0&&(ol=t.colors),t.skipAnimation!=null&&(pU=t.skipAnimation),t.createStringInterpolator&&(UE=t.createStringInterpolator),t.requestAnimationFrame&&Gt.use(t.requestAnimationFrame),t.batchedUpdates&&(Gt.batchedUpdates=t.batchedUpdates),t.willAdvance&&(kE=t.willAdvance),t.frameLoop&&(Gt.frameLoop=t.frameLoop)},If=new Set,ys=[],M_=[],N0=0,Wy={get idle(){return!If.size&&!ys.length},start(t){N0>t.priority?(If.add(t),Gt.onStart(eQ)):(mU(t),Gt(jA))},advance:jA,sort(t){if(N0)Gt.onFrame(()=>Wy.sort(t));else{const e=ys.indexOf(t);~e&&(ys.splice(e,1),gU(t))}},clear(){ys=[],If.clear()}};function eQ(){If.forEach(mU),If.clear(),Gt(jA)}function mU(t){ys.includes(t)||gU(t)}function gU(t){ys.splice(tQ(ys,e=>e.priority>t.priority),0,t)}function jA(t){const e=M_;for(let n=0;n<ys.length;n++){const i=ys[n];N0=i.priority,i.idle||(kE(i),i.advance(t),i.idle||e.push(i))}return N0=0,M_=ys,M_.length=0,ys=e,ys.length>0}function tQ(t,e){const n=t.findIndex(e);return n<0?t.length:n}var nQ={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Vs="[-+]?\\d*\\.?\\d+",F0=Vs+"%";function Xy(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var iQ=new RegExp("rgb"+Xy(Vs,Vs,Vs)),rQ=new RegExp("rgba"+Xy(Vs,Vs,Vs,Vs)),sQ=new RegExp("hsl"+Xy(Vs,F0,F0)),aQ=new RegExp("hsla"+Xy(Vs,F0,F0,Vs)),oQ=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,lQ=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,cQ=/^#([0-9a-fA-F]{6})$/,uQ=/^#([0-9a-fA-F]{8})$/;function hQ(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=cQ.exec(t))?parseInt(e[1]+"ff",16)>>>0:ol&&ol[t]!==void 0?ol[t]:(e=iQ.exec(t))?(Gu(e[1])<<24|Gu(e[2])<<16|Gu(e[3])<<8|255)>>>0:(e=rQ.exec(t))?(Gu(e[1])<<24|Gu(e[2])<<16|Gu(e[3])<<8|VP(e[4]))>>>0:(e=oQ.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=uQ.exec(t))?parseInt(e[1],16)>>>0:(e=lQ.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=sQ.exec(t))?(zP(HP(e[1]),fv(e[2]),fv(e[3]))|255)>>>0:(e=aQ.exec(t))?(zP(HP(e[1]),fv(e[2]),fv(e[3]))|VP(e[4]))>>>0:null}function E_(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function zP(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,r=2*n-i,s=E_(r,i,t+1/3),a=E_(r,i,t),o=E_(r,i,t-1/3);return Math.round(s*255)<<24|Math.round(a*255)<<16|Math.round(o*255)<<8}function Gu(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function HP(t){return(parseFloat(t)%360+360)%360/360}function VP(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function fv(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function jP(t){let e=hQ(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${i}, ${r}, ${s})`}var Ap=(t,e,n)=>{if(ut.fun(t))return t;if(ut.arr(t))return Ap({range:t,output:e,extrapolate:n});if(ut.str(t.output[0]))return UE(t);const i=t,r=i.output,s=i.range||[0,1],a=i.extrapolateLeft||i.extrapolate||"extend",o=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(c=>c);return c=>{const u=fQ(c,s);return dQ(c,s[u],s[u+1],r[u],r[u+1],l,a,o,i.map)}};function dQ(t,e,n,i,r,s,a,o,l){let c=l?l(t):t;if(c<e){if(a==="identity")return c;a==="clamp"&&(c=e)}if(c>n){if(o==="identity")return c;o==="clamp"&&(c=n)}return i===r?i:e===n?t<=e?i:r:(e===-1/0?c=-c:n===1/0?c=c-e:c=(c-e)/(n-e),c=s(c),i===-1/0?c=-c:r===1/0?c=c+i:c=c*(r-i)+i,c)}function fQ(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var pQ={linear:t=>t},wp=Symbol.for("FluidValue.get"),Gh=Symbol.for("FluidValue.observers"),fa=t=>!!(t&&t[wp]),ms=t=>t&&t[wp]?t[wp]():t,WP=t=>t[Gh]||null;function mQ(t,e){t.eventObserved?t.eventObserved(e):t(e)}function U0(t,e){const n=t[Gh];n&&n.forEach(i=>{mQ(i,e)})}var gQ=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");vQ(this,t)}},vQ=(t,e)=>vU(t,wp,e);function sm(t,e){if(t[wp]){let n=t[Gh];n||vU(t,Gh,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function k0(t,e){const n=t[Gh];if(n&&n.has(e)){const i=n.size-1;i?n.delete(e):t[Gh]=null,t.observerRemoved&&t.observerRemoved(i,e)}}var vU=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),Jv=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,yQ=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,XP=new RegExp(`(${Jv.source})(%|[a-z]+)`,"i"),xQ=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Jy=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,yU=t=>{const[e,n]=_Q(t);if(!e||FE())return t;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(n&&n.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(n);return r||t}else{if(n&&Jy.test(n))return yU(n);if(n)return n}return t},_Q=t=>{const e=Jy.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]},b_,SQ=(t,e,n,i,r)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(i)}, ${r})`,xU=t=>{b_||(b_=ol?new RegExp(`(${Object.keys(ol).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>ms(s).replace(Jy,yU).replace(yQ,jP).replace(b_,jP)),n=e.map(s=>s.match(Jv).map(Number)),r=n[0].map((s,a)=>n.map(o=>{if(!(a in o))throw Error('The arity of each "output" value must be equal');return o[a]})).map(s=>Ap({...t,output:s}));return s=>{var l;const a=!XP.test(e[0])&&((l=e.find(c=>XP.test(c)))==null?void 0:l.replace(Jv,""));let o=0;return e[0].replace(Jv,()=>`${r[o++](s)}${a||""}`).replace(xQ,SQ)}},OE="react-spring: ",_U=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${OE}once requires a function parameter`);return(...i)=>{n||(e(...i),n=!0)}},AQ=_U(console.warn);function wQ(){AQ(`${OE}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var MQ=_U(console.warn);function EQ(){MQ(`${OE}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function Yy(t){return ut.str(t)&&(t[0]=="#"||/\d/.test(t)||!FE()&&Jy.test(t)||t in(ol||{}))}var GE=FE()?D.useEffect:D.useLayoutEffect,bQ=()=>{const t=D.useRef(!1);return GE(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function SU(){const t=D.useState()[1],e=bQ();return()=>{e.current&&t(Math.random())}}function TQ(t,e){const[n]=D.useState(()=>({inputs:e,result:t()})),i=D.useRef(),r=i.current;let s=r;return s?e&&s.inputs&&CQ(e,s.inputs)||(s={inputs:e,result:t()}):s=n,D.useEffect(()=>{i.current=s,r==n&&(n.inputs=n.result=void 0)},[s]),s.result}function CQ(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var AU=t=>D.useEffect(t,RQ),RQ=[];function JP(t){const e=D.useRef();return D.useEffect(()=>{e.current=t}),e.current}var Mp=Symbol.for("Animated:node"),PQ=t=>!!t&&t[Mp]===t,ha=t=>t&&t[Mp],zE=(t,e)=>qK(t,Mp,e),Ky=t=>t&&t[Mp]&&t[Mp].getPayload(),wU=class{constructor(){zE(this,this)}getPayload(){return this.payload||[]}},am=class extends wU{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,ut.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new am(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return ut.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,ut.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},Ep=class extends am{constructor(t){super(0),this._string=null,this._toString=Ap({output:[t,t]})}static create(t){return new Ep(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(ut.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=Ap({output:[this.getValue(),t]})),this._value=0,super.reset()}},O0={dependencies:null},HE=class extends wU{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return ho(this.source,(n,i)=>{PQ(n)?e[i]=n.getValue(t):fa(n)?e[i]=ms(n):t||(e[i]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&mn(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return ho(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){O0.dependencies&&fa(t)&&O0.dependencies.add(t);const e=Ky(t);e&&mn(e,n=>this.add(n))}},MU=class extends HE{constructor(t){super(t)}static create(t){return new MU(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((n,i)=>n.setValue(t[i])).some(Boolean):(super.setValue(t.map(BQ)),!0)}};function BQ(t){return(Yy(t)?Ep:am).create(t)}function WA(t){const e=ha(t);return e?e.constructor:ut.arr(t)?MU:Yy(t)?Ep:am}var YP=(t,e)=>{const n=!ut.fun(t)||t.prototype&&t.prototype.isReactComponent;return D.forwardRef((i,r)=>{const s=D.useRef(null),a=n&&D.useCallback(g=>{s.current=DQ(r,g)},[r]),[o,l]=LQ(i,e),c=SU(),u=()=>{const g=s.current;if(n&&!g)return;(g?e.applyAnimatedValues(g,o.getValue(!0)):!1)===!1&&c()},h=new IQ(u,l),f=D.useRef();GE(()=>(f.current=h,mn(l,g=>sm(g,h)),()=>{f.current&&(mn(f.current.deps,g=>k0(g,f.current)),Gt.cancel(f.current.update))})),D.useEffect(u,[]),AU(()=>()=>{const g=f.current;mn(g.deps,y=>k0(y,g))});const m=e.getComponentProps(o.getValue());return D.createElement(t,{...m,ref:a})})},IQ=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&Gt.write(this.update)}};function LQ(t,e){const n=new Set;return O0.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new HE(t),O0.dependencies=null,[t,n]}function DQ(t,e){return t&&(ut.fun(t)?t(e):t.current=e),e}var KP=Symbol.for("AnimatedComponent"),NQ=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=r=>new HE(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:i},s=a=>{const o=QP(a)||"Anonymous";return ut.str(a)?a=s[a]||(s[a]=YP(a,r)):a=a[KP]||(a[KP]=YP(a,r)),a.displayName=`Animated(${o})`,a};return ho(t,(a,o)=>{ut.arr(t)&&(o=QP(a)),s[o]=s(a)}),{animated:s}},QP=t=>ut.str(t)?t:t&&ut.str(t.displayName)?t.displayName:ut.fun(t)&&t.name||null;function gc(t,...e){return ut.fun(t)?t(...e):t}var Lf=(t,e)=>t===!0||!!(e&&t&&(ut.fun(t)?t(e):Ss(t).includes(e))),EU=(t,e)=>ut.obj(t)?e&&t[e]:t,bU=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,FQ=t=>t,VE=(t,e=FQ)=>{let n=UQ;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const i={};for(const r of n){const s=e(t[r],r);ut.und(s)||(i[r]=s)}return i},UQ=["config","onProps","onStart","onChange","onPause","onResume","onRest"],kQ={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function OQ(t){const e={};let n=0;if(ho(t,(i,r)=>{kQ[r]||(e[r]=i,n++)}),n)return e}function TU(t){const e=OQ(t);if(e){const n={to:e};return ho(t,(i,r)=>r in e||(n[r]=i)),n}return{...t}}function bp(t){return t=ms(t),ut.arr(t)?t.map(bp):Yy(t)?Qs.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function GQ(t){for(const e in t)return!0;return!1}function XA(t){return ut.fun(t)||ut.arr(t)&&ut.obj(t[0])}function zQ(t,e){var n;(n=t.ref)==null||n.delete(t),e==null||e.delete(t)}function HQ(t,e){var n;e&&t.ref!==e&&((n=t.ref)==null||n.delete(t),e.add(t),t.ref=e)}var VQ={default:{tension:170,friction:26}},JA={...VQ.default,mass:1,damping:1,easing:pQ.linear,clamp:!1},jQ=class{constructor(){this.velocity=0,Object.assign(this,JA)}};function WQ(t,e,n){n&&(n={...n},ZP(n,e),e={...n,...e}),ZP(t,e),Object.assign(t,e);for(const a in JA)t[a]==null&&(t[a]=JA[a]);let{frequency:i,damping:r}=t;const{mass:s}=t;return ut.und(i)||(i<.01&&(i=.01),r<0&&(r=0),t.tension=Math.pow(2*Math.PI/i,2)*s,t.friction=4*Math.PI*r*s/i),t}function ZP(t,e){if(!ut.und(e.decay))t.duration=void 0;else{const n=!ut.und(e.tension)||!ut.und(e.friction);(n||!ut.und(e.frequency)||!ut.und(e.damping)||!ut.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var qP=[],XQ=class{constructor(){this.changed=!1,this.values=qP,this.toValues=null,this.fromValues=qP,this.config=new jQ,this.immediate=!1}};function CU(t,{key:e,props:n,defaultProps:i,state:r,actions:s}){return new Promise((a,o)=>{let l,c,u=Lf(n.cancel??(i==null?void 0:i.cancel),e);if(u)m();else{ut.und(n.pause)||(r.paused=Lf(n.pause,e));let g=i==null?void 0:i.pause;g!==!0&&(g=r.paused||Lf(g,e)),l=gc(n.delay||0,e),g?(r.resumeQueue.add(f),s.pause()):(s.resume(),f())}function h(){r.resumeQueue.add(f),r.timeouts.delete(c),c.cancel(),l=c.time-Gt.now()}function f(){l>0&&!Qs.skipAnimation?(r.delayed=!0,c=Gt.setTimeout(m,l),r.pauseQueue.add(h),r.timeouts.add(c)):m()}function m(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(h),r.timeouts.delete(c),t<=(r.cancelId||0)&&(u=!0);try{s.start({...n,callId:t,cancel:u},a)}catch(g){o(g)}}})}var jE=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?xh(t.get()):e.every(n=>n.noop)?RU(t.get()):Gs(t.get(),e.every(n=>n.finished)),RU=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),Gs=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),xh=t=>({value:t,cancelled:!0,finished:!1});function PU(t,e,n,i){const{callId:r,parentId:s,onRest:a}=e,{asyncTo:o,promise:l}=n;return!s&&t===o&&!e.reset?l:n.promise=(async()=>{n.asyncId=r,n.asyncTo=t;const c=VE(e,(x,v)=>v==="onRest"?void 0:x);let u,h;const f=new Promise((x,v)=>(u=x,h=v)),m=x=>{const v=r<=(n.cancelId||0)&&xh(i)||r!==n.asyncId&&Gs(i,!1);if(v)throw x.result=v,h(x),x},g=(x,v)=>{const _=new $P,S=new eB;return(async()=>{if(Qs.skipAnimation)throw Tp(n),S.result=Gs(i,!1),h(S),S;m(_);const M=ut.obj(x)?{...x}:{...v,to:x};M.parentId=r,ho(c,(C,B)=>{ut.und(M[B])&&(M[B]=C)});const b=await i.start(M);return m(_),n.paused&&await new Promise(C=>{n.resumeQueue.add(C)}),b})()};let y;if(Qs.skipAnimation)return Tp(n),Gs(i,!1);try{let x;ut.arr(t)?x=(async v=>{for(const _ of v)await g(_)})(t):x=Promise.resolve(t(g,i.stop.bind(i))),await Promise.all([x.then(u),f]),y=Gs(i.get(),!0,!1)}catch(x){if(x instanceof $P)y=x.result;else if(x instanceof eB)y=x.result;else throw x}finally{r==n.asyncId&&(n.asyncId=s,n.asyncTo=s?o:void 0,n.promise=s?l:void 0)}return ut.fun(a)&&Gt.batchedUpdates(()=>{a(y,i,i.item)}),y})()}function Tp(t,e){Bf(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var $P=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},eB=class extends Error{constructor(){super("SkipAnimationSignal")}},YA=t=>t instanceof WE,JQ=1,WE=class extends gQ{constructor(){super(...arguments),this.id=JQ++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=ha(this);return t&&t.getValue()}to(...t){return Qs.to(this,t)}interpolate(...t){return wQ(),Qs.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){U0(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||Wy.sort(this),U0(this,{type:"priority",parent:this,priority:t})}},Wc=Symbol.for("SpringPhase"),BU=1,KA=2,QA=4,T_=t=>(t[Wc]&BU)>0,Io=t=>(t[Wc]&KA)>0,Kd=t=>(t[Wc]&QA)>0,tB=(t,e)=>e?t[Wc]|=KA|BU:t[Wc]&=~KA,nB=(t,e)=>e?t[Wc]|=QA:t[Wc]&=~QA,YQ=class extends WE{constructor(t,e){if(super(),this.animation=new XQ,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!ut.und(t)||!ut.und(e)){const n=ut.obj(t)?{...t}:{...e,from:t};ut.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(Io(this)||this._state.asyncTo)||Kd(this)}get goal(){return ms(this.animation.to)}get velocity(){const t=ha(this);return t instanceof am?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return T_(this)}get isAnimating(){return Io(this)}get isPaused(){return Kd(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const i=this.animation;let{toValues:r}=i;const{config:s}=i,a=Ky(i.to);!a&&fa(i.to)&&(r=Ss(ms(i.to))),i.values.forEach((c,u)=>{if(c.done)return;const h=c.constructor==Ep?1:a?a[u].lastPosition:r[u];let f=i.immediate,m=h;if(!f){if(m=c.lastPosition,s.tension<=0){c.done=!0;return}let g=c.elapsedTime+=t;const y=i.fromValues[u],x=c.v0!=null?c.v0:c.v0=ut.arr(s.velocity)?s.velocity[u]:s.velocity;let v;const _=s.precision||(y==h?.005:Math.min(1,Math.abs(h-y)*.001));if(ut.und(s.duration))if(s.decay){const S=s.decay===!0?.998:s.decay,M=Math.exp(-(1-S)*g);m=y+x/(1-S)*(1-M),f=Math.abs(c.lastPosition-m)<=_,v=x*M}else{v=c.lastVelocity==null?x:c.lastVelocity;const S=s.restVelocity||_/10,M=s.clamp?0:s.bounce,b=!ut.und(M),C=y==h?c.v0>0:y<h;let B,P=!1;const T=1,I=Math.ceil(t/T);for(let z=0;z<I&&(B=Math.abs(v)>S,!(!B&&(f=Math.abs(h-m)<=_,f)));++z){b&&(P=m==h||m>h==C,P&&(v=-v*M,m=h));const G=-s.tension*1e-6*(m-h),Q=-s.friction*.001*v,U=(G+Q)/s.mass;v=v+U*T,m=m+v*T}}else{let S=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,c.durationProgress>0&&(c.elapsedTime=s.duration*c.durationProgress,g=c.elapsedTime+=t)),S=(s.progress||0)+g/this._memoizedDuration,S=S>1?1:S<0?0:S,c.durationProgress=S),m=y+s.easing(S)*(h-y),v=(m-c.lastPosition)/t,f=S==1}c.lastVelocity=v,Number.isNaN(m)&&(console.warn("Got NaN while animating:",this),f=!0)}a&&!a[u].done&&(f=!1),f?c.done=!0:e=!1,c.setValue(m,s.round)&&(n=!0)});const o=ha(this),l=o.getValue();if(e){const c=ms(i.to);(l!==c||n)&&!s.decay?(o.setValue(c),this._onChange(c)):n&&s.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(t){return Gt.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Io(this)){const{to:t,config:e}=this.animation;Gt.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return ut.und(t)?(n=this.queue||[],this.queue=[]):n=[ut.obj(t)?t:{...e,to:t}],Promise.all(n.map(i=>this._update(i))).then(i=>jE(this,i))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),Tp(this._state,t&&this._lastCallId),Gt.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:i}=t;n=ut.obj(n)?n[e]:n,(n==null||XA(n))&&(n=void 0),i=ut.obj(i)?i[e]:i,i==null&&(i=void 0);const r={to:n,from:i};return T_(this)||(t.reverse&&([n,i]=[i,n]),i=ms(i),ut.und(i)?ha(this)||this._set(n):this._set(i)),r}_update({...t},e){const{key:n,defaultProps:i}=this;t.default&&Object.assign(i,VE(t,(a,o)=>/^on/.test(o)?EU(a,n):a)),rB(this,t,"onProps"),Zd(this,"onProps",t,this);const r=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return CU(++this._lastCallId,{key:n,props:t,defaultProps:i,state:s,actions:{pause:()=>{Kd(this)||(nB(this,!0),hf(s.pauseQueue),Zd(this,"onPause",Gs(this,Qd(this,this.animation.to)),this))},resume:()=>{Kd(this)&&(nB(this,!1),Io(this)&&this._resume(),hf(s.resumeQueue),Zd(this,"onResume",Gs(this,Qd(this,this.animation.to)),this))},start:this._merge.bind(this,r)}}).then(a=>{if(t.loop&&a.finished&&!(e&&a.noop)){const o=IU(t);if(o)return this._update(o,!0)}return a})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(xh(this));const i=!ut.und(t.to),r=!ut.und(t.from);if(i||r)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(xh(this));const{key:s,defaultProps:a,animation:o}=this,{to:l,from:c}=o;let{to:u=l,from:h=c}=t;r&&!i&&(!e.default||ut.und(u))&&(u=h),e.reverse&&([u,h]=[h,u]);const f=!Ga(h,c);f&&(o.from=h),h=ms(h);const m=!Ga(u,l);m&&this._focus(u);const g=XA(e.to),{config:y}=o,{decay:x,velocity:v}=y;(i||r)&&(y.velocity=0),e.config&&!g&&WQ(y,gc(e.config,s),e.config!==a.config?gc(a.config,s):void 0);let _=ha(this);if(!_||ut.und(u))return n(Gs(this,!0));const S=ut.und(e.reset)?r&&!e.default:!ut.und(h)&&Lf(e.reset,s),M=S?h:this.get(),b=bp(u),C=ut.num(b)||ut.arr(b)||Yy(b),B=!g&&(!C||Lf(a.immediate||e.immediate,s));if(m){const z=WA(u);if(z!==_.constructor)if(B)_=this._set(b);else throw Error(`Cannot animate between ${_.constructor.name} and ${z.name}, as the "to" prop suggests`)}const P=_.constructor;let T=fa(u),I=!1;if(!T){const z=S||!T_(this)&&f;(m||z)&&(I=Ga(bp(M),b),T=!I),(!Ga(o.immediate,B)&&!B||!Ga(y.decay,x)||!Ga(y.velocity,v))&&(T=!0)}if(I&&Io(this)&&(o.changed&&!S?T=!0:T||this._stop(l)),!g&&((T||fa(l))&&(o.values=_.getPayload(),o.toValues=fa(u)?null:P==Ep?[1]:Ss(b)),o.immediate!=B&&(o.immediate=B,!B&&!S&&this._set(l)),T)){const{onRest:z}=o;mn(QQ,Q=>rB(this,e,Q));const G=Gs(this,Qd(this,l));hf(this._pendingCalls,G),this._pendingCalls.add(n),o.changed&&Gt.batchedUpdates(()=>{var Q;o.changed=!S,z==null||z(G,this),S?gc(a.onRest,G):(Q=o.onStart)==null||Q.call(o,G,this)})}S&&this._set(M),g?n(PU(e.to,e,this._state,this)):T?this._start():Io(this)&&!m?this._pendingCalls.add(n):n(RU(M))}_focus(t){const e=this.animation;t!==e.to&&(WP(this)&&this._detach(),e.to=t,WP(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;fa(e)&&(sm(e,this),YA(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;fa(t)&&k0(t,this)}_set(t,e=!0){const n=ms(t);if(!ut.und(n)){const i=ha(this);if(!i||!Ga(n,i.getValue())){const r=WA(n);!i||i.constructor!=r?zE(this,r.create(n)):i.setValue(n),i&&Gt.batchedUpdates(()=>{this._onChange(n,e)})}}return ha(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,Zd(this,"onStart",Gs(this,Qd(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),gc(this.animation.onChange,t,this)),gc(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;ha(this).reset(ms(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),Io(this)||(tB(this,!0),Kd(this)||this._resume())}_resume(){Qs.skipAnimation?this.finish():Wy.start(this)}_stop(t,e){if(Io(this)){tB(this,!1);const n=this.animation;mn(n.values,r=>{r.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),U0(this,{type:"idle",parent:this});const i=e?xh(this.get()):Gs(this.get(),Qd(this,t??n.to));hf(this._pendingCalls,i),n.changed&&(n.changed=!1,Zd(this,"onRest",i,this))}}};function Qd(t,e){const n=bp(e),i=bp(t.get());return Ga(i,n)}function IU(t,e=t.loop,n=t.to){const i=gc(e);if(i){const r=i!==!0&&TU(i),s=(r||t).reverse,a=!r||r.reset;return Cp({...t,loop:e,default:!1,pause:void 0,to:!s||XA(n)?n:void 0,from:a?t.from:void 0,reset:a,...r})}}function Cp(t){const{to:e,from:n}=t=TU(t),i=new Set;return ut.obj(e)&&iB(e,i),ut.obj(n)&&iB(n,i),t.keys=i.size?Array.from(i):null,t}function KQ(t){const e=Cp(t);return ut.und(e.default)&&(e.default=VE(e)),e}function iB(t,e){ho(t,(n,i)=>n!=null&&e.add(i))}var QQ=["onStart","onRest","onChange","onPause","onResume"];function rB(t,e,n){t.animation[n]=e[n]!==bU(e,n)?EU(e[n],t.key):void 0}function Zd(t,e,...n){var i,r,s,a;(r=(i=t.animation)[e])==null||r.call(i,...n),(a=(s=t.defaultProps)[e])==null||a.call(s,...n)}var ZQ=["onStart","onChange","onRest"],qQ=1,$Q=class{constructor(t,e){this.id=qQ++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((e,n)=>t[n]=e.get()),t}set(t){for(const e in t){const n=t[e];ut.und(n)||this.springs[e].set(n)}}update(t){return t&&this.queue.push(Cp(t)),this}start(t){let{queue:e}=this;return t?e=Ss(t).map(Cp):this.queue=[],this._flush?this._flush(this,e):(UU(this,e),ZA(this,e))}stop(t,e){if(t!==!!t&&(e=t),e){const n=this.springs;mn(Ss(e),i=>n[i].stop(!!t))}else Tp(this._state,this._lastAsyncId),this.each(n=>n.stop(!!t));return this}pause(t){if(ut.und(t))this.start({pause:!0});else{const e=this.springs;mn(Ss(t),n=>e[n].pause())}return this}resume(t){if(ut.und(t))this.start({pause:!1});else{const e=this.springs;mn(Ss(t),n=>e[n].resume())}return this}each(t){ho(this.springs,t)}_onFrame(){const{onStart:t,onChange:e,onRest:n}=this._events,i=this._active.size>0,r=this._changed.size>0;(i&&!this._started||r&&!this._started)&&(this._started=!0,Bf(t,([o,l])=>{l.value=this.get(),o(l,this,this._item)}));const s=!i&&this._started,a=r||s&&n.size?this.get():null;r&&e.size&&Bf(e,([o,l])=>{l.value=a,o(l,this,this._item)}),s&&(this._started=!1,Bf(n,([o,l])=>{l.value=a,o(l,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;Gt.onFrame(this._onFrame)}};function ZA(t,e){return Promise.all(e.map(n=>LU(t,n))).then(n=>jE(t,n))}async function LU(t,e,n){const{keys:i,to:r,from:s,loop:a,onRest:o,onResolve:l}=e,c=ut.obj(e.default)&&e.default;a&&(e.loop=!1),r===!1&&(e.to=null),s===!1&&(e.from=null);const u=ut.arr(r)||ut.fun(r)?r:void 0;u?(e.to=void 0,e.onRest=void 0,c&&(c.onRest=void 0)):mn(ZQ,y=>{const x=e[y];if(ut.fun(x)){const v=t._events[y];e[y]=({finished:_,cancelled:S})=>{const M=v.get(x);M?(_||(M.finished=!1),S&&(M.cancelled=!0)):v.set(x,{value:null,finished:_||!1,cancelled:S||!1})},c&&(c[y]=e[y])}});const h=t._state;e.pause===!h.paused?(h.paused=e.pause,hf(e.pause?h.pauseQueue:h.resumeQueue)):h.paused&&(e.pause=!0);const f=(i||Object.keys(t.springs)).map(y=>t.springs[y].start(e)),m=e.cancel===!0||bU(e,"cancel")===!0;(u||m&&h.asyncId)&&f.push(CU(++t._lastAsyncId,{props:e,state:h,actions:{pause:VA,resume:VA,start(y,x){m?(Tp(h,t._lastAsyncId),x(xh(t))):(y.onRest=o,x(PU(u,y,h,t)))}}})),h.paused&&await new Promise(y=>{h.resumeQueue.add(y)});const g=jE(t,await Promise.all(f));if(a&&g.finished&&!(n&&g.noop)){const y=IU(e,a,r);if(y)return UU(t,[y]),LU(t,y,!0)}return l&&Gt.batchedUpdates(()=>l(g,t,t.item)),g}function sB(t,e){const n={...t.springs};return e&&mn(Ss(e),i=>{ut.und(i.keys)&&(i=Cp(i)),ut.obj(i.to)||(i={...i,to:void 0}),FU(n,i,r=>NU(r))}),DU(t,n),n}function DU(t,e){ho(e,(n,i)=>{t.springs[i]||(t.springs[i]=n,sm(n,t))})}function NU(t,e){const n=new YQ;return n.key=t,e&&sm(n,e),n}function FU(t,e,n){e.keys&&mn(e.keys,i=>{(t[i]||(t[i]=n(i)))._prepareNode(e)})}function UU(t,e){mn(e,n=>{FU(t.springs,n,i=>NU(i,t))})}var Qy=({children:t,...e})=>{const n=D.useContext(G0),i=e.pause||!!n.pause,r=e.immediate||!!n.immediate;e=TQ(()=>({pause:i,immediate:r}),[i,r]);const{Provider:s}=G0;return D.createElement(s,{value:e},t)},G0=eZ(Qy,{});Qy.Provider=G0.Provider;Qy.Consumer=G0.Consumer;function eZ(t,e){return Object.assign(t,D.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var tZ=()=>{const t=[],e=function(i){EQ();const r=[];return mn(t,(s,a)=>{if(ut.und(i))r.push(s.start());else{const o=n(i,s,a);o&&r.push(s.start(o))}}),r};e.current=t,e.add=function(i){t.includes(i)||t.push(i)},e.delete=function(i){const r=t.indexOf(i);~r&&t.splice(r,1)},e.pause=function(){return mn(t,i=>i.pause(...arguments)),this},e.resume=function(){return mn(t,i=>i.resume(...arguments)),this},e.set=function(i){mn(t,(r,s)=>{const a=ut.fun(i)?i(s,r):i;a&&r.set(a)})},e.start=function(i){const r=[];return mn(t,(s,a)=>{if(ut.und(i))r.push(s.start());else{const o=this._getProps(i,s,a);o&&r.push(s.start(o))}}),r},e.stop=function(){return mn(t,i=>i.stop(...arguments)),this},e.update=function(i){return mn(t,(r,s)=>r.update(this._getProps(i,r,s))),this};const n=function(i,r,s){return ut.fun(i)?i(s,r):i};return e._getProps=n,e};function nZ(t,e,n){const i=ut.fun(e)&&e;i&&!n&&(n=[]);const r=D.useMemo(()=>i||arguments.length==3?tZ():void 0,[]),s=D.useRef(0),a=SU(),o=D.useMemo(()=>({ctrls:[],queue:[],flush(v,_){const S=sB(v,_);return s.current>0&&!o.queue.length&&!Object.keys(S).some(b=>!v.springs[b])?ZA(v,_):new Promise(b=>{DU(v,S),o.queue.push(()=>{b(ZA(v,_))}),a()})}}),[]),l=D.useRef([...o.ctrls]),c=[],u=JP(t)||0;D.useMemo(()=>{mn(l.current.slice(t,u),v=>{zQ(v,r),v.stop(!0)}),l.current.length=t,h(u,t)},[t]),D.useMemo(()=>{h(0,Math.min(u,t))},n);function h(v,_){for(let S=v;S<_;S++){const M=l.current[S]||(l.current[S]=new $Q(null,o.flush)),b=i?i(S,M):e[S];b&&(c[S]=KQ(b))}}const f=l.current.map((v,_)=>sB(v,c[_])),m=D.useContext(Qy),g=JP(m),y=m!==g&&GQ(m);GE(()=>{s.current++,o.ctrls=l.current;const{queue:v}=o;v.length&&(o.queue=[],mn(v,_=>_())),mn(l.current,(_,S)=>{r==null||r.add(_),y&&_.start({default:m});const M=c[S];M&&(HQ(_,M.ref),_.ref?_.queue.push(M):_.start(M))})}),AU(()=>()=>{mn(o.ctrls,v=>v.stop(!0))});const x=f.map(v=>({...v}));return r?[x,r]:x}function iZ(t,e){const n=ut.fun(t),[[i],r]=nZ(1,n?t:[t],n?[]:e);return n||arguments.length==2?[i,r]:i}var rZ=class extends WE{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=Ap(...e);const n=this._get(),i=WA(n);zE(this,i.create(n))}advance(t){const e=this._get(),n=this.get();Ga(e,n)||(ha(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&aB(this._active)&&C_(this)}_get(){const t=ut.arr(this.source)?this.source.map(ms):Ss(ms(this.source));return this.calc(...t)}_start(){this.idle&&!aB(this._active)&&(this.idle=!1,mn(Ky(this),t=>{t.done=!1}),Qs.skipAnimation?(Gt.batchedUpdates(()=>this.advance()),C_(this)):Wy.start(this))}_attach(){let t=1;mn(Ss(this.source),e=>{fa(e)&&sm(e,this),YA(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){mn(Ss(this.source),t=>{fa(t)&&k0(t,this)}),this._active.clear(),C_(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=Ss(this.source).reduce((e,n)=>Math.max(e,(YA(n)?n.priority:0)+1),0))}};function sZ(t){return t.idle!==!1}function aB(t){return!t.size||Array.from(t).every(sZ)}function C_(t){t.idle||(t.idle=!0,mn(Ky(t),e=>{e.done=!0}),U0(t,{type:"idle",parent:t}))}Qs.assign({createStringInterpolator:xU,to:(t,e)=>new rZ(t,e)});var aZ=["primitive"].concat(Object.keys(NF).filter(t=>/^[A-Z]/.test(t)).map(t=>t[0].toLowerCase()+t.slice(1)));Qs.assign({createStringInterpolator:xU,colors:nQ,frameLoop:"demand"});mK(()=>{Gt.advance()});var oZ=NQ(aZ,{applyAnimatedValues:Va}),lZ=oZ.animated;let qd;function cZ(){var t;if(qd!==void 0)return qd;try{let e;const n=document.createElement("canvas");return qd=!!(window.WebGL2RenderingContext&&(e=n.getContext("webgl2"))),e&&((t=e.getExtension("WEBGL_lose_context"))==null||t.loseContext()),qd}catch{return qd=!1}}const XE=parseInt(bl.replace(/\D+/g,""));function oB(t,e){if(e===MN)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),t;if(e===B0||e===HM){let n=t.getIndex();if(n===null){const a=[],o=t.getAttribute("position");if(o!==void 0){for(let l=0;l<o.count;l++)a.push(l);t.setIndex(a),n=t.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t}const i=n.count-2,r=[];if(n)if(e===B0)for(let a=1;a<=i;a++)r.push(n.getX(0)),r.push(n.getX(a)),r.push(n.getX(a+1));else for(let a=0;a<i;a++)a%2===0?(r.push(n.getX(a)),r.push(n.getX(a+1)),r.push(n.getX(a+2))):(r.push(n.getX(a+2)),r.push(n.getX(a+1)),r.push(n.getX(a)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=t.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),t}function uZ(t,e=Math.PI/3){const n=Math.cos(e),i=(1+1e-10)*100,r=[new K,new K,new K],s=new K,a=new K,o=new K,l=new K;function c(y){const x=~~(y.x*i),v=~~(y.y*i),_=~~(y.z*i);return`${x},${v},${_}`}const u=t.index?t.toNonIndexed():t,h=u.attributes.position,f={};for(let y=0,x=h.count/3;y<x;y++){const v=3*y,_=r[0].fromBufferAttribute(h,v+0),S=r[1].fromBufferAttribute(h,v+1),M=r[2].fromBufferAttribute(h,v+2);s.subVectors(M,S),a.subVectors(_,S);const b=new K().crossVectors(s,a).normalize();for(let C=0;C<3;C++){const B=r[C],P=c(B);P in f||(f[P]=[]),f[P].push(b)}}const m=new Float32Array(h.count*3),g=new $t(m,3,!1);for(let y=0,x=h.count/3;y<x;y++){const v=3*y,_=r[0].fromBufferAttribute(h,v+0),S=r[1].fromBufferAttribute(h,v+1),M=r[2].fromBufferAttribute(h,v+2);s.subVectors(M,S),a.subVectors(_,S),o.crossVectors(s,a).normalize();for(let b=0;b<3;b++){const C=r[b],B=c(C),P=f[B];l.set(0,0,0);for(let T=0,I=P.length;T<I;T++){const z=P[T];o.dot(z)>n&&l.add(z)}l.normalize(),g.setXYZ(v+b,l.x,l.y,l.z)}}return u.setAttribute("normal",g),u}var xs=Uint8Array,Jo=Uint16Array,qA=Uint32Array,kU=new xs([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),OU=new xs([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),hZ=new xs([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),GU=function(t,e){for(var n=new Jo(31),i=0;i<31;++i)n[i]=e+=1<<t[i-1];for(var r=new qA(n[30]),i=1;i<30;++i)for(var s=n[i];s<n[i+1];++s)r[s]=s-n[i]<<5|i;return[n,r]},zU=GU(kU,2),HU=zU[0],dZ=zU[1];HU[28]=258,dZ[258]=28;var fZ=GU(OU,0),pZ=fZ[0],$A=new Jo(32768);for(var Nn=0;Nn<32768;++Nn){var Lo=(Nn&43690)>>>1|(Nn&21845)<<1;Lo=(Lo&52428)>>>2|(Lo&13107)<<2,Lo=(Lo&61680)>>>4|(Lo&3855)<<4,$A[Nn]=((Lo&65280)>>>8|(Lo&255)<<8)>>>1}var Df=function(t,e,n){for(var i=t.length,r=0,s=new Jo(e);r<i;++r)++s[t[r]-1];var a=new Jo(e);for(r=0;r<e;++r)a[r]=a[r-1]+s[r-1]<<1;var o;if(n){o=new Jo(1<<e);var l=15-e;for(r=0;r<i;++r)if(t[r])for(var c=r<<4|t[r],u=e-t[r],h=a[t[r]-1]++<<u,f=h|(1<<u)-1;h<=f;++h)o[$A[h]>>>l]=c}else for(o=new Jo(i),r=0;r<i;++r)t[r]&&(o[r]=$A[a[t[r]-1]++]>>>15-t[r]);return o},om=new xs(288);for(var Nn=0;Nn<144;++Nn)om[Nn]=8;for(var Nn=144;Nn<256;++Nn)om[Nn]=9;for(var Nn=256;Nn<280;++Nn)om[Nn]=7;for(var Nn=280;Nn<288;++Nn)om[Nn]=8;var VU=new xs(32);for(var Nn=0;Nn<32;++Nn)VU[Nn]=5;var mZ=Df(om,9,1),gZ=Df(VU,5,1),R_=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},Ds=function(t,e,n){var i=e/8|0;return(t[i]|t[i+1]<<8)>>(e&7)&n},P_=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},vZ=function(t){return(t/8|0)+(t&7&&1)},yZ=function(t,e,n){(n==null||n>t.length)&&(n=t.length);var i=new(t instanceof Jo?Jo:t instanceof qA?qA:xs)(n-e);return i.set(t.subarray(e,n)),i},xZ=function(t,e,n){var i=t.length;if(!i||n&&!n.l&&i<5)return e||new xs(0);var r=!e||n,s=!n||n.i;n||(n={}),e||(e=new xs(i*3));var a=function(de){var fe=e.length;if(de>fe){var Se=new xs(Math.max(fe*2,de));Se.set(e),e=Se}},o=n.f||0,l=n.p||0,c=n.b||0,u=n.l,h=n.d,f=n.m,m=n.n,g=i*8;do{if(!u){n.f=o=Ds(t,l,1);var y=Ds(t,l+1,3);if(l+=3,y)if(y==1)u=mZ,h=gZ,f=9,m=5;else if(y==2){var S=Ds(t,l,31)+257,M=Ds(t,l+10,15)+4,b=S+Ds(t,l+5,31)+1;l+=14;for(var C=new xs(b),B=new xs(19),P=0;P<M;++P)B[hZ[P]]=Ds(t,l+P*3,7);l+=M*3;for(var T=R_(B),I=(1<<T)-1,z=Df(B,T,1),P=0;P<b;){var G=z[Ds(t,l,I)];l+=G&15;var x=G>>>4;if(x<16)C[P++]=x;else{var Q=0,U=0;for(x==16?(U=3+Ds(t,l,3),l+=2,Q=C[P-1]):x==17?(U=3+Ds(t,l,7),l+=3):x==18&&(U=11+Ds(t,l,127),l+=7);U--;)C[P++]=Q}}var ee=C.subarray(0,S),$=C.subarray(S);f=R_(ee),m=R_($),u=Df(ee,f,1),h=Df($,m,1)}else throw"invalid block type";else{var x=vZ(l)+4,v=t[x-4]|t[x-3]<<8,_=x+v;if(_>i){if(s)throw"unexpected EOF";break}r&&a(c+v),e.set(t.subarray(x,_),c),n.b=c+=v,n.p=l=_*8;continue}if(l>g){if(s)throw"unexpected EOF";break}}r&&a(c+131072);for(var oe=(1<<f)-1,Z=(1<<m)-1,J=l;;J=l){var Q=u[P_(t,l)&oe],H=Q>>>4;if(l+=Q&15,l>g){if(s)throw"unexpected EOF";break}if(!Q)throw"invalid length/literal";if(H<256)e[c++]=H;else if(H==256){J=l,u=null;break}else{var O=H-254;if(H>264){var P=H-257,j=kU[P];O=Ds(t,l,(1<<j)-1)+HU[P],l+=j}var W=h[P_(t,l)&Z],ne=W>>>4;if(!W)throw"invalid distance";l+=W&15;var $=pZ[ne];if(ne>3){var j=OU[ne];$+=P_(t,l)&(1<<j)-1,l+=j}if(l>g){if(s)throw"unexpected EOF";break}r&&a(c+131072);for(var ae=c+O;c<ae;c+=4)e[c]=e[c-$],e[c+1]=e[c+1-$],e[c+2]=e[c+2-$],e[c+3]=e[c+3-$];c=ae}}n.l=u,n.p=J,n.b=c,u&&(o=1,n.m=f,n.d=h,n.n=m)}while(!o);return c==e.length?e:yZ(e,0,c)},_Z=new xs(0),SZ=function(t){if((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(t[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function pv(t,e){return xZ((SZ(t),t.subarray(2,-4)),e)}var AZ=typeof TextDecoder<"u"&&new TextDecoder,wZ=0;try{AZ.decode(_Z,{stream:!0}),wZ=1}catch{}const MZ=t=>t&&t.isCubeTexture;class EZ extends Sn{constructor(e,n){var i,r;const s=MZ(e),o=((r=s?(i=e.image[0])==null?void 0:i.width:e.image.width)!=null?r:1024)/4,l=Math.floor(Math.log2(o)),c=Math.pow(2,l),u=3*Math.max(c,16*7),h=4*c,f=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/u}`,`#define CUBEUV_TEXEL_HEIGHT ${1/h}`,`#define CUBEUV_MAX_MIP ${l}.0`],m=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,g=f.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${XE>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,y={map:{value:e},height:{value:(n==null?void 0:n.height)||15},radius:{value:(n==null?void 0:n.radius)||100}},x=new Zp(1,16),v=new ti({uniforms:y,fragmentShader:g,vertexShader:m,side:Ii});super(x,v)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var bZ=Object.defineProperty,TZ=(t,e,n)=>e in t?bZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,CZ=(t,e,n)=>(TZ(t,e+"",n),n);class RZ{constructor(){CZ(this,"_listeners")}addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(n)===-1&&i[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e);e.target=null}}}var PZ=Object.defineProperty,BZ=(t,e,n)=>e in t?PZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,It=(t,e,n)=>(BZ(t,typeof e!="symbol"?e+"":e,n),n);const mv=new Qc,lB=new da,IZ=Math.cos(70*(Math.PI/180)),cB=(t,e)=>(t%e+e)%e;let LZ=class extends RZ{constructor(e,n){super(),It(this,"object"),It(this,"domElement"),It(this,"enabled",!0),It(this,"target",new K),It(this,"minDistance",0),It(this,"maxDistance",1/0),It(this,"minZoom",0),It(this,"maxZoom",1/0),It(this,"minPolarAngle",0),It(this,"maxPolarAngle",Math.PI),It(this,"minAzimuthAngle",-1/0),It(this,"maxAzimuthAngle",1/0),It(this,"enableDamping",!1),It(this,"dampingFactor",.05),It(this,"enableZoom",!0),It(this,"zoomSpeed",1),It(this,"enableRotate",!0),It(this,"rotateSpeed",1),It(this,"enablePan",!0),It(this,"panSpeed",1),It(this,"screenSpacePanning",!0),It(this,"keyPanSpeed",7),It(this,"zoomToCursor",!1),It(this,"autoRotate",!1),It(this,"autoRotateSpeed",2),It(this,"reverseOrbit",!1),It(this,"reverseHorizontalOrbit",!1),It(this,"reverseVerticalOrbit",!1),It(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),It(this,"mouseButtons",{LEFT:hc.ROTATE,MIDDLE:hc.DOLLY,RIGHT:hc.PAN}),It(this,"touches",{ONE:dc.ROTATE,TWO:dc.DOLLY_PAN}),It(this,"target0"),It(this,"position0"),It(this,"zoom0"),It(this,"_domElementKeyEvents",null),It(this,"getPolarAngle"),It(this,"getAzimuthalAngle"),It(this,"setPolarAngle"),It(this,"setAzimuthalAngle"),It(this,"getDistance"),It(this,"getZoomScale"),It(this,"listenToKeyEvents"),It(this,"stopListenToKeyEvents"),It(this,"saveState"),It(this,"reset"),It(this,"update"),It(this,"connect"),It(this,"dispose"),It(this,"dollyIn"),It(this,"dollyOut"),It(this,"getScale"),It(this,"setScale"),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=re=>{let Ae=cB(re,2*Math.PI),Ge=u.phi;Ge<0&&(Ge+=2*Math.PI),Ae<0&&(Ae+=2*Math.PI);let Ve=Math.abs(Ae-Ge);2*Math.PI-Ve<Ve&&(Ae<Ge?Ae+=2*Math.PI:Ge+=2*Math.PI),h.phi=Ae-Ge,i.update()},this.setAzimuthalAngle=re=>{let Ae=cB(re,2*Math.PI),Ge=u.theta;Ge<0&&(Ge+=2*Math.PI),Ae<0&&(Ae+=2*Math.PI);let Ve=Math.abs(Ae-Ge);2*Math.PI-Ve<Ve&&(Ae<Ge?Ae+=2*Math.PI:Ge+=2*Math.PI),h.theta=Ae-Ge,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=re=>{re.addEventListener("keydown",Le),this._domElementKeyEvents=re},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Le),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),l=o.NONE},this.update=(()=>{const re=new K,Ae=new K(0,1,0),Ge=new wi().setFromUnitVectors(e.up,Ae),Ve=Ge.clone().invert(),xe=new K,le=new wi,nt=2*Math.PI;return function(){const we=i.object.position;Ge.setFromUnitVectors(e.up,Ae),Ve.copy(Ge).invert(),re.copy(we).sub(i.target),re.applyQuaternion(Ge),u.setFromVector3(re),i.autoRotate&&l===o.NONE&&U(G()),i.enableDamping?(u.theta+=h.theta*i.dampingFactor,u.phi+=h.phi*i.dampingFactor):(u.theta+=h.theta,u.phi+=h.phi);let Ye=i.minAzimuthAngle,st=i.maxAzimuthAngle;isFinite(Ye)&&isFinite(st)&&(Ye<-Math.PI?Ye+=nt:Ye>Math.PI&&(Ye-=nt),st<-Math.PI?st+=nt:st>Math.PI&&(st-=nt),Ye<=st?u.theta=Math.max(Ye,Math.min(st,u.theta)):u.theta=u.theta>(Ye+st)/2?Math.max(Ye,u.theta):Math.min(st,u.theta)),u.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,u.phi)),u.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(m,i.dampingFactor):i.target.add(m),i.zoomToCursor&&T||i.object.isOrthographicCamera?u.radius=W(u.radius):u.radius=W(u.radius*f),re.setFromSpherical(u),re.applyQuaternion(Ve),we.copy(i.target).add(re),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(h.theta*=1-i.dampingFactor,h.phi*=1-i.dampingFactor,m.multiplyScalar(1-i.dampingFactor)):(h.set(0,0,0),m.set(0,0,0));let at=!1;if(i.zoomToCursor&&T){let Et=null;if(i.object instanceof Pn&&i.object.isPerspectiveCamera){const jt=re.length();Et=W(jt*f);const Ct=jt-Et;i.object.position.addScaledVector(B,Ct),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const jt=new K(P.x,P.y,0);jt.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/f)),i.object.updateProjectionMatrix(),at=!0;const Ct=new K(P.x,P.y,0);Ct.unproject(i.object),i.object.position.sub(Ct).add(jt),i.object.updateMatrixWorld(),Et=re.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;Et!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(Et).add(i.object.position):(mv.origin.copy(i.object.position),mv.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(mv.direction))<IZ?e.lookAt(i.target):(lB.setFromNormalAndCoplanarPoint(i.object.up,i.target),mv.intersectPlane(lB,i.target))))}else i.object instanceof ws&&i.object.isOrthographicCamera&&(at=f!==1,at&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/f)),i.object.updateProjectionMatrix()));return f=1,T=!1,at||xe.distanceToSquared(i.object.position)>c||8*(1-le.dot(i.object.quaternion))>c?(i.dispatchEvent(r),xe.copy(i.object.position),le.copy(i.object.quaternion),at=!1,!0):!1}})(),this.connect=re=>{i.domElement=re,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",Ze),i.domElement.addEventListener("pointerdown",rt),i.domElement.addEventListener("pointercancel",k),i.domElement.addEventListener("wheel",_e)},this.dispose=()=>{var re,Ae,Ge,Ve,xe,le;i.domElement&&(i.domElement.style.touchAction="auto"),(re=i.domElement)==null||re.removeEventListener("contextmenu",Ze),(Ae=i.domElement)==null||Ae.removeEventListener("pointerdown",rt),(Ge=i.domElement)==null||Ge.removeEventListener("pointercancel",k),(Ve=i.domElement)==null||Ve.removeEventListener("wheel",_e),(xe=i.domElement)==null||xe.ownerDocument.removeEventListener("pointermove",V),(le=i.domElement)==null||le.ownerDocument.removeEventListener("pointerup",k),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",Le)};const i=this,r={type:"change"},s={type:"start"},a={type:"end"},o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=o.NONE;const c=1e-6,u=new UA,h=new UA;let f=1;const m=new K,g=new Ie,y=new Ie,x=new Ie,v=new Ie,_=new Ie,S=new Ie,M=new Ie,b=new Ie,C=new Ie,B=new K,P=new Ie;let T=!1;const I=[],z={};function G(){return 2*Math.PI/60/60*i.autoRotateSpeed}function Q(){return Math.pow(.95,i.zoomSpeed)}function U(re){i.reverseOrbit||i.reverseHorizontalOrbit?h.theta+=re:h.theta-=re}function ee(re){i.reverseOrbit||i.reverseVerticalOrbit?h.phi+=re:h.phi-=re}const $=(()=>{const re=new K;return function(Ge,Ve){re.setFromMatrixColumn(Ve,0),re.multiplyScalar(-Ge),m.add(re)}})(),oe=(()=>{const re=new K;return function(Ge,Ve){i.screenSpacePanning===!0?re.setFromMatrixColumn(Ve,1):(re.setFromMatrixColumn(Ve,0),re.crossVectors(i.object.up,re)),re.multiplyScalar(Ge),m.add(re)}})(),Z=(()=>{const re=new K;return function(Ge,Ve){const xe=i.domElement;if(xe&&i.object instanceof Pn&&i.object.isPerspectiveCamera){const le=i.object.position;re.copy(le).sub(i.target);let nt=re.length();nt*=Math.tan(i.object.fov/2*Math.PI/180),$(2*Ge*nt/xe.clientHeight,i.object.matrix),oe(2*Ve*nt/xe.clientHeight,i.object.matrix)}else xe&&i.object instanceof ws&&i.object.isOrthographicCamera?($(Ge*(i.object.right-i.object.left)/i.object.zoom/xe.clientWidth,i.object.matrix),oe(Ve*(i.object.top-i.object.bottom)/i.object.zoom/xe.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function J(re){i.object instanceof Pn&&i.object.isPerspectiveCamera||i.object instanceof ws&&i.object.isOrthographicCamera?f=re:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function H(re){J(f/re)}function O(re){J(f*re)}function j(re){if(!i.zoomToCursor||!i.domElement)return;T=!0;const Ae=i.domElement.getBoundingClientRect(),Ge=re.clientX-Ae.left,Ve=re.clientY-Ae.top,xe=Ae.width,le=Ae.height;P.x=Ge/xe*2-1,P.y=-(Ve/le)*2+1,B.set(P.x,P.y,1).unproject(i.object).sub(i.object.position).normalize()}function W(re){return Math.max(i.minDistance,Math.min(i.maxDistance,re))}function ne(re){g.set(re.clientX,re.clientY)}function ae(re){j(re),M.set(re.clientX,re.clientY)}function de(re){v.set(re.clientX,re.clientY)}function fe(re){y.set(re.clientX,re.clientY),x.subVectors(y,g).multiplyScalar(i.rotateSpeed);const Ae=i.domElement;Ae&&(U(2*Math.PI*x.x/Ae.clientHeight),ee(2*Math.PI*x.y/Ae.clientHeight)),g.copy(y),i.update()}function Se(re){b.set(re.clientX,re.clientY),C.subVectors(b,M),C.y>0?H(Q()):C.y<0&&O(Q()),M.copy(b),i.update()}function He(re){_.set(re.clientX,re.clientY),S.subVectors(_,v).multiplyScalar(i.panSpeed),Z(S.x,S.y),v.copy(_),i.update()}function Fe(re){j(re),re.deltaY<0?O(Q()):re.deltaY>0&&H(Q()),i.update()}function ge(re){let Ae=!1;switch(re.code){case i.keys.UP:Z(0,i.keyPanSpeed),Ae=!0;break;case i.keys.BOTTOM:Z(0,-i.keyPanSpeed),Ae=!0;break;case i.keys.LEFT:Z(i.keyPanSpeed,0),Ae=!0;break;case i.keys.RIGHT:Z(-i.keyPanSpeed,0),Ae=!0;break}Ae&&(re.preventDefault(),i.update())}function X(){if(I.length==1)g.set(I[0].pageX,I[0].pageY);else{const re=.5*(I[0].pageX+I[1].pageX),Ae=.5*(I[0].pageY+I[1].pageY);g.set(re,Ae)}}function Re(){if(I.length==1)v.set(I[0].pageX,I[0].pageY);else{const re=.5*(I[0].pageX+I[1].pageX),Ae=.5*(I[0].pageY+I[1].pageY);v.set(re,Ae)}}function ye(){const re=I[0].pageX-I[1].pageX,Ae=I[0].pageY-I[1].pageY,Ge=Math.sqrt(re*re+Ae*Ae);M.set(0,Ge)}function De(){i.enableZoom&&ye(),i.enablePan&&Re()}function Me(){i.enableZoom&&ye(),i.enableRotate&&X()}function Qe(re){if(I.length==1)y.set(re.pageX,re.pageY);else{const Ge=et(re),Ve=.5*(re.pageX+Ge.x),xe=.5*(re.pageY+Ge.y);y.set(Ve,xe)}x.subVectors(y,g).multiplyScalar(i.rotateSpeed);const Ae=i.domElement;Ae&&(U(2*Math.PI*x.x/Ae.clientHeight),ee(2*Math.PI*x.y/Ae.clientHeight)),g.copy(y)}function Ee(re){if(I.length==1)_.set(re.pageX,re.pageY);else{const Ae=et(re),Ge=.5*(re.pageX+Ae.x),Ve=.5*(re.pageY+Ae.y);_.set(Ge,Ve)}S.subVectors(_,v).multiplyScalar(i.panSpeed),Z(S.x,S.y),v.copy(_)}function Oe(re){const Ae=et(re),Ge=re.pageX-Ae.x,Ve=re.pageY-Ae.y,xe=Math.sqrt(Ge*Ge+Ve*Ve);b.set(0,xe),C.set(0,Math.pow(b.y/M.y,i.zoomSpeed)),H(C.y),M.copy(b)}function Je(re){i.enableZoom&&Oe(re),i.enablePan&&Ee(re)}function be(re){i.enableZoom&&Oe(re),i.enableRotate&&Qe(re)}function rt(re){var Ae,Ge;i.enabled!==!1&&(I.length===0&&((Ae=i.domElement)==null||Ae.ownerDocument.addEventListener("pointermove",V),(Ge=i.domElement)==null||Ge.ownerDocument.addEventListener("pointerup",k)),ct(re),re.pointerType==="touch"?Ke(re):ue(re))}function V(re){i.enabled!==!1&&(re.pointerType==="touch"?We(re):je(re))}function k(re){var Ae,Ge,Ve;ot(re),I.length===0&&((Ae=i.domElement)==null||Ae.releasePointerCapture(re.pointerId),(Ge=i.domElement)==null||Ge.ownerDocument.removeEventListener("pointermove",V),(Ve=i.domElement)==null||Ve.ownerDocument.removeEventListener("pointerup",k)),i.dispatchEvent(a),l=o.NONE}function ue(re){let Ae;switch(re.button){case 0:Ae=i.mouseButtons.LEFT;break;case 1:Ae=i.mouseButtons.MIDDLE;break;case 2:Ae=i.mouseButtons.RIGHT;break;default:Ae=-1}switch(Ae){case hc.DOLLY:if(i.enableZoom===!1)return;ae(re),l=o.DOLLY;break;case hc.ROTATE:if(re.ctrlKey||re.metaKey||re.shiftKey){if(i.enablePan===!1)return;de(re),l=o.PAN}else{if(i.enableRotate===!1)return;ne(re),l=o.ROTATE}break;case hc.PAN:if(re.ctrlKey||re.metaKey||re.shiftKey){if(i.enableRotate===!1)return;ne(re),l=o.ROTATE}else{if(i.enablePan===!1)return;de(re),l=o.PAN}break;default:l=o.NONE}l!==o.NONE&&i.dispatchEvent(s)}function je(re){if(i.enabled!==!1)switch(l){case o.ROTATE:if(i.enableRotate===!1)return;fe(re);break;case o.DOLLY:if(i.enableZoom===!1)return;Se(re);break;case o.PAN:if(i.enablePan===!1)return;He(re);break}}function _e(re){i.enabled===!1||i.enableZoom===!1||l!==o.NONE&&l!==o.ROTATE||(re.preventDefault(),i.dispatchEvent(s),Fe(re),i.dispatchEvent(a))}function Le(re){i.enabled===!1||i.enablePan===!1||ge(re)}function Ke(re){switch(Pe(re),I.length){case 1:switch(i.touches.ONE){case dc.ROTATE:if(i.enableRotate===!1)return;X(),l=o.TOUCH_ROTATE;break;case dc.PAN:if(i.enablePan===!1)return;Re(),l=o.TOUCH_PAN;break;default:l=o.NONE}break;case 2:switch(i.touches.TWO){case dc.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;De(),l=o.TOUCH_DOLLY_PAN;break;case dc.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Me(),l=o.TOUCH_DOLLY_ROTATE;break;default:l=o.NONE}break;default:l=o.NONE}l!==o.NONE&&i.dispatchEvent(s)}function We(re){switch(Pe(re),l){case o.TOUCH_ROTATE:if(i.enableRotate===!1)return;Qe(re),i.update();break;case o.TOUCH_PAN:if(i.enablePan===!1)return;Ee(re),i.update();break;case o.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Je(re),i.update();break;case o.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;be(re),i.update();break;default:l=o.NONE}}function Ze(re){i.enabled!==!1&&re.preventDefault()}function ct(re){I.push(re)}function ot(re){delete z[re.pointerId];for(let Ae=0;Ae<I.length;Ae++)if(I[Ae].pointerId==re.pointerId){I.splice(Ae,1);return}}function Pe(re){let Ae=z[re.pointerId];Ae===void 0&&(Ae=new Ie,z[re.pointerId]=Ae),Ae.set(re.pageX,re.pageY)}function et(re){const Ae=re.pointerId===I[0].pointerId?I[1]:I[0];return z[Ae.pointerId]}this.dollyIn=(re=Q())=>{O(re),i.update()},this.dollyOut=(re=Q())=>{H(re),i.update()},this.getScale=()=>f,this.setScale=re=>{J(re),i.update()},this.getZoomScale=()=>Q(),n!==void 0&&this.connect(n),this.update()}};function z0(t){if(typeof TextDecoder<"u")return new TextDecoder().decode(t);let e="";for(let n=0,i=t.length;n<i;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch{return e}}const Tc="srgb",to="srgb-linear",uB=3001,DZ=3e3;class JE extends Wi{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new OZ(n)}),this.register(function(n){return new GZ(n)}),this.register(function(n){return new KZ(n)}),this.register(function(n){return new QZ(n)}),this.register(function(n){return new ZZ(n)}),this.register(function(n){return new HZ(n)}),this.register(function(n){return new VZ(n)}),this.register(function(n){return new jZ(n)}),this.register(function(n){return new WZ(n)}),this.register(function(n){return new kZ(n)}),this.register(function(n){return new XZ(n)}),this.register(function(n){return new zZ(n)}),this.register(function(n){return new YZ(n)}),this.register(function(n){return new JZ(n)}),this.register(function(n){return new FZ(n)}),this.register(function(n){return new qZ(n)}),this.register(function(n){return new $Z(n)})}load(e,n,i,r){const s=this;let a;if(this.resourcePath!=="")a=this.resourcePath;else if(this.path!==""){const c=al.extractUrlBase(e);a=al.resolveURL(c,this.path)}else a=al.extractUrlBase(e);this.manager.itemStart(e);const o=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new Vi(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,a,function(u){n(u),s.manager.itemEnd(e)},o)}catch(u){o(u)}},i,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,n,i,r){let s;const a={},o={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(z0(new Uint8Array(e.slice(0,4)))===jU){try{a[nn.KHR_BINARY_GLTF]=new eq(e)}catch(u){r&&r(u);return}s=JSON.parse(a[nn.KHR_BINARY_GLTF].content)}else s=JSON.parse(z0(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new fq(s,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const u=this.pluginCallbacks[c](l);u.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),o[u.name]=u,a[u.name]=!0}if(s.extensionsUsed)for(let c=0;c<s.extensionsUsed.length;++c){const u=s.extensionsUsed[c],h=s.extensionsRequired||[];switch(u){case nn.KHR_MATERIALS_UNLIT:a[u]=new UZ;break;case nn.KHR_DRACO_MESH_COMPRESSION:a[u]=new tq(s,this.dracoLoader);break;case nn.KHR_TEXTURE_TRANSFORM:a[u]=new nq;break;case nn.KHR_MESH_QUANTIZATION:a[u]=new iq;break;default:h.indexOf(u)>=0&&o[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}l.setExtensions(a),l.setPlugins(o),l.parse(i,r)}parseAsync(e,n){const i=this;return new Promise(function(r,s){i.parse(e,n,r,s)})}}function NZ(){let t={};return{get:function(e){return t[e]},add:function(e,n){t[e]=n},remove:function(e){delete t[e]},removeAll:function(){t={}}}}const nn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class FZ{constructor(e){this.parser=e,this.name=nn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,n=this.parser.json.nodes||[];for(let i=0,r=n.length;i<r;i++){const s=n[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const n=this.parser,i="light:"+e;let r=n.cache.get(i);if(r)return r;const s=n.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const u=new ht(16777215);l.color!==void 0&&u.setRGB(l.color[0],l.color[1],l.color[2],to);const h=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new xE(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new yE(u),c.distance=h;break;case"spot":c=new vE(u),c.distance=h,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,za(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=n.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),n.cache.add(i,r),r}getDependency(e,n){if(e==="light")return this._loadLight(n)}createNodeAttachment(e){const n=this,i=this.parser,s=i.json.nodes[e],o=(s.extensions&&s.extensions[this.name]||{}).light;return o===void 0?null:this._loadLight(o).then(function(l){return i._getNodeRef(n.cache,o,l)})}}class UZ{constructor(){this.name=nn.KHR_MATERIALS_UNLIT}getMaterialType(){return vr}extendParams(e,n,i){const r=[];e.color=new ht(1,1,1),e.opacity=1;const s=n.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const a=s.baseColorFactor;e.color.setRGB(a[0],a[1],a[2],to),e.opacity=a[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,Tc))}return Promise.all(r)}}class kZ{constructor(e){this.parser=e,this.name=nn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,n){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(n.emissiveIntensity=s),Promise.resolve()}}class OZ{constructor(e){this.parser=e,this.name=nn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ts}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];if(a.clearcoatFactor!==void 0&&(n.clearcoat=a.clearcoatFactor),a.clearcoatTexture!==void 0&&s.push(i.assignTexture(n,"clearcoatMap",a.clearcoatTexture)),a.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=a.clearcoatRoughnessFactor),a.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(n,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),a.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(n,"clearcoatNormalMap",a.clearcoatNormalTexture)),a.clearcoatNormalTexture.scale!==void 0)){const o=a.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new Ie(o,o)}return Promise.all(s)}}class GZ{constructor(e){this.parser=e,this.name=nn.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ts}extendMaterialParams(e,n){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return n.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class zZ{constructor(e){this.parser=e,this.name=nn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ts}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.iridescenceFactor!==void 0&&(n.iridescence=a.iridescenceFactor),a.iridescenceTexture!==void 0&&s.push(i.assignTexture(n,"iridescenceMap",a.iridescenceTexture)),a.iridescenceIor!==void 0&&(n.iridescenceIOR=a.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),a.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),a.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),a.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(n,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(s)}}class HZ{constructor(e){this.parser=e,this.name=nn.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ts}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];n.sheenColor=new ht(0,0,0),n.sheenRoughness=0,n.sheen=1;const a=r.extensions[this.name];if(a.sheenColorFactor!==void 0){const o=a.sheenColorFactor;n.sheenColor.setRGB(o[0],o[1],o[2],to)}return a.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=a.sheenRoughnessFactor),a.sheenColorTexture!==void 0&&s.push(i.assignTexture(n,"sheenColorMap",a.sheenColorTexture,Tc)),a.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(n,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(s)}}class VZ{constructor(e){this.parser=e,this.name=nn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ts}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.transmissionFactor!==void 0&&(n.transmission=a.transmissionFactor),a.transmissionTexture!==void 0&&s.push(i.assignTexture(n,"transmissionMap",a.transmissionTexture)),Promise.all(s)}}class jZ{constructor(e){this.parser=e,this.name=nn.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ts}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];n.thickness=a.thicknessFactor!==void 0?a.thicknessFactor:0,a.thicknessTexture!==void 0&&s.push(i.assignTexture(n,"thicknessMap",a.thicknessTexture)),n.attenuationDistance=a.attenuationDistance||1/0;const o=a.attenuationColor||[1,1,1];return n.attenuationColor=new ht().setRGB(o[0],o[1],o[2],to),Promise.all(s)}}class WZ{constructor(e){this.parser=e,this.name=nn.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ts}extendMaterialParams(e,n){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return n.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class XZ{constructor(e){this.parser=e,this.name=nn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ts}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];n.specularIntensity=a.specularFactor!==void 0?a.specularFactor:1,a.specularTexture!==void 0&&s.push(i.assignTexture(n,"specularIntensityMap",a.specularTexture));const o=a.specularColorFactor||[1,1,1];return n.specularColor=new ht().setRGB(o[0],o[1],o[2],to),a.specularColorTexture!==void 0&&s.push(i.assignTexture(n,"specularColorMap",a.specularColorTexture,Tc)),Promise.all(s)}}class JZ{constructor(e){this.parser=e,this.name=nn.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ts}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return n.bumpScale=a.bumpFactor!==void 0?a.bumpFactor:1,a.bumpTexture!==void 0&&s.push(i.assignTexture(n,"bumpMap",a.bumpTexture)),Promise.all(s)}}class YZ{constructor(e){this.parser=e,this.name=nn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ts}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.anisotropyStrength!==void 0&&(n.anisotropy=a.anisotropyStrength),a.anisotropyRotation!==void 0&&(n.anisotropyRotation=a.anisotropyRotation),a.anisotropyTexture!==void 0&&s.push(i.assignTexture(n,"anisotropyMap",a.anisotropyTexture)),Promise.all(s)}}class KZ{constructor(e){this.parser=e,this.name=nn.KHR_TEXTURE_BASISU}loadTexture(e){const n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],a=n.options.ktx2Loader;if(!a){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(e,s.source,a)}}class QZ{constructor(e){this.parser=e,this.name=nn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const n=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[n])return null;const a=s.extensions[n],o=r.images[a.source];let l=i.textureLoader;if(o.uri){const c=i.options.manager.getHandler(o.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,a.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class ZZ{constructor(e){this.parser=e,this.name=nn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const n=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[n])return null;const a=s.extensions[n],o=r.images[a.source];let l=i.textureLoader;if(o.uri){const c=i.options.manager.getHandler(o.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,a.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class qZ{constructor(e){this.name=nn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const n=this.parser.json,i=n.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(o){const l=r.byteOffset||0,c=r.byteLength||0,u=r.count,h=r.byteStride,f=new Uint8Array(o,l,c);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(u,h,f,r.mode,r.filter).then(function(m){return m.buffer}):a.ready.then(function(){const m=new ArrayBuffer(u*h);return a.decodeGltfBuffer(new Uint8Array(m),u,h,f,r.mode,r.filter),m})})}else return null}}class $Z{constructor(e){this.name=nn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const n=this.parser.json,i=n.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=n.meshes[i.mesh];for(const c of r.primitives)if(c.mode!==ps.TRIANGLES&&c.mode!==ps.TRIANGLE_STRIP&&c.mode!==ps.TRIANGLE_FAN&&c.mode!==void 0)return null;const a=i.extensions[this.name].attributes,o=[],l={};for(const c in a)o.push(this.parser.getDependency("accessor",a[c]).then(u=>(l[c]=u,l[c])));return o.length<1?null:(o.push(this.parser.createNodeMesh(e)),Promise.all(o).then(c=>{const u=c.pop(),h=u.isGroup?u.children:[u],f=c[0].count,m=[];for(const g of h){const y=new bt,x=new K,v=new wi,_=new K(1,1,1),S=new nE(g.geometry,g.material,f);for(let M=0;M<f;M++)l.TRANSLATION&&x.fromBufferAttribute(l.TRANSLATION,M),l.ROTATION&&v.fromBufferAttribute(l.ROTATION,M),l.SCALE&&_.fromBufferAttribute(l.SCALE,M),S.setMatrixAt(M,y.compose(x,v,_));for(const M in l)if(M==="_COLOR_0"){const b=l[M];S.instanceColor=new yl(b.array,b.itemSize,b.normalized)}else M!=="TRANSLATION"&&M!=="ROTATION"&&M!=="SCALE"&&g.geometry.setAttribute(M,l[M]);an.prototype.copy.call(S,g),this.parser.assignFinalMaterial(S),m.push(S)}return u.isGroup?(u.clear(),u.add(...m),u):m[0]}))}}const jU="glTF",$d=12,hB={JSON:1313821514,BIN:5130562};class eq{constructor(e){this.name=nn.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(e,0,$d);if(this.header={magic:z0(new Uint8Array(e.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==jU)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-$d,r=new DataView(e,$d);let s=0;for(;s<i;){const a=r.getUint32(s,!0);s+=4;const o=r.getUint32(s,!0);if(s+=4,o===hB.JSON){const l=new Uint8Array(e,$d+s,a);this.content=z0(l)}else if(o===hB.BIN){const l=$d+s;this.body=e.slice(l,l+a)}s+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class tq{constructor(e,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=nn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(e,n){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,o={},l={},c={};for(const u in a){const h=ew[u]||u.toLowerCase();o[h]=a[u]}for(const u in e.attributes){const h=ew[u]||u.toLowerCase();if(a[u]!==void 0){const f=i.accessors[e.attributes[u]],m=_h[f.componentType];c[h]=m.name,l[h]=f.normalized===!0}}return n.getDependency("bufferView",s).then(function(u){return new Promise(function(h,f){r.decodeDracoFile(u,function(m){for(const g in m.attributes){const y=m.attributes[g],x=l[g];x!==void 0&&(y.normalized=x)}h(m)},o,c,to,f)})})}}class nq{constructor(){this.name=nn.KHR_TEXTURE_TRANSFORM}extendTexture(e,n){return(n.texCoord===void 0||n.texCoord===e.channel)&&n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(e=e.clone(),n.texCoord!==void 0&&(e.channel=n.texCoord),n.offset!==void 0&&e.offset.fromArray(n.offset),n.rotation!==void 0&&(e.rotation=n.rotation),n.scale!==void 0&&e.repeat.fromArray(n.scale),e.needsUpdate=!0),e}}class iq{constructor(){this.name=nn.KHR_MESH_QUANTIZATION}}class WU extends qh{constructor(e,n,i,r){super(e,n,i,r)}copySampleValue_(e){const n=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let a=0;a!==r;a++)n[a]=i[s+a];return n}interpolate_(e,n,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=o*2,c=o*3,u=r-n,h=(i-n)/u,f=h*h,m=f*h,g=e*c,y=g-c,x=-2*m+3*f,v=m-f,_=1-x,S=v-f+h;for(let M=0;M!==o;M++){const b=a[y+M+o],C=a[y+M+l]*u,B=a[g+M+o],P=a[g+M]*u;s[M]=_*b+S*C+x*B+v*P}return s}}const rq=new wi;class sq extends WU{interpolate_(e,n,i,r){const s=super.interpolate_(e,n,i,r);return rq.fromArray(s).normalize().toArray(s),s}}const ps={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},_h={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},dB={9728:Rn,9729:kt,9984:lp,9985:my,9986:gh,9987:_a},fB={33071:Dn,33648:Lh,10497:pl},B_={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ew={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...XE>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Do={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},aq={CUBICSPLINE:void 0,LINEAR:Gc,STEP:Dh},I_={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function oq(t){return t.DefaultMaterial===void 0&&(t.DefaultMaterial=new Zh({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Ks})),t.DefaultMaterial}function ic(t,e,n){for(const i in n.extensions)t[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=n.extensions[i])}function za(t,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function lq(t,e,n){let i=!1,r=!1,s=!1;for(let c=0,u=e.length;c<u;c++){const h=e[c];if(h.POSITION!==void 0&&(i=!0),h.NORMAL!==void 0&&(r=!0),h.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(t);const a=[],o=[],l=[];for(let c=0,u=e.length;c<u;c++){const h=e[c];if(i){const f=h.POSITION!==void 0?n.getDependency("accessor",h.POSITION):t.attributes.position;a.push(f)}if(r){const f=h.NORMAL!==void 0?n.getDependency("accessor",h.NORMAL):t.attributes.normal;o.push(f)}if(s){const f=h.COLOR_0!==void 0?n.getDependency("accessor",h.COLOR_0):t.attributes.color;l.push(f)}}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(l)]).then(function(c){const u=c[0],h=c[1],f=c[2];return i&&(t.morphAttributes.position=u),r&&(t.morphAttributes.normal=h),s&&(t.morphAttributes.color=f),t.morphTargetsRelative=!0,t})}function cq(t,e){if(t.updateMorphTargets(),e.weights!==void 0)for(let n=0,i=e.weights.length;n<i;n++)t.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(t.morphTargetInfluences.length===n.length){t.morphTargetDictionary={};for(let i=0,r=n.length;i<r;i++)t.morphTargetDictionary[n[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function uq(t){let e;const n=t.extensions&&t.extensions[nn.KHR_DRACO_MESH_COMPRESSION];if(n?e="draco:"+n.bufferView+":"+n.indices+":"+L_(n.attributes):e=t.indices+":"+L_(t.attributes)+":"+t.mode,t.targets!==void 0)for(let i=0,r=t.targets.length;i<r;i++)e+=":"+L_(t.targets[i]);return e}function L_(t){let e="";const n=Object.keys(t).sort();for(let i=0,r=n.length;i<r;i++)e+=n[i]+":"+t[n[i]]+";";return e}function tw(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function hq(t){return t.search(/\.jpe?g($|\?)/i)>0||t.search(/^data\:image\/jpeg/)===0?"image/jpeg":t.search(/\.webp($|\?)/i)>0||t.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const dq=new bt;class fq{constructor(e={},n={}){this.json=e,this.extensions={},this.plugins={},this.options=n,this.cache=new NZ,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||r&&s<98?this.textureLoader=new AF(this.options.manager):this.textureLoader=new RF(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Vi(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,n){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(a){const o={scene:a[0][r.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:r.asset,parser:i,userData:{}};return ic(s,o,r),za(o,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(o)})).then(function(){for(const l of o.scenes)l.updateMatrixWorld();e(o)})}).catch(n)}_markDefs(){const e=this.json.nodes||[],n=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=n.length;r<s;r++){const a=n[r].joints;for(let o=0,l=a.length;o<l;o++)e[a[o]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const a=e[r];a.mesh!==void 0&&(this._addNodeRef(this.meshCache,a.mesh),a.skin!==void 0&&(i[a.mesh].isSkinnedMesh=!0)),a.camera!==void 0&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(e,n){n!==void 0&&(e.refs[n]===void 0&&(e.refs[n]=e.uses[n]=0),e.refs[n]++)}_getNodeRef(e,n,i){if(e.refs[n]<=1)return i;const r=i.clone(),s=(a,o)=>{const l=this.associations.get(a);l!=null&&this.associations.set(o,l);for(const[c,u]of a.children.entries())s(u,o.children[c])};return s(i,r),r.name+="_instance_"+e.uses[n]++,r}_invokeOne(e){const n=Object.values(this.plugins);n.push(this);for(let i=0;i<n.length;i++){const r=e(n[i]);if(r)return r}return null}_invokeAll(e){const n=Object.values(this.plugins);n.unshift(this);const i=[];for(let r=0;r<n.length;r++){const s=e(n[r]);s&&i.push(s)}return i}getDependency(e,n){const i=e+":"+n;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(n);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(n)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(n)});break;case"accessor":r=this.loadAccessor(n);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(n)});break;case"buffer":r=this.loadBuffer(n);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(n)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(n)});break;case"skin":r=this.loadSkin(n);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(n)});break;case"camera":r=this.loadCamera(n);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,n)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let n=this.cache.get(e);if(!n){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];n=Promise.all(r.map(function(s,a){return i.getDependency(e,a)})),this.cache.add(e,n)}return n}loadBuffer(e){const n=this.json.buffers[e],i=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&e===0)return Promise.resolve(this.extensions[nn.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,a){i.load(al.resolveURL(n.uri,r.path),s,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(e){const n=this.json.bufferViews[e];return this.getDependency("buffer",n.buffer).then(function(i){const r=n.byteLength||0,s=n.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const n=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const a=B_[r.type],o=_h[r.componentType],l=r.normalized===!0,c=new o(r.count*a);return Promise.resolve(new $t(c,a,l))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(a){const o=a[0],l=B_[r.type],c=_h[r.componentType],u=c.BYTES_PER_ELEMENT,h=u*l,f=r.byteOffset||0,m=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,g=r.normalized===!0;let y,x;if(m&&m!==h){const v=Math.floor(f/m),_="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+v+":"+r.count;let S=n.cache.get(_);S||(y=new c(o,v*m,r.count*m/u),S=new Yp(y,m/u),n.cache.add(_,S)),x=new vl(S,l,f%m/u,g)}else o===null?y=new c(r.count*l):y=new c(o,f,r.count*l),x=new $t(y,l,g);if(r.sparse!==void 0){const v=B_.SCALAR,_=_h[r.sparse.indices.componentType],S=r.sparse.indices.byteOffset||0,M=r.sparse.values.byteOffset||0,b=new _(a[1],S,r.sparse.count*v),C=new c(a[2],M,r.sparse.count*l);o!==null&&(x=new $t(x.array.slice(),x.itemSize,x.normalized));for(let B=0,P=b.length;B<P;B++){const T=b[B];if(x.setX(T,C[B*l]),l>=2&&x.setY(T,C[B*l+1]),l>=3&&x.setZ(T,C[B*l+2]),l>=4&&x.setW(T,C[B*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return x})}loadTexture(e){const n=this.json,i=this.options,s=n.textures[e].source,a=n.images[s];let o=this.textureLoader;if(a.uri){const l=i.manager.getHandler(a.uri);l!==null&&(o=l)}return this.loadTextureImage(e,s,o)}loadTextureImage(e,n,i){const r=this,s=this.json,a=s.textures[e],o=s.images[n],l=(o.uri||o.bufferView)+":"+a.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(n,i).then(function(u){u.flipY=!1,u.name=a.name||o.name||"",u.name===""&&typeof o.uri=="string"&&o.uri.startsWith("data:image/")===!1&&(u.name=o.uri);const f=(s.samplers||{})[a.sampler]||{};return u.magFilter=dB[f.magFilter]||kt,u.minFilter=dB[f.minFilter]||_a,u.wrapS=fB[f.wrapS]||pl,u.wrapT=fB[f.wrapT]||pl,r.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,n){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(h=>h.clone());const a=r.images[e],o=self.URL||self.webkitURL;let l=a.uri||"",c=!1;if(a.bufferView!==void 0)l=i.getDependency("bufferView",a.bufferView).then(function(h){c=!0;const f=new Blob([h],{type:a.mimeType});return l=o.createObjectURL(f),l});else if(a.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(h){return new Promise(function(f,m){let g=f;n.isImageBitmapLoader===!0&&(g=function(y){const x=new pn(y);x.needsUpdate=!0,f(x)}),n.load(al.resolveURL(h,s.path),g,void 0,m)})}).then(function(h){return c===!0&&o.revokeObjectURL(l),za(h,a),h.userData.mimeType=a.mimeType||hq(a.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),h});return this.sourceCache[e]=u,u}assignTexture(e,n,i,r){const s=this;return this.getDependency("texture",i.index).then(function(a){if(!a)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(a=a.clone(),a.channel=i.texCoord),s.extensions[nn.KHR_TEXTURE_TRANSFORM]){const o=i.extensions!==void 0?i.extensions[nn.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const l=s.associations.get(a);a=s.extensions[nn.KHR_TEXTURE_TRANSFORM].extendTexture(a,o),s.associations.set(a,l)}}return r!==void 0&&(typeof r=="number"&&(r=r===uB?Tc:to),"colorSpace"in a?a.colorSpace=r:a.encoding=r===Tc?uB:DZ),e[n]=a,a})}assignFinalMaterial(e){const n=e.geometry;let i=e.material;const r=n.attributes.tangent===void 0,s=n.attributes.color!==void 0,a=n.attributes.normal===void 0;if(e.isPoints){const o="PointsMaterial:"+i.uuid;let l=this.cache.get(o);l||(l=new Ty,ui.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(o,l)),i=l}else if(e.isLine){const o="LineBasicMaterial:"+i.uuid;let l=this.cache.get(o);l||(l=new sr,ui.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(o,l)),i=l}if(r||s||a){let o="ClonedMaterial:"+i.uuid+":";r&&(o+="derivative-tangents:"),s&&(o+="vertex-colors:"),a&&(o+="flat-shading:");let l=this.cache.get(o);l||(l=i.clone(),s&&(l.vertexColors=!0),a&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(o,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return Zh}loadMaterial(e){const n=this,i=this.json,r=this.extensions,s=i.materials[e];let a;const o={},l=s.extensions||{},c=[];if(l[nn.KHR_MATERIALS_UNLIT]){const h=r[nn.KHR_MATERIALS_UNLIT];a=h.getMaterialType(),c.push(h.extendParams(o,s,n))}else{const h=s.pbrMetallicRoughness||{};if(o.color=new ht(1,1,1),o.opacity=1,Array.isArray(h.baseColorFactor)){const f=h.baseColorFactor;o.color.setRGB(f[0],f[1],f[2],to),o.opacity=f[3]}h.baseColorTexture!==void 0&&c.push(n.assignTexture(o,"map",h.baseColorTexture,Tc)),o.metalness=h.metallicFactor!==void 0?h.metallicFactor:1,o.roughness=h.roughnessFactor!==void 0?h.roughnessFactor:1,h.metallicRoughnessTexture!==void 0&&(c.push(n.assignTexture(o,"metalnessMap",h.metallicRoughnessTexture)),c.push(n.assignTexture(o,"roughnessMap",h.metallicRoughnessTexture))),a=this._invokeOne(function(f){return f.getMaterialType&&f.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(f){return f.extendMaterialParams&&f.extendMaterialParams(e,o)})))}s.doubleSided===!0&&(o.side=Ii);const u=s.alphaMode||I_.OPAQUE;if(u===I_.BLEND?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,u===I_.MASK&&(o.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&a!==vr&&(c.push(n.assignTexture(o,"normalMap",s.normalTexture)),o.normalScale=new Ie(1,1),s.normalTexture.scale!==void 0)){const h=s.normalTexture.scale;o.normalScale.set(h,h)}if(s.occlusionTexture!==void 0&&a!==vr&&(c.push(n.assignTexture(o,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(o.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&a!==vr){const h=s.emissiveFactor;o.emissive=new ht().setRGB(h[0],h[1],h[2],to)}return s.emissiveTexture!==void 0&&a!==vr&&c.push(n.assignTexture(o,"emissiveMap",s.emissiveTexture,Tc)),Promise.all(c).then(function(){const h=new a(o);return s.name&&(h.name=s.name),za(h,s),n.associations.set(h,{materials:e}),s.extensions&&ic(r,h,s),h})}createUniqueName(e){const n=ln.sanitizeNodeName(e||"");return n in this.nodeNamesUsed?n+"_"+ ++this.nodeNamesUsed[n]:(this.nodeNamesUsed[n]=0,n)}loadGeometries(e){const n=this,i=this.extensions,r=this.primitiveCache;function s(o){return i[nn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(o,n).then(function(l){return pB(l,o,n)})}const a=[];for(let o=0,l=e.length;o<l;o++){const c=e[o],u=uq(c),h=r[u];if(h)a.push(h.promise);else{let f;c.extensions&&c.extensions[nn.KHR_DRACO_MESH_COMPRESSION]?f=s(c):f=pB(new zt,c,n),r[u]={primitive:c,promise:f},a.push(f)}}return Promise.all(a)}loadMesh(e){const n=this,i=this.json,r=this.extensions,s=i.meshes[e],a=s.primitives,o=[];for(let l=0,c=a.length;l<c;l++){const u=a[l].material===void 0?oq(this.cache):this.getDependency("material",a[l].material);o.push(u)}return o.push(n.loadGeometries(a)),Promise.all(o).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],h=[];for(let m=0,g=u.length;m<g;m++){const y=u[m],x=a[m];let v;const _=c[m];if(x.mode===ps.TRIANGLES||x.mode===ps.TRIANGLE_STRIP||x.mode===ps.TRIANGLE_FAN||x.mode===void 0)v=s.isSkinnedMesh===!0?new tE(y,_):new Sn(y,_),v.isSkinnedMesh===!0&&v.normalizeSkinWeights(),x.mode===ps.TRIANGLE_STRIP?v.geometry=oB(v.geometry,HM):x.mode===ps.TRIANGLE_FAN&&(v.geometry=oB(v.geometry,B0));else if(x.mode===ps.LINES)v=new $s(y,_);else if(x.mode===ps.LINE_STRIP)v=new co(y,_);else if(x.mode===ps.LINE_LOOP)v=new iE(y,_);else if(x.mode===ps.POINTS)v=new rE(y,_);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+x.mode);Object.keys(v.geometry.morphAttributes).length>0&&cq(v,s),v.name=n.createUniqueName(s.name||"mesh_"+e),za(v,s),x.extensions&&ic(r,v,x),n.assignFinalMaterial(v),h.push(v)}for(let m=0,g=h.length;m<g;m++)n.associations.set(h[m],{meshes:e,primitives:m});if(h.length===1)return s.extensions&&ic(r,h[0],s),h[0];const f=new Ya;s.extensions&&ic(r,f,s),n.associations.set(f,{meshes:e});for(let m=0,g=h.length;m<g;m++)f.add(h[m]);return f})}loadCamera(e){let n;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?n=new Pn(pp.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(n=new ws(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(n.name=this.createUniqueName(i.name)),za(n,i),Promise.resolve(n)}loadSkin(e){const n=this.json.skins[e],i=[];for(let r=0,s=n.joints.length;r<s;r++)i.push(this._loadNodeShallow(n.joints[r]));return n.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",n.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const s=r.pop(),a=r,o=[],l=[];for(let c=0,u=a.length;c<u;c++){const h=a[c];if(h){o.push(h);const f=new bt;s!==null&&f.fromArray(s.array,c*16),l.push(f)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[c])}return new Kp(o,l)})}loadAnimation(e){const n=this.json,i=this,r=n.animations[e],s=r.name?r.name:"animation_"+e,a=[],o=[],l=[],c=[],u=[];for(let h=0,f=r.channels.length;h<f;h++){const m=r.channels[h],g=r.samplers[m.sampler],y=m.target,x=y.node,v=r.parameters!==void 0?r.parameters[g.input]:g.input,_=r.parameters!==void 0?r.parameters[g.output]:g.output;y.node!==void 0&&(a.push(this.getDependency("node",x)),o.push(this.getDependency("accessor",v)),l.push(this.getDependency("accessor",_)),c.push(g),u.push(y))}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(l),Promise.all(c),Promise.all(u)]).then(function(h){const f=h[0],m=h[1],g=h[2],y=h[3],x=h[4],v=[];for(let _=0,S=f.length;_<S;_++){const M=f[_],b=m[_],C=g[_],B=y[_],P=x[_];if(M===void 0)continue;M.updateMatrix&&M.updateMatrix();const T=i._createAnimationTracks(M,b,C,B,P);if(T)for(let I=0;I<T.length;I++)v.push(T[I])}return new kh(s,void 0,v)})}createNodeMesh(e){const n=this.json,i=this,r=n.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const a=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&a.traverse(function(o){if(o.isMesh)for(let l=0,c=r.weights.length;l<c;l++)o.morphTargetInfluences[l]=r.weights[l]}),a})}loadNode(e){const n=this.json,i=this,r=n.nodes[e],s=i._loadNodeShallow(e),a=[],o=r.children||[];for(let c=0,u=o.length;c<u;c++)a.push(i.getDependency("node",o[c]));const l=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(a),l]).then(function(c){const u=c[0],h=c[1],f=c[2];f!==null&&u.traverse(function(m){m.isSkinnedMesh&&m.bind(f,dq)});for(let m=0,g=h.length;m<g;m++)u.add(h[m]);return u})}_loadNodeShallow(e){const n=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=n.nodes[e],a=s.name?r.createUniqueName(s.name):"",o=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&o.push(l),s.camera!==void 0&&o.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){o.push(c)}),this.nodeCache[e]=Promise.all(o).then(function(c){let u;if(s.isBone===!0?u=new by:c.length>1?u=new Ya:c.length===1?u=c[0]:u=new an,u!==c[0])for(let h=0,f=c.length;h<f;h++)u.add(c[h]);if(s.name&&(u.userData.name=s.name,u.name=a),za(u,s),s.extensions&&ic(i,u,s),s.matrix!==void 0){const h=new bt;h.fromArray(s.matrix),u.applyMatrix4(h)}else s.translation!==void 0&&u.position.fromArray(s.translation),s.rotation!==void 0&&u.quaternion.fromArray(s.rotation),s.scale!==void 0&&u.scale.fromArray(s.scale);return r.associations.has(u)||r.associations.set(u,{}),r.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const n=this.extensions,i=this.json.scenes[e],r=this,s=new Ya;i.name&&(s.name=r.createUniqueName(i.name)),za(s,i),i.extensions&&ic(n,s,i);const a=i.nodes||[],o=[];for(let l=0,c=a.length;l<c;l++)o.push(r.getDependency("node",a[l]));return Promise.all(o).then(function(l){for(let u=0,h=l.length;u<h;u++)s.add(l[u]);const c=u=>{const h=new Map;for(const[f,m]of r.associations)(f instanceof ui||f instanceof pn)&&h.set(f,m);return u.traverse(f=>{const m=r.associations.get(f);m!=null&&h.set(f,m)}),h};return r.associations=c(s),s})}_createAnimationTracks(e,n,i,r,s){const a=[],o=e.name?e.name:e.uuid,l=[];Do[s.path]===Do.weights?e.traverse(function(f){f.morphTargetInfluences&&l.push(f.name?f.name:f.uuid)}):l.push(o);let c;switch(Do[s.path]){case Do.weights:c=Hc;break;case Do.rotation:c=xl;break;case Do.position:case Do.scale:c=Vc;break;default:switch(i.itemSize){case 1:c=Hc;break;case 2:case 3:default:c=Vc;break}break}const u=r.interpolation!==void 0?aq[r.interpolation]:Gc,h=this._getArrayFromAccessor(i);for(let f=0,m=l.length;f<m;f++){const g=new c(l[f]+"."+Do[s.path],n.array,h,u);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(g),a.push(g)}return a}_getArrayFromAccessor(e){let n=e.array;if(e.normalized){const i=tw(n.constructor),r=new Float32Array(n.length);for(let s=0,a=n.length;s<a;s++)r[s]=n[s]*i;n=r}return n}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const r=this instanceof xl?sq:WU;return new r(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function pq(t,e,n){const i=e.attributes,r=new Ni;if(i.POSITION!==void 0){const o=n.json.accessors[i.POSITION],l=o.min,c=o.max;if(l!==void 0&&c!==void 0){if(r.set(new K(l[0],l[1],l[2]),new K(c[0],c[1],c[2])),o.normalized){const u=tw(_h[o.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const o=new K,l=new K;for(let c=0,u=s.length;c<u;c++){const h=s[c];if(h.POSITION!==void 0){const f=n.json.accessors[h.POSITION],m=f.min,g=f.max;if(m!==void 0&&g!==void 0){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(g[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(g[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(g[2]))),f.normalized){const y=tw(_h[f.componentType]);l.multiplyScalar(y)}o.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(o)}t.boundingBox=r;const a=new Fi;r.getCenter(a.center),a.radius=r.min.distanceTo(r.max)/2,t.boundingSphere=a}function pB(t,e,n){const i=e.attributes,r=[];function s(a,o){return n.getDependency("accessor",a).then(function(l){t.setAttribute(o,l)})}for(const a in i){const o=ew[a]||a.toLowerCase();o in t.attributes||r.push(s(i[a],o))}if(e.indices!==void 0&&!t.index){const a=n.getDependency("accessor",e.indices).then(function(o){t.setIndex(o)});r.push(a)}return za(t,e),pq(t,e,n),Promise.all(r).then(function(){return e.targets!==void 0?lq(t,e.targets,n):t})}class mq extends mE{constructor(e){super(e),this.type=ei}parse(e){const a=function(P,T){switch(P){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(T||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(T||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(T||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(T||""))}},u=`
`,h=function(P,T,I){T=T||1024;let G=P.pos,Q=-1,U=0,ee="",$=String.fromCharCode.apply(null,new Uint16Array(P.subarray(G,G+128)));for(;0>(Q=$.indexOf(u))&&U<T&&G<P.byteLength;)ee+=$,U+=$.length,G+=128,$+=String.fromCharCode.apply(null,new Uint16Array(P.subarray(G,G+128)));return-1<Q?(P.pos+=U+Q+1,ee+$.slice(0,Q)):!1},f=function(P){const T=/^#\?(\S+)/,I=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,z=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,G=/^\s*FORMAT=(\S+)\s*$/,Q=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,U={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let ee,$;for((P.pos>=P.byteLength||!(ee=h(P)))&&a(1,"no header found"),($=ee.match(T))||a(3,"bad initial token"),U.valid|=1,U.programtype=$[1],U.string+=ee+`
`;ee=h(P),ee!==!1;){if(U.string+=ee+`
`,ee.charAt(0)==="#"){U.comments+=ee+`
`;continue}if(($=ee.match(I))&&(U.gamma=parseFloat($[1])),($=ee.match(z))&&(U.exposure=parseFloat($[1])),($=ee.match(G))&&(U.valid|=2,U.format=$[1]),($=ee.match(Q))&&(U.valid|=4,U.height=parseInt($[1],10),U.width=parseInt($[2],10)),U.valid&2&&U.valid&4)break}return U.valid&2||a(3,"missing format specifier"),U.valid&4||a(3,"missing image size specifier"),U},m=function(P,T,I){const z=T;if(z<8||z>32767||P[0]!==2||P[1]!==2||P[2]&128)return new Uint8Array(P);z!==(P[2]<<8|P[3])&&a(3,"wrong scanline width");const G=new Uint8Array(4*T*I);G.length||a(4,"unable to allocate buffer space");let Q=0,U=0;const ee=4*z,$=new Uint8Array(4),oe=new Uint8Array(ee);let Z=I;for(;Z>0&&U<P.byteLength;){U+4>P.byteLength&&a(1),$[0]=P[U++],$[1]=P[U++],$[2]=P[U++],$[3]=P[U++],($[0]!=2||$[1]!=2||($[2]<<8|$[3])!=z)&&a(3,"bad rgbe scanline format");let J=0,H;for(;J<ee&&U<P.byteLength;){H=P[U++];const j=H>128;if(j&&(H-=128),(H===0||J+H>ee)&&a(3,"bad scanline data"),j){const W=P[U++];for(let ne=0;ne<H;ne++)oe[J++]=W}else oe.set(P.subarray(U,U+H),J),J+=H,U+=H}const O=z;for(let j=0;j<O;j++){let W=0;G[Q]=oe[j+W],W+=z,G[Q+1]=oe[j+W],W+=z,G[Q+2]=oe[j+W],W+=z,G[Q+3]=oe[j+W],Q+=4}Z--}return G},g=function(P,T,I,z){const G=P[T+3],Q=Math.pow(2,G-128)/255;I[z+0]=P[T+0]*Q,I[z+1]=P[T+1]*Q,I[z+2]=P[T+2]*Q,I[z+3]=1},y=function(P,T,I,z){const G=P[T+3],Q=Math.pow(2,G-128)/255;I[z+0]=Mc.toHalfFloat(Math.min(P[T+0]*Q,65504)),I[z+1]=Mc.toHalfFloat(Math.min(P[T+1]*Q,65504)),I[z+2]=Mc.toHalfFloat(Math.min(P[T+2]*Q,65504)),I[z+3]=Mc.toHalfFloat(1)},x=new Uint8Array(e);x.pos=0;const v=f(x),_=v.width,S=v.height,M=m(x.subarray(x.pos),_,S);let b,C,B;switch(this.type){case $n:B=M.length/4;const P=new Float32Array(B*4);for(let I=0;I<B;I++)g(M,I*4,P,I*4);b=P,C=$n;break;case ei:B=M.length/4;const T=new Uint16Array(B*4);for(let I=0;I<B;I++)y(M,I*4,T,I*4);b=T,C=ei;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:_,height:S,data:b,header:v.string,gamma:v.gamma,exposure:v.exposure,type:C}}setDataType(e){return this.type=e,this}load(e,n,i,r){function s(a,o){switch(a.type){case $n:case ei:"colorSpace"in a?a.colorSpace="srgb-linear":a.encoding=3e3,a.minFilter=kt,a.magFilter=kt,a.generateMipmaps=!1,a.flipY=!0;break}n&&n(a,o)}return super.load(e,s,i,r)}}const ef=XE>=152;class gq extends mE{constructor(e){super(e),this.type=ei}parse(e){const T=Math.pow(2.7182818,2.2);function I(F,Y){for(var he=0,N=0;N<65536;++N)(N==0||F[N>>3]&1<<(N&7))&&(Y[he++]=N);for(var q=he-1;he<65536;)Y[he++]=0;return q}function z(F){for(var Y=0;Y<16384;Y++)F[Y]={},F[Y].len=0,F[Y].lit=0,F[Y].p=null}const G={l:0,c:0,lc:0};function Q(F,Y,he,N,q){for(;he<F;)Y=Y<<8|et(N,q),he+=8;he-=F,G.l=Y>>he&(1<<F)-1,G.c=Y,G.lc=he}const U=new Array(59);function ee(F){for(var Y=0;Y<=58;++Y)U[Y]=0;for(var Y=0;Y<65537;++Y)U[F[Y]]+=1;for(var he=0,Y=58;Y>0;--Y){var N=he+U[Y]>>1;U[Y]=he,he=N}for(var Y=0;Y<65537;++Y){var q=F[Y];q>0&&(F[Y]=q|U[q]++<<6)}}function $(F,Y,he,N,q,te,ce){for(var se=he,Te=0,Ne=0;q<=te;q++){if(se.value-he.value>N)return!1;Q(6,Te,Ne,F,se);var ke=G.l;if(Te=G.c,Ne=G.lc,ce[q]=ke,ke==63){if(se.value-he.value>N)throw"Something wrong with hufUnpackEncTable";Q(8,Te,Ne,F,se);var pe=G.l+6;if(Te=G.c,Ne=G.lc,q+pe>te+1)throw"Something wrong with hufUnpackEncTable";for(;pe--;)ce[q++]=0;q--}else if(ke>=59){var pe=ke-59+2;if(q+pe>te+1)throw"Something wrong with hufUnpackEncTable";for(;pe--;)ce[q++]=0;q--}}ee(ce)}function oe(F){return F&63}function Z(F){return F>>6}function J(F,Y,he,N){for(;Y<=he;Y++){var q=Z(F[Y]),te=oe(F[Y]);if(q>>te)throw"Invalid table entry";if(te>14){var ce=N[q>>te-14];if(ce.len)throw"Invalid table entry";if(ce.lit++,ce.p){var se=ce.p;ce.p=new Array(ce.lit);for(var Te=0;Te<ce.lit-1;++Te)ce.p[Te]=se[Te]}else ce.p=new Array(1);ce.p[ce.lit-1]=Y}else if(te)for(var Ne=0,Te=1<<14-te;Te>0;Te--){var ce=N[(q<<14-te)+Ne];if(ce.len||ce.p)throw"Invalid table entry";ce.len=te,ce.lit=Y,Ne++}}return!0}const H={c:0,lc:0};function O(F,Y,he,N){F=F<<8|et(he,N),Y+=8,H.c=F,H.lc=Y}const j={c:0,lc:0};function W(F,Y,he,N,q,te,ce,se,Te,Ne){if(F==Y){N<8&&(O(he,N,q,ce),he=H.c,N=H.lc),N-=8;var ke=he>>N,ke=new Uint8Array([ke])[0];if(Te.value+ke>Ne)return!1;for(var pe=se[Te.value-1];ke-- >0;)se[Te.value++]=pe}else if(Te.value<Ne)se[Te.value++]=F;else return!1;j.c=he,j.lc=N}function ne(F){return F&65535}function ae(F){var Y=ne(F);return Y>32767?Y-65536:Y}const de={a:0,b:0};function fe(F,Y){var he=ae(F),N=ae(Y),q=N,te=he+(q&1)+(q>>1),ce=te,se=te-q;de.a=ce,de.b=se}function Se(F,Y){var he=ne(F),N=ne(Y),q=he-(N>>1)&65535,te=N+q-32768&65535;de.a=te,de.b=q}function He(F,Y,he,N,q,te,ce){for(var se=ce<16384,Te=he>q?q:he,Ne=1,ke;Ne<=Te;)Ne<<=1;for(Ne>>=1,ke=Ne,Ne>>=1;Ne>=1;){for(var pe=0,ft=pe+te*(q-ke),$e=te*Ne,qe=te*ke,vt=N*Ne,St=N*ke,wt,Lt,pt,lt;pe<=ft;pe+=qe){for(var Ot=pe,Tt=pe+N*(he-ke);Ot<=Tt;Ot+=St){var Pt=Ot+vt,un=Ot+$e,yn=un+vt;se?(fe(F[Ot+Y],F[un+Y]),wt=de.a,pt=de.b,fe(F[Pt+Y],F[yn+Y]),Lt=de.a,lt=de.b,fe(wt,Lt),F[Ot+Y]=de.a,F[Pt+Y]=de.b,fe(pt,lt),F[un+Y]=de.a,F[yn+Y]=de.b):(Se(F[Ot+Y],F[un+Y]),wt=de.a,pt=de.b,Se(F[Pt+Y],F[yn+Y]),Lt=de.a,lt=de.b,Se(wt,Lt),F[Ot+Y]=de.a,F[Pt+Y]=de.b,Se(pt,lt),F[un+Y]=de.a,F[yn+Y]=de.b)}if(he&Ne){var un=Ot+$e;se?fe(F[Ot+Y],F[un+Y]):Se(F[Ot+Y],F[un+Y]),wt=de.a,F[un+Y]=de.b,F[Ot+Y]=wt}}if(q&Ne)for(var Ot=pe,Tt=pe+N*(he-ke);Ot<=Tt;Ot+=St){var Pt=Ot+vt;se?fe(F[Ot+Y],F[Pt+Y]):Se(F[Ot+Y],F[Pt+Y]),wt=de.a,F[Pt+Y]=de.b,F[Ot+Y]=wt}ke=Ne,Ne>>=1}return pe}function Fe(F,Y,he,N,q,te,ce,se,Te,Ne){for(var ke=0,pe=0,ft=se,$e=Math.trunc(q.value+(te+7)/8);q.value<$e;)for(O(ke,pe,he,q),ke=H.c,pe=H.lc;pe>=14;){var qe=ke>>pe-14&16383,vt=Y[qe];if(vt.len)pe-=vt.len,W(vt.lit,ce,ke,pe,he,N,q,Te,Ne,ft),ke=j.c,pe=j.lc;else{if(!vt.p)throw"hufDecode issues";var St;for(St=0;St<vt.lit;St++){for(var wt=oe(F[vt.p[St]]);pe<wt&&q.value<$e;)O(ke,pe,he,q),ke=H.c,pe=H.lc;if(pe>=wt&&Z(F[vt.p[St]])==(ke>>pe-wt&(1<<wt)-1)){pe-=wt,W(vt.p[St],ce,ke,pe,he,N,q,Te,Ne,ft),ke=j.c,pe=j.lc;break}}if(St==vt.lit)throw"hufDecode issues"}}var Lt=8-te&7;for(ke>>=Lt,pe-=Lt;pe>0;){var vt=Y[ke<<14-pe&16383];if(vt.len)pe-=vt.len,W(vt.lit,ce,ke,pe,he,N,q,Te,Ne,ft),ke=j.c,pe=j.lc;else throw"hufDecode issues"}return!0}function ge(F,Y,he,N,q,te){var ce={value:0},se=he.value,Te=Pe(Y,he),Ne=Pe(Y,he);he.value+=4;var ke=Pe(Y,he);if(he.value+=4,Te<0||Te>=65537||Ne<0||Ne>=65537)throw"Something wrong with HUF_ENCSIZE";var pe=new Array(65537),ft=new Array(16384);z(ft);var $e=N-(he.value-se);if($(F,Y,he,$e,Te,Ne,pe),ke>8*(N-(he.value-se)))throw"Something wrong with hufUncompress";J(pe,Te,Ne,ft),Fe(pe,ft,F,Y,he,ke,Ne,te,q,ce)}function X(F,Y,he){for(var N=0;N<he;++N)Y[N]=F[Y[N]]}function Re(F){for(var Y=1;Y<F.length;Y++){var he=F[Y-1]+F[Y]-128;F[Y]=he}}function ye(F,Y){for(var he=0,N=Math.floor((F.length+1)/2),q=0,te=F.length-1;!(q>te||(Y[q++]=F[he++],q>te));)Y[q++]=F[N++]}function De(F){for(var Y=F.byteLength,he=new Array,N=0,q=new DataView(F);Y>0;){var te=q.getInt8(N++);if(te<0){var ce=-te;Y-=ce+1;for(var se=0;se<ce;se++)he.push(q.getUint8(N++))}else{var ce=te;Y-=2;for(var Te=q.getUint8(N++),se=0;se<ce+1;se++)he.push(Te)}}return he}function Me(F,Y,he,N,q,te){var Pt=new DataView(te.buffer),ce=he[F.idx[0]].width,se=he[F.idx[0]].height,Te=3,Ne=Math.floor(ce/8),ke=Math.ceil(ce/8),pe=Math.ceil(se/8),ft=ce-(ke-1)*8,$e=se-(pe-1)*8,qe={value:0},vt=new Array(Te),St=new Array(Te),wt=new Array(Te),Lt=new Array(Te),pt=new Array(Te);for(let Wt=0;Wt<Te;++Wt)pt[Wt]=Y[F.idx[Wt]],vt[Wt]=Wt<1?0:vt[Wt-1]+ke*pe,St[Wt]=new Float32Array(64),wt[Wt]=new Uint16Array(64),Lt[Wt]=new Uint16Array(ke*64);for(let Wt=0;Wt<pe;++Wt){var lt=8;Wt==pe-1&&(lt=$e);var Ot=8;for(let Ft=0;Ft<ke;++Ft){Ft==ke-1&&(Ot=ft);for(let Nt=0;Nt<Te;++Nt)wt[Nt].fill(0),wt[Nt][0]=q[vt[Nt]++],Qe(qe,N,wt[Nt]),Ee(wt[Nt],St[Nt]),Oe(St[Nt]);Je(St);for(let Nt=0;Nt<Te;++Nt)be(St[Nt],Lt[Nt],Ft*64)}let An=0;for(let Ft=0;Ft<Te;++Ft){const Nt=he[F.idx[Ft]].type;for(let _n=8*Wt;_n<8*Wt+lt;++_n){An=pt[Ft][_n];for(let ki=0;ki<Ne;++ki){const ii=ki*64+(_n&7)*8;Pt.setUint16(An+0*2*Nt,Lt[Ft][ii+0],!0),Pt.setUint16(An+1*2*Nt,Lt[Ft][ii+1],!0),Pt.setUint16(An+2*2*Nt,Lt[Ft][ii+2],!0),Pt.setUint16(An+3*2*Nt,Lt[Ft][ii+3],!0),Pt.setUint16(An+4*2*Nt,Lt[Ft][ii+4],!0),Pt.setUint16(An+5*2*Nt,Lt[Ft][ii+5],!0),Pt.setUint16(An+6*2*Nt,Lt[Ft][ii+6],!0),Pt.setUint16(An+7*2*Nt,Lt[Ft][ii+7],!0),An+=8*2*Nt}}if(Ne!=ke)for(let _n=8*Wt;_n<8*Wt+lt;++_n){const ki=pt[Ft][_n]+8*Ne*2*Nt,ii=Ne*64+(_n&7)*8;for(let Or=0;Or<Ot;++Or)Pt.setUint16(ki+Or*2*Nt,Lt[Ft][ii+Or],!0)}}}for(var Tt=new Uint16Array(ce),Pt=new DataView(te.buffer),un=0;un<Te;++un){he[F.idx[un]].decoded=!0;var yn=he[F.idx[un]].type;if(he[un].type==2)for(var xn=0;xn<se;++xn){const Wt=pt[un][xn];for(var Jt=0;Jt<ce;++Jt)Tt[Jt]=Pt.getUint16(Wt+Jt*2*yn,!0);for(var Jt=0;Jt<ce;++Jt)Pt.setFloat32(Wt+Jt*2*yn,xe(Tt[Jt]),!0)}}}function Qe(F,Y,he){for(var N,q=1;q<64;)N=Y[F.value],N==65280?q=64:N>>8==255?q+=N&255:(he[q]=N,q++),F.value++}function Ee(F,Y){Y[0]=xe(F[0]),Y[1]=xe(F[1]),Y[2]=xe(F[5]),Y[3]=xe(F[6]),Y[4]=xe(F[14]),Y[5]=xe(F[15]),Y[6]=xe(F[27]),Y[7]=xe(F[28]),Y[8]=xe(F[2]),Y[9]=xe(F[4]),Y[10]=xe(F[7]),Y[11]=xe(F[13]),Y[12]=xe(F[16]),Y[13]=xe(F[26]),Y[14]=xe(F[29]),Y[15]=xe(F[42]),Y[16]=xe(F[3]),Y[17]=xe(F[8]),Y[18]=xe(F[12]),Y[19]=xe(F[17]),Y[20]=xe(F[25]),Y[21]=xe(F[30]),Y[22]=xe(F[41]),Y[23]=xe(F[43]),Y[24]=xe(F[9]),Y[25]=xe(F[11]),Y[26]=xe(F[18]),Y[27]=xe(F[24]),Y[28]=xe(F[31]),Y[29]=xe(F[40]),Y[30]=xe(F[44]),Y[31]=xe(F[53]),Y[32]=xe(F[10]),Y[33]=xe(F[19]),Y[34]=xe(F[23]),Y[35]=xe(F[32]),Y[36]=xe(F[39]),Y[37]=xe(F[45]),Y[38]=xe(F[52]),Y[39]=xe(F[54]),Y[40]=xe(F[20]),Y[41]=xe(F[22]),Y[42]=xe(F[33]),Y[43]=xe(F[38]),Y[44]=xe(F[46]),Y[45]=xe(F[51]),Y[46]=xe(F[55]),Y[47]=xe(F[60]),Y[48]=xe(F[21]),Y[49]=xe(F[34]),Y[50]=xe(F[37]),Y[51]=xe(F[47]),Y[52]=xe(F[50]),Y[53]=xe(F[56]),Y[54]=xe(F[59]),Y[55]=xe(F[61]),Y[56]=xe(F[35]),Y[57]=xe(F[36]),Y[58]=xe(F[48]),Y[59]=xe(F[49]),Y[60]=xe(F[57]),Y[61]=xe(F[58]),Y[62]=xe(F[62]),Y[63]=xe(F[63])}function Oe(F){const Y=.5*Math.cos(.7853975),he=.5*Math.cos(3.14159/16),N=.5*Math.cos(3.14159/8),q=.5*Math.cos(3*3.14159/16),te=.5*Math.cos(5*3.14159/16),ce=.5*Math.cos(3*3.14159/8),se=.5*Math.cos(7*3.14159/16);for(var Te=new Array(4),Ne=new Array(4),ke=new Array(4),pe=new Array(4),ft=0;ft<8;++ft){var $e=ft*8;Te[0]=N*F[$e+2],Te[1]=ce*F[$e+2],Te[2]=N*F[$e+6],Te[3]=ce*F[$e+6],Ne[0]=he*F[$e+1]+q*F[$e+3]+te*F[$e+5]+se*F[$e+7],Ne[1]=q*F[$e+1]-se*F[$e+3]-he*F[$e+5]-te*F[$e+7],Ne[2]=te*F[$e+1]-he*F[$e+3]+se*F[$e+5]+q*F[$e+7],Ne[3]=se*F[$e+1]-te*F[$e+3]+q*F[$e+5]-he*F[$e+7],ke[0]=Y*(F[$e+0]+F[$e+4]),ke[3]=Y*(F[$e+0]-F[$e+4]),ke[1]=Te[0]+Te[3],ke[2]=Te[1]-Te[2],pe[0]=ke[0]+ke[1],pe[1]=ke[3]+ke[2],pe[2]=ke[3]-ke[2],pe[3]=ke[0]-ke[1],F[$e+0]=pe[0]+Ne[0],F[$e+1]=pe[1]+Ne[1],F[$e+2]=pe[2]+Ne[2],F[$e+3]=pe[3]+Ne[3],F[$e+4]=pe[3]-Ne[3],F[$e+5]=pe[2]-Ne[2],F[$e+6]=pe[1]-Ne[1],F[$e+7]=pe[0]-Ne[0]}for(var qe=0;qe<8;++qe)Te[0]=N*F[16+qe],Te[1]=ce*F[16+qe],Te[2]=N*F[48+qe],Te[3]=ce*F[48+qe],Ne[0]=he*F[8+qe]+q*F[24+qe]+te*F[40+qe]+se*F[56+qe],Ne[1]=q*F[8+qe]-se*F[24+qe]-he*F[40+qe]-te*F[56+qe],Ne[2]=te*F[8+qe]-he*F[24+qe]+se*F[40+qe]+q*F[56+qe],Ne[3]=se*F[8+qe]-te*F[24+qe]+q*F[40+qe]-he*F[56+qe],ke[0]=Y*(F[qe]+F[32+qe]),ke[3]=Y*(F[qe]-F[32+qe]),ke[1]=Te[0]+Te[3],ke[2]=Te[1]-Te[2],pe[0]=ke[0]+ke[1],pe[1]=ke[3]+ke[2],pe[2]=ke[3]-ke[2],pe[3]=ke[0]-ke[1],F[0+qe]=pe[0]+Ne[0],F[8+qe]=pe[1]+Ne[1],F[16+qe]=pe[2]+Ne[2],F[24+qe]=pe[3]+Ne[3],F[32+qe]=pe[3]-Ne[3],F[40+qe]=pe[2]-Ne[2],F[48+qe]=pe[1]-Ne[1],F[56+qe]=pe[0]-Ne[0]}function Je(F){for(var Y=0;Y<64;++Y){var he=F[0][Y],N=F[1][Y],q=F[2][Y];F[0][Y]=he+1.5747*q,F[1][Y]=he-.1873*N-.4682*q,F[2][Y]=he+1.8556*N}}function be(F,Y,he){for(var N=0;N<64;++N)Y[he+N]=Mc.toHalfFloat(rt(F[N]))}function rt(F){return F<=1?Math.sign(F)*Math.pow(Math.abs(F),2.2):Math.sign(F)*Math.pow(T,Math.abs(F)-1)}function V(F){return new DataView(F.array.buffer,F.offset.value,F.size)}function k(F){var Y=F.viewer.buffer.slice(F.offset.value,F.offset.value+F.size),he=new Uint8Array(De(Y)),N=new Uint8Array(he.length);return Re(he),ye(he,N),new DataView(N.buffer)}function ue(F){var Y=F.array.slice(F.offset.value,F.offset.value+F.size),he=pv(Y),N=new Uint8Array(he.length);return Re(he),ye(he,N),new DataView(N.buffer)}function je(F){for(var Y=F.viewer,he={value:F.offset.value},N=new Uint16Array(F.width*F.scanlineBlockSize*(F.channels*F.type)),q=new Uint8Array(8192),te=0,ce=new Array(F.channels),se=0;se<F.channels;se++)ce[se]={},ce[se].start=te,ce[se].end=ce[se].start,ce[se].nx=F.width,ce[se].ny=F.lines,ce[se].size=F.type,te+=ce[se].nx*ce[se].ny*ce[se].size;var Te=le(Y,he),Ne=le(Y,he);if(Ne>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(Te<=Ne)for(var se=0;se<Ne-Te+1;se++)q[se+Te]=re(Y,he);var ke=new Uint16Array(65536),pe=I(q,ke),ft=Pe(Y,he);ge(F.array,Y,he,ft,N,te);for(var se=0;se<F.channels;++se)for(var $e=ce[se],qe=0;qe<ce[se].size;++qe)He(N,$e.start+qe,$e.nx,$e.size,$e.ny,$e.nx*$e.size,pe);X(ke,N,te);for(var vt=0,St=new Uint8Array(N.buffer.byteLength),wt=0;wt<F.lines;wt++)for(var Lt=0;Lt<F.channels;Lt++){var $e=ce[Lt],pt=$e.nx*$e.size,lt=new Uint8Array(N.buffer,$e.end*2,pt*2);St.set(lt,vt),vt+=pt*2,$e.end+=pt}return new DataView(St.buffer)}function _e(F){var Y=F.array.slice(F.offset.value,F.offset.value+F.size),he=pv(Y);const N=F.lines*F.channels*F.width,q=F.type==1?new Uint16Array(N):new Uint32Array(N);let te=0,ce=0;const se=new Array(4);for(let Te=0;Te<F.lines;Te++)for(let Ne=0;Ne<F.channels;Ne++){let ke=0;switch(F.type){case 1:se[0]=te,se[1]=se[0]+F.width,te=se[1]+F.width;for(let pe=0;pe<F.width;++pe){const ft=he[se[0]++]<<8|he[se[1]++];ke+=ft,q[ce]=ke,ce++}break;case 2:se[0]=te,se[1]=se[0]+F.width,se[2]=se[1]+F.width,te=se[2]+F.width;for(let pe=0;pe<F.width;++pe){const ft=he[se[0]++]<<24|he[se[1]++]<<16|he[se[2]++]<<8;ke+=ft,q[ce]=ke,ce++}break}}return new DataView(q.buffer)}function Le(F){var Y=F.viewer,he={value:F.offset.value},N=new Uint8Array(F.width*F.lines*(F.channels*F.type*2)),q={version:Ae(Y,he),unknownUncompressedSize:Ae(Y,he),unknownCompressedSize:Ae(Y,he),acCompressedSize:Ae(Y,he),dcCompressedSize:Ae(Y,he),rleCompressedSize:Ae(Y,he),rleUncompressedSize:Ae(Y,he),rleRawSize:Ae(Y,he),totalAcUncompressedCount:Ae(Y,he),totalDcUncompressedCount:Ae(Y,he),acCompression:Ae(Y,he)};if(q.version<2)throw"EXRLoader.parse: "+Yn.compression+" version "+q.version+" is unsupported";for(var te=new Array,ce=le(Y,he)-2;ce>0;){var se=Ke(Y.buffer,he),Te=re(Y,he),Ne=Te>>2&3,ke=(Te>>4)-1,pe=new Int8Array([ke])[0],ft=re(Y,he);te.push({name:se,index:pe,type:ft,compression:Ne}),ce-=se.length+3}for(var $e=Yn.channels,qe=new Array(F.channels),vt=0;vt<F.channels;++vt){var St=qe[vt]={},wt=$e[vt];St.name=wt.name,St.compression=0,St.decoded=!1,St.type=wt.pixelType,St.pLinear=wt.pLinear,St.width=F.width,St.height=F.lines}for(var Lt={idx:new Array(3)},pt=0;pt<F.channels;++pt)for(var St=qe[pt],vt=0;vt<te.length;++vt){var lt=te[vt];St.name==lt.name&&(St.compression=lt.compression,lt.index>=0&&(Lt.idx[lt.index]=pt),St.offset=pt)}if(q.acCompressedSize>0)switch(q.acCompression){case 0:var Pt=new Uint16Array(q.totalAcUncompressedCount);ge(F.array,Y,he,q.acCompressedSize,Pt,q.totalAcUncompressedCount);break;case 1:var Ot=F.array.slice(he.value,he.value+q.totalAcUncompressedCount),Tt=pv(Ot),Pt=new Uint16Array(Tt.buffer);he.value+=q.totalAcUncompressedCount;break}if(q.dcCompressedSize>0){var un={array:F.array,offset:he,size:q.dcCompressedSize},yn=new Uint16Array(ue(un).buffer);he.value+=q.dcCompressedSize}if(q.rleRawSize>0){var Ot=F.array.slice(he.value,he.value+q.rleCompressedSize),Tt=pv(Ot),xn=De(Tt.buffer);he.value+=q.rleCompressedSize}for(var Jt=0,Wt=new Array(qe.length),vt=0;vt<Wt.length;++vt)Wt[vt]=new Array;for(var An=0;An<F.lines;++An)for(var Ft=0;Ft<qe.length;++Ft)Wt[Ft].push(Jt),Jt+=qe[Ft].width*F.type*2;Me(Lt,Wt,qe,Pt,yn,N);for(var vt=0;vt<qe.length;++vt){var St=qe[vt];if(!St.decoded)switch(St.compression){case 2:for(var Nt=0,_n=0,An=0;An<F.lines;++An){for(var ki=Wt[vt][Nt],ii=0;ii<St.width;++ii){for(var Or=0;Or<2*St.type;++Or)N[ki++]=xn[_n+Or*St.width*St.height];_n++}Nt++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(N.buffer)}function Ke(F,Y){for(var he=new Uint8Array(F),N=0;he[Y.value+N]!=0;)N+=1;var q=new TextDecoder().decode(he.slice(Y.value,Y.value+N));return Y.value=Y.value+N+1,q}function We(F,Y,he){var N=new TextDecoder().decode(new Uint8Array(F).slice(Y.value,Y.value+he));return Y.value=Y.value+he,N}function Ze(F,Y){var he=ot(F,Y),N=Pe(F,Y);return[he,N]}function ct(F,Y){var he=Pe(F,Y),N=Pe(F,Y);return[he,N]}function ot(F,Y){var he=F.getInt32(Y.value,!0);return Y.value=Y.value+4,he}function Pe(F,Y){var he=F.getUint32(Y.value,!0);return Y.value=Y.value+4,he}function et(F,Y){var he=F[Y.value];return Y.value=Y.value+1,he}function re(F,Y){var he=F.getUint8(Y.value);return Y.value=Y.value+1,he}const Ae=function(F,Y){let he;return"getBigInt64"in DataView.prototype?he=Number(F.getBigInt64(Y.value,!0)):he=F.getUint32(Y.value+4,!0)+Number(F.getUint32(Y.value,!0)<<32),Y.value+=8,he};function Ge(F,Y){var he=F.getFloat32(Y.value,!0);return Y.value+=4,he}function Ve(F,Y){return Mc.toHalfFloat(Ge(F,Y))}function xe(F){var Y=(F&31744)>>10,he=F&1023;return(F>>15?-1:1)*(Y?Y===31?he?NaN:1/0:Math.pow(2,Y-15)*(1+he/1024):6103515625e-14*(he/1024))}function le(F,Y){var he=F.getUint16(Y.value,!0);return Y.value+=2,he}function nt(F,Y){return xe(le(F,Y))}function Xe(F,Y,he,N){for(var q=he.value,te=[];he.value<q+N-1;){var ce=Ke(Y,he),se=ot(F,he),Te=re(F,he);he.value+=3;var Ne=ot(F,he),ke=ot(F,he);te.push({name:ce,pixelType:se,pLinear:Te,xSampling:Ne,ySampling:ke})}return he.value+=1,te}function we(F,Y){var he=Ge(F,Y),N=Ge(F,Y),q=Ge(F,Y),te=Ge(F,Y),ce=Ge(F,Y),se=Ge(F,Y),Te=Ge(F,Y),Ne=Ge(F,Y);return{redX:he,redY:N,greenX:q,greenY:te,blueX:ce,blueY:se,whiteX:Te,whiteY:Ne}}function Ye(F,Y){var he=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],N=re(F,Y);return he[N]}function st(F,Y){var he=Pe(F,Y),N=Pe(F,Y),q=Pe(F,Y),te=Pe(F,Y);return{xMin:he,yMin:N,xMax:q,yMax:te}}function at(F,Y){var he=["INCREASING_Y"],N=re(F,Y);return he[N]}function Et(F,Y){var he=Ge(F,Y),N=Ge(F,Y);return[he,N]}function jt(F,Y){var he=Ge(F,Y),N=Ge(F,Y),q=Ge(F,Y);return[he,N,q]}function Ct(F,Y,he,N,q){if(N==="string"||N==="stringvector"||N==="iccProfile")return We(Y,he,q);if(N==="chlist")return Xe(F,Y,he,q);if(N==="chromaticities")return we(F,he);if(N==="compression")return Ye(F,he);if(N==="box2i")return st(F,he);if(N==="lineOrder")return at(F,he);if(N==="float")return Ge(F,he);if(N==="v2f")return Et(F,he);if(N==="v3f")return jt(F,he);if(N==="int")return ot(F,he);if(N==="rational")return Ze(F,he);if(N==="timecode")return ct(F,he);if(N==="preview")return he.value+=q,"skipped";he.value+=q}function Zt(F,Y,he){const N={};if(F.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";N.version=F.getUint8(4);const q=F.getUint8(5);N.spec={singleTile:!!(q&2),longName:!!(q&4),deepFormat:!!(q&8),multiPart:!!(q&16)},he.value=8;for(var te=!0;te;){var ce=Ke(Y,he);if(ce==0)te=!1;else{var se=Ke(Y,he),Te=Pe(F,he),Ne=Ct(F,Y,he,se,Te);Ne===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${se}'.`):N[ce]=Ne}}if(q&-5)throw console.error("EXRHeader:",N),"THREE.EXRLoader: provided file is currently unsupported.";return N}function En(F,Y,he,N,q){const te={size:0,viewer:Y,array:he,offset:N,width:F.dataWindow.xMax-F.dataWindow.xMin+1,height:F.dataWindow.yMax-F.dataWindow.yMin+1,channels:F.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:F.channels[0].pixelType,uncompress:null,getter:null,format:null,[ef?"colorSpace":"encoding"]:null};switch(F.compression){case"NO_COMPRESSION":te.lines=1,te.uncompress=V;break;case"RLE_COMPRESSION":te.lines=1,te.uncompress=k;break;case"ZIPS_COMPRESSION":te.lines=1,te.uncompress=ue;break;case"ZIP_COMPRESSION":te.lines=16,te.uncompress=ue;break;case"PIZ_COMPRESSION":te.lines=32,te.uncompress=je;break;case"PXR24_COMPRESSION":te.lines=16,te.uncompress=_e;break;case"DWAA_COMPRESSION":te.lines=32,te.uncompress=Le;break;case"DWAB_COMPRESSION":te.lines=256,te.uncompress=Le;break;default:throw"EXRLoader.parse: "+F.compression+" is unsupported"}if(te.scanlineBlockSize=te.lines,te.type==1)switch(q){case $n:te.getter=nt,te.inputSize=2;break;case ei:te.getter=le,te.inputSize=2;break}else if(te.type==2)switch(q){case $n:te.getter=Ge,te.inputSize=4;break;case ei:te.getter=Ve,te.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+te.type+" for "+F.compression+".";te.blockCount=(F.dataWindow.yMax+1)/te.scanlineBlockSize;for(var ce=0;ce<te.blockCount;ce++)Ae(Y,N);te.outputChannels=te.channels==3?4:te.channels;const se=te.width*te.height*te.outputChannels;switch(q){case $n:te.byteArray=new Float32Array(se),te.channels<te.outputChannels&&te.byteArray.fill(1,0,se);break;case ei:te.byteArray=new Uint16Array(se),te.channels<te.outputChannels&&te.byteArray.fill(15360,0,se);break;default:console.error("THREE.EXRLoader: unsupported type: ",q);break}return te.bytesPerLine=te.width*te.inputSize*te.channels,te.outputChannels==4?te.format=gi:te.format=FM,ef?te.colorSpace="srgb-linear":te.encoding=3e3,te}const yi=new DataView(e),Ui=new Uint8Array(e),ni={value:0},Yn=Zt(yi,e,ni),Rt=En(Yn,yi,Ui,ni,this.type),Gn={value:0},Ar={R:0,G:1,B:2,A:3,Y:0};for(let F=0;F<Rt.height/Rt.scanlineBlockSize;F++){const Y=Pe(yi,ni);Rt.size=Pe(yi,ni),Rt.lines=Y+Rt.scanlineBlockSize>Rt.height?Rt.height-Y:Rt.scanlineBlockSize;const N=Rt.size<Rt.lines*Rt.bytesPerLine?Rt.uncompress(Rt):V(Rt);ni.value+=Rt.size;for(let q=0;q<Rt.scanlineBlockSize;q++){const te=q+F*Rt.scanlineBlockSize;if(te>=Rt.height)break;for(let ce=0;ce<Rt.channels;ce++){const se=Ar[Yn.channels[ce].name];for(let Te=0;Te<Rt.width;Te++){Gn.value=(q*(Rt.channels*Rt.width)+ce*Rt.width+Te)*Rt.inputSize;const Ne=(Rt.height-1-te)*(Rt.width*Rt.outputChannels)+Te*Rt.outputChannels+se;Rt.byteArray[Ne]=Rt.getter(N,Gn)}}}}return{header:Yn,width:Rt.width,height:Rt.height,data:Rt.byteArray,format:Rt.format,[ef?"colorSpace":"encoding"]:Rt[ef?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,n,i,r){function s(a,o){ef?a.colorSpace=o.colorSpace:a.encoding=o.encoding,a.minFilter=kt,a.magFilter=kt,a.generateMipmaps=!1,a.flipY=!1,n&&n(a,o)}return super.load(e,s,i,r)}}const D_=new WeakMap;class vq extends Wi{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,n,i,r){const s=new Vi(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,a=>{const o={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(a,o).then(n).catch(r)},i,r)}decodeDracoFile(e,n,i,r){const s={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,s).then(n)}decodeGeometry(e,n){for(const l in n.attributeTypes){const c=n.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(n.attributeTypes[l]=c.name)}const i=JSON.stringify(n);if(D_.has(e)){const l=D_.get(e);if(l.key===i)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,a=e.byteLength,o=this._getWorker(s,a).then(l=>(r=l,new Promise((c,u)=>{r._callbacks[s]={resolve:c,reject:u},r.postMessage({type:"decode",id:s,taskConfig:n,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return o.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),D_.set(e,{key:i,promise:o}),o}_createGeometry(e){const n=new zt;e.index&&n.setIndex(new $t(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],s=r.name,a=r.array,o=r.itemSize;n.setAttribute(s,new $t(a,o))}return n}_loadLibrary(e,n){const i=new Vi(this.manager);return i.setPath(this.decoderPath),i.setResponseType(n),i.setWithCredentials(this.withCredentials),new Promise((r,s)=>{i.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",n=[];return e?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then(i=>{const r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const s=yq.toString(),a=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending}_getWorker(e,n){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const a=s.data;switch(a.type){case"decode":r._callbacks[a.id].resolve(a);break;case"error":r._callbacks[a.id].reject(a);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+a.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=n,i._taskLoad+=n,i})}_releaseTask(e,n){e._taskLoad-=e._taskCosts[n],delete e._callbacks[n],delete e._taskCosts[n]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function yq(){let t,e;onmessage=function(a){const o=a.data;switch(o.type){case"init":t=o.decoderConfig,e=new Promise(function(u){t.onModuleLoaded=function(h){u({draco:h})},DracoDecoderModule(t)});break;case"decode":const l=o.buffer,c=o.taskConfig;e.then(u=>{const h=u.draco,f=new h.Decoder,m=new h.DecoderBuffer;m.Init(new Int8Array(l),l.byteLength);try{const g=n(h,f,m,c),y=g.attributes.map(x=>x.array.buffer);g.index&&y.push(g.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:g},y)}catch(g){console.error(g),self.postMessage({type:"error",id:o.id,error:g.message})}finally{h.destroy(m),h.destroy(f)}});break}};function n(a,o,l,c){const u=c.attributeIDs,h=c.attributeTypes;let f,m;const g=o.GetEncodedGeometryType(l);if(g===a.TRIANGULAR_MESH)f=new a.Mesh,m=o.DecodeBufferToMesh(l,f);else if(g===a.POINT_CLOUD)f=new a.PointCloud,m=o.DecodeBufferToPointCloud(l,f);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!m.ok()||f.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+m.error_msg());const y={index:null,attributes:[]};for(const x in u){const v=self[h[x]];let _,S;if(c.useUniqueIDs)S=u[x],_=o.GetAttributeByUniqueId(f,S);else{if(S=o.GetAttributeId(f,a[u[x]]),S===-1)continue;_=o.GetAttribute(f,S)}y.attributes.push(r(a,o,f,x,v,_))}return g===a.TRIANGULAR_MESH&&(y.index=i(a,o,f)),a.destroy(f),y}function i(a,o,l){const u=l.num_faces()*3,h=u*4,f=a._malloc(h);o.GetTrianglesUInt32Array(l,h,f);const m=new Uint32Array(a.HEAPF32.buffer,f,u).slice();return a._free(f),{array:m,itemSize:1}}function r(a,o,l,c,u,h){const f=h.num_components(),g=l.num_points()*f,y=g*u.BYTES_PER_ELEMENT,x=s(a,u),v=a._malloc(y);o.GetAttributeDataArrayForAllPoints(l,h,x,y,v);const _=new u(a.HEAPF32.buffer,v,g).slice();return a._free(v),{name:c,array:_,itemSize:f}}function s(a,o){switch(o){case Float32Array:return a.DT_FLOAT32;case Int8Array:return a.DT_INT8;case Int16Array:return a.DT_INT16;case Int32Array:return a.DT_INT32;case Uint8Array:return a.DT_UINT8;case Uint16Array:return a.DT_UINT16;case Uint32Array:return a.DT_UINT32}}}let gv;const N_=()=>{if(gv)return gv;const t="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",n=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=t;WebAssembly.validate(n)&&(r=e);let s;const a=WebAssembly.instantiate(o(r),{}).then(h=>{s=h.instance,s.exports.__wasm_call_ctors()});function o(h){const f=new Uint8Array(h.length);for(let g=0;g<h.length;++g){const y=h.charCodeAt(g);f[g]=y>96?y-71:y>64?y-65:y>47?y+4:y>46?63:62}let m=0;for(let g=0;g<h.length;++g)f[m++]=f[g]<60?i[f[g]]:(f[g]-60)*64+f[++g];return f.buffer.slice(0,m)}function l(h,f,m,g,y,x){const v=s.exports.sbrk,_=m+3&-4,S=v(_*g),M=v(y.length),b=new Uint8Array(s.exports.memory.buffer);b.set(y,M);const C=h(S,m,g,M,y.length);if(C===0&&x&&x(S,_,g),f.set(b.subarray(S,S+m*g)),v(S-v(0)),C!==0)throw new Error(`Malformed buffer data: ${C}`)}const c={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},u={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return gv={ready:a,supported:!0,decodeVertexBuffer(h,f,m,g,y){l(s.exports.meshopt_decodeVertexBuffer,h,f,m,g,s.exports[c[y]])},decodeIndexBuffer(h,f,m,g){l(s.exports.meshopt_decodeIndexBuffer,h,f,m,g)},decodeIndexSequence(h,f,m,g){l(s.exports.meshopt_decodeIndexSequence,h,f,m,g)},decodeGltfBuffer(h,f,m,g,y,x){l(s.exports[u[y]],h,f,m,g,s.exports[c[x]])}},gv},xq=D.forwardRef(function({children:e,follow:n=!0,lockX:i=!1,lockY:r=!1,lockZ:s=!1,...a},o){const l=D.useRef(null),c=D.useRef(null),u=new wi;return Ur(({camera:h})=>{if(!n||!c.current)return;const f=l.current.rotation.clone();c.current.updateMatrix(),c.current.updateWorldMatrix(!1,!1),c.current.getWorldQuaternion(u),h.getWorldQuaternion(l.current.quaternion).premultiply(u.invert()),i&&(l.current.rotation.x=f.x),r&&(l.current.rotation.y=f.y),s&&(l.current.rotation.z=f.z)}),D.useImperativeHandle(o,()=>c.current,[]),D.createElement("group",Sa({ref:c},a),D.createElement("group",{ref:l},e))});function _q(){var t=Object.create(null);function e(r,s){var a=r.id,o=r.name,l=r.dependencies;l===void 0&&(l=[]);var c=r.init;c===void 0&&(c=function(){});var u=r.getTransferables;if(u===void 0&&(u=null),!t[a])try{l=l.map(function(f){return f&&f.isWorkerModule&&(e(f,function(m){if(m instanceof Error)throw m}),f=t[f.id].value),f}),c=i("<"+o+">.init",c),u&&(u=i("<"+o+">.getTransferables",u));var h=null;typeof c=="function"?h=c.apply(void 0,l):console.error("worker module init function failed to rehydrate"),t[a]={id:a,value:h,getTransferables:u},s(h)}catch(f){f&&f.noLog||console.error(f),s(f)}}function n(r,s){var a,o=r.id,l=r.args;(!t[o]||typeof t[o].value!="function")&&s(new Error("Worker module "+o+": not found or its 'init' did not return a function"));try{var c=(a=t[o]).value.apply(a,l);c&&typeof c.then=="function"?c.then(u,function(h){return s(h instanceof Error?h:new Error(""+h))}):u(c)}catch(h){s(h)}function u(h){try{var f=t[o].getTransferables&&t[o].getTransferables(h);(!f||!Array.isArray(f)||!f.length)&&(f=void 0),s(h,f)}catch(m){console.error(m),s(m)}}}function i(r,s){var a=void 0;self.troikaDefine=function(l){return a=l};var o=URL.createObjectURL(new Blob(["/** "+r.replace(/\*/g,"")+` **/

troikaDefine(
`+s+`
)`],{type:"application/javascript"}));try{importScripts(o)}catch(l){console.error(l)}return URL.revokeObjectURL(o),delete self.troikaDefine,a}self.addEventListener("message",function(r){var s=r.data,a=s.messageId,o=s.action,l=s.data;try{o==="registerModule"&&e(l,function(c){c instanceof Error?postMessage({messageId:a,success:!1,error:c.message}):postMessage({messageId:a,success:!0,result:{isCallable:typeof c=="function"}})}),o==="callModule"&&n(l,function(c,u){c instanceof Error?postMessage({messageId:a,success:!1,error:c.message}):postMessage({messageId:a,success:!0,result:c},u||void 0)})}catch(c){postMessage({messageId:a,success:!1,error:c.stack})}})}function Sq(t){var e=function(){for(var n=[],i=arguments.length;i--;)n[i]=arguments[i];return e._getInitResult().then(function(r){if(typeof r=="function")return r.apply(void 0,n);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var n=t.dependencies,i=t.init;n=Array.isArray(n)?n.map(function(s){return s&&(s=s.onMainThread||s,s._getInitResult&&(s=s._getInitResult())),s}):[];var r=Promise.all(n).then(function(s){return i.apply(null,s)});return e._getInitResult=function(){return r},r},e}var XU=function(){var t=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),t=!0}catch(n){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+n.message+"]")}return XU=function(){return t},t},Aq=0,wq=0,F_=!1,Nf=Object.create(null),Ff=Object.create(null),nw=Object.create(null);function ed(t){if((!t||typeof t.init!="function")&&!F_)throw new Error("requires `options.init` function");var e=t.dependencies,n=t.init,i=t.getTransferables,r=t.workerId,s=Sq(t);r==null&&(r="#default");var a="workerModule"+ ++Aq,o=t.name||a,l=null;e=e&&e.map(function(u){return typeof u=="function"&&!u.workerModuleData&&(F_=!0,u=ed({workerId:r,name:"<"+o+"> function dependency: "+u.name,init:`function(){return (
`+Yv(u)+`
)}`}),F_=!1),u&&u.workerModuleData&&(u=u.workerModuleData),u});function c(){for(var u=[],h=arguments.length;h--;)u[h]=arguments[h];if(!XU())return s.apply(void 0,u);if(!l){l=mB(r,"registerModule",c.workerModuleData);var f=function(){l=null,Ff[r].delete(f)};(Ff[r]||(Ff[r]=new Set)).add(f)}return l.then(function(m){var g=m.isCallable;if(g)return mB(r,"callModule",{id:a,args:u});throw new Error("Worker module function was called but `init` did not return a callable function")})}return c.workerModuleData={isWorkerModule:!0,id:a,name:o,dependencies:e,init:Yv(n),getTransferables:i&&Yv(i)},c.onMainThread=s,c}function Mq(t){Ff[t]&&Ff[t].forEach(function(e){e()}),Nf[t]&&(Nf[t].terminate(),delete Nf[t])}function Yv(t){var e=t.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function Eq(t){var e=Nf[t];if(!e){var n=Yv(_q);e=Nf[t]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+t.replace(/\*/g,"")+` **/

;(`+n+")()"],{type:"application/javascript"}))),e.onmessage=function(i){var r=i.data,s=r.messageId,a=nw[s];if(!a)throw new Error("WorkerModule response with empty or unknown messageId");delete nw[s],a(r)}}return e}function mB(t,e,n){return new Promise(function(i,r){var s=++wq;nw[s]=function(a){a.success?i(a.result):r(new Error("Error in worker "+e+" call: "+a.error))},Eq(t).postMessage({messageId:s,action:e,data:n})})}function JU(){var t=function(e){function n(J,H,O,j,W,ne,ae,de){var fe=1-ae;de.x=fe*fe*J+2*fe*ae*O+ae*ae*W,de.y=fe*fe*H+2*fe*ae*j+ae*ae*ne}function i(J,H,O,j,W,ne,ae,de,fe,Se){var He=1-fe;Se.x=He*He*He*J+3*He*He*fe*O+3*He*fe*fe*W+fe*fe*fe*ae,Se.y=He*He*He*H+3*He*He*fe*j+3*He*fe*fe*ne+fe*fe*fe*de}function r(J,H){for(var O=/([MLQCZ])([^MLQCZ]*)/g,j,W,ne,ae,de;j=O.exec(J);){var fe=j[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(Se){return parseFloat(Se)});switch(j[1]){case"M":ae=W=fe[0],de=ne=fe[1];break;case"L":(fe[0]!==ae||fe[1]!==de)&&H("L",ae,de,ae=fe[0],de=fe[1]);break;case"Q":{H("Q",ae,de,ae=fe[2],de=fe[3],fe[0],fe[1]);break}case"C":{H("C",ae,de,ae=fe[4],de=fe[5],fe[0],fe[1],fe[2],fe[3]);break}case"Z":(ae!==W||de!==ne)&&H("L",ae,de,W,ne);break}}}function s(J,H,O){O===void 0&&(O=16);var j={x:0,y:0};r(J,function(W,ne,ae,de,fe,Se,He,Fe,ge){switch(W){case"L":H(ne,ae,de,fe);break;case"Q":{for(var X=ne,Re=ae,ye=1;ye<O;ye++)n(ne,ae,Se,He,de,fe,ye/(O-1),j),H(X,Re,j.x,j.y),X=j.x,Re=j.y;break}case"C":{for(var De=ne,Me=ae,Qe=1;Qe<O;Qe++)i(ne,ae,Se,He,Fe,ge,de,fe,Qe/(O-1),j),H(De,Me,j.x,j.y),De=j.x,Me=j.y;break}}})}var a="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",o="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",l=new WeakMap,c={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function u(J,H){var O=J.getContext?J.getContext("webgl",c):J,j=l.get(O);if(!j){let De=function(be){var rt=ne[be];if(!rt&&(rt=ne[be]=O.getExtension(be),!rt))throw new Error(be+" not supported");return rt},Me=function(be,rt){var V=O.createShader(rt);return O.shaderSource(V,be),O.compileShader(V),V},Qe=function(be,rt,V,k){if(!ae[be]){var ue={},je={},_e=O.createProgram();O.attachShader(_e,Me(rt,O.VERTEX_SHADER)),O.attachShader(_e,Me(V,O.FRAGMENT_SHADER)),O.linkProgram(_e),ae[be]={program:_e,transaction:function(Ke){O.useProgram(_e),Ke({setUniform:function(Ze,ct){for(var ot=[],Pe=arguments.length-2;Pe-- >0;)ot[Pe]=arguments[Pe+2];var et=je[ct]||(je[ct]=O.getUniformLocation(_e,ct));O["uniform"+Ze].apply(O,[et].concat(ot))},setAttribute:function(Ze,ct,ot,Pe,et){var re=ue[Ze];re||(re=ue[Ze]={buf:O.createBuffer(),loc:O.getAttribLocation(_e,Ze),data:null}),O.bindBuffer(O.ARRAY_BUFFER,re.buf),O.vertexAttribPointer(re.loc,ct,O.FLOAT,!1,0,0),O.enableVertexAttribArray(re.loc),W?O.vertexAttribDivisor(re.loc,Pe):De("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(re.loc,Pe),et!==re.data&&(O.bufferData(O.ARRAY_BUFFER,et,ot),re.data=et)}})}}}ae[be].transaction(k)},Ee=function(be,rt){fe++;try{O.activeTexture(O.TEXTURE0+fe);var V=de[be];V||(V=de[be]=O.createTexture(),O.bindTexture(O.TEXTURE_2D,V),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_MIN_FILTER,O.NEAREST),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_MAG_FILTER,O.NEAREST)),O.bindTexture(O.TEXTURE_2D,V),rt(V,fe)}finally{fe--}},Oe=function(be,rt,V){var k=O.createFramebuffer();Se.push(k),O.bindFramebuffer(O.FRAMEBUFFER,k),O.activeTexture(O.TEXTURE0+rt),O.bindTexture(O.TEXTURE_2D,be),O.framebufferTexture2D(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_2D,be,0);try{V(k)}finally{O.deleteFramebuffer(k),O.bindFramebuffer(O.FRAMEBUFFER,Se[--Se.length-1]||null)}},Je=function(){ne={},ae={},de={},fe=-1,Se.length=0};var He=De,Fe=Me,ge=Qe,X=Ee,Re=Oe,ye=Je,W=typeof WebGL2RenderingContext<"u"&&O instanceof WebGL2RenderingContext,ne={},ae={},de={},fe=-1,Se=[];O.canvas.addEventListener("webglcontextlost",function(be){Je(),be.preventDefault()},!1),l.set(O,j={gl:O,isWebGL2:W,getExtension:De,withProgram:Qe,withTexture:Ee,withTextureFramebuffer:Oe,handleContextLoss:Je})}H(j)}function h(J,H,O,j,W,ne,ae,de){ae===void 0&&(ae=15),de===void 0&&(de=null),u(J,function(fe){var Se=fe.gl,He=fe.withProgram,Fe=fe.withTexture;Fe("copy",function(ge,X){Se.texImage2D(Se.TEXTURE_2D,0,Se.RGBA,W,ne,0,Se.RGBA,Se.UNSIGNED_BYTE,H),He("copy",a,o,function(Re){var ye=Re.setUniform,De=Re.setAttribute;De("aUV",2,Se.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),ye("1i","image",X),Se.bindFramebuffer(Se.FRAMEBUFFER,de||null),Se.disable(Se.BLEND),Se.colorMask(ae&8,ae&4,ae&2,ae&1),Se.viewport(O,j,W,ne),Se.scissor(O,j,W,ne),Se.drawArrays(Se.TRIANGLES,0,3)})})})}function f(J,H,O){var j=J.width,W=J.height;u(J,function(ne){var ae=ne.gl,de=new Uint8Array(j*W*4);ae.readPixels(0,0,j,W,ae.RGBA,ae.UNSIGNED_BYTE,de),J.width=H,J.height=O,h(ae,de,0,0,j,W)})}var m=Object.freeze({__proto__:null,withWebGLContext:u,renderImageData:h,resizeWebGLCanvasWithoutClearing:f});function g(J,H,O,j,W,ne){ne===void 0&&(ne=1);var ae=new Uint8Array(J*H),de=j[2]-j[0],fe=j[3]-j[1],Se=[];s(O,function(De,Me,Qe,Ee){Se.push({x1:De,y1:Me,x2:Qe,y2:Ee,minX:Math.min(De,Qe),minY:Math.min(Me,Ee),maxX:Math.max(De,Qe),maxY:Math.max(Me,Ee)})}),Se.sort(function(De,Me){return De.maxX-Me.maxX});for(var He=0;He<J;He++)for(var Fe=0;Fe<H;Fe++){var ge=Re(j[0]+de*(He+.5)/J,j[1]+fe*(Fe+.5)/H),X=Math.pow(1-Math.abs(ge)/W,ne)/2;ge<0&&(X=1-X),X=Math.max(0,Math.min(255,Math.round(X*255))),ae[Fe*J+He]=X}return ae;function Re(De,Me){for(var Qe=1/0,Ee=1/0,Oe=Se.length;Oe--;){var Je=Se[Oe];if(Je.maxX+Ee<=De)break;if(De+Ee>Je.minX&&Me-Ee<Je.maxY&&Me+Ee>Je.minY){var be=v(De,Me,Je.x1,Je.y1,Je.x2,Je.y2);be<Qe&&(Qe=be,Ee=Math.sqrt(Qe))}}return ye(De,Me)&&(Ee=-Ee),Ee}function ye(De,Me){for(var Qe=0,Ee=Se.length;Ee--;){var Oe=Se[Ee];if(Oe.maxX<=De)break;var Je=Oe.y1>Me!=Oe.y2>Me&&De<(Oe.x2-Oe.x1)*(Me-Oe.y1)/(Oe.y2-Oe.y1)+Oe.x1;Je&&(Qe+=Oe.y1<Oe.y2?1:-1)}return Qe!==0}}function y(J,H,O,j,W,ne,ae,de,fe,Se){ne===void 0&&(ne=1),de===void 0&&(de=0),fe===void 0&&(fe=0),Se===void 0&&(Se=0),x(J,H,O,j,W,ne,ae,null,de,fe,Se)}function x(J,H,O,j,W,ne,ae,de,fe,Se,He){ne===void 0&&(ne=1),fe===void 0&&(fe=0),Se===void 0&&(Se=0),He===void 0&&(He=0);for(var Fe=g(J,H,O,j,W,ne),ge=new Uint8Array(Fe.length*4),X=0;X<Fe.length;X++)ge[X*4+He]=Fe[X];h(ae,ge,fe,Se,J,H,1<<3-He,de)}function v(J,H,O,j,W,ne){var ae=W-O,de=ne-j,fe=ae*ae+de*de,Se=fe?Math.max(0,Math.min(1,((J-O)*ae+(H-j)*de)/fe)):0,He=J-(O+Se*ae),Fe=H-(j+Se*de);return He*He+Fe*Fe}var _=Object.freeze({__proto__:null,generate:g,generateIntoCanvas:y,generateIntoFramebuffer:x}),S="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",M="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",b="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",C=new Float32Array([0,0,2,0,0,2]),B=null,P=!1,T={},I=new WeakMap;function z(J){if(!P&&!ee(J))throw new Error("WebGL generation not supported")}function G(J,H,O,j,W,ne,ae){if(ne===void 0&&(ne=1),ae===void 0&&(ae=null),!ae&&(ae=B,!ae)){var de=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!de)throw new Error("OffscreenCanvas or DOM canvas not supported");ae=B=de.getContext("webgl",{depth:!1})}z(ae);var fe=new Uint8Array(J*H*4);u(ae,function(ge){var X=ge.gl,Re=ge.withTexture,ye=ge.withTextureFramebuffer;Re("readable",function(De,Me){X.texImage2D(X.TEXTURE_2D,0,X.RGBA,J,H,0,X.RGBA,X.UNSIGNED_BYTE,null),ye(De,Me,function(Qe){U(J,H,O,j,W,ne,X,Qe,0,0,0),X.readPixels(0,0,J,H,X.RGBA,X.UNSIGNED_BYTE,fe)})})});for(var Se=new Uint8Array(J*H),He=0,Fe=0;He<fe.length;He+=4)Se[Fe++]=fe[He];return Se}function Q(J,H,O,j,W,ne,ae,de,fe,Se){ne===void 0&&(ne=1),de===void 0&&(de=0),fe===void 0&&(fe=0),Se===void 0&&(Se=0),U(J,H,O,j,W,ne,ae,null,de,fe,Se)}function U(J,H,O,j,W,ne,ae,de,fe,Se,He){ne===void 0&&(ne=1),fe===void 0&&(fe=0),Se===void 0&&(Se=0),He===void 0&&(He=0),z(ae);var Fe=[];s(O,function(ge,X,Re,ye){Fe.push(ge,X,Re,ye)}),Fe=new Float32Array(Fe),u(ae,function(ge){var X=ge.gl,Re=ge.isWebGL2,ye=ge.getExtension,De=ge.withProgram,Me=ge.withTexture,Qe=ge.withTextureFramebuffer,Ee=ge.handleContextLoss;if(Me("rawDistances",function(Oe,Je){(J!==Oe._lastWidth||H!==Oe._lastHeight)&&X.texImage2D(X.TEXTURE_2D,0,X.RGBA,Oe._lastWidth=J,Oe._lastHeight=H,0,X.RGBA,X.UNSIGNED_BYTE,null),De("main",S,M,function(be){var rt=be.setAttribute,V=be.setUniform,k=!Re&&ye("ANGLE_instanced_arrays"),ue=!Re&&ye("EXT_blend_minmax");rt("aUV",2,X.STATIC_DRAW,0,C),rt("aLineSegment",4,X.DYNAMIC_DRAW,1,Fe),V.apply(void 0,["4f","uGlyphBounds"].concat(j)),V("1f","uMaxDistance",W),V("1f","uExponent",ne),Qe(Oe,Je,function(je){X.enable(X.BLEND),X.colorMask(!0,!0,!0,!0),X.viewport(0,0,J,H),X.scissor(0,0,J,H),X.blendFunc(X.ONE,X.ONE),X.blendEquationSeparate(X.FUNC_ADD,Re?X.MAX:ue.MAX_EXT),X.clear(X.COLOR_BUFFER_BIT),Re?X.drawArraysInstanced(X.TRIANGLES,0,3,Fe.length/4):k.drawArraysInstancedANGLE(X.TRIANGLES,0,3,Fe.length/4)})}),De("post",a,b,function(be){be.setAttribute("aUV",2,X.STATIC_DRAW,0,C),be.setUniform("1i","tex",Je),X.bindFramebuffer(X.FRAMEBUFFER,de),X.disable(X.BLEND),X.colorMask(He===0,He===1,He===2,He===3),X.viewport(fe,Se,J,H),X.scissor(fe,Se,J,H),X.drawArrays(X.TRIANGLES,0,3)})}),X.isContextLost())throw Ee(),new Error("webgl context lost")})}function ee(J){var H=!J||J===B?T:J.canvas||J,O=I.get(H);if(O===void 0){P=!0;var j=null;try{var W=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],ne=G(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,J);O=ne&&W.length===ne.length&&ne.every(function(ae,de){return ae===W[de]}),O||(j="bad trial run results",console.info(W,ne))}catch(ae){O=!1,j=ae.message}j&&console.warn("WebGL SDF generation not supported:",j),P=!1,I.set(H,O)}return O}var $=Object.freeze({__proto__:null,generate:G,generateIntoCanvas:Q,generateIntoFramebuffer:U,isSupported:ee});function oe(J,H,O,j,W,ne){W===void 0&&(W=Math.max(j[2]-j[0],j[3]-j[1])/2),ne===void 0&&(ne=1);try{return G.apply($,arguments)}catch(ae){return console.info("WebGL SDF generation failed, falling back to JS",ae),g.apply(_,arguments)}}function Z(J,H,O,j,W,ne,ae,de,fe,Se){W===void 0&&(W=Math.max(j[2]-j[0],j[3]-j[1])/2),ne===void 0&&(ne=1),de===void 0&&(de=0),fe===void 0&&(fe=0),Se===void 0&&(Se=0);try{return Q.apply($,arguments)}catch(He){return console.info("WebGL SDF generation failed, falling back to JS",He),y.apply(_,arguments)}}return e.forEachPathCommand=r,e.generate=oe,e.generateIntoCanvas=Z,e.javascript=_,e.pathToLineSegments=s,e.webgl=$,e.webglUtils=m,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return t}function bq(){var t=function(e){var n={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},i={},r={};i.L=1,r[1]="L",Object.keys(n).forEach(function(Ee,Oe){i[Ee]=1<<Oe+1,r[i[Ee]]=Ee}),Object.freeze(i);var s=i.LRI|i.RLI|i.FSI,a=i.L|i.R|i.AL,o=i.B|i.S|i.WS|i.ON|i.FSI|i.LRI|i.RLI|i.PDI,l=i.BN|i.RLE|i.LRE|i.RLO|i.LRO|i.PDF,c=i.S|i.WS|i.B|s|i.PDI|l,u=null;function h(){if(!u){u=new Map;var Ee=function(Je){if(n.hasOwnProperty(Je)){var be=0;n[Je].split(",").forEach(function(rt){var V=rt.split("+"),k=V[0],ue=V[1];k=parseInt(k,36),ue=ue?parseInt(ue,36):0,u.set(be+=k,i[Je]);for(var je=0;je<ue;je++)u.set(++be,i[Je])})}};for(var Oe in n)Ee(Oe)}}function f(Ee){return h(),u.get(Ee.codePointAt(0))||i.L}function m(Ee){return r[f(Ee)]}var g={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function y(Ee,Oe){var Je=36,be=0,rt=new Map,V=Oe&&new Map,k;return Ee.split(",").forEach(function ue(je){if(je.indexOf("+")!==-1)for(var _e=+je;_e--;)ue(k);else{k=je;var Le=je.split(">"),Ke=Le[0],We=Le[1];Ke=String.fromCodePoint(be+=parseInt(Ke,Je)),We=String.fromCodePoint(be+=parseInt(We,Je)),rt.set(Ke,We),Oe&&V.set(We,Ke)}}),{map:rt,reverseMap:V}}var x,v,_;function S(){if(!x){var Ee=y(g.pairs,!0),Oe=Ee.map,Je=Ee.reverseMap;x=Oe,v=Je,_=y(g.canonical,!1).map}}function M(Ee){return S(),x.get(Ee)||null}function b(Ee){return S(),v.get(Ee)||null}function C(Ee){return S(),_.get(Ee)||null}var B=i.L,P=i.R,T=i.EN,I=i.ES,z=i.ET,G=i.AN,Q=i.CS,U=i.B,ee=i.S,$=i.ON,oe=i.BN,Z=i.NSM,J=i.AL,H=i.LRO,O=i.RLO,j=i.LRE,W=i.RLE,ne=i.PDF,ae=i.LRI,de=i.RLI,fe=i.FSI,Se=i.PDI;function He(Ee,Oe){for(var Je=125,be=new Uint32Array(Ee.length),rt=0;rt<Ee.length;rt++)be[rt]=f(Ee[rt]);var V=new Map;function k(Ti,cr){var ri=be[Ti];be[Ti]=cr,V.set(ri,V.get(ri)-1),ri&o&&V.set(o,V.get(o)-1),V.set(cr,(V.get(cr)||0)+1),cr&o&&V.set(o,(V.get(o)||0)+1)}for(var ue=new Uint8Array(Ee.length),je=new Map,_e=[],Le=null,Ke=0;Ke<Ee.length;Ke++)Le||_e.push(Le={start:Ke,end:Ee.length-1,level:Oe==="rtl"?1:Oe==="ltr"?0:au(Ke,!1)}),be[Ke]&U&&(Le.end=Ke,Le=null);for(var We=W|j|O|H|s|Se|ne|U,Ze=function(Ti){return Ti+(Ti&1?1:2)},ct=function(Ti){return Ti+(Ti&1?2:1)},ot=0;ot<_e.length;ot++){Le=_e[ot];var Pe=[{_level:Le.level,_override:0,_isolate:0}],et=void 0,re=0,Ae=0,Ge=0;V.clear();for(var Ve=Le.start;Ve<=Le.end;Ve++){var xe=be[Ve];if(et=Pe[Pe.length-1],V.set(xe,(V.get(xe)||0)+1),xe&o&&V.set(o,(V.get(o)||0)+1),xe&We)if(xe&(W|j)){ue[Ve]=et._level;var le=(xe===W?ct:Ze)(et._level);le<=Je&&!re&&!Ae?Pe.push({_level:le,_override:0,_isolate:0}):re||Ae++}else if(xe&(O|H)){ue[Ve]=et._level;var nt=(xe===O?ct:Ze)(et._level);nt<=Je&&!re&&!Ae?Pe.push({_level:nt,_override:xe&O?P:B,_isolate:0}):re||Ae++}else if(xe&s){xe&fe&&(xe=au(Ve+1,!0)===1?de:ae),ue[Ve]=et._level,et._override&&k(Ve,et._override);var Xe=(xe===de?ct:Ze)(et._level);Xe<=Je&&re===0&&Ae===0?(Ge++,Pe.push({_level:Xe,_override:0,_isolate:1,_isolInitIndex:Ve})):re++}else if(xe&Se){if(re>0)re--;else if(Ge>0){for(Ae=0;!Pe[Pe.length-1]._isolate;)Pe.pop();var we=Pe[Pe.length-1]._isolInitIndex;we!=null&&(je.set(we,Ve),je.set(Ve,we)),Pe.pop(),Ge--}et=Pe[Pe.length-1],ue[Ve]=et._level,et._override&&k(Ve,et._override)}else xe&ne?(re===0&&(Ae>0?Ae--:!et._isolate&&Pe.length>1&&(Pe.pop(),et=Pe[Pe.length-1])),ue[Ve]=et._level):xe&U&&(ue[Ve]=Le.level);else ue[Ve]=et._level,et._override&&xe!==oe&&k(Ve,et._override)}for(var Ye=[],st=null,at=Le.start;at<=Le.end;at++){var Et=be[at];if(!(Et&l)){var jt=ue[at],Ct=Et&s,Zt=Et===Se;st&&jt===st._level?(st._end=at,st._endsWithIsolInit=Ct):Ye.push(st={_start:at,_end:at,_level:jt,_startsWithPDI:Zt,_endsWithIsolInit:Ct})}}for(var En=[],yi=0;yi<Ye.length;yi++){var Ui=Ye[yi];if(!Ui._startsWithPDI||Ui._startsWithPDI&&!je.has(Ui._start)){for(var ni=[st=Ui],Yn=void 0;st&&st._endsWithIsolInit&&(Yn=je.get(st._end))!=null;)for(var Rt=yi+1;Rt<Ye.length;Rt++)if(Ye[Rt]._start===Yn){ni.push(st=Ye[Rt]);break}for(var Gn=[],Ar=0;Ar<ni.length;Ar++)for(var F=ni[Ar],Y=F._start;Y<=F._end;Y++)Gn.push(Y);for(var he=ue[Gn[0]],N=Le.level,q=Gn[0]-1;q>=0;q--)if(!(be[q]&l)){N=ue[q];break}var te=Gn[Gn.length-1],ce=ue[te],se=Le.level;if(!(be[te]&s)){for(var Te=te+1;Te<=Le.end;Te++)if(!(be[Te]&l)){se=ue[Te];break}}En.push({_seqIndices:Gn,_sosType:Math.max(N,he)%2?P:B,_eosType:Math.max(se,ce)%2?P:B})}}for(var Ne=0;Ne<En.length;Ne++){var ke=En[Ne],pe=ke._seqIndices,ft=ke._sosType,$e=ke._eosType,qe=ue[pe[0]]&1?P:B;if(V.get(Z))for(var vt=0;vt<pe.length;vt++){var St=pe[vt];if(be[St]&Z){for(var wt=ft,Lt=vt-1;Lt>=0;Lt--)if(!(be[pe[Lt]]&l)){wt=be[pe[Lt]];break}k(St,wt&(s|Se)?$:wt)}}if(V.get(T))for(var pt=0;pt<pe.length;pt++){var lt=pe[pt];if(be[lt]&T)for(var Ot=pt-1;Ot>=-1;Ot--){var Tt=Ot===-1?ft:be[pe[Ot]];if(Tt&a){Tt===J&&k(lt,G);break}}}if(V.get(J))for(var Pt=0;Pt<pe.length;Pt++){var un=pe[Pt];be[un]&J&&k(un,P)}if(V.get(I)||V.get(Q))for(var yn=1;yn<pe.length-1;yn++){var xn=pe[yn];if(be[xn]&(I|Q)){for(var Jt=0,Wt=0,An=yn-1;An>=0&&(Jt=be[pe[An]],!!(Jt&l));An--);for(var Ft=yn+1;Ft<pe.length&&(Wt=be[pe[Ft]],!!(Wt&l));Ft++);Jt===Wt&&(be[xn]===I?Jt===T:Jt&(T|G))&&k(xn,Jt)}}if(V.get(T))for(var Nt=0;Nt<pe.length;Nt++){var _n=pe[Nt];if(be[_n]&T){for(var ki=Nt-1;ki>=0&&be[pe[ki]]&(z|l);ki--)k(pe[ki],T);for(Nt++;Nt<pe.length&&be[pe[Nt]]&(z|l|T);Nt++)be[pe[Nt]]!==T&&k(pe[Nt],T)}}if(V.get(z)||V.get(I)||V.get(Q))for(var ii=0;ii<pe.length;ii++){var Or=pe[ii];if(be[Or]&(z|I|Q)){k(Or,$);for(var wa=ii-1;wa>=0&&be[pe[wa]]&l;wa--)k(pe[wa],$);for(var Ma=ii+1;Ma<pe.length&&be[pe[Ma]]&l;Ma++)k(pe[Ma],$)}}if(V.get(T))for(var Ea=0,Bl=ft;Ea<pe.length;Ea++){var lm=pe[Ea],td=be[lm];td&T?Bl===B&&k(lm,B):td&a&&(Bl=td)}if(V.get(o)){var ba=P|T|G,iu=ba|B,na=[];{for(var po=[],ia=0;ia<pe.length;ia++)if(be[pe[ia]]&o){var en=Ee[pe[ia]],nd=void 0;if(M(en)!==null)if(po.length<63)po.push({char:en,seqIndex:ia});else break;else if((nd=b(en))!==null)for(var Ta=po.length-1;Ta>=0;Ta--){var ru=po[Ta].char;if(ru===nd||ru===b(C(en))||M(C(ru))===en){na.push([po[Ta].seqIndex,ia]),po.length=Ta;break}}}na.sort(function(Ti,cr){return Ti[0]-cr[0]})}for(var id=0;id<na.length;id++){for(var cm=na[id],zn=cm[0],Il=cm[1],um=!1,ar=0,rd=zn+1;rd<Il;rd++){var Ll=pe[rd];if(be[Ll]&iu){um=!0;var Gr=be[Ll]&ba?P:B;if(Gr===qe){ar=Gr;break}}}if(um&&!ar){ar=ft;for(var sd=zn-1;sd>=0;sd--){var hm=pe[sd];if(be[hm]&iu){var zr=be[hm]&ba?P:B;zr!==qe?ar=zr:ar=qe;break}}}if(ar){if(be[pe[zn]]=be[pe[Il]]=ar,ar!==qe){for(var or=zn+1;or<pe.length;or++)if(!(be[pe[or]]&l)){f(Ee[pe[or]])&Z&&(be[pe[or]]=ar);break}}if(ar!==qe){for(var ra=Il+1;ra<pe.length;ra++)if(!(be[pe[ra]]&l)){f(Ee[pe[ra]])&Z&&(be[pe[ra]]=ar);break}}}}for(var is=0;is<pe.length;is++)if(be[pe[is]]&o){for(var ad=is,od=is,wr=ft,Dl=is-1;Dl>=0;Dl--)if(be[pe[Dl]]&l)ad=Dl;else{wr=be[pe[Dl]]&ba?P:B;break}for(var Nl=$e,Fl=is+1;Fl<pe.length;Fl++)if(be[pe[Fl]]&(o|l))od=Fl;else{Nl=be[pe[Fl]]&ba?P:B;break}for(var lr=ad;lr<=od;lr++)be[pe[lr]]=wr===Nl?wr:qe;is=od}}}for(var bi=Le.start;bi<=Le.end;bi++){var su=ue[bi],Cs=be[bi];if(su&1?Cs&(B|T|G)&&ue[bi]++:Cs&P?ue[bi]++:Cs&(G|T)&&(ue[bi]+=2),Cs&l&&(ue[bi]=bi===0?Le.level:ue[bi-1]),bi===Le.end||f(Ee[bi])&(ee|U))for(var mo=bi;mo>=0&&f(Ee[mo])&c;mo--)ue[mo]=Le.level}}return{levels:ue,paragraphs:_e};function au(Ti,cr){for(var ri=Ti;ri<Ee.length;ri++){var si=be[ri];if(si&(P|J))return 1;if(si&(U|B)||cr&&si===Se)return 0;if(si&s){var Hr=dm(ri);ri=Hr===-1?Ee.length:Hr}}return 0}function dm(Ti){for(var cr=1,ri=Ti+1;ri<Ee.length;ri++){var si=be[ri];if(si&U)break;if(si&Se){if(--cr===0)return ri}else si&s&&cr++}return-1}}var Fe="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",ge;function X(){if(!ge){var Ee=y(Fe,!0),Oe=Ee.map,Je=Ee.reverseMap;Je.forEach(function(be,rt){Oe.set(rt,be)}),ge=Oe}}function Re(Ee){return X(),ge.get(Ee)||null}function ye(Ee,Oe,Je,be){var rt=Ee.length;Je=Math.max(0,Je==null?0:+Je),be=Math.min(rt-1,be==null?rt-1:+be);for(var V=new Map,k=Je;k<=be;k++)if(Oe[k]&1){var ue=Re(Ee[k]);ue!==null&&V.set(k,ue)}return V}function De(Ee,Oe,Je,be){var rt=Ee.length;Je=Math.max(0,Je==null?0:+Je),be=Math.min(rt-1,be==null?rt-1:+be);var V=[];return Oe.paragraphs.forEach(function(k){var ue=Math.max(Je,k.start),je=Math.min(be,k.end);if(ue<je){for(var _e=Oe.levels.slice(ue,je+1),Le=je;Le>=ue&&f(Ee[Le])&c;Le--)_e[Le]=k.level;for(var Ke=k.level,We=1/0,Ze=0;Ze<_e.length;Ze++){var ct=_e[Ze];ct>Ke&&(Ke=ct),ct<We&&(We=ct|1)}for(var ot=Ke;ot>=We;ot--)for(var Pe=0;Pe<_e.length;Pe++)if(_e[Pe]>=ot){for(var et=Pe;Pe+1<_e.length&&_e[Pe+1]>=ot;)Pe++;Pe>et&&V.push([et+ue,Pe+ue])}}}),V}function Me(Ee,Oe,Je,be){var rt=Qe(Ee,Oe,Je,be),V=[].concat(Ee);return rt.forEach(function(k,ue){V[ue]=(Oe.levels[k]&1?Re(Ee[k]):null)||Ee[k]}),V.join("")}function Qe(Ee,Oe,Je,be){for(var rt=De(Ee,Oe,Je,be),V=[],k=0;k<Ee.length;k++)V[k]=k;return rt.forEach(function(ue){for(var je=ue[0],_e=ue[1],Le=V.slice(je,_e+1),Ke=Le.length;Ke--;)V[_e-Ke]=Le[Ke]}),V}return e.closingToOpeningBracket=b,e.getBidiCharType=f,e.getBidiCharTypeName=m,e.getCanonicalBracket=C,e.getEmbeddingLevels=He,e.getMirroredCharacter=Re,e.getMirroredCharactersMap=ye,e.getReorderSegments=De,e.getReorderedIndices=Qe,e.getReorderedString=Me,e.openingToClosingBracket=M,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return t}const YU=/\bvoid\s+main\s*\(\s*\)\s*{/g;function iw(t){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function n(i,r){let s=Xt[r];return s?iw(s):i}return t.replace(e,n)}const Gi=[];for(let t=0;t<256;t++)Gi[t]=(t<16?"0":"")+t.toString(16);function Tq(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Gi[t&255]+Gi[t>>8&255]+Gi[t>>16&255]+Gi[t>>24&255]+"-"+Gi[e&255]+Gi[e>>8&255]+"-"+Gi[e>>16&15|64]+Gi[e>>24&255]+"-"+Gi[n&63|128]+Gi[n>>8&255]+"-"+Gi[n>>16&255]+Gi[n>>24&255]+Gi[i&255]+Gi[i>>8&255]+Gi[i>>16&255]+Gi[i>>24&255]).toUpperCase()}const rc=Object.assign||function(){let t=arguments[0];for(let e=1,n=arguments.length;e<n;e++){let i=arguments[e];if(i)for(let r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},Cq=Date.now(),gB=new WeakMap,vB=new Map;let Rq=1e10;function rw(t,e){const n=Lq(e);let i=gB.get(t);if(i||gB.set(t,i=Object.create(null)),i[n])return new i[n];const r=`_onBeforeCompile${n}`,s=function(c,u){t.onBeforeCompile.call(this,c,u);const h=this.customProgramCacheKey()+"|"+c.vertexShader+"|"+c.fragmentShader;let f=vB[h];if(!f){const m=Pq(this,c,e,n);f=vB[h]=m}c.vertexShader=f.vertexShader,c.fragmentShader=f.fragmentShader,rc(c.uniforms,this.uniforms),e.timeUniform&&(c.uniforms[e.timeUniform]={get value(){return Date.now()-Cq}}),this[r]&&this[r](c)},a=function(){return o(e.chained?t:t.clone())},o=function(c){const u=Object.create(c,l);return Object.defineProperty(u,"baseMaterial",{value:t}),Object.defineProperty(u,"id",{value:Rq++}),u.uuid=Tq(),u.uniforms=rc({},c.uniforms,e.uniforms),u.defines=rc({},c.defines,e.defines),u.defines[`TROIKA_DERIVED_MATERIAL_${n}`]="",u.extensions=rc({},c.extensions,e.extensions),u._listeners=void 0,u},l={constructor:{value:a},isDerivedMaterial:{value:!0},type:{get:()=>t.type,set:c=>{t.type=c}},isDerivedFrom:{writable:!0,configurable:!0,value:function(c){const u=this.baseMaterial;return c===u||u.isDerivedMaterial&&u.isDerivedFrom(c)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return t.customProgramCacheKey()+"|"+n}},onBeforeCompile:{get(){return s},set(c){this[r]=c}},copy:{writable:!0,configurable:!0,value:function(c){return t.copy.call(this,c),!t.isShaderMaterial&&!t.isDerivedMaterial&&(rc(this.extensions,c.extensions),rc(this.defines,c.defines),rc(this.uniforms,ZM.clone(c.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const c=new t.constructor;return o(c).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let c=this._depthMaterial;return c||(c=this._depthMaterial=rw(t.isDerivedMaterial?t.getDepthMaterial():new Sy({depthPacking:jM}),e),c.defines.IS_DEPTH_MATERIAL="",c.uniforms=this.uniforms),c}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let c=this._distanceMaterial;return c||(c=this._distanceMaterial=rw(t.isDerivedMaterial?t.getDistanceMaterial():new Ay,e),c.defines.IS_DISTANCE_MATERIAL="",c.uniforms=this.uniforms),c}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:c,_distanceMaterial:u}=this;c&&c.dispose(),u&&u.dispose(),t.dispose.call(this)}}};return i[n]=a,new a}function Pq(t,{vertexShader:e,fragmentShader:n},i,r){let{vertexDefs:s,vertexMainIntro:a,vertexMainOutro:o,vertexTransform:l,fragmentDefs:c,fragmentMainIntro:u,fragmentMainOutro:h,fragmentColorTransform:f,customRewriter:m,timeUniform:g}=i;if(s=s||"",a=a||"",o=o||"",c=c||"",u=u||"",h=h||"",(l||m)&&(e=iw(e)),(f||m)&&(n=n.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),n=iw(n)),m){let y=m({vertexShader:e,fragmentShader:n});e=y.vertexShader,n=y.fragmentShader}if(f){let y=[];n=n.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,x=>(y.push(x),"")),h=`${f}
${y.join(`
`)}
${h}`}if(g){const y=`
uniform float ${g};
`;s=y+s,c=y+c}return l&&(e=`vec3 troika_position_${r};
vec3 troika_normal_${r};
vec2 troika_uv_${r};
${e}
`,s=`${s}
void troikaVertexTransform${r}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${l}
}
`,a=`
troika_position_${r} = vec3(position);
troika_normal_${r} = vec3(normal);
troika_uv_${r} = vec2(uv);
troikaVertexTransform${r}(troika_position_${r}, troika_normal_${r}, troika_uv_${r});
${a}
`,e=e.replace(/\b(position|normal|uv)\b/g,(y,x,v,_)=>/\battribute\s+vec[23]\s+$/.test(_.substr(0,v))?x:`troika_${x}_${r}`),t.map&&t.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${r}`))),e=yB(e,r,s,a,o),n=yB(n,r,c,u,h),{vertexShader:e,fragmentShader:n}}function yB(t,e,n,i,r){return(i||r||n)&&(t=t.replace(YU,`
${n}
void troikaOrigMain${e}() {`),t+=`
void main() {
  ${i}
  troikaOrigMain${e}();
  ${r}
}`),t}function Bq(t,e){return t==="uniforms"?void 0:typeof e=="function"?e.toString():e}let Iq=0;const xB=new Map;function Lq(t){const e=JSON.stringify(t,Bq);let n=xB.get(e);return n==null&&xB.set(e,n=++Iq),n}/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function Dq(){return typeof window>"u"&&(self.window=self),function(t){var e={parse:function(r){var s=e._bin,a=new Uint8Array(r);if(s.readASCII(a,0,4)=="ttcf"){var o=4;s.readUshort(a,o),o+=2,s.readUshort(a,o),o+=2;var l=s.readUint(a,o);o+=4;for(var c=[],u=0;u<l;u++){var h=s.readUint(a,o);o+=4,c.push(e._readFont(a,h))}return c}return[e._readFont(a,0)]},_readFont:function(r,s){var a=e._bin,o=s;a.readFixed(r,s),s+=4;var l=a.readUshort(r,s);s+=2,a.readUshort(r,s),s+=2,a.readUshort(r,s),s+=2,a.readUshort(r,s),s+=2;for(var c=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],u={_data:r,_offset:o},h={},f=0;f<l;f++){var m=a.readASCII(r,s,4);s+=4,a.readUint(r,s),s+=4;var g=a.readUint(r,s);s+=4;var y=a.readUint(r,s);s+=4,h[m]={offset:g,length:y}}for(f=0;f<c.length;f++){var x=c[f];h[x]&&(u[x.trim()]=e[x.trim()].parse(r,h[x].offset,h[x].length,u))}return u},_tabOffset:function(r,s,a){for(var o=e._bin,l=o.readUshort(r,a+4),c=a+12,u=0;u<l;u++){var h=o.readASCII(r,c,4);c+=4,o.readUint(r,c),c+=4;var f=o.readUint(r,c);if(c+=4,o.readUint(r,c),c+=4,h==s)return f}return 0}};e._bin={readFixed:function(r,s){return(r[s]<<8|r[s+1])+(r[s+2]<<8|r[s+3])/65540},readF2dot14:function(r,s){return e._bin.readShort(r,s)/16384},readInt:function(r,s){return e._bin._view(r).getInt32(s)},readInt8:function(r,s){return e._bin._view(r).getInt8(s)},readShort:function(r,s){return e._bin._view(r).getInt16(s)},readUshort:function(r,s){return e._bin._view(r).getUint16(s)},readUshorts:function(r,s,a){for(var o=[],l=0;l<a;l++)o.push(e._bin.readUshort(r,s+2*l));return o},readUint:function(r,s){return e._bin._view(r).getUint32(s)},readUint64:function(r,s){return 4294967296*e._bin.readUint(r,s)+e._bin.readUint(r,s+4)},readASCII:function(r,s,a){for(var o="",l=0;l<a;l++)o+=String.fromCharCode(r[s+l]);return o},readUnicode:function(r,s,a){for(var o="",l=0;l<a;l++){var c=r[s++]<<8|r[s++];o+=String.fromCharCode(c)}return o},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(r,s,a){var o=e._bin._tdec;return o&&s==0&&a==r.length?o.decode(r):e._bin.readASCII(r,s,a)},readBytes:function(r,s,a){for(var o=[],l=0;l<a;l++)o.push(r[s+l]);return o},readASCIIArray:function(r,s,a){for(var o=[],l=0;l<a;l++)o.push(String.fromCharCode(r[s+l]));return o},_view:function(r){return r._dataView||(r._dataView=r.buffer?new DataView(r.buffer,r.byteOffset,r.byteLength):new DataView(new Uint8Array(r).buffer))}},e._lctf={},e._lctf.parse=function(r,s,a,o,l){var c=e._bin,u={},h=s;c.readFixed(r,s),s+=4;var f=c.readUshort(r,s);s+=2;var m=c.readUshort(r,s);s+=2;var g=c.readUshort(r,s);return s+=2,u.scriptList=e._lctf.readScriptList(r,h+f),u.featureList=e._lctf.readFeatureList(r,h+m),u.lookupList=e._lctf.readLookupList(r,h+g,l),u},e._lctf.readLookupList=function(r,s,a){var o=e._bin,l=s,c=[],u=o.readUshort(r,s);s+=2;for(var h=0;h<u;h++){var f=o.readUshort(r,s);s+=2;var m=e._lctf.readLookupTable(r,l+f,a);c.push(m)}return c},e._lctf.readLookupTable=function(r,s,a){var o=e._bin,l=s,c={tabs:[]};c.ltype=o.readUshort(r,s),s+=2,c.flag=o.readUshort(r,s),s+=2;var u=o.readUshort(r,s);s+=2;for(var h=c.ltype,f=0;f<u;f++){var m=o.readUshort(r,s);s+=2;var g=a(r,h,l+m,c);c.tabs.push(g)}return c},e._lctf.numOfOnes=function(r){for(var s=0,a=0;a<32;a++)r>>>a&1&&s++;return s},e._lctf.readClassDef=function(r,s){var a=e._bin,o=[],l=a.readUshort(r,s);if(s+=2,l==1){var c=a.readUshort(r,s);s+=2;var u=a.readUshort(r,s);s+=2;for(var h=0;h<u;h++)o.push(c+h),o.push(c+h),o.push(a.readUshort(r,s)),s+=2}if(l==2){var f=a.readUshort(r,s);for(s+=2,h=0;h<f;h++)o.push(a.readUshort(r,s)),s+=2,o.push(a.readUshort(r,s)),s+=2,o.push(a.readUshort(r,s)),s+=2}return o},e._lctf.getInterval=function(r,s){for(var a=0;a<r.length;a+=3){var o=r[a],l=r[a+1];if(r[a+2],o<=s&&s<=l)return a}return-1},e._lctf.readCoverage=function(r,s){var a=e._bin,o={};o.fmt=a.readUshort(r,s),s+=2;var l=a.readUshort(r,s);return s+=2,o.fmt==1&&(o.tab=a.readUshorts(r,s,l)),o.fmt==2&&(o.tab=a.readUshorts(r,s,3*l)),o},e._lctf.coverageIndex=function(r,s){var a=r.tab;if(r.fmt==1)return a.indexOf(s);if(r.fmt==2){var o=e._lctf.getInterval(a,s);if(o!=-1)return a[o+2]+(s-a[o])}return-1},e._lctf.readFeatureList=function(r,s){var a=e._bin,o=s,l=[],c=a.readUshort(r,s);s+=2;for(var u=0;u<c;u++){var h=a.readASCII(r,s,4);s+=4;var f=a.readUshort(r,s);s+=2;var m=e._lctf.readFeatureTable(r,o+f);m.tag=h.trim(),l.push(m)}return l},e._lctf.readFeatureTable=function(r,s){var a=e._bin,o=s,l={},c=a.readUshort(r,s);s+=2,c>0&&(l.featureParams=o+c);var u=a.readUshort(r,s);s+=2,l.tab=[];for(var h=0;h<u;h++)l.tab.push(a.readUshort(r,s+2*h));return l},e._lctf.readScriptList=function(r,s){var a=e._bin,o=s,l={},c=a.readUshort(r,s);s+=2;for(var u=0;u<c;u++){var h=a.readASCII(r,s,4);s+=4;var f=a.readUshort(r,s);s+=2,l[h.trim()]=e._lctf.readScriptTable(r,o+f)}return l},e._lctf.readScriptTable=function(r,s){var a=e._bin,o=s,l={},c=a.readUshort(r,s);s+=2,c>0&&(l.default=e._lctf.readLangSysTable(r,o+c));var u=a.readUshort(r,s);s+=2;for(var h=0;h<u;h++){var f=a.readASCII(r,s,4);s+=4;var m=a.readUshort(r,s);s+=2,l[f.trim()]=e._lctf.readLangSysTable(r,o+m)}return l},e._lctf.readLangSysTable=function(r,s){var a=e._bin,o={};a.readUshort(r,s),s+=2,o.reqFeature=a.readUshort(r,s),s+=2;var l=a.readUshort(r,s);return s+=2,o.features=a.readUshorts(r,s,l),o},e.CFF={},e.CFF.parse=function(r,s,a){var o=e._bin;(r=new Uint8Array(r.buffer,s,a))[s=0],r[++s],r[++s],r[++s],s++;var l=[];s=e.CFF.readIndex(r,s,l);for(var c=[],u=0;u<l.length-1;u++)c.push(o.readASCII(r,s+l[u],l[u+1]-l[u]));s+=l[l.length-1];var h=[];s=e.CFF.readIndex(r,s,h);var f=[];for(u=0;u<h.length-1;u++)f.push(e.CFF.readDict(r,s+h[u],s+h[u+1]));s+=h[h.length-1];var m=f[0],g=[];s=e.CFF.readIndex(r,s,g);var y=[];for(u=0;u<g.length-1;u++)y.push(o.readASCII(r,s+g[u],g[u+1]-g[u]));if(s+=g[g.length-1],e.CFF.readSubrs(r,s,m),m.CharStrings){s=m.CharStrings,g=[],s=e.CFF.readIndex(r,s,g);var x=[];for(u=0;u<g.length-1;u++)x.push(o.readBytes(r,s+g[u],g[u+1]-g[u]));m.CharStrings=x}if(m.ROS){s=m.FDArray;var v=[];for(s=e.CFF.readIndex(r,s,v),m.FDArray=[],u=0;u<v.length-1;u++){var _=e.CFF.readDict(r,s+v[u],s+v[u+1]);e.CFF._readFDict(r,_,y),m.FDArray.push(_)}s+=v[v.length-1],s=m.FDSelect,m.FDSelect=[];var S=r[s];if(s++,S!=3)throw S;var M=o.readUshort(r,s);for(s+=2,u=0;u<M+1;u++)m.FDSelect.push(o.readUshort(r,s),r[s+2]),s+=3}return m.Encoding&&(m.Encoding=e.CFF.readEncoding(r,m.Encoding,m.CharStrings.length)),m.charset&&(m.charset=e.CFF.readCharset(r,m.charset,m.CharStrings.length)),e.CFF._readFDict(r,m,y),m},e.CFF._readFDict=function(r,s,a){var o;for(var l in s.Private&&(o=s.Private[1],s.Private=e.CFF.readDict(r,o,o+s.Private[0]),s.Private.Subrs&&e.CFF.readSubrs(r,o+s.Private.Subrs,s.Private)),s)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(l)!=-1&&(s[l]=a[s[l]-426+35])},e.CFF.readSubrs=function(r,s,a){var o=e._bin,l=[];s=e.CFF.readIndex(r,s,l);var c,u=l.length;c=u<1240?107:u<33900?1131:32768,a.Bias=c,a.Subrs=[];for(var h=0;h<l.length-1;h++)a.Subrs.push(o.readBytes(r,s+l[h],l[h+1]-l[h]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(r,s){for(var a=0;a<r.charset.length;a++)if(r.charset[a]==s)return a;return-1},e.CFF.glyphBySE=function(r,s){return s<0||s>255?-1:e.CFF.glyphByUnicode(r,e.CFF.tableSE[s])},e.CFF.readEncoding=function(r,s,a){e._bin;var o=[".notdef"],l=r[s];if(s++,l!=0)throw"error: unknown encoding format: "+l;var c=r[s];s++;for(var u=0;u<c;u++)o.push(r[s+u]);return o},e.CFF.readCharset=function(r,s,a){var o=e._bin,l=[".notdef"],c=r[s];if(s++,c==0)for(var u=0;u<a;u++){var h=o.readUshort(r,s);s+=2,l.push(h)}else{if(c!=1&&c!=2)throw"error: format: "+c;for(;l.length<a;){h=o.readUshort(r,s),s+=2;var f=0;for(c==1?(f=r[s],s++):(f=o.readUshort(r,s),s+=2),u=0;u<=f;u++)l.push(h),h++}}return l},e.CFF.readIndex=function(r,s,a){var o=e._bin,l=o.readUshort(r,s)+1,c=r[s+=2];if(s++,c==1)for(var u=0;u<l;u++)a.push(r[s+u]);else if(c==2)for(u=0;u<l;u++)a.push(o.readUshort(r,s+2*u));else if(c==3)for(u=0;u<l;u++)a.push(16777215&o.readUint(r,s+3*u-1));else if(l!=1)throw"unsupported offset size: "+c+", count: "+l;return(s+=l*c)-1},e.CFF.getCharString=function(r,s,a){var o=e._bin,l=r[s],c=r[s+1];r[s+2],r[s+3],r[s+4];var u=1,h=null,f=null;l<=20&&(h=l,u=1),l==12&&(h=100*l+c,u=2),21<=l&&l<=27&&(h=l,u=1),l==28&&(f=o.readShort(r,s+1),u=3),29<=l&&l<=31&&(h=l,u=1),32<=l&&l<=246&&(f=l-139,u=1),247<=l&&l<=250&&(f=256*(l-247)+c+108,u=2),251<=l&&l<=254&&(f=256*-(l-251)-c-108,u=2),l==255&&(f=o.readInt(r,s+1)/65535,u=5),a.val=f??"o"+h,a.size=u},e.CFF.readCharString=function(r,s,a){for(var o=s+a,l=e._bin,c=[];s<o;){var u=r[s],h=r[s+1];r[s+2],r[s+3],r[s+4];var f=1,m=null,g=null;u<=20&&(m=u,f=1),u==12&&(m=100*u+h,f=2),u!=19&&u!=20||(m=u,f=2),21<=u&&u<=27&&(m=u,f=1),u==28&&(g=l.readShort(r,s+1),f=3),29<=u&&u<=31&&(m=u,f=1),32<=u&&u<=246&&(g=u-139,f=1),247<=u&&u<=250&&(g=256*(u-247)+h+108,f=2),251<=u&&u<=254&&(g=256*-(u-251)-h-108,f=2),u==255&&(g=l.readInt(r,s+1)/65535,f=5),c.push(g??"o"+m),s+=f}return c},e.CFF.readDict=function(r,s,a){for(var o=e._bin,l={},c=[];s<a;){var u=r[s],h=r[s+1];r[s+2],r[s+3],r[s+4];var f=1,m=null,g=null;if(u==28&&(g=o.readShort(r,s+1),f=3),u==29&&(g=o.readInt(r,s+1),f=5),32<=u&&u<=246&&(g=u-139,f=1),247<=u&&u<=250&&(g=256*(u-247)+h+108,f=2),251<=u&&u<=254&&(g=256*-(u-251)-h-108,f=2),u==255)throw g=o.readInt(r,s+1)/65535,f=5,"unknown number";if(u==30){var y=[];for(f=1;;){var x=r[s+f];f++;var v=x>>4,_=15&x;if(v!=15&&y.push(v),_!=15&&y.push(_),_==15)break}for(var S="",M=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],b=0;b<y.length;b++)S+=M[y[b]];g=parseFloat(S)}u<=21&&(m=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][u],f=1,u==12&&(m=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][h],f=2)),m!=null?(l[m]=c.length==1?c[0]:c,c=[]):c.push(g),s+=f}return l},e.cmap={},e.cmap.parse=function(r,s,a){r=new Uint8Array(r.buffer,s,a),s=0;var o=e._bin,l={};o.readUshort(r,s),s+=2;var c=o.readUshort(r,s);s+=2;var u=[];l.tables=[];for(var h=0;h<c;h++){var f=o.readUshort(r,s);s+=2;var m=o.readUshort(r,s);s+=2;var g=o.readUint(r,s);s+=4;var y="p"+f+"e"+m,x=u.indexOf(g);if(x==-1){var v;x=l.tables.length,u.push(g);var _=o.readUshort(r,g);_==0?v=e.cmap.parse0(r,g):_==4?v=e.cmap.parse4(r,g):_==6?v=e.cmap.parse6(r,g):_==12?v=e.cmap.parse12(r,g):console.debug("unknown format: "+_,f,m,g),l.tables.push(v)}if(l[y]!=null)throw"multiple tables for one platform+encoding";l[y]=x}return l},e.cmap.parse0=function(r,s){var a=e._bin,o={};o.format=a.readUshort(r,s),s+=2;var l=a.readUshort(r,s);s+=2,a.readUshort(r,s),s+=2,o.map=[];for(var c=0;c<l-6;c++)o.map.push(r[s+c]);return o},e.cmap.parse4=function(r,s){var a=e._bin,o=s,l={};l.format=a.readUshort(r,s),s+=2;var c=a.readUshort(r,s);s+=2,a.readUshort(r,s),s+=2;var u=a.readUshort(r,s);s+=2;var h=u/2;l.searchRange=a.readUshort(r,s),s+=2,l.entrySelector=a.readUshort(r,s),s+=2,l.rangeShift=a.readUshort(r,s),s+=2,l.endCount=a.readUshorts(r,s,h),s+=2*h,s+=2,l.startCount=a.readUshorts(r,s,h),s+=2*h,l.idDelta=[];for(var f=0;f<h;f++)l.idDelta.push(a.readShort(r,s)),s+=2;for(l.idRangeOffset=a.readUshorts(r,s,h),s+=2*h,l.glyphIdArray=[];s<o+c;)l.glyphIdArray.push(a.readUshort(r,s)),s+=2;return l},e.cmap.parse6=function(r,s){var a=e._bin,o={};o.format=a.readUshort(r,s),s+=2,a.readUshort(r,s),s+=2,a.readUshort(r,s),s+=2,o.firstCode=a.readUshort(r,s),s+=2;var l=a.readUshort(r,s);s+=2,o.glyphIdArray=[];for(var c=0;c<l;c++)o.glyphIdArray.push(a.readUshort(r,s)),s+=2;return o},e.cmap.parse12=function(r,s){var a=e._bin,o={};o.format=a.readUshort(r,s),s+=2,s+=2,a.readUint(r,s),s+=4,a.readUint(r,s),s+=4;var l=a.readUint(r,s);s+=4,o.groups=[];for(var c=0;c<l;c++){var u=s+12*c,h=a.readUint(r,u+0),f=a.readUint(r,u+4),m=a.readUint(r,u+8);o.groups.push([h,f,m])}return o},e.glyf={},e.glyf.parse=function(r,s,a,o){for(var l=[],c=0;c<o.maxp.numGlyphs;c++)l.push(null);return l},e.glyf._parseGlyf=function(r,s){var a=e._bin,o=r._data,l=e._tabOffset(o,"glyf",r._offset)+r.loca[s];if(r.loca[s]==r.loca[s+1])return null;var c={};if(c.noc=a.readShort(o,l),l+=2,c.xMin=a.readShort(o,l),l+=2,c.yMin=a.readShort(o,l),l+=2,c.xMax=a.readShort(o,l),l+=2,c.yMax=a.readShort(o,l),l+=2,c.xMin>=c.xMax||c.yMin>=c.yMax)return null;if(c.noc>0){c.endPts=[];for(var u=0;u<c.noc;u++)c.endPts.push(a.readUshort(o,l)),l+=2;var h=a.readUshort(o,l);if(l+=2,o.length-l<h)return null;c.instructions=a.readBytes(o,l,h),l+=h;var f=c.endPts[c.noc-1]+1;for(c.flags=[],u=0;u<f;u++){var m=o[l];if(l++,c.flags.push(m),(8&m)!=0){var g=o[l];l++;for(var y=0;y<g;y++)c.flags.push(m),u++}}for(c.xs=[],u=0;u<f;u++){var x=(2&c.flags[u])!=0,v=(16&c.flags[u])!=0;x?(c.xs.push(v?o[l]:-o[l]),l++):v?c.xs.push(0):(c.xs.push(a.readShort(o,l)),l+=2)}for(c.ys=[],u=0;u<f;u++)x=(4&c.flags[u])!=0,v=(32&c.flags[u])!=0,x?(c.ys.push(v?o[l]:-o[l]),l++):v?c.ys.push(0):(c.ys.push(a.readShort(o,l)),l+=2);var _=0,S=0;for(u=0;u<f;u++)_+=c.xs[u],S+=c.ys[u],c.xs[u]=_,c.ys[u]=S}else{var M;c.parts=[];do{M=a.readUshort(o,l),l+=2;var b={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(c.parts.push(b),b.glyphIndex=a.readUshort(o,l),l+=2,1&M){var C=a.readShort(o,l);l+=2;var B=a.readShort(o,l);l+=2}else C=a.readInt8(o,l),l++,B=a.readInt8(o,l),l++;2&M?(b.m.tx=C,b.m.ty=B):(b.p1=C,b.p2=B),8&M?(b.m.a=b.m.d=a.readF2dot14(o,l),l+=2):64&M?(b.m.a=a.readF2dot14(o,l),l+=2,b.m.d=a.readF2dot14(o,l),l+=2):128&M&&(b.m.a=a.readF2dot14(o,l),l+=2,b.m.b=a.readF2dot14(o,l),l+=2,b.m.c=a.readF2dot14(o,l),l+=2,b.m.d=a.readF2dot14(o,l),l+=2)}while(32&M);if(256&M){var P=a.readUshort(o,l);for(l+=2,c.instr=[],u=0;u<P;u++)c.instr.push(o[l]),l++}}return c},e.GDEF={},e.GDEF.parse=function(r,s,a,o){var l=s;s+=4;var c=e._bin.readUshort(r,s);return{glyphClassDef:c===0?null:e._lctf.readClassDef(r,l+c)}},e.GPOS={},e.GPOS.parse=function(r,s,a,o){return e._lctf.parse(r,s,a,o,e.GPOS.subt)},e.GPOS.subt=function(r,s,a,o){var l=e._bin,c=a,u={};if(u.fmt=l.readUshort(r,a),a+=2,s==1||s==2||s==3||s==7||s==8&&u.fmt<=2){var h=l.readUshort(r,a);a+=2,u.coverage=e._lctf.readCoverage(r,h+c)}if(s==1&&u.fmt==1){var f=l.readUshort(r,a);a+=2,f!=0&&(u.pos=e.GPOS.readValueRecord(r,a,f))}else if(s==2&&u.fmt>=1&&u.fmt<=2){f=l.readUshort(r,a),a+=2;var m=l.readUshort(r,a);a+=2;var g=e._lctf.numOfOnes(f),y=e._lctf.numOfOnes(m);if(u.fmt==1){u.pairsets=[];var x=l.readUshort(r,a);a+=2;for(var v=0;v<x;v++){var _=c+l.readUshort(r,a);a+=2;var S=l.readUshort(r,_);_+=2;for(var M=[],b=0;b<S;b++){var C=l.readUshort(r,_);_+=2,f!=0&&(G=e.GPOS.readValueRecord(r,_,f),_+=2*g),m!=0&&(Q=e.GPOS.readValueRecord(r,_,m),_+=2*y),M.push({gid2:C,val1:G,val2:Q})}u.pairsets.push(M)}}if(u.fmt==2){var B=l.readUshort(r,a);a+=2;var P=l.readUshort(r,a);a+=2;var T=l.readUshort(r,a);a+=2;var I=l.readUshort(r,a);for(a+=2,u.classDef1=e._lctf.readClassDef(r,c+B),u.classDef2=e._lctf.readClassDef(r,c+P),u.matrix=[],v=0;v<T;v++){var z=[];for(b=0;b<I;b++){var G=null,Q=null;f!=0&&(G=e.GPOS.readValueRecord(r,a,f),a+=2*g),m!=0&&(Q=e.GPOS.readValueRecord(r,a,m),a+=2*y),z.push({val1:G,val2:Q})}u.matrix.push(z)}}}else if(s==4&&u.fmt==1)u.markCoverage=e._lctf.readCoverage(r,l.readUshort(r,a)+c),u.baseCoverage=e._lctf.readCoverage(r,l.readUshort(r,a+2)+c),u.markClassCount=l.readUshort(r,a+4),u.markArray=e.GPOS.readMarkArray(r,l.readUshort(r,a+6)+c),u.baseArray=e.GPOS.readBaseArray(r,l.readUshort(r,a+8)+c,u.markClassCount);else if(s==6&&u.fmt==1)u.mark1Coverage=e._lctf.readCoverage(r,l.readUshort(r,a)+c),u.mark2Coverage=e._lctf.readCoverage(r,l.readUshort(r,a+2)+c),u.markClassCount=l.readUshort(r,a+4),u.mark1Array=e.GPOS.readMarkArray(r,l.readUshort(r,a+6)+c),u.mark2Array=e.GPOS.readBaseArray(r,l.readUshort(r,a+8)+c,u.markClassCount);else{if(s==9&&u.fmt==1){var U=l.readUshort(r,a);a+=2;var ee=l.readUint(r,a);if(a+=4,o.ltype==9)o.ltype=U;else if(o.ltype!=U)throw"invalid extension substitution";return e.GPOS.subt(r,o.ltype,c+ee)}console.debug("unsupported GPOS table LookupType",s,"format",u.fmt)}return u},e.GPOS.readValueRecord=function(r,s,a){var o=e._bin,l=[];return l.push(1&a?o.readShort(r,s):0),s+=1&a?2:0,l.push(2&a?o.readShort(r,s):0),s+=2&a?2:0,l.push(4&a?o.readShort(r,s):0),s+=4&a?2:0,l.push(8&a?o.readShort(r,s):0),s+=8&a?2:0,l},e.GPOS.readBaseArray=function(r,s,a){var o=e._bin,l=[],c=s,u=o.readUshort(r,s);s+=2;for(var h=0;h<u;h++){for(var f=[],m=0;m<a;m++)f.push(e.GPOS.readAnchorRecord(r,c+o.readUshort(r,s))),s+=2;l.push(f)}return l},e.GPOS.readMarkArray=function(r,s){var a=e._bin,o=[],l=s,c=a.readUshort(r,s);s+=2;for(var u=0;u<c;u++){var h=e.GPOS.readAnchorRecord(r,a.readUshort(r,s+2)+l);h.markClass=a.readUshort(r,s),o.push(h),s+=4}return o},e.GPOS.readAnchorRecord=function(r,s){var a=e._bin,o={};return o.fmt=a.readUshort(r,s),o.x=a.readShort(r,s+2),o.y=a.readShort(r,s+4),o},e.GSUB={},e.GSUB.parse=function(r,s,a,o){return e._lctf.parse(r,s,a,o,e.GSUB.subt)},e.GSUB.subt=function(r,s,a,o){var l=e._bin,c=a,u={};if(u.fmt=l.readUshort(r,a),a+=2,s!=1&&s!=2&&s!=4&&s!=5&&s!=6)return null;if(s==1||s==2||s==4||s==5&&u.fmt<=2||s==6&&u.fmt<=2){var h=l.readUshort(r,a);a+=2,u.coverage=e._lctf.readCoverage(r,c+h)}if(s==1&&u.fmt>=1&&u.fmt<=2){if(u.fmt==1)u.delta=l.readShort(r,a),a+=2;else if(u.fmt==2){var f=l.readUshort(r,a);a+=2,u.newg=l.readUshorts(r,a,f),a+=2*u.newg.length}}else if(s==2&&u.fmt==1){f=l.readUshort(r,a),a+=2,u.seqs=[];for(var m=0;m<f;m++){var g=l.readUshort(r,a)+c;a+=2;var y=l.readUshort(r,g);u.seqs.push(l.readUshorts(r,g+2,y))}}else if(s==4)for(u.vals=[],f=l.readUshort(r,a),a+=2,m=0;m<f;m++){var x=l.readUshort(r,a);a+=2,u.vals.push(e.GSUB.readLigatureSet(r,c+x))}else if(s==5&&u.fmt==2){if(u.fmt==2){var v=l.readUshort(r,a);a+=2,u.cDef=e._lctf.readClassDef(r,c+v),u.scset=[];var _=l.readUshort(r,a);for(a+=2,m=0;m<_;m++){var S=l.readUshort(r,a);a+=2,u.scset.push(S==0?null:e.GSUB.readSubClassSet(r,c+S))}}}else if(s==6&&u.fmt==3){if(u.fmt==3){for(m=0;m<3;m++){f=l.readUshort(r,a),a+=2;for(var M=[],b=0;b<f;b++)M.push(e._lctf.readCoverage(r,c+l.readUshort(r,a+2*b)));a+=2*f,m==0&&(u.backCvg=M),m==1&&(u.inptCvg=M),m==2&&(u.ahedCvg=M)}f=l.readUshort(r,a),a+=2,u.lookupRec=e.GSUB.readSubstLookupRecords(r,a,f)}}else{if(s==7&&u.fmt==1){var C=l.readUshort(r,a);a+=2;var B=l.readUint(r,a);if(a+=4,o.ltype==9)o.ltype=C;else if(o.ltype!=C)throw"invalid extension substitution";return e.GSUB.subt(r,o.ltype,c+B)}console.debug("unsupported GSUB table LookupType",s,"format",u.fmt)}return u},e.GSUB.readSubClassSet=function(r,s){var a=e._bin.readUshort,o=s,l=[],c=a(r,s);s+=2;for(var u=0;u<c;u++){var h=a(r,s);s+=2,l.push(e.GSUB.readSubClassRule(r,o+h))}return l},e.GSUB.readSubClassRule=function(r,s){var a=e._bin.readUshort,o={},l=a(r,s),c=a(r,s+=2);s+=2,o.input=[];for(var u=0;u<l-1;u++)o.input.push(a(r,s)),s+=2;return o.substLookupRecords=e.GSUB.readSubstLookupRecords(r,s,c),o},e.GSUB.readSubstLookupRecords=function(r,s,a){for(var o=e._bin.readUshort,l=[],c=0;c<a;c++)l.push(o(r,s),o(r,s+2)),s+=4;return l},e.GSUB.readChainSubClassSet=function(r,s){var a=e._bin,o=s,l=[],c=a.readUshort(r,s);s+=2;for(var u=0;u<c;u++){var h=a.readUshort(r,s);s+=2,l.push(e.GSUB.readChainSubClassRule(r,o+h))}return l},e.GSUB.readChainSubClassRule=function(r,s){for(var a=e._bin,o={},l=["backtrack","input","lookahead"],c=0;c<l.length;c++){var u=a.readUshort(r,s);s+=2,c==1&&u--,o[l[c]]=a.readUshorts(r,s,u),s+=2*o[l[c]].length}return u=a.readUshort(r,s),s+=2,o.subst=a.readUshorts(r,s,2*u),s+=2*o.subst.length,o},e.GSUB.readLigatureSet=function(r,s){var a=e._bin,o=s,l=[],c=a.readUshort(r,s);s+=2;for(var u=0;u<c;u++){var h=a.readUshort(r,s);s+=2,l.push(e.GSUB.readLigature(r,o+h))}return l},e.GSUB.readLigature=function(r,s){var a=e._bin,o={chain:[]};o.nglyph=a.readUshort(r,s),s+=2;var l=a.readUshort(r,s);s+=2;for(var c=0;c<l-1;c++)o.chain.push(a.readUshort(r,s)),s+=2;return o},e.head={},e.head.parse=function(r,s,a){var o=e._bin,l={};return o.readFixed(r,s),s+=4,l.fontRevision=o.readFixed(r,s),s+=4,o.readUint(r,s),s+=4,o.readUint(r,s),s+=4,l.flags=o.readUshort(r,s),s+=2,l.unitsPerEm=o.readUshort(r,s),s+=2,l.created=o.readUint64(r,s),s+=8,l.modified=o.readUint64(r,s),s+=8,l.xMin=o.readShort(r,s),s+=2,l.yMin=o.readShort(r,s),s+=2,l.xMax=o.readShort(r,s),s+=2,l.yMax=o.readShort(r,s),s+=2,l.macStyle=o.readUshort(r,s),s+=2,l.lowestRecPPEM=o.readUshort(r,s),s+=2,l.fontDirectionHint=o.readShort(r,s),s+=2,l.indexToLocFormat=o.readShort(r,s),s+=2,l.glyphDataFormat=o.readShort(r,s),s+=2,l},e.hhea={},e.hhea.parse=function(r,s,a){var o=e._bin,l={};return o.readFixed(r,s),s+=4,l.ascender=o.readShort(r,s),s+=2,l.descender=o.readShort(r,s),s+=2,l.lineGap=o.readShort(r,s),s+=2,l.advanceWidthMax=o.readUshort(r,s),s+=2,l.minLeftSideBearing=o.readShort(r,s),s+=2,l.minRightSideBearing=o.readShort(r,s),s+=2,l.xMaxExtent=o.readShort(r,s),s+=2,l.caretSlopeRise=o.readShort(r,s),s+=2,l.caretSlopeRun=o.readShort(r,s),s+=2,l.caretOffset=o.readShort(r,s),s+=2,s+=8,l.metricDataFormat=o.readShort(r,s),s+=2,l.numberOfHMetrics=o.readUshort(r,s),s+=2,l},e.hmtx={},e.hmtx.parse=function(r,s,a,o){for(var l=e._bin,c={aWidth:[],lsBearing:[]},u=0,h=0,f=0;f<o.maxp.numGlyphs;f++)f<o.hhea.numberOfHMetrics&&(u=l.readUshort(r,s),s+=2,h=l.readShort(r,s),s+=2),c.aWidth.push(u),c.lsBearing.push(h);return c},e.kern={},e.kern.parse=function(r,s,a,o){var l=e._bin,c=l.readUshort(r,s);if(s+=2,c==1)return e.kern.parseV1(r,s-2,a,o);var u=l.readUshort(r,s);s+=2;for(var h={glyph1:[],rval:[]},f=0;f<u;f++){s+=2,a=l.readUshort(r,s),s+=2;var m=l.readUshort(r,s);s+=2;var g=m>>>8;if((g&=15)!=0)throw"unknown kern table format: "+g;s=e.kern.readFormat0(r,s,h)}return h},e.kern.parseV1=function(r,s,a,o){var l=e._bin;l.readFixed(r,s),s+=4;var c=l.readUint(r,s);s+=4;for(var u={glyph1:[],rval:[]},h=0;h<c;h++){l.readUint(r,s),s+=4;var f=l.readUshort(r,s);s+=2,l.readUshort(r,s),s+=2;var m=f>>>8;if((m&=15)!=0)throw"unknown kern table format: "+m;s=e.kern.readFormat0(r,s,u)}return u},e.kern.readFormat0=function(r,s,a){var o=e._bin,l=-1,c=o.readUshort(r,s);s+=2,o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2;for(var u=0;u<c;u++){var h=o.readUshort(r,s);s+=2;var f=o.readUshort(r,s);s+=2;var m=o.readShort(r,s);s+=2,h!=l&&(a.glyph1.push(h),a.rval.push({glyph2:[],vals:[]}));var g=a.rval[a.rval.length-1];g.glyph2.push(f),g.vals.push(m),l=h}return s},e.loca={},e.loca.parse=function(r,s,a,o){var l=e._bin,c=[],u=o.head.indexToLocFormat,h=o.maxp.numGlyphs+1;if(u==0)for(var f=0;f<h;f++)c.push(l.readUshort(r,s+(f<<1))<<1);if(u==1)for(f=0;f<h;f++)c.push(l.readUint(r,s+(f<<2)));return c},e.maxp={},e.maxp.parse=function(r,s,a){var o=e._bin,l={},c=o.readUint(r,s);return s+=4,l.numGlyphs=o.readUshort(r,s),s+=2,c==65536&&(l.maxPoints=o.readUshort(r,s),s+=2,l.maxContours=o.readUshort(r,s),s+=2,l.maxCompositePoints=o.readUshort(r,s),s+=2,l.maxCompositeContours=o.readUshort(r,s),s+=2,l.maxZones=o.readUshort(r,s),s+=2,l.maxTwilightPoints=o.readUshort(r,s),s+=2,l.maxStorage=o.readUshort(r,s),s+=2,l.maxFunctionDefs=o.readUshort(r,s),s+=2,l.maxInstructionDefs=o.readUshort(r,s),s+=2,l.maxStackElements=o.readUshort(r,s),s+=2,l.maxSizeOfInstructions=o.readUshort(r,s),s+=2,l.maxComponentElements=o.readUshort(r,s),s+=2,l.maxComponentDepth=o.readUshort(r,s),s+=2),l},e.name={},e.name.parse=function(r,s,a){var o=e._bin,l={};o.readUshort(r,s),s+=2;var c=o.readUshort(r,s);s+=2,o.readUshort(r,s);for(var u,h=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],f=s+=2,m=0;m<c;m++){var g=o.readUshort(r,s);s+=2;var y=o.readUshort(r,s);s+=2;var x=o.readUshort(r,s);s+=2;var v=o.readUshort(r,s);s+=2;var _=o.readUshort(r,s);s+=2;var S=o.readUshort(r,s);s+=2;var M,b=h[v],C=f+12*c+S;if(g==0)M=o.readUnicode(r,C,_/2);else if(g==3&&y==0)M=o.readUnicode(r,C,_/2);else if(y==0)M=o.readASCII(r,C,_);else if(y==1)M=o.readUnicode(r,C,_/2);else if(y==3)M=o.readUnicode(r,C,_/2);else{if(g!=1)throw"unknown encoding "+y+", platformID: "+g;M=o.readASCII(r,C,_),console.debug("reading unknown MAC encoding "+y+" as ASCII")}var B="p"+g+","+x.toString(16);l[B]==null&&(l[B]={}),l[B][b!==void 0?b:v]=M,l[B]._lang=x}for(var P in l)if(l[P].postScriptName!=null&&l[P]._lang==1033)return l[P];for(var P in l)if(l[P].postScriptName!=null&&l[P]._lang==0)return l[P];for(var P in l)if(l[P].postScriptName!=null&&l[P]._lang==3084)return l[P];for(var P in l)if(l[P].postScriptName!=null)return l[P];for(var P in l){u=P;break}return console.debug("returning name table with languageID "+l[u]._lang),l[u]},e["OS/2"]={},e["OS/2"].parse=function(r,s,a){var o=e._bin.readUshort(r,s);s+=2;var l={};if(o==0)e["OS/2"].version0(r,s,l);else if(o==1)e["OS/2"].version1(r,s,l);else if(o==2||o==3||o==4)e["OS/2"].version2(r,s,l);else{if(o!=5)throw"unknown OS/2 table version: "+o;e["OS/2"].version5(r,s,l)}return l},e["OS/2"].version0=function(r,s,a){var o=e._bin;return a.xAvgCharWidth=o.readShort(r,s),s+=2,a.usWeightClass=o.readUshort(r,s),s+=2,a.usWidthClass=o.readUshort(r,s),s+=2,a.fsType=o.readUshort(r,s),s+=2,a.ySubscriptXSize=o.readShort(r,s),s+=2,a.ySubscriptYSize=o.readShort(r,s),s+=2,a.ySubscriptXOffset=o.readShort(r,s),s+=2,a.ySubscriptYOffset=o.readShort(r,s),s+=2,a.ySuperscriptXSize=o.readShort(r,s),s+=2,a.ySuperscriptYSize=o.readShort(r,s),s+=2,a.ySuperscriptXOffset=o.readShort(r,s),s+=2,a.ySuperscriptYOffset=o.readShort(r,s),s+=2,a.yStrikeoutSize=o.readShort(r,s),s+=2,a.yStrikeoutPosition=o.readShort(r,s),s+=2,a.sFamilyClass=o.readShort(r,s),s+=2,a.panose=o.readBytes(r,s,10),s+=10,a.ulUnicodeRange1=o.readUint(r,s),s+=4,a.ulUnicodeRange2=o.readUint(r,s),s+=4,a.ulUnicodeRange3=o.readUint(r,s),s+=4,a.ulUnicodeRange4=o.readUint(r,s),s+=4,a.achVendID=[o.readInt8(r,s),o.readInt8(r,s+1),o.readInt8(r,s+2),o.readInt8(r,s+3)],s+=4,a.fsSelection=o.readUshort(r,s),s+=2,a.usFirstCharIndex=o.readUshort(r,s),s+=2,a.usLastCharIndex=o.readUshort(r,s),s+=2,a.sTypoAscender=o.readShort(r,s),s+=2,a.sTypoDescender=o.readShort(r,s),s+=2,a.sTypoLineGap=o.readShort(r,s),s+=2,a.usWinAscent=o.readUshort(r,s),s+=2,a.usWinDescent=o.readUshort(r,s),s+=2},e["OS/2"].version1=function(r,s,a){var o=e._bin;return s=e["OS/2"].version0(r,s,a),a.ulCodePageRange1=o.readUint(r,s),s+=4,a.ulCodePageRange2=o.readUint(r,s),s+=4},e["OS/2"].version2=function(r,s,a){var o=e._bin;return s=e["OS/2"].version1(r,s,a),a.sxHeight=o.readShort(r,s),s+=2,a.sCapHeight=o.readShort(r,s),s+=2,a.usDefault=o.readUshort(r,s),s+=2,a.usBreak=o.readUshort(r,s),s+=2,a.usMaxContext=o.readUshort(r,s),s+=2},e["OS/2"].version5=function(r,s,a){var o=e._bin;return s=e["OS/2"].version2(r,s,a),a.usLowerOpticalPointSize=o.readUshort(r,s),s+=2,a.usUpperOpticalPointSize=o.readUshort(r,s),s+=2},e.post={},e.post.parse=function(r,s,a){var o=e._bin,l={};return l.version=o.readFixed(r,s),s+=4,l.italicAngle=o.readFixed(r,s),s+=4,l.underlinePosition=o.readShort(r,s),s+=2,l.underlineThickness=o.readShort(r,s),s+=2,l},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(r,s){var a=r.cmap,o=-1;if(a.p0e4!=null?o=a.p0e4:a.p3e1!=null?o=a.p3e1:a.p1e0!=null?o=a.p1e0:a.p0e3!=null&&(o=a.p0e3),o==-1)throw"no familiar platform and encoding!";var l=a.tables[o];if(l.format==0)return s>=l.map.length?0:l.map[s];if(l.format==4){for(var c=-1,u=0;u<l.endCount.length;u++)if(s<=l.endCount[u]){c=u;break}return c==-1||l.startCount[c]>s?0:65535&(l.idRangeOffset[c]!=0?l.glyphIdArray[s-l.startCount[c]+(l.idRangeOffset[c]>>1)-(l.idRangeOffset.length-c)]:s+l.idDelta[c])}if(l.format==12){if(s>l.groups[l.groups.length-1][1])return 0;for(u=0;u<l.groups.length;u++){var h=l.groups[u];if(h[0]<=s&&s<=h[1])return h[2]+(s-h[0])}return 0}throw"unknown cmap table format "+l.format},e.U.glyphToPath=function(r,s){var a={cmds:[],crds:[]};if(r.SVG&&r.SVG.entries[s]){var o=r.SVG.entries[s];return o==null?a:(typeof o=="string"&&(o=e.SVG.toPath(o),r.SVG.entries[s]=o),o)}if(r.CFF){var l={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:r.CFF.Private?r.CFF.Private.defaultWidthX:0,open:!1},c=r.CFF,u=r.CFF.Private;if(c.ROS){for(var h=0;c.FDSelect[h+2]<=s;)h+=2;u=c.FDArray[c.FDSelect[h+1]].Private}e.U._drawCFF(r.CFF.CharStrings[s],l,c,u,a)}else r.glyf&&e.U._drawGlyf(s,r,a);return a},e.U._drawGlyf=function(r,s,a){var o=s.glyf[r];o==null&&(o=s.glyf[r]=e.glyf._parseGlyf(s,r)),o!=null&&(o.noc>-1?e.U._simpleGlyph(o,a):e.U._compoGlyph(o,s,a))},e.U._simpleGlyph=function(r,s){for(var a=0;a<r.noc;a++){for(var o=a==0?0:r.endPts[a-1]+1,l=r.endPts[a],c=o;c<=l;c++){var u=c==o?l:c-1,h=c==l?o:c+1,f=1&r.flags[c],m=1&r.flags[u],g=1&r.flags[h],y=r.xs[c],x=r.ys[c];if(c==o)if(f){if(!m){e.U.P.moveTo(s,y,x);continue}e.U.P.moveTo(s,r.xs[u],r.ys[u])}else m?e.U.P.moveTo(s,r.xs[u],r.ys[u]):e.U.P.moveTo(s,(r.xs[u]+y)/2,(r.ys[u]+x)/2);f?m&&e.U.P.lineTo(s,y,x):g?e.U.P.qcurveTo(s,y,x,r.xs[h],r.ys[h]):e.U.P.qcurveTo(s,y,x,(y+r.xs[h])/2,(x+r.ys[h])/2)}e.U.P.closePath(s)}},e.U._compoGlyph=function(r,s,a){for(var o=0;o<r.parts.length;o++){var l={cmds:[],crds:[]},c=r.parts[o];e.U._drawGlyf(c.glyphIndex,s,l);for(var u=c.m,h=0;h<l.crds.length;h+=2){var f=l.crds[h],m=l.crds[h+1];a.crds.push(f*u.a+m*u.b+u.tx),a.crds.push(f*u.c+m*u.d+u.ty)}for(h=0;h<l.cmds.length;h++)a.cmds.push(l.cmds[h])}},e.U._getGlyphClass=function(r,s){var a=e._lctf.getInterval(s,r);return a==-1?0:s[a+2]},e.U._applySubs=function(r,s,a,o){for(var l=r.length-s-1,c=0;c<a.tabs.length;c++)if(a.tabs[c]!=null){var u,h=a.tabs[c];if(!h.coverage||(u=e._lctf.coverageIndex(h.coverage,r[s]))!=-1){if(a.ltype==1)r[s],h.fmt==1?r[s]=r[s]+h.delta:r[s]=h.newg[u];else if(a.ltype==4)for(var f=h.vals[u],m=0;m<f.length;m++){var g=f[m],y=g.chain.length;if(!(y>l)){for(var x=!0,v=0,_=0;_<y;_++){for(;r[s+v+(1+_)]==-1;)v++;g.chain[_]!=r[s+v+(1+_)]&&(x=!1)}if(x){for(r[s]=g.nglyph,_=0;_<y+v;_++)r[s+_+1]=-1;break}}}else if(a.ltype==5&&h.fmt==2)for(var S=e._lctf.getInterval(h.cDef,r[s]),M=h.cDef[S+2],b=h.scset[M],C=0;C<b.length;C++){var B=b[C],P=B.input;if(!(P.length>l)){for(x=!0,_=0;_<P.length;_++){var T=e._lctf.getInterval(h.cDef,r[s+1+_]);if(S==-1&&h.cDef[T+2]!=P[_]){x=!1;break}}if(x){var I=B.substLookupRecords;for(m=0;m<I.length;m+=2)I[m],I[m+1]}}}else if(a.ltype==6&&h.fmt==3){if(!e.U._glsCovered(r,h.backCvg,s-h.backCvg.length)||!e.U._glsCovered(r,h.inptCvg,s)||!e.U._glsCovered(r,h.ahedCvg,s+h.inptCvg.length))continue;var z=h.lookupRec;for(C=0;C<z.length;C+=2){S=z[C];var G=o[z[C+1]];e.U._applySubs(r,s+S,G,o)}}}}},e.U._glsCovered=function(r,s,a){for(var o=0;o<s.length;o++)if(e._lctf.coverageIndex(s[o],r[a+o])==-1)return!1;return!0},e.U.glyphsToPath=function(r,s,a){for(var o={cmds:[],crds:[]},l=0,c=0;c<s.length;c++){var u=s[c];if(u!=-1){for(var h=c<s.length-1&&s[c+1]!=-1?s[c+1]:0,f=e.U.glyphToPath(r,u),m=0;m<f.crds.length;m+=2)o.crds.push(f.crds[m]+l),o.crds.push(f.crds[m+1]);for(a&&o.cmds.push(a),m=0;m<f.cmds.length;m++)o.cmds.push(f.cmds[m]);a&&o.cmds.push("X"),l+=r.hmtx.aWidth[u],c<s.length-1&&(l+=e.U.getPairAdjustment(r,u,h))}}return o},e.U.P={},e.U.P.moveTo=function(r,s,a){r.cmds.push("M"),r.crds.push(s,a)},e.U.P.lineTo=function(r,s,a){r.cmds.push("L"),r.crds.push(s,a)},e.U.P.curveTo=function(r,s,a,o,l,c,u){r.cmds.push("C"),r.crds.push(s,a,o,l,c,u)},e.U.P.qcurveTo=function(r,s,a,o,l){r.cmds.push("Q"),r.crds.push(s,a,o,l)},e.U.P.closePath=function(r){r.cmds.push("Z")},e.U._drawCFF=function(r,s,a,o,l){for(var c=s.stack,u=s.nStems,h=s.haveWidth,f=s.width,m=s.open,g=0,y=s.x,x=s.y,v=0,_=0,S=0,M=0,b=0,C=0,B=0,P=0,T=0,I=0,z={val:0,size:0};g<r.length;){e.CFF.getCharString(r,g,z);var G=z.val;if(g+=z.size,G=="o1"||G=="o18")c.length%2!=0&&!h&&(f=c.shift()+o.nominalWidthX),u+=c.length>>1,c.length=0,h=!0;else if(G=="o3"||G=="o23")c.length%2!=0&&!h&&(f=c.shift()+o.nominalWidthX),u+=c.length>>1,c.length=0,h=!0;else if(G=="o4")c.length>1&&!h&&(f=c.shift()+o.nominalWidthX,h=!0),m&&e.U.P.closePath(l),x+=c.pop(),e.U.P.moveTo(l,y,x),m=!0;else if(G=="o5")for(;c.length>0;)y+=c.shift(),x+=c.shift(),e.U.P.lineTo(l,y,x);else if(G=="o6"||G=="o7")for(var Q=c.length,U=G=="o6",ee=0;ee<Q;ee++){var $=c.shift();U?y+=$:x+=$,U=!U,e.U.P.lineTo(l,y,x)}else if(G=="o8"||G=="o24"){Q=c.length;for(var oe=0;oe+6<=Q;)v=y+c.shift(),_=x+c.shift(),S=v+c.shift(),M=_+c.shift(),y=S+c.shift(),x=M+c.shift(),e.U.P.curveTo(l,v,_,S,M,y,x),oe+=6;G=="o24"&&(y+=c.shift(),x+=c.shift(),e.U.P.lineTo(l,y,x))}else{if(G=="o11")break;if(G=="o1234"||G=="o1235"||G=="o1236"||G=="o1237")G=="o1234"&&(_=x,S=(v=y+c.shift())+c.shift(),I=M=_+c.shift(),C=M,P=x,y=(B=(b=(T=S+c.shift())+c.shift())+c.shift())+c.shift(),e.U.P.curveTo(l,v,_,S,M,T,I),e.U.P.curveTo(l,b,C,B,P,y,x)),G=="o1235"&&(v=y+c.shift(),_=x+c.shift(),S=v+c.shift(),M=_+c.shift(),T=S+c.shift(),I=M+c.shift(),b=T+c.shift(),C=I+c.shift(),B=b+c.shift(),P=C+c.shift(),y=B+c.shift(),x=P+c.shift(),c.shift(),e.U.P.curveTo(l,v,_,S,M,T,I),e.U.P.curveTo(l,b,C,B,P,y,x)),G=="o1236"&&(v=y+c.shift(),_=x+c.shift(),S=v+c.shift(),I=M=_+c.shift(),C=M,B=(b=(T=S+c.shift())+c.shift())+c.shift(),P=C+c.shift(),y=B+c.shift(),e.U.P.curveTo(l,v,_,S,M,T,I),e.U.P.curveTo(l,b,C,B,P,y,x)),G=="o1237"&&(v=y+c.shift(),_=x+c.shift(),S=v+c.shift(),M=_+c.shift(),T=S+c.shift(),I=M+c.shift(),b=T+c.shift(),C=I+c.shift(),B=b+c.shift(),P=C+c.shift(),Math.abs(B-y)>Math.abs(P-x)?y=B+c.shift():x=P+c.shift(),e.U.P.curveTo(l,v,_,S,M,T,I),e.U.P.curveTo(l,b,C,B,P,y,x));else if(G=="o14"){if(c.length>0&&!h&&(f=c.shift()+a.nominalWidthX,h=!0),c.length==4){var Z=c.shift(),J=c.shift(),H=c.shift(),O=c.shift(),j=e.CFF.glyphBySE(a,H),W=e.CFF.glyphBySE(a,O);e.U._drawCFF(a.CharStrings[j],s,a,o,l),s.x=Z,s.y=J,e.U._drawCFF(a.CharStrings[W],s,a,o,l)}m&&(e.U.P.closePath(l),m=!1)}else if(G=="o19"||G=="o20")c.length%2!=0&&!h&&(f=c.shift()+o.nominalWidthX),u+=c.length>>1,c.length=0,h=!0,g+=u+7>>3;else if(G=="o21")c.length>2&&!h&&(f=c.shift()+o.nominalWidthX,h=!0),x+=c.pop(),y+=c.pop(),m&&e.U.P.closePath(l),e.U.P.moveTo(l,y,x),m=!0;else if(G=="o22")c.length>1&&!h&&(f=c.shift()+o.nominalWidthX,h=!0),y+=c.pop(),m&&e.U.P.closePath(l),e.U.P.moveTo(l,y,x),m=!0;else if(G=="o25"){for(;c.length>6;)y+=c.shift(),x+=c.shift(),e.U.P.lineTo(l,y,x);v=y+c.shift(),_=x+c.shift(),S=v+c.shift(),M=_+c.shift(),y=S+c.shift(),x=M+c.shift(),e.U.P.curveTo(l,v,_,S,M,y,x)}else if(G=="o26")for(c.length%2&&(y+=c.shift());c.length>0;)v=y,_=x+c.shift(),y=S=v+c.shift(),x=(M=_+c.shift())+c.shift(),e.U.P.curveTo(l,v,_,S,M,y,x);else if(G=="o27")for(c.length%2&&(x+=c.shift());c.length>0;)_=x,S=(v=y+c.shift())+c.shift(),M=_+c.shift(),y=S+c.shift(),x=M,e.U.P.curveTo(l,v,_,S,M,y,x);else if(G=="o10"||G=="o29"){var ne=G=="o10"?o:a;if(c.length==0)console.debug("error: empty stack");else{var ae=c.pop(),de=ne.Subrs[ae+ne.Bias];s.x=y,s.y=x,s.nStems=u,s.haveWidth=h,s.width=f,s.open=m,e.U._drawCFF(de,s,a,o,l),y=s.x,x=s.y,u=s.nStems,h=s.haveWidth,f=s.width,m=s.open}}else if(G=="o30"||G=="o31"){var fe=c.length,Se=(oe=0,G=="o31");for(oe+=fe-(Q=-3&fe);oe<Q;)Se?(_=x,S=(v=y+c.shift())+c.shift(),x=(M=_+c.shift())+c.shift(),Q-oe==5?(y=S+c.shift(),oe++):y=S,Se=!1):(v=y,_=x+c.shift(),S=v+c.shift(),M=_+c.shift(),y=S+c.shift(),Q-oe==5?(x=M+c.shift(),oe++):x=M,Se=!0),e.U.P.curveTo(l,v,_,S,M,y,x),oe+=4}else{if((G+"").charAt(0)=="o")throw console.debug("Unknown operation: "+G,r),G;c.push(G)}}}s.x=y,s.y=x,s.nStems=u,s.haveWidth=h,s.width=f,s.open=m};var n=e,i={Typr:n};return t.Typr=n,t.default=i,Object.defineProperty(t,"__esModule",{value:!0}),t}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function Nq(){return function(t){var e=Uint8Array,n=Uint16Array,i=Uint32Array,r=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),o=function(G,Q){for(var U=new n(31),ee=0;ee<31;++ee)U[ee]=Q+=1<<G[ee-1];var $=new i(U[30]);for(ee=1;ee<30;++ee)for(var oe=U[ee];oe<U[ee+1];++oe)$[oe]=oe-U[ee]<<5|ee;return[U,$]},l=o(r,2),c=l[0],u=l[1];c[28]=258,u[258]=28;for(var h=o(s,0)[0],f=new n(32768),m=0;m<32768;++m){var g=(43690&m)>>>1|(21845&m)<<1;g=(61680&(g=(52428&g)>>>2|(13107&g)<<2))>>>4|(3855&g)<<4,f[m]=((65280&g)>>>8|(255&g)<<8)>>>1}var y=function(G,Q,U){for(var ee=G.length,$=0,oe=new n(Q);$<ee;++$)++oe[G[$]-1];var Z,J=new n(Q);for($=0;$<Q;++$)J[$]=J[$-1]+oe[$-1]<<1;{Z=new n(1<<Q);var H=15-Q;for($=0;$<ee;++$)if(G[$])for(var O=$<<4|G[$],j=Q-G[$],W=J[G[$]-1]++<<j,ne=W|(1<<j)-1;W<=ne;++W)Z[f[W]>>>H]=O}return Z},x=new e(288);for(m=0;m<144;++m)x[m]=8;for(m=144;m<256;++m)x[m]=9;for(m=256;m<280;++m)x[m]=7;for(m=280;m<288;++m)x[m]=8;var v=new e(32);for(m=0;m<32;++m)v[m]=5;var _=y(x,9),S=y(v,5),M=function(G){for(var Q=G[0],U=1;U<G.length;++U)G[U]>Q&&(Q=G[U]);return Q},b=function(G,Q,U){var ee=Q/8|0;return(G[ee]|G[ee+1]<<8)>>(7&Q)&U},C=function(G,Q){var U=Q/8|0;return(G[U]|G[U+1]<<8|G[U+2]<<16)>>(7&Q)},B=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],P=function(G,Q,U){var ee=new Error(Q||B[G]);if(ee.code=G,Error.captureStackTrace&&Error.captureStackTrace(ee,P),!U)throw ee;return ee},T=function(G,Q,U){var ee=G.length;if(!ee||U&&!U.l&&ee<5)return Q||new e(0);var $=!Q||U,oe=!U||U.i;U||(U={}),Q||(Q=new e(3*ee));var Z,J=function(et){var re=Q.length;if(et>re){var Ae=new e(Math.max(2*re,et));Ae.set(Q),Q=Ae}},H=U.f||0,O=U.p||0,j=U.b||0,W=U.l,ne=U.d,ae=U.m,de=U.n,fe=8*ee;do{if(!W){U.f=H=b(G,O,1);var Se=b(G,O+1,3);if(O+=3,!Se){var He=G[(Je=((Z=O)/8|0)+(7&Z&&1)+4)-4]|G[Je-3]<<8,Fe=Je+He;if(Fe>ee){oe&&P(0);break}$&&J(j+He),Q.set(G.subarray(Je,Fe),j),U.b=j+=He,U.p=O=8*Fe;continue}if(Se==1)W=_,ne=S,ae=9,de=5;else if(Se==2){var ge=b(G,O,31)+257,X=b(G,O+10,15)+4,Re=ge+b(G,O+5,31)+1;O+=14;for(var ye=new e(Re),De=new e(19),Me=0;Me<X;++Me)De[a[Me]]=b(G,O+3*Me,7);O+=3*X;var Qe=M(De),Ee=(1<<Qe)-1,Oe=y(De,Qe);for(Me=0;Me<Re;){var Je,be=Oe[b(G,O,Ee)];if(O+=15&be,(Je=be>>>4)<16)ye[Me++]=Je;else{var rt=0,V=0;for(Je==16?(V=3+b(G,O,3),O+=2,rt=ye[Me-1]):Je==17?(V=3+b(G,O,7),O+=3):Je==18&&(V=11+b(G,O,127),O+=7);V--;)ye[Me++]=rt}}var k=ye.subarray(0,ge),ue=ye.subarray(ge);ae=M(k),de=M(ue),W=y(k,ae),ne=y(ue,de)}else P(1);if(O>fe){oe&&P(0);break}}$&&J(j+131072);for(var je=(1<<ae)-1,_e=(1<<de)-1,Le=O;;Le=O){var Ke=(rt=W[C(G,O)&je])>>>4;if((O+=15&rt)>fe){oe&&P(0);break}if(rt||P(2),Ke<256)Q[j++]=Ke;else{if(Ke==256){Le=O,W=null;break}var We=Ke-254;if(Ke>264){var Ze=r[Me=Ke-257];We=b(G,O,(1<<Ze)-1)+c[Me],O+=Ze}var ct=ne[C(G,O)&_e],ot=ct>>>4;if(ct||P(3),O+=15&ct,ue=h[ot],ot>3&&(Ze=s[ot],ue+=C(G,O)&(1<<Ze)-1,O+=Ze),O>fe){oe&&P(0);break}$&&J(j+131072);for(var Pe=j+We;j<Pe;j+=4)Q[j]=Q[j-ue],Q[j+1]=Q[j+1-ue],Q[j+2]=Q[j+2-ue],Q[j+3]=Q[j+3-ue];j=Pe}}U.l=W,U.p=Le,U.b=j,W&&(H=1,U.m=ae,U.d=ne,U.n=de)}while(!H);return j==Q.length?Q:function(et,re,Ae){(Ae==null||Ae>et.length)&&(Ae=et.length);var Ge=new(et instanceof n?n:et instanceof i?i:e)(Ae-re);return Ge.set(et.subarray(re,Ae)),Ge}(Q,0,j)},I=new e(0),z=typeof TextDecoder<"u"&&new TextDecoder;try{z.decode(I,{stream:!0})}catch{}return t.convert_streams=function(G){var Q=new DataView(G),U=0;function ee(){var ge=Q.getUint16(U);return U+=2,ge}function $(){var ge=Q.getUint32(U);return U+=4,ge}function oe(ge){He.setUint16(Fe,ge),Fe+=2}function Z(ge){He.setUint32(Fe,ge),Fe+=4}for(var J={signature:$(),flavor:$(),length:$(),numTables:ee(),reserved:ee(),totalSfntSize:$(),majorVersion:ee(),minorVersion:ee(),metaOffset:$(),metaLength:$(),metaOrigLength:$(),privOffset:$(),privLength:$()},H=0;Math.pow(2,H)<=J.numTables;)H++;H--;for(var O=16*Math.pow(2,H),j=16*J.numTables-O,W=12,ne=[],ae=0;ae<J.numTables;ae++)ne.push({tag:$(),offset:$(),compLength:$(),origLength:$(),origChecksum:$()}),W+=16;var de,fe=new Uint8Array(12+16*ne.length+ne.reduce(function(ge,X){return ge+X.origLength+4},0)),Se=fe.buffer,He=new DataView(Se),Fe=0;return Z(J.flavor),oe(J.numTables),oe(O),oe(H),oe(j),ne.forEach(function(ge){Z(ge.tag),Z(ge.origChecksum),Z(W),Z(ge.origLength),ge.outOffset=W,(W+=ge.origLength)%4!=0&&(W+=4-W%4)}),ne.forEach(function(ge){var X,Re=G.slice(ge.offset,ge.offset+ge.compLength);if(ge.compLength!=ge.origLength){var ye=new Uint8Array(ge.origLength);X=new Uint8Array(Re,2),T(X,ye)}else ye=new Uint8Array(Re);fe.set(ye,ge.outOffset);var De=0;(W=ge.outOffset+ge.origLength)%4!=0&&(De=4-W%4),fe.set(new Uint8Array(De).buffer,ge.outOffset+ge.origLength),de=W+De}),Se.slice(0,de)},Object.defineProperty(t,"__esModule",{value:!0}),t}({}).convert_streams}function Fq(t,e){const n={M:2,L:2,Q:4,C:6,Z:0},i={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},r=1,s=2,a=4,o=8,l=16,c=32;let u;function h(B){if(!u){const P={R:s,L:r,D:a,C:l,U:c,T:o};u=new Map;for(let T in i){let I=0;i[T].split(",").forEach(z=>{let[G,Q]=z.split("+");G=parseInt(G,36),Q=Q?parseInt(Q,36):0,u.set(I+=G,P[T]);for(let U=Q;U--;)u.set(++I,P[T])})}}return u.get(B)||c}const f=1,m=2,g=3,y=4,x=[null,"isol","init","fina","medi"];function v(B){const P=new Uint8Array(B.length);let T=c,I=f,z=-1;for(let G=0;G<B.length;G++){const Q=B.codePointAt(G);let U=h(Q)|0,ee=f;U&o||(T&(r|a|l)?U&(s|a|l)?(ee=g,(I===f||I===g)&&P[z]++):U&(r|c)&&(I===m||I===y)&&P[z]--:T&(s|c)&&(I===m||I===y)&&P[z]--,I=P[G]=ee,T=U,z=G,Q>65535&&G++)}return P}function _(B,P){const T=[];for(let z=0;z<P.length;z++){const G=P.codePointAt(z);G>65535&&z++,T.push(t.U.codeToGlyph(B,G))}const I=B.GSUB;if(I){const{lookupList:z,featureList:G}=I;let Q;const U=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,ee=[];G.forEach($=>{if(U.test($.tag))for(let oe=0;oe<$.tab.length;oe++){if(ee[$.tab[oe]])continue;ee[$.tab[oe]]=!0;const Z=z[$.tab[oe]],J=/^(isol|init|fina|medi)$/.test($.tag);J&&!Q&&(Q=v(P));for(let H=0;H<T.length;H++)(!Q||!J||x[Q[H]]===$.tag)&&t.U._applySubs(T,H,Z,z)}})}return T}function S(B,P){const T=new Int16Array(P.length*3);let I=0;for(;I<P.length;I++){const U=P[I];if(U===-1)continue;T[I*3+2]=B.hmtx.aWidth[U];const ee=B.GPOS;if(ee){const $=ee.lookupList;for(let oe=0;oe<$.length;oe++){const Z=$[oe];for(let J=0;J<Z.tabs.length;J++){const H=Z.tabs[J];if(Z.ltype===1){if(t._lctf.coverageIndex(H.coverage,U)!==-1&&H.pos){Q(H.pos,I);break}}else if(Z.ltype===2){let O=null,j=z();if(j!==-1){const W=t._lctf.coverageIndex(H.coverage,P[j]);if(W!==-1){if(H.fmt===1){const ne=H.pairsets[W];for(let ae=0;ae<ne.length;ae++)ne[ae].gid2===U&&(O=ne[ae])}else if(H.fmt===2){const ne=t.U._getGlyphClass(P[j],H.classDef1),ae=t.U._getGlyphClass(U,H.classDef2);O=H.matrix[ne][ae]}if(O){O.val1&&Q(O.val1,j),O.val2&&Q(O.val2,I);break}}}}else if(Z.ltype===4){const O=t._lctf.coverageIndex(H.markCoverage,U);if(O!==-1){const j=z(G),W=j===-1?-1:t._lctf.coverageIndex(H.baseCoverage,P[j]);if(W!==-1){const ne=H.markArray[O],ae=H.baseArray[W][ne.markClass];T[I*3]=ae.x-ne.x+T[j*3]-T[j*3+2],T[I*3+1]=ae.y-ne.y+T[j*3+1];break}}}else if(Z.ltype===6){const O=t._lctf.coverageIndex(H.mark1Coverage,U);if(O!==-1){const j=z();if(j!==-1){const W=P[j];if(M(B,W)===3){const ne=t._lctf.coverageIndex(H.mark2Coverage,W);if(ne!==-1){const ae=H.mark1Array[O],de=H.mark2Array[ne][ae.markClass];T[I*3]=de.x-ae.x+T[j*3]-T[j*3+2],T[I*3+1]=de.y-ae.y+T[j*3+1];break}}}}}}}}else if(B.kern&&!B.cff){const $=z();if($!==-1){const oe=B.kern.glyph1.indexOf(P[$]);if(oe!==-1){const Z=B.kern.rval[oe].glyph2.indexOf(U);Z!==-1&&(T[$*3+2]+=B.kern.rval[oe].vals[Z])}}}}return T;function z(U){for(let ee=I-1;ee>=0;ee--)if(P[ee]!==-1&&(!U||U(P[ee])))return ee;return-1}function G(U){return M(B,U)===1}function Q(U,ee){for(let $=0;$<3;$++)T[ee*3+$]+=U[$]||0}}function M(B,P){const T=B.GDEF&&B.GDEF.glyphClassDef;return T?t.U._getGlyphClass(P,T):0}function b(...B){for(let P=0;P<B.length;P++)if(typeof B[P]=="number")return B[P]}function C(B){const P=Object.create(null),T=B["OS/2"],I=B.hhea,z=B.head.unitsPerEm,G=b(T&&T.sTypoAscender,I&&I.ascender,z),Q={unitsPerEm:z,ascender:G,descender:b(T&&T.sTypoDescender,I&&I.descender,0),capHeight:b(T&&T.sCapHeight,G),xHeight:b(T&&T.sxHeight,G),lineGap:b(T&&T.sTypoLineGap,I&&I.lineGap),supportsCodePoint(U){return t.U.codeToGlyph(B,U)>0},forEachGlyph(U,ee,$,oe){let Z=0;const J=1/Q.unitsPerEm*ee,H=_(B,U);let O=0;const j=S(B,H);return H.forEach((W,ne)=>{if(W!==-1){let ae=P[W];if(!ae){const{cmds:de,crds:fe}=t.U.glyphToPath(B,W);let Se="",He=0;for(let ye=0,De=de.length;ye<De;ye++){const Me=n[de[ye]];Se+=de[ye];for(let Qe=1;Qe<=Me;Qe++)Se+=(Qe>1?",":"")+fe[He++]}let Fe,ge,X,Re;if(fe.length){Fe=ge=1/0,X=Re=-1/0;for(let ye=0,De=fe.length;ye<De;ye+=2){let Me=fe[ye],Qe=fe[ye+1];Me<Fe&&(Fe=Me),Qe<ge&&(ge=Qe),Me>X&&(X=Me),Qe>Re&&(Re=Qe)}}else Fe=X=ge=Re=0;ae=P[W]={index:W,advanceWidth:B.hmtx.aWidth[W],xMin:Fe,yMin:ge,xMax:X,yMax:Re,path:Se}}oe.call(null,ae,Z+j[ne*3]*J,j[ne*3+1]*J,O),Z+=j[ne*3+2]*J,$&&(Z+=$*ee)}O+=U.codePointAt(O)>65535?2:1}),Z}};return Q}return function(P){const T=new Uint8Array(P,0,4),I=t._bin.readASCII(T,0,4);if(I==="wOFF")P=e(P);else if(I==="wOF2")throw new Error("woff2 fonts not supported");return C(t.parse(P)[0])}}const Uq=ed({name:"Typr Font Parser",dependencies:[Dq,Nq,Fq],init(t,e,n){const i=t(),r=e();return n(i,r)}});/*!
Custom bundle of @unicode-font-resolver/client v1.0.2 (https://github.com/lojjic/unicode-font-resolver)
for use in Troika text rendering. 
Original MIT license applies
*/function kq(){return function(t){var e=function(){this.buckets=new Map};e.prototype.add=function(S){var M=S>>5;this.buckets.set(M,(this.buckets.get(M)||0)|1<<(31&S))},e.prototype.has=function(S){var M=this.buckets.get(S>>5);return M!==void 0&&(M&1<<(31&S))!=0},e.prototype.serialize=function(){var S=[];return this.buckets.forEach(function(M,b){S.push((+b).toString(36)+":"+M.toString(36))}),S.join(",")},e.prototype.deserialize=function(S){var M=this;this.buckets.clear(),S.split(",").forEach(function(b){var C=b.split(":");M.buckets.set(parseInt(C[0],36),parseInt(C[1],36))})};var n=Math.pow(2,8),i=n-1,r=~i;function s(S){var M=function(C){return C&r}(S).toString(16),b=function(C){return(C&r)+n-1}(S).toString(16);return"codepoint-index/plane"+(S>>16)+"/"+M+"-"+b+".json"}function a(S,M){var b=S&i,C=M.codePointAt(b/6|0);return((C=(C||48)-48)&1<<b%6)!=0}function o(S,M){var b;(b=S,b.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map(function(C){return C.split("-").map(function(B){return parseInt(B.trim(),16)})})).forEach(function(C){var B=C[0],P=C[1];P===void 0&&(P=B),M(B,P)})}function l(S,M){o(S,function(b,C){for(var B=b;B<=C;B++)M(B)})}var c={},u={},h=new WeakMap,f="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function m(S){var M=h.get(S);return M||(M=new e,l(S.ranges,function(b){return M.add(b)}),h.set(S,M)),M}var g,y=new Map;function x(S,M,b){return S[M]?M:S[b]?b:function(C){for(var B in C)return B}(S)}function v(S,M){var b=M;if(!S.includes(b)){b=1/0;for(var C=0;C<S.length;C++)Math.abs(S[C]-M)<Math.abs(b-M)&&(b=S[C])}return b}function _(S){return g||(g=new Set,l("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",function(M){g.add(M)})),g.has(S)}return t.CodePointSet=e,t.clearCache=function(){c={},u={}},t.getFontsForString=function(S,M){M===void 0&&(M={});var b,C=M.lang;C===void 0&&(C=new RegExp("\\p{Script=Hangul}","u").test(b=S)?"ko":new RegExp("\\p{Script=Hiragana}|\\p{Script=Katakana}","u").test(b)?"ja":"en");var B=M.category;B===void 0&&(B="sans-serif");var P=M.style;P===void 0&&(P="normal");var T=M.weight;T===void 0&&(T=400);var I=(M.dataUrl||f).replace(/\/$/g,""),z=new Map,G=new Uint8Array(S.length),Q={},U={},ee=new Array(S.length),$=new Map,oe=!1;function Z(O){var j=y.get(O);return j||(j=fetch(I+"/"+O).then(function(W){if(!W.ok)throw new Error(W.statusText);return W.json().then(function(ne){if(!Array.isArray(ne)||ne[0]!==1)throw new Error("Incorrect schema version; need 1, got "+ne[0]);return ne[1]})}).catch(function(W){if(I!==f)return oe||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+I+'", trying default CDN. '+W.message),oe=!0),I=f,y.delete(O),Z(O);throw W}),y.set(O,j)),j}for(var J=function(O){var j=S.codePointAt(O),W=s(j);ee[O]=W,c[W]||$.has(W)||$.set(W,Z(W).then(function(ne){c[W]=ne})),j>65535&&(O++,H=O)},H=0;H<S.length;H++)J(H);return Promise.all($.values()).then(function(){$.clear();for(var O=function(W){var ne=S.codePointAt(W),ae=null,de=c[ee[W]],fe=void 0;for(var Se in de){var He=U[Se];if(He===void 0&&(He=U[Se]=new RegExp(Se).test(C||"en")),He){for(var Fe in fe=Se,de[Se])if(a(ne,de[Se][Fe])){ae=Fe;break}break}}if(!ae){e:for(var ge in de)if(ge!==fe){for(var X in de[ge])if(a(ne,de[ge][X])){ae=X;break e}}}ae||(console.debug("No font coverage for U+"+ne.toString(16)),ae="latin"),ee[W]=ae,u[ae]||$.has(ae)||$.set(ae,Z("font-meta/"+ae+".json").then(function(Re){u[ae]=Re})),ne>65535&&(W++,j=W)},j=0;j<S.length;j++)O(j);return Promise.all($.values())}).then(function(){for(var O,j=null,W=0;W<S.length;W++){var ne=S.codePointAt(W);if(j&&(_(ne)||m(j).has(ne)))G[W]=G[W-1];else{j=u[ee[W]];var ae=Q[j.id];if(!ae){var de=j.typeforms,fe=x(de,B,"sans-serif"),Se=x(de[fe],P,"normal"),He=v((O=de[fe])===null||O===void 0?void 0:O[Se],T);ae=Q[j.id]=I+"/font-files/"+j.id+"/"+fe+"."+Se+"."+He+".woff"}var Fe=z.get(ae);Fe==null&&(Fe=z.size,z.set(ae,Fe)),G[W]=Fe}ne>65535&&(W++,G[W]=G[W-1])}return{fontUrls:Array.from(z.keys()),chars:G}})},Object.defineProperty(t,"__esModule",{value:!0}),t}({})}function Oq(t,e){const n=Object.create(null),i=Object.create(null);function r(a,o){const l=c=>{console.error(`Failure loading font ${a}`,c)};try{const c=new XMLHttpRequest;c.open("get",a,!0),c.responseType="arraybuffer",c.onload=function(){if(c.status>=400)l(new Error(c.statusText));else if(c.status>0)try{const u=t(c.response);u.src=a,o(u)}catch(u){l(u)}},c.onerror=l,c.send()}catch(c){l(c)}}function s(a,o){let l=n[a];l?o(l):i[a]?i[a].push(o):(i[a]=[o],r(a,c=>{c.src=a,n[a]=c,i[a].forEach(u=>u(c)),delete i[a]}))}return function(a,o,{lang:l,fonts:c=[],style:u="normal",weight:h="normal",unicodeFontsURL:f}={}){const m=new Uint8Array(a.length),g=[];a.length||_();const y=new Map,x=[];if(u!=="italic"&&(u="normal"),typeof h!="number"&&(h=h==="bold"?700:400),c&&!Array.isArray(c)&&(c=[c]),c=c.slice().filter(M=>!M.lang||M.lang.test(l)).reverse(),c.length){let B=0;(function P(T=0){for(let I=T,z=a.length;I<z;I++){const G=a.codePointAt(I);if(B===1&&g[m[I-1]].supportsCodePoint(G)||I>0&&/\s/.test(a[I]))m[I]=m[I-1],B===2&&(x[x.length-1][1]=I);else for(let Q=m[I],U=c.length;Q<=U;Q++)if(Q===U){const ee=B===2?x[x.length-1]:x[x.length]=[I,I];ee[1]=I,B=2}else{m[I]=Q;const{src:ee,unicodeRange:$}=c[Q];if(!$||S(G,$)){const oe=n[ee];if(!oe){s(ee,()=>{P(I)});return}if(oe.supportsCodePoint(G)){let Z=y.get(oe);typeof Z!="number"&&(Z=g.length,g.push(oe),y.set(oe,Z)),m[I]=Z,B=1;break}}}G>65535&&I+1<z&&(m[I+1]=m[I],I++,B===2&&(x[x.length-1][1]=I))}v()})()}else x.push([0,a.length-1]),v();function v(){if(x.length){const M=x.map(b=>a.substring(b[0],b[1]+1)).join(`
`);e.getFontsForString(M,{lang:l||void 0,style:u,weight:h,dataUrl:f}).then(({fontUrls:b,chars:C})=>{const B=g.length;let P=0;x.forEach(I=>{for(let z=0,G=I[1]-I[0];z<=G;z++)m[I[0]+z]=C[P++]+B;P++});let T=0;b.forEach((I,z)=>{s(I,G=>{g[z+B]=G,++T===b.length&&_()})})})}else _()}function _(){o({chars:m,fonts:g})}function S(M,b){for(let C=0;C<b.length;C++){const[B,P=B]=b[C];if(B<=M&&M<=P)return!0}return!1}}}const Gq=ed({name:"FontResolver",dependencies:[Oq,Uq,kq],init(t,e,n){return t(e,n())}});function zq(t,e){const i=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,r="[^\\S\\u00A0]",s=new RegExp(`${r}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function a({text:g,lang:y,fonts:x,style:v,weight:_,preResolvedFonts:S,unicodeFontsURL:M},b){const C=({chars:B,fonts:P})=>{let T,I;const z=[];for(let G=0;G<B.length;G++)B[G]!==I?(I=B[G],z.push(T={start:G,end:G,fontObj:P[B[G]]})):T.end=G;b(z)};S?C(S):t(g,C,{lang:y,fonts:x,style:v,weight:_,unicodeFontsURL:M})}function o({text:g="",font:y,lang:x,sdfGlyphSize:v=64,fontSize:_=400,fontWeight:S=1,fontStyle:M="normal",letterSpacing:b=0,lineHeight:C="normal",maxWidth:B=1/0,direction:P,textAlign:T="left",textIndent:I=0,whiteSpace:z="normal",overflowWrap:G="normal",anchorX:Q=0,anchorY:U=0,metricsOnly:ee=!1,unicodeFontsURL:$,preResolvedFonts:oe=null,includeCaretPositions:Z=!1,chunkedBoundsSize:J=8192,colorRanges:H=null},O){const j=h(),W={fontLoad:0,typesetting:0};g.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),g=g.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),_=+_,b=+b,B=+B,C=C||"normal",I=+I,a({text:g,lang:x,style:M,weight:S,fonts:typeof y=="string"?[{src:y}]:y,unicodeFontsURL:$,preResolvedFonts:oe},ne=>{W.fontLoad=h()-j;const ae=isFinite(B);let de=null,fe=null,Se=null,He=null,Fe=null,ge=null,X=null,Re=null,ye=0,De=0,Me=z!=="nowrap";const Qe=new Map,Ee=h();let Oe=I,Je=0,be=new f;const rt=[be];ne.forEach(_e=>{const{fontObj:Le}=_e,{ascender:Ke,descender:We,unitsPerEm:Ze,lineGap:ct,capHeight:ot,xHeight:Pe}=Le;let et=Qe.get(Le);if(!et){const xe=_/Ze,le=C==="normal"?(Ke-We+ct)*xe:C*_,nt=(le-(Ke-We)*xe)/2,Xe=Math.min(le,(Ke-We)*xe),we=(Ke+We)/2*xe+Xe/2;et={index:Qe.size,src:Le.src,fontObj:Le,fontSizeMult:xe,unitsPerEm:Ze,ascender:Ke*xe,descender:We*xe,capHeight:ot*xe,xHeight:Pe*xe,lineHeight:le,baseline:-nt-Ke*xe,caretTop:we,caretBottom:we-Xe},Qe.set(Le,et)}const{fontSizeMult:re}=et,Ae=g.slice(_e.start,_e.end+1);let Ge,Ve;Le.forEachGlyph(Ae,_,b,(xe,le,nt,Xe)=>{le+=Je,Xe+=_e.start,Ge=le,Ve=xe;const we=g.charAt(Xe),Ye=xe.advanceWidth*re,st=be.count;let at;if("isEmpty"in xe||(xe.isWhitespace=!!we&&new RegExp(r).test(we),xe.canBreakAfter=!!we&&s.test(we),xe.isEmpty=xe.xMin===xe.xMax||xe.yMin===xe.yMax||i.test(we)),!xe.isWhitespace&&!xe.isEmpty&&De++,Me&&ae&&!xe.isWhitespace&&le+Ye+Oe>B&&st){if(be.glyphAt(st-1).glyphObj.canBreakAfter)at=new f,Oe=-le;else for(let jt=st;jt--;)if(jt===0&&G==="break-word"){at=new f,Oe=-le;break}else if(be.glyphAt(jt).glyphObj.canBreakAfter){at=be.splitAt(jt+1);const Ct=at.glyphAt(0).x;Oe-=Ct;for(let Zt=at.count;Zt--;)at.glyphAt(Zt).x-=Ct;break}at&&(be.isSoftWrapped=!0,be=at,rt.push(be),ye=B)}let Et=be.glyphAt(be.count);Et.glyphObj=xe,Et.x=le+Oe,Et.y=nt,Et.width=Ye,Et.charIndex=Xe,Et.fontData=et,we===`
`&&(be=new f,rt.push(be),Oe=-(le+Ye+b*_)+I)}),Je=Ge+Ve.advanceWidth*re+b*_});let V=0;rt.forEach(_e=>{let Le=!0;for(let Ke=_e.count;Ke--;){const We=_e.glyphAt(Ke);Le&&!We.glyphObj.isWhitespace&&(_e.width=We.x+We.width,_e.width>ye&&(ye=_e.width),Le=!1);let{lineHeight:Ze,capHeight:ct,xHeight:ot,baseline:Pe}=We.fontData;Ze>_e.lineHeight&&(_e.lineHeight=Ze);const et=Pe-_e.baseline;et<0&&(_e.baseline+=et,_e.cap+=et,_e.ex+=et),_e.cap=Math.max(_e.cap,_e.baseline+ct),_e.ex=Math.max(_e.ex,_e.baseline+ot)}_e.baseline-=V,_e.cap-=V,_e.ex-=V,V+=_e.lineHeight});let k=0,ue=0;if(Q&&(typeof Q=="number"?k=-Q:typeof Q=="string"&&(k=-ye*(Q==="left"?0:Q==="center"?.5:Q==="right"?1:c(Q)))),U&&(typeof U=="number"?ue=-U:typeof U=="string"&&(ue=U==="top"?0:U==="top-baseline"?-rt[0].baseline:U==="top-cap"?-rt[0].cap:U==="top-ex"?-rt[0].ex:U==="middle"?V/2:U==="bottom"?V:U==="bottom-baseline"?-rt[rt.length-1].baseline:c(U)*V)),!ee){const _e=e.getEmbeddingLevels(g,P);de=new Uint16Array(De),fe=new Uint8Array(De),Se=new Float32Array(De*2),He={},X=[1/0,1/0,-1/0,-1/0],Re=[],Z&&(ge=new Float32Array(g.length*4)),H&&(Fe=new Uint8Array(De*3));let Le=0,Ke=-1,We=-1,Ze,ct;if(rt.forEach((ot,Pe)=>{let{count:et,width:re}=ot;if(et>0){let Ae=0;for(let Xe=et;Xe--&&ot.glyphAt(Xe).glyphObj.isWhitespace;)Ae++;let Ge=0,Ve=0;if(T==="center")Ge=(ye-re)/2;else if(T==="right")Ge=ye-re;else if(T==="justify"&&ot.isSoftWrapped){let Xe=0;for(let we=et-Ae;we--;)ot.glyphAt(we).glyphObj.isWhitespace&&Xe++;Ve=(ye-re)/Xe}if(Ve||Ge){let Xe=0;for(let we=0;we<et;we++){let Ye=ot.glyphAt(we);const st=Ye.glyphObj;Ye.x+=Ge+Xe,Ve!==0&&st.isWhitespace&&we<et-Ae&&(Xe+=Ve,Ye.width+=Ve)}}const xe=e.getReorderSegments(g,_e,ot.glyphAt(0).charIndex,ot.glyphAt(ot.count-1).charIndex);for(let Xe=0;Xe<xe.length;Xe++){const[we,Ye]=xe[Xe];let st=1/0,at=-1/0;for(let Et=0;Et<et;Et++)if(ot.glyphAt(Et).charIndex>=we){let jt=Et,Ct=Et;for(;Ct<et;Ct++){let Zt=ot.glyphAt(Ct);if(Zt.charIndex>Ye)break;Ct<et-Ae&&(st=Math.min(st,Zt.x),at=Math.max(at,Zt.x+Zt.width))}for(let Zt=jt;Zt<Ct;Zt++){const En=ot.glyphAt(Zt);En.x=at-(En.x+En.width-st)}break}}let le;const nt=Xe=>le=Xe;for(let Xe=0;Xe<et;Xe++){const we=ot.glyphAt(Xe);le=we.glyphObj;const Ye=le.index,st=_e.levels[we.charIndex]&1;if(st){const at=e.getMirroredCharacter(g[we.charIndex]);at&&we.fontData.fontObj.forEachGlyph(at,0,0,nt)}if(Z){const{charIndex:at,fontData:Et}=we,jt=we.x+k,Ct=we.x+we.width+k;ge[at*4]=st?Ct:jt,ge[at*4+1]=st?jt:Ct,ge[at*4+2]=ot.baseline+Et.caretBottom+ue,ge[at*4+3]=ot.baseline+Et.caretTop+ue;const Zt=at-Ke;Zt>1&&u(ge,Ke,Zt),Ke=at}if(H){const{charIndex:at}=we;for(;at>We;)We++,H.hasOwnProperty(We)&&(ct=H[We])}if(!le.isWhitespace&&!le.isEmpty){const at=Le++,{fontSizeMult:Et,src:jt,index:Ct}=we.fontData,Zt=He[jt]||(He[jt]={});Zt[Ye]||(Zt[Ye]={path:le.path,pathBounds:[le.xMin,le.yMin,le.xMax,le.yMax]});const En=we.x+k,yi=we.y+ot.baseline+ue;Se[at*2]=En,Se[at*2+1]=yi;const Ui=En+le.xMin*Et,ni=yi+le.yMin*Et,Yn=En+le.xMax*Et,Rt=yi+le.yMax*Et;Ui<X[0]&&(X[0]=Ui),ni<X[1]&&(X[1]=ni),Yn>X[2]&&(X[2]=Yn),Rt>X[3]&&(X[3]=Rt),at%J===0&&(Ze={start:at,end:at,rect:[1/0,1/0,-1/0,-1/0]},Re.push(Ze)),Ze.end++;const Gn=Ze.rect;if(Ui<Gn[0]&&(Gn[0]=Ui),ni<Gn[1]&&(Gn[1]=ni),Yn>Gn[2]&&(Gn[2]=Yn),Rt>Gn[3]&&(Gn[3]=Rt),de[at]=Ye,fe[at]=Ct,H){const Ar=at*3;Fe[Ar]=ct>>16&255,Fe[Ar+1]=ct>>8&255,Fe[Ar+2]=ct&255}}}}}),ge){const ot=g.length-Ke;ot>1&&u(ge,Ke,ot)}}const je=[];Qe.forEach(({index:_e,src:Le,unitsPerEm:Ke,ascender:We,descender:Ze,lineHeight:ct,capHeight:ot,xHeight:Pe})=>{je[_e]={src:Le,unitsPerEm:Ke,ascender:We,descender:Ze,lineHeight:ct,capHeight:ot,xHeight:Pe}}),W.typesetting=h()-Ee,O({glyphIds:de,glyphFontIndices:fe,glyphPositions:Se,glyphData:He,fontData:je,caretPositions:ge,glyphColors:Fe,chunkedBounds:Re,fontSize:_,topBaseline:ue+rt[0].baseline,blockBounds:[k,ue-V,k+ye,ue],visibleBounds:X,timings:W})})}function l(g,y){o({...g,metricsOnly:!0},x=>{const[v,_,S,M]=x.blockBounds;y({width:S-v,height:M-_})})}function c(g){let y=g.match(/^([\d.]+)%$/),x=y?parseFloat(y[1]):NaN;return isNaN(x)?0:x/100}function u(g,y,x){const v=g[y*4],_=g[y*4+1],S=g[y*4+2],M=g[y*4+3],b=(_-v)/x;for(let C=0;C<x;C++){const B=(y+C)*4;g[B]=v+b*C,g[B+1]=v+b*(C+1),g[B+2]=S,g[B+3]=M}}function h(){return(self.performance||Date).now()}function f(){this.data=[]}const m=["glyphObj","x","y","width","charIndex","fontData"];return f.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/m.length)},glyphAt(g){let y=f.flyweight;return y.data=this.data,y.index=g,y},splitAt(g){let y=new f;return y.data=this.data.splice(g*m.length),y}},f.flyweight=m.reduce((g,y,x,v)=>(Object.defineProperty(g,y,{get(){return this.data[this.index*m.length+x]},set(_){this.data[this.index*m.length+x]=_}}),g),{data:null,index:0}),{typeset:o,measure:l}}const Dc=()=>(self.performance||Date).now(),Zy=JU();let _B;function Hq(t,e,n,i,r,s,a,o,l,c,u=!0){return u?jq(t,e,n,i,r,s,a,o,l,c).then(null,h=>(_B||(console.warn("WebGL SDF generation failed, falling back to JS",h),_B=!0),AB(t,e,n,i,r,s,a,o,l,c))):AB(t,e,n,i,r,s,a,o,l,c)}const Kv=[],Vq=5;let sw=0;function KU(){const t=Dc();for(;Kv.length&&Dc()-t<Vq;)Kv.shift()();sw=Kv.length?setTimeout(KU,0):0}const jq=(...t)=>new Promise((e,n)=>{Kv.push(()=>{const i=Dc();try{Zy.webgl.generateIntoCanvas(...t),e({timing:Dc()-i})}catch(r){n(r)}}),sw||(sw=setTimeout(KU,0))}),Wq=4,Xq=2e3,SB={};let Jq=0;function AB(t,e,n,i,r,s,a,o,l,c){const u="TroikaTextSDFGenerator_JS_"+Jq++%Wq;let h=SB[u];return h||(h=SB[u]={workerModule:ed({name:u,workerId:u,dependencies:[JU,Dc],init(f,m){const g=f().javascript.generate;return function(...y){const x=m();return{textureData:g(...y),timing:m()-x}}},getTransferables(f){return[f.textureData.buffer]}}),requests:0,idleTimer:null}),h.requests++,clearTimeout(h.idleTimer),h.workerModule(t,e,n,i,r,s).then(({textureData:f,timing:m})=>{const g=Dc(),y=new Uint8Array(f.length*4);for(let x=0;x<f.length;x++)y[x*4+c]=f[x];return Zy.webglUtils.renderImageData(a,y,o,l,t,e,1<<3-c),m+=Dc()-g,--h.requests===0&&(h.idleTimer=setTimeout(()=>{Mq(u)},Xq)),{timing:m}})}function Yq(t){t._warm||(Zy.webgl.isSupported(t),t._warm=!0)}const Kq=Zy.webglUtils.resizeWebGLCanvasWithoutClearing,df={unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},Qq=new ht;function zu(){return(self.performance||Date).now()}const wB=Object.create(null);function QU(t,e){t=$q({},t);const n=zu(),i=[];if(t.font&&i.push({label:"user",src:e$(t.font)}),t.font=i,t.text=""+t.text,t.sdfGlyphSize=t.sdfGlyphSize||df.sdfGlyphSize,t.unicodeFontsURL=t.unicodeFontsURL||df.unicodeFontsURL,t.colorRanges!=null){let f={};for(let m in t.colorRanges)if(t.colorRanges.hasOwnProperty(m)){let g=t.colorRanges[m];typeof g!="number"&&(g=Qq.set(g).getHex()),f[m]=g}t.colorRanges=f}Object.freeze(t);const{textureWidth:r,sdfExponent:s}=df,{sdfGlyphSize:a}=t,o=r/a*4;let l=wB[a];if(!l){const f=document.createElement("canvas");f.width=r,f.height=a*256/o,l=wB[a]={glyphCount:0,sdfGlyphSize:a,sdfCanvas:f,sdfTexture:new pn(f,void 0,void 0,void 0,kt,kt),contextLost:!1,glyphsByFont:new Map},l.sdfTexture.generateMipmaps=!1,Zq(l)}const{sdfTexture:c,sdfCanvas:u}=l;$U(t).then(f=>{const{glyphIds:m,glyphFontIndices:g,fontData:y,glyphPositions:x,fontSize:v,timings:_}=f,S=[],M=new Float32Array(m.length*4);let b=0,C=0;const B=zu(),P=y.map(Q=>{let U=l.glyphsByFont.get(Q.src);return U||l.glyphsByFont.set(Q.src,U=new Map),U});m.forEach((Q,U)=>{const ee=g[U],{src:$,unitsPerEm:oe}=y[ee];let Z=P[ee].get(Q);if(!Z){const{path:W,pathBounds:ne}=f.glyphData[$][Q],ae=Math.max(ne[2]-ne[0],ne[3]-ne[1])/a*(df.sdfMargin*a+.5),de=l.glyphCount++,fe=[ne[0]-ae,ne[1]-ae,ne[2]+ae,ne[3]+ae];P[ee].set(Q,Z={path:W,atlasIndex:de,sdfViewBox:fe}),S.push(Z)}const{sdfViewBox:J}=Z,H=x[C++],O=x[C++],j=v/oe;M[b++]=H+J[0]*j,M[b++]=O+J[1]*j,M[b++]=H+J[2]*j,M[b++]=O+J[3]*j,m[U]=Z.atlasIndex}),_.quads=(_.quads||0)+(zu()-B);const T=zu();_.sdf={};const I=u.height,z=Math.ceil(l.glyphCount/o),G=Math.pow(2,Math.ceil(Math.log2(z*a)));G>I&&(console.info(`Increasing SDF texture size ${I}->${G}`),Kq(u,r,G),c.dispose()),Promise.all(S.map(Q=>ZU(Q,l,t.gpuAccelerateSDF).then(({timing:U})=>{_.sdf[Q.atlasIndex]=U}))).then(()=>{S.length&&!l.contextLost&&(qU(l),c.needsUpdate=!0),_.sdfTotal=zu()-T,_.total=zu()-n,e(Object.freeze({parameters:t,sdfTexture:c,sdfGlyphSize:a,sdfExponent:s,glyphBounds:M,glyphAtlasIndices:m,glyphColors:f.glyphColors,caretPositions:f.caretPositions,chunkedBounds:f.chunkedBounds,ascender:f.ascender,descender:f.descender,lineHeight:f.lineHeight,capHeight:f.capHeight,xHeight:f.xHeight,topBaseline:f.topBaseline,blockBounds:f.blockBounds,visibleBounds:f.visibleBounds,timings:f.timings}))})}),Promise.resolve().then(()=>{l.contextLost||Yq(u)})}function ZU({path:t,atlasIndex:e,sdfViewBox:n},{sdfGlyphSize:i,sdfCanvas:r,contextLost:s},a){if(s)return Promise.resolve({timing:-1});const{textureWidth:o,sdfExponent:l}=df,c=Math.max(n[2]-n[0],n[3]-n[1]),u=Math.floor(e/4),h=u%(o/i)*i,f=Math.floor(u/(o/i))*i,m=e%4;return Hq(i,i,t,n,c,l,r,h,f,m,a)}function Zq(t){const e=t.sdfCanvas;e.addEventListener("webglcontextlost",n=>{console.log("Context Lost",n),n.preventDefault(),t.contextLost=!0}),e.addEventListener("webglcontextrestored",n=>{console.log("Context Restored",n),t.contextLost=!1;const i=[];t.glyphsByFont.forEach(r=>{r.forEach(s=>{i.push(ZU(s,t,!0))})}),Promise.all(i).then(()=>{qU(t),t.sdfTexture.needsUpdate=!0})})}function qq({font:t,characters:e,sdfGlyphSize:n},i){let r=Array.isArray(e)?e.join(`
`):""+e;QU({font:t,sdfGlyphSize:n,text:r},i)}function $q(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}let vv;function e$(t){return vv||(vv=typeof document>"u"?{}:document.createElement("a")),vv.href=t,vv.href}function qU(t){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:n}=t,{width:i,height:r}=e,s=t.sdfCanvas.getContext("webgl");let a=n.image.data;(!a||a.length!==i*r*4)&&(a=new Uint8Array(i*r*4),n.image={width:i,height:r,data:a},n.flipY=!1,n.isDataTexture=!0),s.readPixels(0,0,i,r,s.RGBA,s.UNSIGNED_BYTE,a)}}const t$=ed({name:"Typesetter",dependencies:[zq,Gq,bq],init(t,e,n){return t(e,n())}}),$U=ed({name:"Typesetter",dependencies:[t$],init(t){return function(e){return new Promise(n=>{t.typeset(e,n)})}},getTransferables(t){const e=[];for(let n in t)t[n]&&t[n].buffer&&e.push(t[n].buffer);return e}});$U.onMainThread;const MB={};function n$(t){let e=MB[t];return e||(e=MB[t]=new Aa(1,1,t,t).translate(.5,.5,0)),e}const i$="aTroikaGlyphBounds",EB="aTroikaGlyphIndex",r$="aTroikaGlyphColor";class s$ extends _E{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Fi,this.boundingBox=new Ni}computeBoundingSphere(){}computeBoundingBox(){}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let n=n$(e);["position","normal","uv"].forEach(i=>{this.attributes[i]=n.attributes[i].clone()}),this.setIndex(n.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,n,i,r,s){this.updateAttributeData(i$,e,4),this.updateAttributeData(EB,n,1),this.updateAttributeData(r$,s,3),this._blockBounds=i,this._chunkedBounds=r,this.instanceCount=n.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:n,boundingBox:i}=this;if(n){const{PI:r,floor:s,min:a,max:o,sin:l,cos:c}=Math,u=r/2,h=r*2,f=Math.abs(n),m=e[0]/f,g=e[2]/f,y=s((m+u)/h)!==s((g+u)/h)?-f:a(l(m)*f,l(g)*f),x=s((m-u)/h)!==s((g-u)/h)?f:o(l(m)*f,l(g)*f),v=s((m+r)/h)!==s((g+r)/h)?f*2:o(f-c(m)*f,f-c(g)*f);i.min.set(y,e[1],n<0?-v:0),i.max.set(x,e[3],n<0?0:v)}else i.min.set(e[0],e[1],0),i.max.set(e[2],e[3],0);i.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let n=this.getAttribute(EB).count,i=this._chunkedBounds;if(i)for(let r=i.length;r--;){n=i[r].end;let s=i[r].rect;if(s[1]<e.w&&s[3]>e.y&&s[0]<e.z&&s[2]>e.x)break}this.instanceCount=n}updateAttributeData(e,n,i){const r=this.getAttribute(e);n?r&&r.array.length===n.length?(r.array.set(n),r.needsUpdate=!0):(this.setAttribute(e,new yl(n,i)),delete this._maxInstanceCount,this.dispose()):r&&this.deleteAttribute(e)}}const a$=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaEdgeOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,o$=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,l$=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaEdgeOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,c$=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function u$(t){const e=rw(t,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Ie},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new on(0,0,0,0)},uTroikaClipRect:{value:new on(0,0,0,0)},uTroikaEdgeOffset:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Ie},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new ht},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Yt},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:a$,vertexTransform:o$,fragmentDefs:l$,fragmentColorTransform:c$,customRewriter({vertexShader:n,fragmentShader:i}){let r=/\buniform\s+vec3\s+diffuse\b/;return r.test(i)&&(i=i.replace(r,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),r.test(n)||(n=n.replace(YU,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:n,fragmentShader:i}}});return e.transparent=!0,e.forceSinglePass=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const YE=new vr({color:16777215,side:Ii,transparent:!0}),bB=8421504,TB=new bt,yv=new K,U_=new K,tf=[],h$=new K,k_="+x+y";function CB(t){return Array.isArray(t)?t[0]:t}let ek=()=>{const t=new Sn(new Aa(1,1),YE);return ek=()=>t,t},tk=()=>{const t=new Sn(new Aa(1,1,32,1),YE);return tk=()=>t,t};const d$={type:"syncstart"},f$={type:"synccomplete"},nk=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],p$=nk.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let ik=class extends Sn{constructor(){const e=new s$;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=bB,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=k_,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(d$),QU({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},n=>{this._isSyncing=!1,this._textRenderInfo=n,this.geometry.updateGlyphs(n.glyphBounds,n.glyphAtlasIndices,n.blockBounds,n.chunkedBounds,n.glyphColors);const i=this._queuedSyncs;i&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{i.forEach(r=>r&&r())})),this.dispatchEvent(f$),e&&e()})))}onBeforeRender(e,n,i,r,s,a){this.sync(),s.isTroikaTextMaterial&&this._prepareForRender(s)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}createDerivedMaterial(e){return u$(e)}get material(){let e=this._derivedMaterial;const n=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=YE.clone());if((!e||!e.isDerivedFrom(n))&&(e=this._derivedMaterial=this.createDerivedMaterial(n),n.addEventListener("dispose",function i(){n.removeEventListener("dispose",i),e.dispose()})),this.hasOutline()){let i=e._outlineMtl;return i||(i=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),i.isTextOutlineMaterial=!0,i.depthWrite=!1,i.map=null,e.addEventListener("dispose",function r(){e.removeEventListener("dispose",r),i.dispose()})),[i,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}hasOutline(){return!!(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY)}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return CB(this.material).getDepthMaterial()}set customDepthMaterial(e){}get customDistanceMaterial(){return CB(this.material).getDistanceMaterial()}set customDistanceMaterial(e){}_prepareForRender(e){const n=e.isTextOutlineMaterial,i=e.uniforms,r=this.textRenderInfo;if(r){const{sdfTexture:o,blockBounds:l}=r;i.uTroikaSDFTexture.value=o,i.uTroikaSDFTextureSize.value.set(o.image.width,o.image.height),i.uTroikaSDFGlyphSize.value=r.sdfGlyphSize,i.uTroikaSDFExponent.value=r.sdfExponent,i.uTroikaTotalBounds.value.fromArray(l),i.uTroikaUseGlyphColors.value=!n&&!!r.glyphColors;let c=0,u=0,h=0,f,m,g,y=0,x=0;if(n){let{outlineWidth:_,outlineOffsetX:S,outlineOffsetY:M,outlineBlur:b,outlineOpacity:C}=this;c=this._parsePercent(_)||0,u=Math.max(0,this._parsePercent(b)||0),f=C,y=this._parsePercent(S)||0,x=this._parsePercent(M)||0}else h=Math.max(0,this._parsePercent(this.strokeWidth)||0),h&&(g=this.strokeColor,i.uTroikaStrokeColor.value.set(g??bB),m=this.strokeOpacity,m==null&&(m=1)),f=this.fillOpacity;i.uTroikaEdgeOffset.value=c,i.uTroikaPositionOffset.value.set(y,x),i.uTroikaBlurRadius.value=u,i.uTroikaStrokeWidth.value=h,i.uTroikaStrokeOpacity.value=m,i.uTroikaFillOpacity.value=f??1,i.uTroikaCurveRadius.value=this.curveRadius||0;let v=this.clipRect;if(v&&Array.isArray(v)&&v.length===4)i.uTroikaClipRect.value.fromArray(v);else{const _=(this.fontSize||.1)*100;i.uTroikaClipRect.value.set(l[0]-_,l[1]-_,l[2]+_,l[3]+_)}this.geometry.applyClipRect(i.uTroikaClipRect.value)}i.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const s=n?this.outlineColor||0:this.color;if(s==null)delete e.color;else{const o=e.hasOwnProperty("color")?e.color:e.color=new ht;(s!==o._input||typeof s=="object")&&o.set(o._input=s)}let a=this.orientation||k_;if(a!==e._orientation){let o=i.uTroikaOrient.value;a=a.replace(/[^-+xyz]/g,"");let l=a!==k_&&a.match(/^([-+])([xyz])([-+])([xyz])$/);if(l){let[,c,u,h,f]=l;yv.set(0,0,0)[u]=c==="-"?1:-1,U_.set(0,0,0)[f]=h==="-"?-1:1,TB.lookAt(h$,yv.cross(U_),U_),o.setFromMatrix4(TB)}else o.identity();e._orientation=a}}_parsePercent(e){if(typeof e=="string"){let n=e.match(/^(-?[\d.]+)%$/),i=n?parseFloat(n[1]):NaN;e=(isNaN(i)?0:i/100)*this.fontSize}return e}localPositionToTextCoords(e,n=new Ie){n.copy(e);const i=this.curveRadius;return i&&(n.x=Math.atan2(e.x,Math.abs(i)-Math.abs(e.z))*Math.abs(i)),n}worldPositionToTextCoords(e,n=new Ie){return yv.copy(e),this.localPositionToTextCoords(this.worldToLocal(yv),n)}raycast(e,n){const{textRenderInfo:i,curveRadius:r}=this;if(i){const s=i.blockBounds,a=r?tk():ek(),o=a.geometry,{position:l,uv:c}=o.attributes;for(let u=0;u<c.count;u++){let h=s[0]+c.getX(u)*(s[2]-s[0]);const f=s[1]+c.getY(u)*(s[3]-s[1]);let m=0;r&&(m=r-Math.cos(h/r)*r,h=Math.sin(h/r)*r),l.setXYZ(u,h,f,m)}o.boundingSphere=this.geometry.boundingSphere,o.boundingBox=this.geometry.boundingBox,a.matrixWorld=this.matrixWorld,a.material.side=this.material.side,tf.length=0,a.raycast(e,tf);for(let u=0;u<tf.length;u++)tf[u].object=this,n.push(tf[u])}}copy(e){const n=this.geometry;return super.copy(e),this.geometry=n,p$.forEach(i=>{this[i]=e[i]}),this}clone(){return new this.constructor().copy(this)}};nk.forEach(t=>{const e="_private_"+t;Object.defineProperty(ik.prototype,t,{get(){return this[e]},set(n){n!==this[e]&&(this[e]=n,this._needsSync=!0)}})});new Ni;new ht;const Uf=D.forwardRef(({sdfGlyphSize:t=64,anchorX:e="center",anchorY:n="middle",font:i,fontSize:r=1,children:s,characters:a,onSync:o,...l},c)=>{const u=Cn(({invalidate:g})=>g),[h]=D.useState(()=>new ik),[f,m]=D.useMemo(()=>{const g=[];let y="";return D.Children.forEach(s,x=>{typeof x=="string"||typeof x=="number"?y+=x:g.push(x)}),[g,y]},[s]);return GF(()=>new Promise(g=>qq({font:i,characters:a},g)),["troika-text",i,a]),D.useLayoutEffect(()=>void h.sync(()=>{u(),o&&o(h)})),D.useEffect(()=>()=>h.dispose(),[h]),D.createElement("primitive",Sa({object:h,ref:c,font:i,text:m,anchorX:e,anchorY:n,fontSize:r,sdfGlyphSize:t},l),f)}),m$=()=>parseInt(bl.replace(/\D+/g,"")),g$=m$();let xv=null,rk="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function sk(t=!0,e=!0,n){return i=>{n&&n(i),t&&(xv||(xv=new vq),xv.setDecoderPath(typeof t=="string"?t:rk),i.setDRACOLoader(xv)),e&&i.setMeshoptDecoder(typeof N_=="function"?N_():N_)}}const nu=(t,e,n,i)=>uo(JE,t,sk(e,n,i));nu.preload=(t,e,n,i)=>uo.preload(JE,t,sk(e,n,i));nu.clear=t=>uo.clear(JE,t);nu.setDecoderPath=t=>{rk=t};function v$(t,e,n){const i=Cn(f=>f.size),r=Cn(f=>f.viewport),s=typeof t=="number"?t:i.width*r.dpr,a=i.height*r.dpr,o=(typeof t=="number"?n:t)||{},{samples:l=0,depth:c,...u}=o,h=D.useMemo(()=>{const f=new Mn(s,a,{minFilter:kt,magFilter:kt,type:ei,...u});return c&&(f.depthTexture=new Yh(s,a,$n)),f.samples=l,f},[]);return D.useLayoutEffect(()=>{h.setSize(s,a),l&&(h.samples=l)},[l,h,s,a]),D.useEffect(()=>()=>h.dispose(),[]),h}const y$=t=>typeof t=="function",x$=D.forwardRef(({envMap:t,resolution:e=256,frames:n=1/0,makeDefault:i,children:r,...s},a)=>{const o=Cn(({set:x})=>x),l=Cn(({camera:x})=>x),c=Cn(({size:x})=>x),u=D.useRef(null);D.useImperativeHandle(a,()=>u.current,[]);const h=D.useRef(null),f=v$(e);D.useLayoutEffect(()=>{s.manual||(u.current.aspect=c.width/c.height)},[c,s]),D.useLayoutEffect(()=>{u.current.updateProjectionMatrix()});let m=0,g=null;const y=y$(r);return Ur(x=>{y&&(n===1/0||m<n)&&(h.current.visible=!1,x.gl.setRenderTarget(f),g=x.scene.background,t&&(x.scene.background=t),x.gl.render(x.scene,u.current),x.scene.background=g,x.gl.setRenderTarget(null),h.current.visible=!0,m++)}),D.useLayoutEffect(()=>{if(i){const x=l;return o(()=>({camera:u.current})),()=>o(()=>({camera:x}))}},[u,i,o]),D.createElement(D.Fragment,null,D.createElement("perspectiveCamera",Sa({ref:u},s),!y&&r),D.createElement("group",{ref:h},y&&r(f.texture)))}),KE=D.forwardRef(({makeDefault:t,camera:e,regress:n,domElement:i,enableDamping:r=!0,keyEvents:s=!1,onChange:a,onStart:o,onEnd:l,...c},u)=>{const h=Cn(C=>C.invalidate),f=Cn(C=>C.camera),m=Cn(C=>C.gl),g=Cn(C=>C.events),y=Cn(C=>C.setEvents),x=Cn(C=>C.set),v=Cn(C=>C.get),_=Cn(C=>C.performance),S=e||f,M=i||g.connected||m.domElement,b=D.useMemo(()=>new LZ(S),[S]);return Ur(()=>{b.enabled&&b.update()},-1),D.useEffect(()=>(s&&b.connect(s===!0?M:s),b.connect(M),()=>void b.dispose()),[s,M,n,b,h]),D.useEffect(()=>{const C=T=>{h(),n&&_.regress(),a&&a(T)},B=T=>{o&&o(T)},P=T=>{l&&l(T)};return b.addEventListener("change",C),b.addEventListener("start",B),b.addEventListener("end",P),()=>{b.removeEventListener("start",B),b.removeEventListener("end",P),b.removeEventListener("change",C)}},[a,o,l,b,h,y]),D.useEffect(()=>{if(t){const C=v().controls;return x({controls:b}),()=>x({controls:C})}},[t,b]),D.createElement("primitive",Sa({ref:u,object:b,enableDamping:r},c))});function _$(t,e){const n=D.useRef(),[i]=D.useState(()=>e?e instanceof an?{current:e}:e:n),[r]=D.useState(()=>new LF(void 0));D.useLayoutEffect(()=>{e&&(i.current=e instanceof an?e:e.current),r._root=i.current});const s=D.useRef({}),a=D.useMemo(()=>{const o={};return t.forEach(l=>Object.defineProperty(o,l.name,{enumerable:!0,get(){if(i.current)return s.current[l.name]||(s.current[l.name]=r.clipAction(l,i.current))},configurable:!0})),{ref:i,clips:t,actions:o,names:t.map(l=>l.name),mixer:r}},[t]);return Ur((o,l)=>r.update(l)),D.useEffect(()=>{const o=i.current;return()=>{s.current={},r.stopAllAction(),Object.values(a.actions).forEach(l=>{o&&r.uncacheAction(l,o)})}},[t]),a}const S$=3e3,A$=3001;class w$ extends ti{constructor(e=new Ie){super({uniforms:{inputBuffer:new Ut(null),depthBuffer:new Ut(null),resolution:new Ut(new Ie),texelSize:new Ut(new Ie),halfTexelSize:new Ut(new Ie),kernel:new Ut(0),scale:new Ut(1),cameraNear:new Ut(0),cameraFar:new Ut(1),minDepthThreshold:new Ut(0),maxDepthThreshold:new Ut(1),depthScale:new Ut(0),depthToBlurRatioBias:new Ut(.25)},fragmentShader:`#include <common>
        #include <dithering_pars_fragment>      
        uniform sampler2D inputBuffer;
        uniform sampler2D depthBuffer;
        uniform float cameraNear;
        uniform float cameraFar;
        uniform float minDepthThreshold;
        uniform float maxDepthThreshold;
        uniform float depthScale;
        uniform float depthToBlurRatioBias;
        varying vec2 vUv;
        varying vec2 vUv0;
        varying vec2 vUv1;
        varying vec2 vUv2;
        varying vec2 vUv3;

        void main() {
          float depthFactor = 0.0;
          
          #ifdef USE_DEPTH
            vec4 depth = texture2D(depthBuffer, vUv);
            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));
            depthFactor *= depthScale;
            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));
          #endif
          
          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));
          gl_FragColor = sum * 0.25 ;

          #include <dithering_fragment>
          #include <tonemapping_fragment>
          #include <${g$>=154?"colorspace_fragment":"encodings_fragment"}>
        }`,vertexShader:`uniform vec2 texelSize;
        uniform vec2 halfTexelSize;
        uniform float kernel;
        uniform float scale;
        varying vec2 vUv;
        varying vec2 vUv0;
        varying vec2 vUv1;
        varying vec2 vUv2;
        varying vec2 vUv3;

        void main() {
          vec2 uv = position.xy * 0.5 + 0.5;
          vUv = uv;

          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;
          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);
          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);
          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);
          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);

          gl_Position = vec4(position.xy, 1.0, 1.0);
        }`,blending:Di,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.setTexelSize(e.x,e.y),this.kernel=new Float32Array([0,1,2,2,3])}setTexelSize(e,n){this.uniforms.texelSize.value.set(e,n),this.uniforms.halfTexelSize.value.set(e,n).multiplyScalar(.5)}setResolution(e){this.uniforms.resolution.value.copy(e)}}class M${constructor({gl:e,resolution:n,width:i=500,height:r=500,minDepthThreshold:s=0,maxDepthThreshold:a=1,depthScale:o=0,depthToBlurRatioBias:l=.25}){this.renderToScreen=!1,this.renderTargetA=new Mn(n,n,{minFilter:kt,magFilter:kt,stencilBuffer:!1,depthBuffer:!1,type:ei}),this.renderTargetB=this.renderTargetA.clone(),this.convolutionMaterial=new w$,this.convolutionMaterial.setTexelSize(1/i,1/r),this.convolutionMaterial.setResolution(new Ie(i,r)),this.scene=new gl,this.camera=new qc,this.convolutionMaterial.uniforms.minDepthThreshold.value=s,this.convolutionMaterial.uniforms.maxDepthThreshold.value=a,this.convolutionMaterial.uniforms.depthScale.value=o,this.convolutionMaterial.uniforms.depthToBlurRatioBias.value=l,this.convolutionMaterial.defines.USE_DEPTH=o>0;const c=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),u=new Float32Array([0,0,2,0,0,2]),h=new zt;h.setAttribute("position",new $t(c,3)),h.setAttribute("uv",new $t(u,2)),this.screen=new Sn(h,this.convolutionMaterial),this.screen.frustumCulled=!1,this.scene.add(this.screen)}render(e,n,i){const r=this.scene,s=this.camera,a=this.renderTargetA,o=this.renderTargetB;let l=this.convolutionMaterial,c=l.uniforms;c.depthBuffer.value=n.depthTexture;const u=l.kernel;let h=n,f,m,g;for(m=0,g=u.length-1;m<g;++m)f=m&1?o:a,c.kernel.value=u[m],c.inputBuffer.value=h.texture,e.setRenderTarget(f),e.render(r,s),h=f;c.kernel.value=u[m],c.inputBuffer.value=h.texture,e.setRenderTarget(this.renderToScreen?null:i),e.render(r,s)}}let E$=class extends Zh{constructor(e={}){super(e),this._tDepth={value:null},this._distortionMap={value:null},this._tDiffuse={value:null},this._tDiffuseBlur={value:null},this._textureMatrix={value:null},this._hasBlur={value:!1},this._mirror={value:0},this._mixBlur={value:0},this._blurStrength={value:.5},this._minDepthThreshold={value:.9},this._maxDepthThreshold={value:1},this._depthScale={value:0},this._depthToBlurRatioBias={value:.25},this._distortion={value:1},this._mixContrast={value:1},this.setValues(e)}onBeforeCompile(e){var n;(n=e.defines)!=null&&n.USE_UV||(e.defines.USE_UV=""),e.uniforms.hasBlur=this._hasBlur,e.uniforms.tDiffuse=this._tDiffuse,e.uniforms.tDepth=this._tDepth,e.uniforms.distortionMap=this._distortionMap,e.uniforms.tDiffuseBlur=this._tDiffuseBlur,e.uniforms.textureMatrix=this._textureMatrix,e.uniforms.mirror=this._mirror,e.uniforms.mixBlur=this._mixBlur,e.uniforms.mixStrength=this._blurStrength,e.uniforms.minDepthThreshold=this._minDepthThreshold,e.uniforms.maxDepthThreshold=this._maxDepthThreshold,e.uniforms.depthScale=this._depthScale,e.uniforms.depthToBlurRatioBias=this._depthToBlurRatioBias,e.uniforms.distortion=this._distortion,e.uniforms.mixContrast=this._mixContrast,e.vertexShader=`
        uniform mat4 textureMatrix;
        varying vec4 my_vUv;
      ${e.vertexShader}`,e.vertexShader=e.vertexShader.replace("#include <project_vertex>",`#include <project_vertex>
        my_vUv = textureMatrix * vec4( position, 1.0 );
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );`),e.fragmentShader=`
        uniform sampler2D tDiffuse;
        uniform sampler2D tDiffuseBlur;
        uniform sampler2D tDepth;
        uniform sampler2D distortionMap;
        uniform float distortion;
        uniform float cameraNear;
			  uniform float cameraFar;
        uniform bool hasBlur;
        uniform float mixBlur;
        uniform float mirror;
        uniform float mixStrength;
        uniform float minDepthThreshold;
        uniform float maxDepthThreshold;
        uniform float mixContrast;
        uniform float depthScale;
        uniform float depthToBlurRatioBias;
        varying vec4 my_vUv;
        ${e.fragmentShader}`,e.fragmentShader=e.fragmentShader.replace("#include <emissivemap_fragment>",`#include <emissivemap_fragment>

      float distortionFactor = 0.0;
      #ifdef USE_DISTORTION
        distortionFactor = texture2D(distortionMap, vUv).r * distortion;
      #endif

      vec4 new_vUv = my_vUv;
      new_vUv.x += distortionFactor;
      new_vUv.y += distortionFactor;

      vec4 base = texture2DProj(tDiffuse, new_vUv);
      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);

      vec4 merge = base;

      #ifdef USE_NORMALMAP
        vec2 normal_uv = vec2(0.0);
        vec4 normalColor = texture2D(normalMap, vUv * normalScale);
        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );
        vec3 coord = new_vUv.xyz / new_vUv.w;
        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;
        vec4 base_normal = texture2D(tDiffuse, normal_uv);
        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);
        merge = base_normal;
        blur = blur_normal;
      #endif

      float depthFactor = 0.0001;
      float blurFactor = 0.0;

      #ifdef USE_DEPTH
        vec4 depth = texture2DProj(tDepth, new_vUv);
        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));
        depthFactor *= depthScale;
        depthFactor = max(0.0001, min(1.0, depthFactor));

        #ifdef USE_BLUR
          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);
          merge = merge * min(1.0, depthFactor + 0.5);
        #else
          merge = merge * depthFactor;
        #endif

      #endif

      float reflectorRoughnessFactor = roughness;
      #ifdef USE_ROUGHNESSMAP
        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );
        reflectorRoughnessFactor *= reflectorTexelRoughness.g;
      #endif

      #ifdef USE_BLUR
        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);
        merge = mix(merge, blur, blurFactor);
      #endif

      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);
      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;
      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;
      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;

      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);
      `)}get tDiffuse(){return this._tDiffuse.value}set tDiffuse(e){this._tDiffuse.value=e}get tDepth(){return this._tDepth.value}set tDepth(e){this._tDepth.value=e}get distortionMap(){return this._distortionMap.value}set distortionMap(e){this._distortionMap.value=e}get tDiffuseBlur(){return this._tDiffuseBlur.value}set tDiffuseBlur(e){this._tDiffuseBlur.value=e}get textureMatrix(){return this._textureMatrix.value}set textureMatrix(e){this._textureMatrix.value=e}get hasBlur(){return this._hasBlur.value}set hasBlur(e){this._hasBlur.value=e}get mirror(){return this._mirror.value}set mirror(e){this._mirror.value=e}get mixBlur(){return this._mixBlur.value}set mixBlur(e){this._mixBlur.value=e}get mixStrength(){return this._blurStrength.value}set mixStrength(e){this._blurStrength.value=e}get minDepthThreshold(){return this._minDepthThreshold.value}set minDepthThreshold(e){this._minDepthThreshold.value=e}get maxDepthThreshold(){return this._maxDepthThreshold.value}set maxDepthThreshold(e){this._maxDepthThreshold.value=e}get depthScale(){return this._depthScale.value}set depthScale(e){this._depthScale.value=e}get depthToBlurRatioBias(){return this._depthToBlurRatioBias.value}set depthToBlurRatioBias(e){this._depthToBlurRatioBias.value=e}get distortion(){return this._distortion.value}set distortion(e){this._distortion.value=e}get mixContrast(){return this._mixContrast.value}set mixContrast(e){this._mixContrast.value=e}};const b$=D.forwardRef(({mixBlur:t=0,mixStrength:e=1,resolution:n=256,blur:i=[0,0],minDepthThreshold:r=.9,maxDepthThreshold:s=1,depthScale:a=0,depthToBlurRatioBias:o=.25,mirror:l=0,distortion:c=1,mixContrast:u=1,distortionMap:h,reflectorOffset:f=0,...m},g)=>{Vy({MeshReflectorMaterialImpl:E$});const y=Cn(({gl:O})=>O),x=Cn(({camera:O})=>O),v=Cn(({scene:O})=>O);i=Array.isArray(i)?i:[i,i];const _=i[0]+i[1]>0,S=D.useRef(null);D.useImperativeHandle(g,()=>S.current,[]);const[M]=D.useState(()=>new da),[b]=D.useState(()=>new K),[C]=D.useState(()=>new K),[B]=D.useState(()=>new K),[P]=D.useState(()=>new bt),[T]=D.useState(()=>new K(0,0,-1)),[I]=D.useState(()=>new on),[z]=D.useState(()=>new K),[G]=D.useState(()=>new K),[Q]=D.useState(()=>new on),[U]=D.useState(()=>new bt),[ee]=D.useState(()=>new Pn),$=D.useCallback(()=>{var O;const j=S.current.parent||((O=S.current)==null?void 0:O.__r3f.parent);if(!j||(C.setFromMatrixPosition(j.matrixWorld),B.setFromMatrixPosition(x.matrixWorld),P.extractRotation(j.matrixWorld),b.set(0,0,1),b.applyMatrix4(P),C.addScaledVector(b,f),z.subVectors(C,B),z.dot(b)>0))return;z.reflect(b).negate(),z.add(C),P.extractRotation(x.matrixWorld),T.set(0,0,-1),T.applyMatrix4(P),T.add(B),G.subVectors(C,T),G.reflect(b).negate(),G.add(C),ee.position.copy(z),ee.up.set(0,1,0),ee.up.applyMatrix4(P),ee.up.reflect(b),ee.lookAt(G),ee.far=x.far,ee.updateMatrixWorld(),ee.projectionMatrix.copy(x.projectionMatrix),U.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),U.multiply(ee.projectionMatrix),U.multiply(ee.matrixWorldInverse),U.multiply(j.matrixWorld),M.setFromNormalAndCoplanarPoint(b,C),M.applyMatrix4(ee.matrixWorldInverse),I.set(M.normal.x,M.normal.y,M.normal.z,M.constant);const W=ee.projectionMatrix;Q.x=(Math.sign(I.x)+W.elements[8])/W.elements[0],Q.y=(Math.sign(I.y)+W.elements[9])/W.elements[5],Q.z=-1,Q.w=(1+W.elements[10])/W.elements[14],I.multiplyScalar(2/I.dot(Q)),W.elements[2]=I.x,W.elements[6]=I.y,W.elements[10]=I.z+1,W.elements[14]=I.w},[x,f]),[oe,Z,J,H]=D.useMemo(()=>{const O={minFilter:kt,magFilter:kt,type:ei},j=new Mn(n,n,O);j.depthBuffer=!0,j.depthTexture=new Yh(n,n),j.depthTexture.format=eo,j.depthTexture.type=Vp;const W=new Mn(n,n,O),ne=new M$({gl:y,resolution:n,width:i[0],height:i[1],minDepthThreshold:r,maxDepthThreshold:s,depthScale:a,depthToBlurRatioBias:o}),ae={mirror:l,textureMatrix:U,mixBlur:t,tDiffuse:j.texture,tDepth:j.depthTexture,tDiffuseBlur:W.texture,hasBlur:_,mixStrength:e,minDepthThreshold:r,maxDepthThreshold:s,depthScale:a,depthToBlurRatioBias:o,distortion:c,distortionMap:h,mixContrast:u,"defines-USE_BLUR":_?"":void 0,"defines-USE_DEPTH":a>0?"":void 0,"defines-USE_DISTORTION":h?"":void 0};return[j,W,ne,ae]},[y,i,U,n,l,_,t,e,r,s,a,o,c,h,u]);return Ur(()=>{var O;const j=S.current.parent||((O=S.current)==null?void 0:O.__r3f.parent);if(!j)return;j.visible=!1;const W=y.xr.enabled,ne=y.shadowMap.autoUpdate;$(),y.xr.enabled=!1,y.shadowMap.autoUpdate=!1,y.setRenderTarget(oe),y.state.buffers.depth.setMask(!0),y.autoClear||y.clear(),y.render(v,ee),_&&J.render(y,oe,Z),y.xr.enabled=W,y.shadowMap.autoUpdate=ne,j.visible=!0,y.setRenderTarget(null)}),D.createElement("meshReflectorMaterialImpl",Sa({attach:"material",key:"key"+H["defines-USE_BLUR"]+H["defines-USE_DEPTH"]+H["defines-USE_DISTORTION"],ref:S},H,m))}),ca=1e-5;function T$(t,e,n){const i=new sl,r=n-ca;return i.absarc(ca,ca,ca,-Math.PI/2,-Math.PI,!0),i.absarc(ca,e-r*2,ca,Math.PI,Math.PI/2,!0),i.absarc(t-r*2,e-r*2,ca,Math.PI/2,0,!0),i.absarc(t-r*2,ca,ca,0,-Math.PI/2,!0),i}const C$=D.forwardRef(function({args:[e=1,n=1,i=1]=[],radius:r=.05,steps:s=1,smoothness:a=4,bevelSegments:o=4,creaseAngle:l=.4,children:c,...u},h){const f=D.useMemo(()=>T$(e,n,r),[e,n,r]),m=D.useMemo(()=>({depth:i-r*2,bevelEnabled:!0,bevelSegments:o*2,steps:s,bevelSize:r-ca,bevelThickness:r,curveSegments:a}),[i,r,a]),g=D.useRef(null);return D.useLayoutEffect(()=>{g.current&&(g.current.center(),uZ(g.current,l))},[f,m]),D.createElement("mesh",Sa({ref:h},u),D.createElement("extrudeGeometry",{ref:g,args:[f,m]}),c)}),QE=D.forwardRef(({children:t,enabled:e=!0,speed:n=1,rotationIntensity:i=1,floatIntensity:r=1,floatingRange:s=[-.1,.1],autoInvalidate:a=!1,...o},l)=>{const c=D.useRef(null);D.useImperativeHandle(l,()=>c.current,[]);const u=D.useRef(Math.random()*1e4);return Ur(h=>{var f,m;if(!e||n===0)return;a&&h.invalidate();const g=u.current+h.clock.elapsedTime;c.current.rotation.x=Math.cos(g/4*n)/8*i,c.current.rotation.y=Math.sin(g/4*n)/8*i,c.current.rotation.z=Math.sin(g/4*n)/20*i;let y=Math.sin(g/4*n)/10;y=pp.mapLinear(y,-.1,.1,(f=s==null?void 0:s[0])!==null&&f!==void 0?f:-.1,(m=s==null?void 0:s[1])!==null&&m!==void 0?m:.1),c.current.position.y=y*r,c.current.updateMatrix()}),D.createElement("group",o,D.createElement("group",{ref:c,matrixAutoUpdate:!1},t))}),ak=(t,e,n)=>{let i;switch(t){case vi:i=new Uint8ClampedArray(e*n*4);break;case ei:i=new Uint16Array(e*n*4);break;case zs:i=new Uint32Array(e*n*4);break;case IM:i=new Int8Array(e*n*4);break;case LM:i=new Int16Array(e*n*4);break;case gy:i=new Int32Array(e*n*4);break;case $n:i=new Float32Array(e*n*4);break;default:throw new Error("Unsupported data type")}return i};let _v;const R$=(t,e,n,i)=>{if(_v!==void 0)return _v;const r=new Mn(1,1,i);e.setRenderTarget(r);const s=new Sn(new Aa,new vr({color:16777215}));e.render(s,n),e.setRenderTarget(null);const a=ak(t,r.width,r.height);return e.readRenderTargetPixels(r,0,0,r.width,r.height,a),r.dispose(),s.geometry.dispose(),s.material.dispose(),_v=a[0]!==0,_v};class ZE{constructor(e){var n,i,r,s,a,o,l,c,u,h,f,m,g,y,x,v;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(S){throw this._renderer.setRenderTarget(null),S}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const _={format:gi,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((n=e.renderTargetOptions)===null||n===void 0?void 0:n.anisotropy)!==void 0?(i=e.renderTargetOptions)===null||i===void 0?void 0:i.anisotropy:1,generateMipmaps:((r=e.renderTargetOptions)===null||r===void 0?void 0:r.generateMipmaps)!==void 0?(s=e.renderTargetOptions)===null||s===void 0?void 0:s.generateMipmaps:!1,magFilter:((a=e.renderTargetOptions)===null||a===void 0?void 0:a.magFilter)!==void 0?(o=e.renderTargetOptions)===null||o===void 0?void 0:o.magFilter:kt,minFilter:((l=e.renderTargetOptions)===null||l===void 0?void 0:l.minFilter)!==void 0?(c=e.renderTargetOptions)===null||c===void 0?void 0:c.minFilter:kt,samples:((u=e.renderTargetOptions)===null||u===void 0?void 0:u.samples)!==void 0?(h=e.renderTargetOptions)===null||h===void 0?void 0:h.samples:void 0,wrapS:((f=e.renderTargetOptions)===null||f===void 0?void 0:f.wrapS)!==void 0?(m=e.renderTargetOptions)===null||m===void 0?void 0:m.wrapS:Dn,wrapT:((g=e.renderTargetOptions)===null||g===void 0?void 0:g.wrapT)!==void 0?(y=e.renderTargetOptions)===null||y===void 0?void 0:y.wrapT:Dn};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=ZE.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new gl,this._camera=new ws,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!R$(this._type,this._renderer,this._camera,_)){let S;switch(this._type){case ei:S=this._renderer.extensions.has("EXT_color_buffer_float")?$n:void 0;break}S!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${$n}`),this._type=S):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Sn(new Aa,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Mn(this.width,this.height,_),this._renderTarget.texture.mapping=((x=e.renderTargetOptions)===null||x===void 0?void 0:x.mapping)!==void 0?(v=e.renderTargetOptions)===null||v===void 0?void 0:v.mapping:dl}static instantiateRenderer(){const e=new wy;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=ak(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const n=new rl(this.toArray(),this.width,this.height,gi,this._type,(e==null?void 0:e.mapping)||dl,(e==null?void 0:e.wrapS)||Dn,(e==null?void 0:e.wrapT)||Dn,(e==null?void 0:e.magFilter)||kt,(e==null?void 0:e.minFilter)||kt,(e==null?void 0:e.anisotropy)||1,xr);return n.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,n}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof ti&&Object.values(this.material.uniforms).forEach(n=>{n.value instanceof pn&&n.value.dispose()}),Object.values(this.material).forEach(n=>{n instanceof pn&&n.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const P$=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,B$=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class I$ extends ti{constructor({gamma:e,offsetHdr:n,offsetSdr:i,gainMapMin:r,gainMapMax:s,maxDisplayBoost:a,hdrCapacityMin:o,hdrCapacityMax:l,sdr:c,gainMap:u}){super({name:"GainMapDecoderMaterial",vertexShader:P$,fragmentShader:B$,uniforms:{sdr:{value:c},gainMap:{value:u},gamma:{value:new K(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new K().fromArray(n)},offsetSdr:{value:new K().fromArray(i)},gainMapMin:{value:new K().fromArray(r)},gainMapMax:{value:new K().fromArray(s)},weightFactor:{value:(Math.log2(a)-o)/(l-o)}},blending:Di,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=a,this._hdrCapacityMin=o,this._hdrCapacityMax=l,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const n=this.uniforms.gamma.value;n.x=1/e[0],n.y=1/e[1],n.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class ok extends Error{}class lk extends Error{}const nf=(t,e,n)=>{const i=new RegExp(`${e}="([^"]*)"`,"i").exec(t);if(i)return i[1];const r=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(t);if(r){const s=r[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return s&&s.length===3?s.map(a=>a.replace(/<\/?rdf:li>/g,"")):r[1].trim()}if(n!==void 0)return n;throw new Error(`Can't find ${e} in gainmap metadata`)},L$=t=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(t):e=t.toString();let n=e.indexOf("<x:xmpmeta");for(;n!==-1;){const i=e.indexOf("x:xmpmeta>",n),r=e.slice(n,i+10);try{const s=nf(r,"hdrgm:GainMapMin","0"),a=nf(r,"hdrgm:GainMapMax"),o=nf(r,"hdrgm:Gamma","1"),l=nf(r,"hdrgm:OffsetSDR","0.015625"),c=nf(r,"hdrgm:OffsetHDR","0.015625"),u=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(r),h=u?u[1]:"0",f=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(r);if(!f)throw new Error("Incomplete gainmap metadata");const m=f[1];return{gainMapMin:Array.isArray(s)?s.map(g=>parseFloat(g)):[parseFloat(s),parseFloat(s),parseFloat(s)],gainMapMax:Array.isArray(a)?a.map(g=>parseFloat(g)):[parseFloat(a),parseFloat(a),parseFloat(a)],gamma:Array.isArray(o)?o.map(g=>parseFloat(g)):[parseFloat(o),parseFloat(o),parseFloat(o)],offsetSdr:Array.isArray(l)?l.map(g=>parseFloat(g)):[parseFloat(l),parseFloat(l),parseFloat(l)],offsetHdr:Array.isArray(c)?c.map(g=>parseFloat(g)):[parseFloat(c),parseFloat(c),parseFloat(c)],hdrCapacityMin:parseFloat(h),hdrCapacityMax:parseFloat(m)}}catch{}n=e.indexOf("<x:xmpmeta",i)}};class D${constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((n,i)=>{const r=this.options.debug,s=new DataView(e.buffer);if(s.getUint16(0)!==65496){i(new Error("Not a valid jpeg"));return}const a=s.byteLength;let o=2,l=0,c;for(;o<a;){if(++l>250){i(new Error(`Found no marker after ${l} loops 😵`));return}if(s.getUint8(o)!==255){i(new Error(`Not a valid marker at offset 0x${o.toString(16)}, found: 0x${s.getUint8(o).toString(16)}`));return}if(c=s.getUint8(o+1),r&&console.log(`Marker: ${c.toString(16)}`),c===226){r&&console.log("Found APP2 marker (0xffe2)");const u=o+4;if(s.getUint32(u)===1297106432){const h=u+4;let f;if(s.getUint16(h)===18761)f=!1;else if(s.getUint16(h)===19789)f=!0;else{i(new Error("No valid endianness marker found in TIFF header"));return}if(s.getUint16(h+2,!f)!==42){i(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const m=s.getUint32(h+4,!f);if(m<8){i(new Error("Not valid TIFF data! (First offset less than 8)"));return}const g=h+m,y=s.getUint16(g,!f),x=g+2;let v=0;for(let b=x;b<x+12*y;b+=12)s.getUint16(b,!f)===45057&&(v=s.getUint32(b+8,!f));const S=g+2+y*12+4,M=[];for(let b=S;b<S+v*16;b+=16){const C={MPType:s.getUint32(b,!f),size:s.getUint32(b+4,!f),dataOffset:s.getUint32(b+8,!f),dependantImages:s.getUint32(b+12,!f),start:-1,end:-1,isFII:!1};C.dataOffset?(C.start=h+C.dataOffset,C.isFII=!1):(C.start=0,C.isFII=!0),C.end=C.start+C.size,M.push(C)}if(this.options.extractNonFII&&M.length){const b=new Blob([s]),C=[];for(const B of M){if(B.isFII&&!this.options.extractFII)continue;const P=b.slice(B.start,B.end+1,"image/jpeg");C.push(P)}n(C)}}}o+=2+s.getUint16(o+2)}})}}const N$=async t=>{const e=L$(t);if(!e)throw new lk("Gain map XMP metadata not found");const i=await new D$({extractFII:!0,extractNonFII:!0}).extract(t);if(i.length!==2)throw new ok("Gain map recovery image not found");return{sdr:new Uint8Array(await i[0].arrayBuffer()),gainMap:new Uint8Array(await i[1].arrayBuffer()),metadata:e}},RB=t=>new Promise((e,n)=>{const i=document.createElement("img");i.onload=()=>{e(i)},i.onerror=r=>{n(r)},i.src=URL.createObjectURL(t)});class ck extends Wi{constructor(e,n){super(n),e&&(this._renderer=e),this._internalLoadingManager=new zy}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new I$({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new pn,sdr:new pn});return new ZE({width:16,height:16,type:ei,colorSpace:xr,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,n,i,r){const s=r?new Blob([r],{type:"image/jpeg"}):void 0,a=new Blob([i],{type:"image/jpeg"});let o,l,c=!1;if(typeof createImageBitmap>"u"){const f=await Promise.all([s?RB(s):Promise.resolve(void 0),RB(a)]);l=f[0],o=f[1],c=!0}else{const f=await Promise.all([s?createImageBitmap(s,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(a,{imageOrientation:"flipY"})]);l=f[0],o=f[1]}const u=new pn(l||new ImageData(2,2),dl,Dn,Dn,kt,tA,gi,vi,1,xr);u.flipY=c,u.needsUpdate=!0;const h=new pn(o,dl,Dn,Dn,kt,tA,gi,vi,1,sn);h.flipY=c,h.needsUpdate=!0,e.width=o.width,e.height=o.height,e.material.gainMap=u,e.material.sdr=h,e.material.gainMapMin=n.gainMapMin,e.material.gainMapMax=n.gainMapMax,e.material.offsetHdr=n.offsetHdr,e.material.offsetSdr=n.offsetSdr,e.material.gamma=n.gamma,e.material.hdrCapacityMin=n.hdrCapacityMin,e.material.hdrCapacityMax=n.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,n.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class F$ extends ck{load([e,n,i],r,s,a){const o=this.prepareQuadRenderer();let l,c,u;const h=async()=>{if(l&&c&&u){try{await this.render(o,u,l,c)}catch(T){this.manager.itemError(e),this.manager.itemError(n),this.manager.itemError(i),typeof a=="function"&&a(T),o.disposeOnDemandRenderer();return}typeof r=="function"&&r(o),this.manager.itemEnd(e),this.manager.itemEnd(n),this.manager.itemEnd(i),o.disposeOnDemandRenderer()}};let f=!0,m=0,g=0,y=!0,x=0,v=0,_=!0,S=0,M=0;const b=()=>{if(typeof s=="function"){const T=m+x+S,I=g+v+M,z=f&&y&&_;s(new ProgressEvent("progress",{lengthComputable:z,loaded:I,total:T}))}};this.manager.itemStart(e),this.manager.itemStart(n),this.manager.itemStart(i);const C=new Vi(this._internalLoadingManager);C.setResponseType("arraybuffer"),C.setRequestHeader(this.requestHeader),C.setPath(this.path),C.setWithCredentials(this.withCredentials),C.load(e,async T=>{if(typeof T=="string")throw new Error("Invalid sdr buffer");l=T,await h()},T=>{f=T.lengthComputable,g=T.loaded,m=T.total,b()},T=>{this.manager.itemError(e),typeof a=="function"&&a(T)});const B=new Vi(this._internalLoadingManager);B.setResponseType("arraybuffer"),B.setRequestHeader(this.requestHeader),B.setPath(this.path),B.setWithCredentials(this.withCredentials),B.load(n,async T=>{if(typeof T=="string")throw new Error("Invalid gainmap buffer");c=T,await h()},T=>{y=T.lengthComputable,v=T.loaded,x=T.total,b()},T=>{this.manager.itemError(n),typeof a=="function"&&a(T)});const P=new Vi(this._internalLoadingManager);return P.setRequestHeader(this.requestHeader),P.setPath(this.path),P.setWithCredentials(this.withCredentials),P.load(i,async T=>{if(typeof T!="string")throw new Error("Invalid metadata string");u=JSON.parse(T),await h()},T=>{_=T.lengthComputable,M=T.loaded,S=T.total,b()},T=>{this.manager.itemError(i),typeof a=="function"&&a(T)}),o}}class U$ extends ck{load(e,n,i,r){const s=this.prepareQuadRenderer(),a=new Vi(this._internalLoadingManager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(this.withCredentials),this.manager.itemStart(e),a.load(e,async o=>{if(typeof o=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const l=new Uint8Array(o);let c,u,h;try{const f=await N$(l);c=f.sdr,u=f.gainMap,h=f.metadata}catch(f){if(f instanceof lk||f instanceof ok)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),h={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},c=l;else throw f}try{await this.render(s,h,c,u)}catch(f){this.manager.itemError(e),typeof r=="function"&&r(f),s.disposeOnDemandRenderer();return}typeof n=="function"&&n(s),this.manager.itemEnd(e),s.disposeOnDemandRenderer()},i,o=>{this.manager.itemError(e),typeof r=="function"&&r(o)}),s}}const Rp={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},uk="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",Sh=t=>Array.isArray(t),qE=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function qy({files:t=qE,path:e="",preset:n=void 0,encoding:i=void 0,extensions:r}={}){let s=null,a=!1;n&&($E(n),t=Rp[n],e=uk),a=Sh(t);const{extension:o,isCubemap:l}=eb(t);if(s=tb(o),!s)throw new Error("useEnvironment: Unrecognized file extension: "+t);const c=Cn(m=>m.gl);D.useLayoutEffect(()=>{if(o!=="webp"&&o!=="jpg"&&o!=="jpeg")return;function m(){uo.clear(s,a?[t]:t)}c.domElement.addEventListener("webglcontextlost",m,{once:!0})},[t,c.domElement]);const u=uo(s,a?[t]:t,m=>{(o==="webp"||o==="jpg"||o==="jpeg")&&m.setRenderer(c),m.setPath==null||m.setPath(e),r&&r(m)});let h=a?u[0]:u;if(o==="jpg"||o==="jpeg"||o==="webp"){var f;h=(f=h.renderTarget)==null?void 0:f.texture}return h.mapping=l?xa:Ih,"colorSpace"in h?h.colorSpace=i??l?"srgb":"srgb-linear":h.encoding=i??l?A$:S$,h}const k$={files:qE,path:"",preset:void 0,extensions:void 0};qy.preload=t=>{const e={...k$,...t};let{files:n,path:i=""}=e;const{preset:r,extensions:s}=e;r&&($E(r),n=Rp[r],i=uk);const{extension:a}=eb(n);if(a==="webp"||a==="jpg"||a==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const o=tb(a);if(!o)throw new Error("useEnvironment: Unrecognized file extension: "+n);uo.preload(o,Sh(n)?[n]:n,l=>{l.setPath==null||l.setPath(i),s&&s(l)})};const O$={files:qE,preset:void 0};qy.clear=t=>{const e={...O$,...t};let{files:n}=e;const{preset:i}=e;i&&($E(i),n=Rp[i]);const{extension:r}=eb(n),s=tb(r);if(!s)throw new Error("useEnvironment: Unrecognized file extension: "+n);uo.clear(s,Sh(n)?[n]:n)};function $E(t){if(!(t in Rp))throw new Error("Preset must be one of: "+Object.keys(Rp).join(", "))}function eb(t){var e;const n=Sh(t)&&t.length===6,i=Sh(t)&&t.length===3&&t.some(a=>a.endsWith("json")),r=Sh(t)?t[0]:t;return{extension:n?"cube":i?"webp":r.startsWith("data:application/exr")?"exr":r.startsWith("data:application/hdr")?"hdr":r.startsWith("data:image/jpeg")?"jpg":(e=r.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:n,isGainmap:i}}function tb(t){return t==="cube"?SF:t==="hdr"?mq:t==="exr"?gq:t==="jpg"||t==="jpeg"?U$:t==="webp"?F$:null}const G$=t=>t.current&&t.current.isScene,z$=t=>G$(t)?t.current:t;function nb(t,e,n,i,r={}){var s,a,o,l;r={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...r};const c=z$(e||n),u=c.background,h=c.environment,f={backgroundBlurriness:c.backgroundBlurriness,backgroundIntensity:c.backgroundIntensity,backgroundRotation:(s=(a=c.backgroundRotation)==null||a.clone==null?void 0:a.clone())!==null&&s!==void 0?s:[0,0,0],environmentIntensity:c.environmentIntensity,environmentRotation:(o=(l=c.environmentRotation)==null||l.clone==null?void 0:l.clone())!==null&&o!==void 0?o:[0,0,0]};return t!=="only"&&(c.environment=i),t&&(c.background=i),Va(c,r),()=>{t!=="only"&&(c.environment=h),t&&(c.background=u),Va(c,f)}}function ib({scene:t,background:e=!1,map:n,...i}){const r=Cn(s=>s.scene);return D.useLayoutEffect(()=>{if(n)return nb(e,t,r,n,i)}),null}function hk({background:t=!1,scene:e,blur:n,backgroundBlurriness:i,backgroundIntensity:r,backgroundRotation:s,environmentIntensity:a,environmentRotation:o,...l}){const c=qy(l),u=Cn(h=>h.scene);return D.useLayoutEffect(()=>nb(t,e,u,c,{backgroundBlurriness:n??i,backgroundIntensity:r,backgroundRotation:s,environmentIntensity:a,environmentRotation:o})),D.useEffect(()=>()=>{c.dispose()},[c]),null}function H$({children:t,near:e=.1,far:n=1e3,resolution:i=256,frames:r=1,map:s,background:a=!1,blur:o,backgroundBlurriness:l,backgroundIntensity:c,backgroundRotation:u,environmentIntensity:h,environmentRotation:f,scene:m,files:g,path:y,preset:x=void 0,extensions:v}){const _=Cn(P=>P.gl),S=Cn(P=>P.scene),M=D.useRef(null),[b]=D.useState(()=>new gl),C=D.useMemo(()=>{const P=new qM(i);return P.texture.type=ei,P},[i]);D.useEffect(()=>()=>{C.dispose()},[C]),D.useLayoutEffect(()=>{if(r===1){const P=_.autoClear;_.autoClear=!0,M.current.update(_,b),_.autoClear=P}return nb(a,m,S,C.texture,{backgroundBlurriness:o??l,backgroundIntensity:c,backgroundRotation:u,environmentIntensity:h,environmentRotation:f})},[t,b,C.texture,m,S,a,r,_]);let B=1;return Ur(()=>{if(r===1/0||B<r){const P=_.autoClear;_.autoClear=!0,M.current.update(_,b),_.autoClear=P,B++}}),D.createElement(D.Fragment,null,SK(D.createElement(D.Fragment,null,t,D.createElement("cubeCamera",{ref:M,args:[e,n,C]}),g||x?D.createElement(hk,{background:!0,files:g,preset:x,path:y,extensions:v}):s?D.createElement(ib,{background:!0,map:s,extensions:v}):null),b))}function V$(t){var e,n,i,r;const s=qy(t),a=t.map||s;D.useMemo(()=>Vy({GroundProjectedEnvImpl:EZ}),[]),D.useEffect(()=>()=>{s.dispose()},[s]);const o=D.useMemo(()=>[a],[a]),l=(e=t.ground)==null?void 0:e.height,c=(n=t.ground)==null?void 0:n.radius,u=(i=(r=t.ground)==null?void 0:r.scale)!==null&&i!==void 0?i:1e3;return D.createElement(D.Fragment,null,D.createElement(ib,Sa({},t,{map:a})),D.createElement("groundProjectedEnvImpl",{args:o,scale:u,height:l,radius:c}))}function j$(t){return t.ground?D.createElement(V$,t):t.map?D.createElement(ib,t):t.children?D.createElement(H$,t):D.createElement(hk,t)}/**
 * postprocessing v6.37.6 build Fri Jul 04 2025
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2025 Raoul van Rüschen
 * @license Zlib
 */var O_=1/1e3,W$=1e3,X$=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(t){typeof document<"u"&&document.hidden!==void 0&&(t?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=t)}get delta(){return this._delta*O_}get fixedDelta(){return this._fixedDelta*O_}set fixedDelta(t){this._fixedDelta=t*W$}get elapsed(){return this._elapsed*O_}update(t){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(t!==void 0?t:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}getDelta(){return this.delta}getElapsed(){return this.elapsed}handleEvent(t){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},J$=(()=>{const t=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]),n=new zt;return n.setAttribute("position",new $t(t,3)),n.setAttribute("uv",new $t(e,2)),n})(),kr=class aw{static get fullscreenGeometry(){return J$}constructor(e="Pass",n=new gl,i=new qc){this.name=e,this.renderer=null,this.scene=n,this.camera=i,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){const n=this.fullscreenMaterial;n!==null&&(n.needsUpdate=!0),this.rtt=!e}}set mainScene(e){}set mainCamera(e){}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let n=this.screen;n!==null?n.material=e:(n=new Sn(aw.fullscreenGeometry,e),n.frustumCulled=!1,this.scene===null&&(this.scene=new gl),this.scene.add(n),this.screen=n)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,n=Tl){}render(e,n,i,r,s){throw new Error("Render method not implemented!")}setSize(e,n){}initialize(e,n,i){}dispose(){for(const e of Object.keys(this)){const n=this[e];(n instanceof Mn||n instanceof ui||n instanceof pn||n instanceof aw)&&this[e].dispose()}this.fullscreenMaterial!==null&&this.fullscreenMaterial.dispose()}},Y$=class extends kr{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(t,e,n,i,r){const s=t.state.buffers.stencil;s.setLocked(!1),s.setTest(!1)}},K$=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <colorspace_fragment>
#include <dithering_fragment>
}`,dk="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",fk=class extends ti{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new Ut(null),opacity:new Ut(1)},blending:Di,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:K$,vertexShader:dk})}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}getOpacity(t){return this.uniforms.opacity.value}setOpacity(t){this.uniforms.opacity.value=t}},Q$=class extends kr{constructor(t,e=!0){super("CopyPass"),this.fullscreenMaterial=new fk,this.needsSwap=!1,this.renderTarget=t,t===void 0&&(this.renderTarget=new Mn(1,1,{minFilter:kt,magFilter:kt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(t){this.autoResize=t}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(t){this.autoResize=t}render(t,e,n,i,r){this.fullscreenMaterial.inputBuffer=e.texture,t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){this.autoResize&&this.renderTarget.setSize(t,e)}initialize(t,e,n){n!==void 0&&(this.renderTarget.texture.type=n,n!==vi?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":t!==null&&t.outputColorSpace===sn&&(this.renderTarget.texture.colorSpace=sn))}},PB=new ht,pk=class extends kr{constructor(t=!0,e=!0,n=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=t,this.depth=e,this.stencil=n,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(t,e,n){this.color=t,this.depth=e,this.stencil=n}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(t){this.overrideClearColor=t}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(t){this.overrideClearAlpha=t}render(t,e,n,i,r){const s=this.overrideClearColor,a=this.overrideClearAlpha,o=t.getClearAlpha(),l=s!==null,c=a>=0;l?(t.getClearColor(PB),t.setClearColor(s,c?a:o)):c&&t.setClearAlpha(a),t.setRenderTarget(this.renderToScreen?null:e),t.clear(this.color,this.depth,this.stencil),l?t.setClearColor(PB,o):c&&t.setClearAlpha(o)}},Z$=class extends kr{constructor(t,e){super("MaskPass",t,e),this.needsSwap=!1,this.clearPass=new pk(!1,!1,!0),this.inverse=!1}set mainScene(t){this.scene=t}set mainCamera(t){this.camera=t}get inverted(){return this.inverse}set inverted(t){this.inverse=t}get clear(){return this.clearPass.enabled}set clear(t){this.clearPass.enabled=t}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(t){this.inverted=t}render(t,e,n,i,r){const s=t.getContext(),a=t.state.buffers,o=this.scene,l=this.camera,c=this.clearPass,u=this.inverted?0:1,h=1-u;a.color.setMask(!1),a.depth.setMask(!1),a.color.setLocked(!0),a.depth.setLocked(!0),a.stencil.setTest(!0),a.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),a.stencil.setFunc(s.ALWAYS,u,4294967295),a.stencil.setClear(h),a.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?c.render(t,null):(c.render(t,e),c.render(t,n))),this.renderToScreen?(t.setRenderTarget(null),t.render(o,l)):(t.setRenderTarget(e),t.render(o,l),t.setRenderTarget(n),t.render(o,l)),a.color.setLocked(!1),a.depth.setLocked(!1),a.stencil.setLocked(!1),a.stencil.setFunc(s.EQUAL,1,4294967295),a.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),a.stencil.setLocked(!0)}},q$=class{constructor(e=null,{depthBuffer:n=!0,stencilBuffer:i=!1,multisampling:r=0,frameBufferType:s}={}){this.renderer=null,this.inputBuffer=this.createBuffer(n,i,s,r),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new Q$,this.depthTexture=null,this.passes=[],this.timer=new X$,this.autoRenderToScreen=!0,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){const n=this.inputBuffer,i=this.multisampling;i>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):i!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(n.depthBuffer,n.stencilBuffer,n.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){if(this.renderer=e,e!==null){const n=e.getSize(new Ie),i=e.getContext().getContextAttributes().alpha,r=this.inputBuffer.texture.type;r===vi&&e.outputColorSpace===sn&&(this.inputBuffer.texture.colorSpace=sn,this.outputBuffer.texture.colorSpace=sn,this.inputBuffer.dispose(),this.outputBuffer.dispose()),e.autoClear=!1,this.setSize(n.width,n.height);for(const s of this.passes)s.initialize(e,i,r)}}replaceRenderer(e,n=!0){const i=this.renderer,r=i.domElement.parentNode;return this.setRenderer(e),n&&r!==null&&(r.removeChild(i.domElement),r.appendChild(e.domElement)),i}createDepthTexture(){const e=this.depthTexture=new Yh;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=ml,e.type=$a):e.type=zs,e}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const e of this.passes)e.setDepthTexture(null)}}createBuffer(e,n,i,r){const s=this.renderer,a=s===null?new Ie:s.getDrawingBufferSize(new Ie),o={minFilter:kt,magFilter:kt,stencilBuffer:n,depthBuffer:e,type:i},l=new Mn(a.width,a.height,o);return r>0&&(l.ignoreDepthForMultisampleCopy=!1,l.samples=r),i===vi&&s!==null&&s.outputColorSpace===sn&&(l.texture.colorSpace=sn),l.texture.name="EffectComposer.Buffer",l.texture.generateMipmaps=!1,l}setMainScene(e){for(const n of this.passes)n.mainScene=e}setMainCamera(e){for(const n of this.passes)n.mainCamera=e}addPass(e,n){const i=this.passes,r=this.renderer,s=r.getDrawingBufferSize(new Ie),a=r.getContext().getContextAttributes().alpha,o=this.inputBuffer.texture.type;if(e.setRenderer(r),e.setSize(s.width,s.height),e.initialize(r,a,o),this.autoRenderToScreen&&(i.length>0&&(i[i.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),n!==void 0?i.splice(n,0,e):i.push(e),this.autoRenderToScreen&&(i[i.length-1].renderToScreen=!0),e.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const l=this.createDepthTexture();for(e of i)e.setDepthTexture(l)}else e.setDepthTexture(this.depthTexture)}removePass(e){const n=this.passes,i=n.indexOf(e);if(i!==-1&&n.splice(i,1).length>0){if(this.depthTexture!==null){const a=(l,c)=>l||c.needsDepthTexture;n.reduce(a,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&i===n.length&&(e.renderToScreen=!1,n.length>0&&(n[n.length-1].renderToScreen=!0))}}removeAllPasses(){const e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){const n=this.renderer,i=this.copyPass;let r=this.inputBuffer,s=this.outputBuffer,a=!1,o,l,c;e===void 0&&(this.timer.update(),e=this.timer.getDelta());for(const u of this.passes)u.enabled&&(u.render(n,r,s,e,a),u.needsSwap&&(a&&(i.renderToScreen=u.renderToScreen,o=n.getContext(),l=n.state.buffers.stencil,l.setFunc(o.NOTEQUAL,1,4294967295),i.render(n,r,s,e,a),l.setFunc(o.EQUAL,1,4294967295)),c=r,r=s,s=c),u instanceof Z$?a=!0:u instanceof Y$&&(a=!1))}setSize(e,n,i){const r=this.renderer,s=r.getSize(new Ie);(e===void 0||n===void 0)&&(e=s.width,n=s.height),(s.width!==e||s.height!==n)&&r.setSize(e,n,i);const a=r.getDrawingBufferSize(new Ie);this.inputBuffer.setSize(a.width,a.height),this.outputBuffer.setSize(a.width,a.height);for(const o of this.passes)o.setSize(a.width,a.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const e of this.passes)e.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose(),kr.fullscreenGeometry.dispose()}},no={NONE:0,DEPTH:1,CONVOLUTION:2},fn={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},$$=class{constructor(){this.shaderParts=new Map([[fn.FRAGMENT_HEAD,null],[fn.FRAGMENT_MAIN_UV,null],[fn.FRAGMENT_MAIN_IMAGE,null],[fn.VERTEX_HEAD,null],[fn.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=no.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=xr}},G_=!1,BB=class{constructor(t=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(t),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let n;if(e.material.flatShading)switch(e.material.side){case Ii:n=this.materialsFlatShadedDoubleSide;break;case Ai:n=this.materialsFlatShadedBackSide;break;default:n=this.materialsFlatShaded;break}else switch(e.material.side){case Ii:n=this.materialsDoubleSide;break;case Ai:n=this.materialsBackSide;break;default:n=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=n[2]:e.isInstancedMesh?e.material=n[1]:e.material=n[0],++this.meshCount}}}cloneMaterial(t){if(!(t instanceof ti))return t.clone();const e=t.uniforms,n=new Map;for(const r in e){const s=e[r].value;s.isRenderTargetTexture&&(e[r].value=null,n.set(r,s))}const i=t.clone();for(const r of n)e[r[0]].value=r[1],i.uniforms[r[0]].value=r[1];return i}setMaterial(t){if(this.disposeMaterials(),this.material=t,t!==null){const e=this.materials=[this.cloneMaterial(t),this.cloneMaterial(t),this.cloneMaterial(t)];for(const n of e)n.uniforms=Object.assign({},t.uniforms),n.side=Ks;e[2].skinning=!0,this.materialsBackSide=e.map(n=>{const i=this.cloneMaterial(n);return i.uniforms=Object.assign({},t.uniforms),i.side=Ai,i}),this.materialsDoubleSide=e.map(n=>{const i=this.cloneMaterial(n);return i.uniforms=Object.assign({},t.uniforms),i.side=Ii,i}),this.materialsFlatShaded=e.map(n=>{const i=this.cloneMaterial(n);return i.uniforms=Object.assign({},t.uniforms),i.flatShading=!0,i}),this.materialsFlatShadedBackSide=e.map(n=>{const i=this.cloneMaterial(n);return i.uniforms=Object.assign({},t.uniforms),i.flatShading=!0,i.side=Ai,i}),this.materialsFlatShadedDoubleSide=e.map(n=>{const i=this.cloneMaterial(n);return i.uniforms=Object.assign({},t.uniforms),i.flatShading=!0,i.side=Ii,i})}}render(t,e,n){const i=t.shadowMap.enabled;if(t.shadowMap.enabled=!1,G_){const r=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),t.render(e,n);for(const s of r)s[0].material=s[1];this.meshCount!==r.size&&r.clear()}else{const r=e.overrideMaterial;e.overrideMaterial=this.material,t.render(e,n),e.overrideMaterial=r}t.shadowMap.enabled=i}disposeMaterials(){if(this.material!==null){const t=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of t)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return G_}static set workaroundEnabled(t){G_=t}},No=-1,ir=class extends bs{constructor(t,e=No,n=No,i=1){super(),this.resizable=t,this.baseSize=new Ie(1,1),this.preferredSize=new Ie(e,n),this.target=this.preferredSize,this.s=i,this.effectiveSize=new Ie,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const t=this.baseSize,e=this.preferredSize,n=this.effectiveSize,i=this.scale;e.width!==No?n.width=e.width:e.height!==No?n.width=Math.round(e.height*(t.width/Math.max(t.height,1))):n.width=Math.round(t.width*i),e.height!==No?n.height=e.height:e.width!==No?n.height=Math.round(e.width/Math.max(t.width/Math.max(t.height,1),1)):n.height=Math.round(t.height*i)}get width(){return this.effectiveSize.width}set width(t){this.preferredWidth=t}get height(){return this.effectiveSize.height}set height(t){this.preferredHeight=t}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(t){this.s!==t&&(this.s=t,this.preferredSize.setScalar(No),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(t){this.scale=t}get baseWidth(){return this.baseSize.width}set baseWidth(t){this.baseSize.width!==t&&(this.baseSize.width=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(t){this.baseWidth=t}get baseHeight(){return this.baseSize.height}set baseHeight(t){this.baseSize.height!==t&&(this.baseSize.height=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(t){this.baseHeight=t}setBaseSize(t,e){(this.baseSize.width!==t||this.baseSize.height!==e)&&(this.baseSize.set(t,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(t){this.preferredSize.width!==t&&(this.preferredSize.width=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(t){this.preferredWidth=t}get preferredHeight(){return this.preferredSize.height}set preferredHeight(t){this.preferredSize.height!==t&&(this.preferredSize.height=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(t){this.preferredHeight=t}setPreferredSize(t,e){(this.preferredSize.width!==t||this.preferredSize.height!==e)&&(this.preferredSize.set(t,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(t){this.s=t.scale,this.baseSize.set(t.baseWidth,t.baseHeight),this.preferredSize.set(t.preferredWidth,t.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return No}},tn={ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},eee="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb+y.rgb,y.a),opacity);}",tee="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,y.a*opacity);}",nee="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4((x.rgb+y.rgb)*0.5,y.a),opacity);}",iee="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.xy,xHSL.z));return mix(x,vec4(z,y.a),opacity);}",ree="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=x.rgb,b=y.rgb;vec3 z=mix(step(0.0,b)*(1.0-min(vec3(1.0),(1.0-a)/b)),vec3(1.0),step(1.0,a));return mix(x,vec4(z,y.a),opacity);}",see="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=x.rgb,b=y.rgb;vec3 z=step(0.0,a)*mix(min(vec3(1.0),a/max(1.0-b,1e-9)),vec3(1.0),step(1.0,b));return mix(x,vec4(z,y.a),opacity);}",aee="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(min(x.rgb,y.rgb),y.a),opacity);}",oee="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(abs(x.rgb-y.rgb),y.a),opacity);}",lee="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb/max(y.rgb,1e-12),y.a),opacity);}",cee="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4((x.rgb+y.rgb-2.0*x.rgb*y.rgb),y.a),opacity);}",uee="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=min(x.rgb,1.0);vec3 b=min(y.rgb,1.0);vec3 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,b));return mix(x,vec4(z,y.a),opacity);}",hee="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(step(1.0,x.rgb+y.rgb),y.a),opacity);}",dee="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.x,xHSL.yz));return mix(x,vec4(z,y.a),opacity);}",fee="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(1.0-y.rgb,y.a),opacity);}",pee="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(y.rgb*(1.0-x.rgb),y.a),opacity);}",mee="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(max(x.rgb,y.rgb),y.a),opacity);}",gee="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(clamp(y.rgb+x.rgb-1.0,0.0,1.0),y.a),opacity);}",vee="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(min(x.rgb+y.rgb,1.0),y.a),opacity);}",yee="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(clamp(2.0*y.rgb+x.rgb-1.0,0.0,1.0),y.a),opacity);}",xee="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.xy,yHSL.z));return mix(x,vec4(z,y.a),opacity);}",_ee="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb*y.rgb,y.a),opacity);}",See="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(1.0-abs(1.0-x.rgb-y.rgb),y.a),opacity);}",Aee="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",wee="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 z=mix(2.0*y.rgb*x.rgb,1.0-2.0*(1.0-y.rgb)*(1.0-x.rgb),step(0.5,x.rgb));return mix(x,vec4(z,y.a),opacity);}",Mee="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 y2=2.0*y.rgb;vec3 z=mix(mix(y2,x.rgb,step(0.5*x.rgb,y.rgb)),max(y2-1.0,vec3(0.0)),step(x.rgb,y2-1.0));return mix(x,vec4(z,y.a),opacity);}",Eee="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 z=mix(min(x.rgb*x.rgb/max(1.0-y.rgb,1e-12),1.0),y.rgb,step(1.0,y.rgb));return mix(x,vec4(z,y.a),opacity);}",bee="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.x,yHSL.y,xHSL.z));return mix(x,vec4(z,y.a),opacity);}",Tee="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb+y.rgb-min(x.rgb*y.rgb,1.0),y.a),opacity);}",Cee="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=x.rgb;vec3 b=y.rgb;vec3 y2=2.0*b;vec3 w=step(0.5,b);vec3 c=a-(1.0-y2)*a*(1.0-a);vec3 d=mix(a+(y2-1.0)*(sqrt(a)-a),a+(y2-1.0)*a*((16.0*a-12.0)*a+3.0),w*(1.0-step(0.25,a)));vec3 z=mix(c,d,w);return mix(x,vec4(z,y.a),opacity);}",Ree="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",Pee="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(max(x.rgb+y.rgb-1.0,0.0),y.a),opacity);}",Bee="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 z=mix(max(1.0-min((1.0-x.rgb)/(2.0*y.rgb),1.0),0.0),min(x.rgb/(2.0*(1.0-y.rgb)),1.0),step(0.5,y.rgb));return mix(x,vec4(z,y.a),opacity);}",Iee=new Map([[tn.ADD,eee],[tn.ALPHA,tee],[tn.AVERAGE,nee],[tn.COLOR,iee],[tn.COLOR_BURN,ree],[tn.COLOR_DODGE,see],[tn.DARKEN,aee],[tn.DIFFERENCE,oee],[tn.DIVIDE,lee],[tn.DST,null],[tn.EXCLUSION,cee],[tn.HARD_LIGHT,uee],[tn.HARD_MIX,hee],[tn.HUE,dee],[tn.INVERT,fee],[tn.INVERT_RGB,pee],[tn.LIGHTEN,mee],[tn.LINEAR_BURN,gee],[tn.LINEAR_DODGE,vee],[tn.LINEAR_LIGHT,yee],[tn.LUMINOSITY,xee],[tn.MULTIPLY,_ee],[tn.NEGATION,See],[tn.NORMAL,Aee],[tn.OVERLAY,wee],[tn.PIN_LIGHT,Mee],[tn.REFLECT,Eee],[tn.SATURATION,bee],[tn.SCREEN,Tee],[tn.SOFT_LIGHT,Cee],[tn.SRC,Ree],[tn.SUBTRACT,Pee],[tn.VIVID_LIGHT,Bee]]),Lee=class extends bs{constructor(t,e=1){super(),this._blendFunction=t,this.opacity=new Ut(e)}getOpacity(){return this.opacity.value}setOpacity(t){this.opacity.value=t}get blendFunction(){return this._blendFunction}set blendFunction(t){this._blendFunction=t,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(t){this.blendFunction=t}getShaderCode(){return Iee.get(this.blendFunction)}},ow=class extends bs{constructor(t,e,{attributes:n=no.NONE,blendFunction:i=tn.NORMAL,defines:r=new Map,uniforms:s=new Map,extensions:a=null,vertexShader:o=null}={}){super(),this.name=t,this.renderer=null,this.attributes=n,this.fragmentShader=e,this.vertexShader=o,this.defines=r,this.uniforms=s,this.extensions=a,this.blendMode=new Lee(i),this.blendMode.addEventListener("change",l=>this.setChanged()),this._inputColorSpace=xr,this._outputColorSpace=gr}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(t){this._inputColorSpace=t,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t,this.setChanged()}set mainScene(t){}set mainCamera(t){}getName(){return this.name}setRenderer(t){this.renderer=t}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(t){this.attributes=t,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(t){this.fragmentShader=t,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(t){this.vertexShader=t,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(t,e=Tl){}update(t,e,n){}setSize(t,e){}initialize(t,e,n){}dispose(){for(const t of Object.keys(this)){const e=this[t];(e instanceof Mn||e instanceof ui||e instanceof pn||e instanceof kr)&&this[t].dispose()}}},rb={MEDIUM:2,LARGE:3},Dee=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,Nee="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",Fee=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],Uee=class extends ti{constructor(t=new on){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new Ut(null),texelSize:new Ut(new on),scale:new Ut(1),kernel:new Ut(0)},blending:Di,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Dee,vertexShader:Nee}),this.setTexelSize(t.x,t.y),this.kernelSize=rb.MEDIUM}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.inputBuffer=t}get kernelSequence(){return Fee[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(t){this.uniforms.scale.value=t}getScale(){return this.uniforms.scale.value}setScale(t){this.uniforms.scale.value=t}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(t){this.uniforms.kernel.value=t}setKernel(t){this.kernel=t}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e,t*.5,e*.5)}setSize(t,e){const n=1/t,i=1/e;this.uniforms.texelSize.value.set(n,i,n*.5,i*.5)}},kee=class extends kr{constructor({kernelSize:t=rb.MEDIUM,resolutionScale:e=.5,width:n=ir.AUTO_SIZE,height:i=ir.AUTO_SIZE,resolutionX:r=n,resolutionY:s=i}={}){super("KawaseBlurPass"),this.renderTargetA=new Mn(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const a=this.resolution=new ir(this,r,s,e);a.addEventListener("change",o=>this.setSize(a.baseWidth,a.baseHeight)),this._blurMaterial=new Uee,this._blurMaterial.kernelSize=t,this.copyMaterial=new fk}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(t){this._blurMaterial=t}get dithering(){return this.copyMaterial.dithering}set dithering(t){this.copyMaterial.dithering=t}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(t){this.blurMaterial.kernelSize=t}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get scale(){return this.blurMaterial.scale}set scale(t){this.blurMaterial.scale=t}getScale(){return this.blurMaterial.scale}setScale(t){this.blurMaterial.scale=t}getKernelSize(){return this.kernelSize}setKernelSize(t){this.kernelSize=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}render(t,e,n,i,r){const s=this.scene,a=this.camera,o=this.renderTargetA,l=this.renderTargetB,c=this.blurMaterial,u=c.kernelSequence;let h=e;this.fullscreenMaterial=c;for(let f=0,m=u.length;f<m;++f){const g=f&1?l:o;c.kernel=u[f],c.inputBuffer=h.texture,t.setRenderTarget(g),t.render(s,a),h=g}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=h.texture,t.setRenderTarget(this.renderToScreen?null:n),t.render(s,a)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e);const i=n.width,r=n.height;this.renderTargetA.setSize(i,r),this.renderTargetB.setSize(i,r),this.blurMaterial.setSize(t,e)}initialize(t,e,n){n!==void 0&&(this.renderTargetA.texture.type=n,this.renderTargetB.texture.type=n,n!==vi?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):t!==null&&t.outputColorSpace===sn&&(this.renderTargetA.texture.colorSpace=sn,this.renderTargetB.texture.colorSpace=sn))}static get AUTO_SIZE(){return ir.AUTO_SIZE}},Oee=`#include <common>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l)*l;
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*clamp(l,0.0,1.0),l);
#else
gl_FragColor=vec4(l);
#endif
}`,Gee=class extends ti{constructor(t=!1,e=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:bl.replace(/\D+/g,"")},uniforms:{inputBuffer:new Ut(null),threshold:new Ut(0),smoothing:new Ut(1),range:new Ut(null)},blending:Di,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Oee,vertexShader:dk}),this.colorOutput=t,this.luminanceRange=e}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get threshold(){return this.uniforms.threshold.value}set threshold(t){this.smoothing>0||t>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=t}getThreshold(){return this.threshold}setThreshold(t){this.threshold=t}get smoothing(){return this.uniforms.smoothing.value}set smoothing(t){this.threshold>0||t>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=t}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(t){this.smoothing=t}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(t){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(t){t?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(t){return this.colorOutput}setColorOutputEnabled(t){this.colorOutput=t}get useRange(){return this.luminanceRange!==null}set useRange(t){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(t){t!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=t,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(t){this.luminanceRange=t}},zee=class extends kr{constructor({renderTarget:t,luminanceRange:e,colorOutput:n,resolutionScale:i=1,width:r=ir.AUTO_SIZE,height:s=ir.AUTO_SIZE,resolutionX:a=r,resolutionY:o=s}={}){super("LuminancePass"),this.fullscreenMaterial=new Gee(n,e),this.needsSwap=!1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new Mn(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const l=this.resolution=new ir(this,a,o,i);l.addEventListener("change",c=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(t,e,n,i,r){const s=this.fullscreenMaterial;s.inputBuffer=e.texture,t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height)}initialize(t,e,n){n!==void 0&&n!==vi&&(this.renderTarget.texture.type=n,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},Hee=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,Vee="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",jee=class extends ti{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new Ut(null),texelSize:new Ut(new Ie)},blending:Di,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Hee,vertexShader:Vee})}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},Wee=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,Xee="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",Jee=class extends ti{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new Ut(null),supportBuffer:new Ut(null),texelSize:new Ut(new Ie),radius:new Ut(.85)},blending:Di,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Wee,vertexShader:Xee})}set inputBuffer(t){this.uniforms.inputBuffer.value=t}set supportBuffer(t){this.uniforms.supportBuffer.value=t}get radius(){return this.uniforms.radius.value}set radius(t){this.uniforms.radius.value=t}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},Yee=class extends kr{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new Mn(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new jee,this.upsamplingMaterial=new Jee,this.resolution=new Ie}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(t){if(this.levels!==t){const e=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let n=0;n<t;++n){const i=e.clone();i.texture.name="Downsampling.Mipmap"+n,this.downsamplingMipmaps.push(i)}this.upsamplingMipmaps.push(e);for(let n=1,i=t-1;n<i;++n){const r=e.clone();r.texture.name="Upsampling.Mipmap"+n,this.upsamplingMipmaps.push(r)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(t){this.upsamplingMaterial.radius=t}render(t,e,n,i,r){const{scene:s,camera:a}=this,{downsamplingMaterial:o,upsamplingMaterial:l}=this,{downsamplingMipmaps:c,upsamplingMipmaps:u}=this;let h=e;this.fullscreenMaterial=o;for(let f=0,m=c.length;f<m;++f){const g=c[f];o.setSize(h.width,h.height),o.inputBuffer=h.texture,t.setRenderTarget(g),t.render(s,a),h=g}this.fullscreenMaterial=l;for(let f=u.length-1;f>=0;--f){const m=u[f];l.setSize(h.width,h.height),l.inputBuffer=h.texture,l.supportBuffer=c[f].texture,t.setRenderTarget(m),t.render(s,a),h=m}}setSize(t,e){const n=this.resolution;n.set(t,e);let i=n.width,r=n.height;for(let s=0,a=this.downsamplingMipmaps.length;s<a;++s)i=Math.round(i*.5),r=Math.round(r*.5),this.downsamplingMipmaps[s].setSize(i,r),s<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[s].setSize(i,r)}initialize(t,e,n){if(n!==void 0){const i=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const r of i)r.texture.type=n;if(n!==vi)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(t!==null&&t.outputColorSpace===sn)for(const r of i)r.texture.colorSpace=sn}}dispose(){super.dispose();for(const t of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))t.dispose()}},Kee=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,max(inputColor.a,texel.a));}`,Qee=class extends ow{constructor({blendFunction:t=tn.SCREEN,luminanceThreshold:e=1,luminanceSmoothing:n=.03,mipmapBlur:i=!0,intensity:r=1,radius:s=.85,levels:a=8,kernelSize:o=rb.LARGE,resolutionScale:l=.5,width:c=ir.AUTO_SIZE,height:u=ir.AUTO_SIZE,resolutionX:h=c,resolutionY:f=u}={}){super("BloomEffect",Kee,{blendFunction:t,uniforms:new Map([["map",new Ut(null)],["intensity",new Ut(r)]])}),this.renderTarget=new Mn(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new kee({kernelSize:o}),this.luminancePass=new zee({colorOutput:!0}),this.luminanceMaterial.threshold=e,this.luminanceMaterial.smoothing=n,this.mipmapBlurPass=new Yee,this.mipmapBlurPass.enabled=i,this.mipmapBlurPass.radius=s,this.mipmapBlurPass.levels=a,this.uniforms.get("map").value=i?this.mipmapBlurPass.texture:this.renderTarget.texture;const m=this.resolution=new ir(this,h,f,l);m.addEventListener("change",g=>this.setSize(m.baseWidth,m.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get dithering(){return this.blurPass.dithering}set dithering(t){this.blurPass.dithering=t}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(t){this.blurPass.kernelSize=t}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(t){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(t){this.uniforms.get("intensity").value=t}getIntensity(){return this.intensity}setIntensity(t){this.intensity=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}update(t,e,n){const i=this.renderTarget,r=this.luminancePass;r.enabled?(r.render(t,e),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(t,r.renderTarget):this.blurPass.render(t,r.renderTarget,i)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(t,e):this.blurPass.render(t,e,i)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height),this.blurPass.resolution.copy(n),this.luminancePass.setSize(t,e),this.mipmapBlurPass.setSize(t,e)}initialize(t,e,n){this.blurPass.initialize(t,e,n),this.luminancePass.initialize(t,e,n),this.mipmapBlurPass.initialize(t,e,n),n!==void 0&&(this.renderTarget.texture.type=n,t!==null&&t.outputColorSpace===sn&&(this.renderTarget.texture.colorSpace=sn))}},mk=class extends kr{constructor(t,e,n=null){super("RenderPass",t,e),this.needsSwap=!1,this.clearPass=new pk,this.overrideMaterialManager=n===null?null:new BB(n),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(t){this.scene=t}set mainCamera(t){this.camera=t}get renderToScreen(){return super.renderToScreen}set renderToScreen(t){super.renderToScreen=t,this.clearPass.renderToScreen=t}get overrideMaterial(){const t=this.overrideMaterialManager;return t!==null?t.material:null}set overrideMaterial(t){const e=this.overrideMaterialManager;t!==null?e!==null?e.setMaterial(t):this.overrideMaterialManager=new BB(t):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(t){this.overrideMaterial=t}get clear(){return this.clearPass.enabled}set clear(t){this.clearPass.enabled=t}getSelection(){return this.selection}setSelection(t){this.selection=t}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(t){this.ignoreBackground=t}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(t){this.skipShadowMapUpdate=t}getClearPass(){return this.clearPass}render(t,e,n,i,r){const s=this.scene,a=this.camera,o=this.selection,l=a.layers.mask,c=s.background,u=t.shadowMap.autoUpdate,h=this.renderToScreen?null:e;o!==null&&a.layers.set(o.getLayer()),this.skipShadowMapUpdate&&(t.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(s.background=null),this.clearPass.enabled&&this.clearPass.render(t,e),t.setRenderTarget(h),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(t,s,a):t.render(s,a),a.layers.mask=l,s.background=c,t.shadowMap.autoUpdate=u}},Zee=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[4];distances[0]=abs(c-samples[0]);distances[1]=abs(c-samples[1]);distances[2]=abs(c-samples[2]);distances[3]=abs(c-samples[3]);float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4];d[0]=readDepth(vUv0);d[1]=readDepth(vUv1);d[2]=readDepth(vUv2);d[3]=readDepth(vUv3);int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[4];n[0]=texture2D(normalBuffer,vUv0).rgb;n[1]=texture2D(normalBuffer,vUv1).rgb;n[2]=texture2D(normalBuffer,vUv2).rgb;n[3]=texture2D(normalBuffer,vUv3).rgb;
#else
vec3 n[4];n[0]=vec3(0.0);n[1]=vec3(0.0);n[2]=vec3(0.0);n[3]=vec3(0.0);
#endif
gl_FragColor=vec4(n[index],d[index]);}`,qee="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",$ee=class extends ti{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new Ut(null),normalBuffer:new Ut(null),texelSize:new Ut(new Ie)},blending:Di,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Zee,vertexShader:qee})}set depthBuffer(t){this.uniforms.depthBuffer.value=t}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=Tl){this.depthBuffer=t,this.depthPacking=e}set normalBuffer(t){this.uniforms.normalBuffer.value=t,t!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(t){this.normalBuffer=t}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e)}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},ete=class extends kr{constructor({normalBuffer:t=null,resolutionScale:e=.5,width:n=ir.AUTO_SIZE,height:i=ir.AUTO_SIZE,resolutionX:r=n,resolutionY:s=i}={}){super("DepthDownsamplingPass");const a=new $ee;a.normalBuffer=t,this.fullscreenMaterial=a,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new Mn(1,1,{minFilter:Rn,magFilter:Rn,depthBuffer:!1,type:$n}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const o=this.resolution=new ir(this,r,s,e);o.addEventListener("change",l=>this.setSize(o.baseWidth,o.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(t,e=Tl){this.fullscreenMaterial.depthBuffer=t,this.fullscreenMaterial.depthPacking=e}render(t,e,n,i,r){t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height),this.fullscreenMaterial.setSize(t,e)}initialize(t,e,n){const i=t.getContext();if(!(i.getExtension("EXT_color_buffer_float")||i.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}},tte=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,nte="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",ite=class extends ti{constructor(t,e,n,i,r=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:bl.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new Ut(null),depthBuffer:new Ut(null),resolution:new Ut(new Ie),texelSize:new Ut(new Ie),cameraNear:new Ut(.3),cameraFar:new Ut(1e3),aspect:new Ut(1),time:new Ut(0)},blending:Di,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:r}),t&&this.setShaderParts(t),e&&this.setDefines(e),n&&this.setUniforms(n),this.copyCameraSettings(i)}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(t){this.uniforms.depthBuffer.value=t}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=Tl){this.depthBuffer=t,this.depthPacking=e}setShaderData(t){this.setShaderParts(t.shaderParts),this.setDefines(t.defines),this.setUniforms(t.uniforms),this.setExtensions(t.extensions)}setShaderParts(t){return this.fragmentShader=tte.replace(fn.FRAGMENT_HEAD,t.get(fn.FRAGMENT_HEAD)||"").replace(fn.FRAGMENT_MAIN_UV,t.get(fn.FRAGMENT_MAIN_UV)||"").replace(fn.FRAGMENT_MAIN_IMAGE,t.get(fn.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=nte.replace(fn.VERTEX_HEAD,t.get(fn.VERTEX_HEAD)||"").replace(fn.VERTEX_MAIN_SUPPORT,t.get(fn.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(t){for(const e of t.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(t){for(const e of t.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(t){this.extensions={};for(const e of t)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(t){this.encodeOutput!==t&&(t?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(t){return this.encodeOutput}setOutputEncodingEnabled(t){this.encodeOutput=t}get time(){return this.uniforms.time.value}set time(t){this.uniforms.time.value=t}setDeltaTime(t){this.uniforms.time.value+=t}adoptCameraSettings(t){this.copyCameraSettings(t)}copyCameraSettings(t){t&&(this.uniforms.cameraNear.value=t.near,this.uniforms.cameraFar.value=t.far,t instanceof Pn?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(t,e){const n=this.uniforms;n.resolution.value.set(t,e),n.texelSize.value.set(1/t,1/e),n.aspect.value=t/e}static get Section(){return fn}};function IB(t,e,n){for(const i of e){const r="$1"+t+i.charAt(0).toUpperCase()+i.slice(1),s=new RegExp("([^\\.])(\\b"+i+"\\b)","g");for(const a of n.entries())a[1]!==null&&n.set(a[0],a[1].replace(s,r))}}function rte(t,e,n){let i=e.getFragmentShader(),r=e.getVertexShader();const s=i!==void 0&&/mainImage/.test(i),a=i!==void 0&&/mainUv/.test(i);if(n.attributes|=e.getAttributes(),i===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(a&&n.attributes&no.CONVOLUTION)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!s&&!a)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const o=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,l=n.shaderParts;let c=l.get(fn.FRAGMENT_HEAD)||"",u=l.get(fn.FRAGMENT_MAIN_UV)||"",h=l.get(fn.FRAGMENT_MAIN_IMAGE)||"",f=l.get(fn.VERTEX_HEAD)||"",m=l.get(fn.VERTEX_MAIN_SUPPORT)||"";const g=new Set,y=new Set;if(a&&(u+=`	${t}MainUv(UV);
`,n.uvTransformation=!0),r!==null&&/mainSupport/.test(r)){const _=/mainSupport *\([\w\s]*?uv\s*?\)/.test(r);m+=`	${t}MainSupport(`,m+=_?`vUv);
`:`);
`;for(const S of r.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const M of S[1].split(/\s*,\s*/))n.varyings.add(M),g.add(M),y.add(M);for(const S of r.matchAll(o))y.add(S[1])}for(const _ of i.matchAll(o))y.add(_[1]);for(const _ of e.defines.keys())y.add(_.replace(/\([\w\s,]*\)/g,""));for(const _ of e.uniforms.keys())y.add(_);y.delete("while"),y.delete("for"),y.delete("if"),e.uniforms.forEach((_,S)=>n.uniforms.set(t+S.charAt(0).toUpperCase()+S.slice(1),_)),e.defines.forEach((_,S)=>n.defines.set(t+S.charAt(0).toUpperCase()+S.slice(1),_));const x=new Map([["fragment",i],["vertex",r]]);IB(t,y,n.defines),IB(t,y,x),i=x.get("fragment"),r=x.get("vertex");const v=e.blendMode;if(n.blendModes.set(v.blendFunction,v),s){e.inputColorSpace!==null&&e.inputColorSpace!==n.colorSpace&&(h+=e.inputColorSpace===sn?`color0 = sRGBTransferOETF(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==gr?n.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(n.colorSpace=e.inputColorSpace);const _=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;h+=`${t}MainImage(color0, UV, `,n.attributes&no.DEPTH&&_.test(i)&&(h+="depth, ",n.readDepth=!0),h+=`color1);
	`;const S=t+"BlendOpacity";n.uniforms.set(S,v.opacity),h+=`color0 = blend${v.blendFunction}(color0, color1, ${S});

	`,c+=`uniform float ${S};

`}if(c+=i+`
`,r!==null&&(f+=r+`
`),l.set(fn.FRAGMENT_HEAD,c),l.set(fn.FRAGMENT_MAIN_UV,u),l.set(fn.FRAGMENT_MAIN_IMAGE,h),l.set(fn.VERTEX_HEAD,f),l.set(fn.VERTEX_MAIN_SUPPORT,m),e.extensions!==null)for(const _ of e.extensions)n.extensions.add(_)}}var ste=class extends kr{constructor(t,...e){super("EffectPass"),this.fullscreenMaterial=new ite(null,null,null,t),this.listener=n=>this.handleEvent(n),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(t){for(const e of this.effects)e.mainScene=t}set mainCamera(t){this.fullscreenMaterial.copyCameraSettings(t);for(const e of this.effects)e.mainCamera=t}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(t){this.fullscreenMaterial.encodeOutput=t}get dithering(){return this.fullscreenMaterial.dithering}set dithering(t){const e=this.fullscreenMaterial;e.dithering=t,e.needsUpdate=!0}setEffects(t){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=t.sort((e,n)=>n.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const t=new $$;let e=0;for(const a of this.effects)if(a.blendMode.blendFunction===tn.DST)t.attributes|=a.getAttributes()&no.DEPTH;else{if(t.attributes&a.getAttributes()&no.CONVOLUTION)throw new Error(`Convolution effects cannot be merged (${a.name})`);rte("e"+e++,a,t)}let n=t.shaderParts.get(fn.FRAGMENT_HEAD),i=t.shaderParts.get(fn.FRAGMENT_MAIN_IMAGE),r=t.shaderParts.get(fn.FRAGMENT_MAIN_UV);const s=/\bblend\b/g;for(const a of t.blendModes.values())n+=a.getShaderCode().replace(s,`blend${a.blendFunction}`)+`
`;t.attributes&no.DEPTH?(t.readDepth&&(i=`float depth = readDepth(UV);

	`+i),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,t.colorSpace===sn&&(i+=`color0 = sRGBToLinear(color0);
	`),t.uvTransformation?(r=`vec2 transformedUv = vUv;
`+r,t.defines.set("UV","transformedUv")):t.defines.set("UV","vUv"),t.shaderParts.set(fn.FRAGMENT_HEAD,n),t.shaderParts.set(fn.FRAGMENT_MAIN_IMAGE,i),t.shaderParts.set(fn.FRAGMENT_MAIN_UV,r);for(const[a,o]of t.shaderParts)o!==null&&t.shaderParts.set(a,o.trim().replace(/^#/,`
#`));this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(t)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(t,e=Tl){this.fullscreenMaterial.depthBuffer=t,this.fullscreenMaterial.depthPacking=e;for(const n of this.effects)n.setDepthTexture(t,e)}render(t,e,n,i,r){for(const s of this.effects)s.update(t,e,i);if(!this.skipRendering||this.renderToScreen){const s=this.fullscreenMaterial;s.inputBuffer=e.texture,s.time+=i*this.timeScale,t.setRenderTarget(this.renderToScreen?null:n),t.render(this.scene,this.camera)}}setSize(t,e){this.fullscreenMaterial.setSize(t,e);for(const n of this.effects)n.setSize(t,e)}initialize(t,e,n){this.renderer=t;for(const i of this.effects)i.initialize(t,e,n);this.updateMaterial(),n!==void 0&&n!==vi&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const t of this.effects)t.removeEventListener("change",this.listener),t.dispose()}handleEvent(t){switch(t.type){case"change":this.recompile();break}}},ate=class extends kr{constructor(t,e,{renderTarget:n,resolutionScale:i=1,width:r=ir.AUTO_SIZE,height:s=ir.AUTO_SIZE,resolutionX:a=r,resolutionY:o=s}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new mk(t,e,new hE);const l=this.renderPass;l.ignoreBackground=!0,l.skipShadowMapUpdate=!0;const c=l.getClearPass();c.overrideClearColor=new ht(7829503),c.overrideClearAlpha=1,this.renderTarget=n,this.renderTarget===void 0&&(this.renderTarget=new Mn(1,1,{minFilter:Rn,magFilter:Rn}),this.renderTarget.texture.name="NormalPass.Target");const u=this.resolution=new ir(this,a,o,i);u.addEventListener("change",h=>this.setSize(u.baseWidth,u.baseHeight))}set mainScene(t){this.renderPass.mainScene=t}set mainCamera(t){this.renderPass.mainCamera=t}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}render(t,e,n,i,r){const s=this.renderToScreen?null:this.renderTarget;this.renderPass.render(t,s,s)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height)}};const ote=D.createContext(null),LB=t=>(t.getAttributes()&no.CONVOLUTION)===no.CONVOLUTION,lte=Ah.memo(D.forwardRef(({children:t,camera:e,scene:n,resolutionScale:i,enabled:r=!0,renderPriority:s=1,autoClear:a=!0,depthBuffer:o,enableNormalPass:l,stencilBuffer:c,multisampling:u=8,frameBufferType:h=ei},f)=>{const{gl:m,scene:g,camera:y,size:x}=Cn(),v=n||g,_=e||y,[S,M,b]=D.useMemo(()=>{const P=cZ(),T=new q$(m,{depthBuffer:o,stencilBuffer:c,multisampling:u>0&&P?u:0,frameBufferType:h});T.addPass(new mk(v,_));let I=null,z=null;return l&&(z=new ate(v,_),z.enabled=!1,T.addPass(z),i!==void 0&&P&&(I=new ete({normalBuffer:z.texture,resolutionScale:i}),I.enabled=!1,T.addPass(I))),[T,z,I]},[_,m,o,c,u,h,v,l,i]);D.useEffect(()=>S==null?void 0:S.setSize(x.width,x.height),[S,x]),Ur((P,T)=>{if(r){const I=m.autoClear;m.autoClear=a,c&&!a&&m.clearStencil(),S.render(T),m.autoClear=I}},r?s:0);const C=D.useRef(null);D.useLayoutEffect(()=>{var P;const T=[],I=(P=C.current)==null?void 0:P.__r3f;if(I&&S){const z=I.objects;for(let G=0;G<z.length;G++){const Q=z[G];if(Q instanceof ow){const U=[Q];if(!LB(Q)){let $=null;for(;($=z[G+1])instanceof ow&&!LB($);)U.push($),G++}const ee=new ste(_,...U);T.push(ee)}else Q instanceof kr&&T.push(Q)}for(const G of T)S==null||S.addPass(G);M&&(M.enabled=!0),b&&(b.enabled=!0)}return()=>{for(const z of T)S==null||S.removePass(z);M&&(M.enabled=!1),b&&(b.enabled=!1)}},[S,t,_,M,b]),D.useEffect(()=>{const P=m.toneMapping;return m.toneMapping=Xs,()=>{m.toneMapping=P}},[m]);const B=D.useMemo(()=>({composer:S,normalPass:M,downSamplingPass:b,resolutionScale:i,camera:_,scene:v}),[S,M,b,i,_,v]);return D.useImperativeHandle(f,()=>S,[S]),w.jsx(ote.Provider,{value:B,children:w.jsx("group",{ref:C,children:t})})}));let cte=0;const DB=new WeakMap,ute=(t,e)=>Ah.forwardRef(function({blendFunction:i=e==null?void 0:e.blendFunction,opacity:r=e==null?void 0:e.opacity,...s},a){let o=DB.get(t);if(!o){const u=`@react-three/postprocessing/${t.name}-${cte++}`;Vy({[u]:t}),DB.set(t,o=u)}const l=Cn(u=>u.camera),c=Ah.useMemo(()=>{var u,h;return[...(u=e==null?void 0:e.args)!=null?u:[],...(h=s.args)!=null?h:[{...e,...s}]]},[JSON.stringify(s)]);return w.jsx(o,{camera:l,"blendMode-blendFunction":i,"blendMode-opacity-value":r,...s,ref:a,args:c})}),hte=ute(Qee,{blendFunction:tn.ADD}),NB={idle:"Idle",happy:"HappyDance",thinking:"Thinking",excited:"ExcitedFlap"};function gk({animationState:t="idle",interactionMode:e="reactive",scale:n=1.4}){const i=D.useRef(null),r=nu("/assets/models/flamingo.glb"),s=D.useMemo(()=>{const h=f=>r.scene.getObjectByName(f);return{wingL:h("Wing_L"),wingR:h("Wing_R"),eyeL:h("Eye_L"),eyeR:h("Eye_R"),head:h("Head"),glasses:h("Glasses"),legL:h("Leg_L"),legR:h("Leg_R")}},[r.scene]),{actions:a}=_$(r.animations,i);D.useEffect(()=>{Object.values(a).forEach(m=>{m&&m.stop()});const h=NB[t],f=a[h];f&&f.reset().fadeIn(.25).setEffectiveTimeScale(t==="excited"?1.3:1).play()},[t,a]);const[o,l]=D.useState(!1),{lift:c}=iZ({lift:o?.18:0,config:{mass:1,tension:230,friction:26}});D.useEffect(()=>{s.glasses&&c.to(h=>{s.glasses.position.y=h})},[c,s.glasses]);const{mouse:u}=Cn();return Ur(h=>{if(e==="reactive"&&s.head){const m=pp.lerp(s.head.rotation.y,u.x*.6,.1),g=pp.lerp(s.head.rotation.x,u.y*.4,.1);s.head.rotation.set(g,m,0),s.eyeL&&s.eyeR&&(s.eyeL.position.x=-.07+u.x*.1,s.eyeR.position.x=.07+u.x*.1)}const f=h.clock.elapsedTime;if(!a[NB[t]])switch(t){case"idle":i.current.rotation.y=Math.sin(f*.5)*.08;break;case"happy":if(s.wingL&&s.wingR){const m=Math.sin(f*6)*Math.PI*.08;s.wingL.rotation.z=-.4+m,s.wingR.rotation.z=.4-m}i.current.position.y=Math.sin(f*3)*.05;break;case"thinking":s.head&&(s.head.rotation.z=Math.sin(f*1.5)*.25);break;case"excited":if(s.wingL&&s.wingR){const m=Math.sin(f*12)*Math.PI*.25;s.wingL.rotation.z=-.6+m,s.wingR.rotation.z=.6-m}i.current.position.y=Math.sin(f*8)*.12;break}}),w.jsx(D.Suspense,{fallback:w.jsx(YK,{children:w.jsx("span",{style:{color:"#fff"},children:"loading flamingo…"})}),children:w.jsx(QE,{speed:t==="idle"?1.6:3.5,rotationIntensity:.4,floatIntensity:.45,children:w.jsx(lZ.group,{ref:i,scale:n,onPointerOver:()=>l(!0),onPointerOut:()=>l(!1),children:w.jsx("primitive",{object:r.scene,dispose:null})})})})}nu.preload("/assets/models/flamingo.glb");const FB=["P(x) = λe^(-λx)","∑(n=1 to ∞)","RNG ≠ Random","σ² = E[X²] - μ²","H(X) = -∑p(x)log p(x)","∫f(x)dx","Φ(x) = P(X ≤ x)","E[X] = μ","Var(X) = σ²","P(A|B) = P(B|A)P(A)/P(B)","lim(n→∞)","∇²ψ = 0","e^(iπ) + 1 = 0","χ² = Σ(O-E)²/E","H₀: μ = μ₀","ℒ = ∑log P(xᵢ|θ)","S = -k∑p·log(p)","ΔS ≥ 0","I(X;Y) = H(X) - H(X|Y)","DKL(P||Q) = ∑P(x)log(P(x)/Q(x))"];function vk({count:t=15,density:e=1,color:n="#ABF80B"}){const i=D.useRef(null),r=D.useMemo(()=>{const s=[];for(let a=0;a<t;a++)s.push({position:new K((Math.random()-.5)*8,(Math.random()-.5)*8,(Math.random()-.5)*8),velocity:new K((Math.random()-.5)*.01,(Math.random()-.5)*.01+.005,(Math.random()-.5)*.01),formula:FB[Math.floor(Math.random()*FB.length)],scale:.08+Math.random()*.12,opacity:.6+Math.random()*.4});return s},[t]);return Ur(s=>{if(!i.current)return;const a=s.clock.elapsedTime;i.current.rotation.y=a*.02,r.forEach((o,l)=>{o.position.x+=o.velocity.x*e,o.position.y+=o.velocity.y*e,o.position.z+=o.velocity.z*e,o.position.y>4&&(o.position.y=-4,o.position.x=(Math.random()-.5)*8,o.position.z=(Math.random()-.5)*8),Math.abs(o.position.x)>4&&(o.position.x*=-.9),Math.abs(o.position.z)>4&&(o.position.z*=-.9),o.opacity=.6+Math.sin(a*2+l*.5)*.3})}),w.jsx("group",{ref:i,children:r.map((s,a)=>w.jsx(xq,{position:s.position,follow:!0,lockX:!1,lockY:!1,lockZ:!1,children:w.jsx(Uf,{fontSize:s.scale,color:n,anchorX:"center",anchorY:"middle",fillOpacity:s.opacity,outlineWidth:.004,outlineColor:"#000000",outlineOpacity:.3,children:s.formula})},a))})}const sc=[{title:"Meet Your AI Assistant",titleColor1:"Meet Your",titleColor2:"AI Assistant",description:"Our pink flamingo AI analyzes slot patterns in real-time to provide you with probability insights.",flamingoState:"happy"},{title:"Real-Time Predictions",titleColor1:"Real-Time",titleColor2:"Predictions",description:"Get instant probability calculations updated with every spin. Make informed decisions with AI-powered insights.",flamingoState:"thinking"},{title:"Play Responsibly",titleColor1:"Play",titleColor2:"Responsibly",description:"Set limits, track your session, and enjoy gaming with built-in responsible gaming tools.",flamingoState:"excited"}];function dte(){const t=Ml(),[e,n]=D.useState(0),i=()=>{e<sc.length-1?n(e+1):t("/dashboard")},r=()=>{e>0&&n(e-1)},s=()=>{t("/dashboard")};return w.jsxs(Be.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"relative h-screen overflow-hidden bg-gradient-to-br from-deepGreen via-djungle to-forest",children:[w.jsx("div",{className:"absolute inset-0",children:w.jsxs($h,{children:[w.jsx(x$,{makeDefault:!0,position:[0,0,5]}),w.jsx(KE,{enableZoom:!1,enablePan:!1,autoRotate:!0,autoRotateSpeed:.5}),w.jsx("ambientLight",{intensity:.3}),w.jsx("pointLight",{position:[10,10,10],intensity:.5,color:"#E59FCE"}),w.jsx("pointLight",{position:[-10,-10,-10],intensity:.5,color:"#ABF80B"}),w.jsx("spotLight",{position:[5,5,5],angle:.15,penumbra:1,intensity:1,color:"#ABF80B"}),w.jsx("directionalLight",{position:[0,2,5],intensity:.5,color:"#E7DFCE"}),w.jsx(gk,{animationState:sc[e].flamingoState,interactionMode:"reactive",scale:2}),w.jsx(vk,{count:100,density:e===2?2:1,color:e===0?"#E59FCF":e===1?"#ADFF00":"#869F6A"}),w.jsx(lte,{children:w.jsx(hte,{luminanceThreshold:.1,luminanceSmoothing:.9,intensity:1.5})}),w.jsx(j$,{preset:"sunset"})]})}),w.jsx("div",{className:"absolute inset-0 bg-darkGreen/50 backdrop-blur-sm z-5"}),w.jsxs("div",{className:"relative z-10 h-full flex flex-col justify-between p-8",children:[w.jsx("div",{className:"text-right",children:w.jsx(Be.button,{onClick:s,whileHover:{scale:1.05},whileTap:{scale:.95},className:"text-beigeCream/50 hover:text-limeGreen transition-colors text-lg font-semibold",children:"Skip →"})}),w.jsx("div",{className:"flex-1 flex items-center justify-center",children:w.jsx(zp,{mode:"wait",children:w.jsxs(Be.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.5},className:"max-w-4xl text-center",children:[w.jsxs(Be.h2,{className:"text-5xl sm:text-6xl md:text-7xl lg:text-8xl font-bold mb-8",initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},children:[w.jsx("span",{className:"text-limeGreen",children:sc[e].titleColor1})," ",w.jsx("span",{className:"text-pink",children:sc[e].titleColor2})]}),w.jsx(Be.p,{className:"text-lg sm:text-xl md:text-2xl text-beigeCream/80 max-w-3xl mx-auto",initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},children:sc[e].description}),w.jsxs(Be.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.4},className:"mt-12 flex justify-center space-x-8",children:[e===0&&w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"text-center",children:[w.jsx("div",{className:"text-4xl font-bold text-pink",children:"98.3%"}),w.jsx("div",{className:"text-sm text-beigeCream/60",children:"Pattern Detection"})]}),w.jsxs("div",{className:"text-center",children:[w.jsx("div",{className:"text-4xl font-bold text-limeGreen",children:"24/7"}),w.jsx("div",{className:"text-sm text-beigeCream/60",children:"AI Analysis"})]})]}),e===1&&w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"text-center",children:[w.jsx("div",{className:"text-4xl font-bold text-limeGreen",children:"2.7M"}),w.jsx("div",{className:"text-sm text-beigeCream/60",children:"Spins Analyzed"})]}),w.jsxs("div",{className:"text-center",children:[w.jsx("div",{className:"text-4xl font-bold text-pink",children:"15K+"}),w.jsx("div",{className:"text-sm text-beigeCream/60",children:"Active Users"})]})]}),e===2&&w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"text-center",children:[w.jsx("div",{className:"text-4xl font-bold text-pink",children:"100%"}),w.jsx("div",{className:"text-sm text-beigeCream/60",children:"Secure"})]}),w.jsxs("div",{className:"text-center",children:[w.jsx("div",{className:"text-4xl font-bold text-limeGreen",children:"Fair"}),w.jsx("div",{className:"text-sm text-beigeCream/60",children:"Gaming Tools"})]})]})]})]},e)})}),w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsx("div",{className:"flex space-x-3",children:sc.map((a,o)=>w.jsx(Be.button,{onClick:()=>n(o),whileHover:{scale:1.2},className:`h-3 rounded-full transition-all duration-300 ${o===e?"w-12 bg-limeGreen shadow-[0_0_10px_rgba(171,248,11,0.5)]":"w-3 bg-beigeCream/30 hover:bg-beigeCream/50"}`},o))}),w.jsxs("div",{className:"flex space-x-4",children:[e>0&&w.jsx(Be.button,{onClick:r,whileHover:{scale:1.05},whileTap:{scale:.95},className:`px-8 py-4 border-2 border-limeGreen/50 rounded-xl text-limeGreen font-bold
                         hover:border-limeGreen hover:bg-limeGreen/10 hover:shadow-[0_0_20px_rgba(171,248,11,0.3)]
                         transition-all duration-300`,children:"← Previous"}),w.jsx(Be.button,{onClick:i,whileHover:{scale:1.05},whileTap:{scale:.95},className:`px-10 py-4 bg-limeGreen text-darkGreen font-bold rounded-xl text-lg
                       hover:shadow-[0_0_30px_rgba(171,248,11,0.5)] transition-all duration-300`,children:e===sc.length-1?"Let's Start →":"Next →"})]})]})]}),w.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[w.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-pink/10 rounded-full blur-3xl animate-pulse"}),w.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-limeGreen/10 rounded-full blur-3xl animate-pulse"})]})]})}function fte({value:t,color:e}){const n=D.useRef(null),i=D.useRef(null);Ur(s=>{if(n.current){n.current.rotation.z=-Math.PI/2;const a=1+Math.sin(s.clock.elapsedTime*2)*.05*(t/100);n.current.scale.set(a,a,1)}i.current&&t>66&&(i.current.rotation.z+=.01,i.current.position.z=Math.sin(s.clock.elapsedTime*3)*.1)});const r=new $p(1.5,2,64,1,0,t/100*Math.PI*2);return w.jsxs("group",{children:[w.jsx("mesh",{ref:n,geometry:r,children:w.jsx("meshStandardMaterial",{color:e,emissive:e,emissiveIntensity:.5,roughness:.2,metalness:.8})}),w.jsx("mesh",{geometry:r,scale:[1.1,1.1,1],children:w.jsx("meshBasicMaterial",{color:e,transparent:!0,opacity:.3,blending:sp})}),t>66&&w.jsxs("points",{ref:i,children:[w.jsx("bufferGeometry",{children:w.jsx("bufferAttribute",{attach:"attributes-position",count:50,array:new Float32Array(150).map(()=>(Math.random()-.5)*4),itemSize:3})}),w.jsx("pointsMaterial",{size:.05,color:e,transparent:!0,opacity:.8,blending:sp})]})]})}function pte({probability:t,isSpinning:e}){const i=(r=>r>66?"#ABF80B":r>33?"#E59FCE":"#CE91BA")(t);return w.jsxs(Be.div,{className:"glassmorphism p-8 rounded-3xl",animate:{borderColor:i,boxShadow:`0 0 ${e?60:30}px ${i}40`},transition:{duration:.5},style:{borderWidth:"2px"},children:[w.jsx("h2",{className:"text-2xl font-bold text-center mb-6 text-beigeCream",children:"Win Probability"}),w.jsxs("div",{className:"relative w-80 h-80 mx-auto",children:[w.jsxs($h,{camera:{position:[0,0,5]},children:[w.jsx("ambientLight",{intensity:.5}),w.jsx("pointLight",{position:[10,10,10],intensity:1}),w.jsxs(QE,{speed:e?10:2,rotationIntensity:e?2:.5,floatIntensity:.5,children:[w.jsx(fte,{value:t,color:i}),w.jsxs(Uf,{font:"/fonts/inter-bold.woff",fontSize:1,color:i,anchorX:"center",anchorY:"middle",children:[t,"%"]})]})]}),w.jsx("div",{className:"absolute inset-0 rounded-full opacity-20",style:{background:`radial-gradient(circle, ${i} 0%, transparent 70%)`,animation:e?"pulse 0.5s infinite":"pulse 2s infinite"}})]}),w.jsxs(Be.div,{className:"text-center mt-6",animate:{opacity:e?.5:1},children:[w.jsx("p",{className:"text-lg text-beigeCream/60",children:e?"Calculating...":"Current prediction"}),w.jsx(Be.p,{className:"text-2xl font-bold mt-2",animate:{color:i},transition:{duration:.5},children:t>66?"High Chance!":t>33?"Moderate":"Low Probability"})]}),w.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% { transform: scale(1); opacity: 0.2; }
          50% { transform: scale(1.1); opacity: 0.3; }
        }
      `})]})}function yk({animationState:t="idle",scale:e=1.2}){const n=D.useRef(null),{scene:i}=nu("/assets/models/chat-model-flamingo.glb");return Ur(r=>{if(!n.current)return;const s=r.clock.elapsedTime;switch(t){case"idle":n.current.rotation.y=Math.sin(s*.5)*.1,n.current.position.y=Math.sin(s)*.05;break;case"happy":n.current.rotation.y=Math.sin(s*2)*.2,n.current.position.y=Math.sin(s*3)*.1;break;case"thinking":n.current.rotation.y=s*.3,n.current.position.y=Math.sin(s*.5)*.03;break;case"excited":n.current.rotation.y=Math.sin(s*4)*.3,n.current.position.y=Math.sin(s*5)*.15;break}}),w.jsxs(w.Fragment,{children:[w.jsxs("group",{ref:n,scale:e,children:[w.jsx("primitive",{object:i}),w.jsx("pointLight",{position:[0,0,0],intensity:.5,color:"#E59FCE",distance:2})]}),w.jsxs("mesh",{rotation:[-Math.PI/2,0,0],position:[0,-1,0],children:[w.jsx("planeGeometry",{args:[10,10]}),w.jsx(b$,{blur:[300,300],resolution:2048,mixBlur:1,mixStrength:40,roughness:1,depthScale:1.2,minDepthThreshold:.4,maxDepthThreshold:1.4,color:"#041812",metalness:.5,mirror:0})]})]})}nu.preload("/assets/models/chat-model-flamingo.glb");const mte=["What's my chance?","Should I increase bet?","Show statistics","Tips for winning"];function xk({probability:t,balance:e,isSpinning:n}){const[i,r]=D.useState([{id:"1",text:"Hello! I'm your AI assistant. I'll help you make informed decisions while playing. How can I help you today?",sender:"flamingo",timestamp:new Date}]),[s,a]=D.useState(""),o=D.useRef(null),[l,c]=D.useState("idle");D.useEffect(()=>{var h;(h=o.current)==null||h.scrollIntoView({behavior:"smooth"})},[i]),D.useEffect(()=>{n?c("thinking"):t>66?c("excited"):t>33?c("happy"):c("idle")},[t,n]);const u=h=>{if(!h.trim())return;const f={id:Date.now().toString(),text:h,sender:"user",timestamp:new Date};r(m=>[...m,f]),a(""),setTimeout(()=>{let m="";h.toLowerCase().includes("chance")||h.toLowerCase().includes("probability")?m=`Current win probability is ${t}%. ${t>66?"Looking good! 🎰":t>33?"Moderate chances ahead.":"Might want to wait for better odds."}`:h.toLowerCase().includes("bet")?m=`Your current balance is ${e} WNT. ${e>500?"You have room to increase your bet if you're feeling lucky!":"Consider keeping your bets conservative with your current balance."}`:h.toLowerCase().includes("statistics")?m="In the last hour: Average probability 48%, Best streak: 5 wins, Highest payout: 250 WNT":h.toLowerCase().includes("tips")?m="Set a budget and stick to it. Take breaks every 30 minutes. Remember, it's entertainment!":m="I'm here to help! Ask me about probabilities, betting strategies, or responsible gaming tips.";const g={id:(Date.now()+1).toString(),text:m,sender:"flamingo",timestamp:new Date};r(y=>[...y,g])},1e3)};return w.jsxs("div",{className:"glassmorphism rounded-3xl p-6 h-full flex flex-col",children:[w.jsx("div",{className:"h-32 mb-4 rounded-2xl overflow-hidden bg-gradient-to-br from-salmon/20 to-acid/20",children:w.jsxs($h,{camera:{position:[0,0,3]},children:[w.jsx("ambientLight",{intensity:.3}),w.jsx("pointLight",{position:[10,10,10],intensity:.8,color:"#E59FCE"}),w.jsx("pointLight",{position:[-10,-10,-10],intensity:.5,color:"#ABF80B"}),w.jsx("spotLight",{position:[0,5,2],angle:.3,penumbra:1,intensity:1,color:"#ABF80B",castShadow:!0}),w.jsx("directionalLight",{position:[0,2,5],intensity:.5,color:"#E7DFCE"}),w.jsx(yk,{animationState:l,scale:1.2})]})}),w.jsxs("div",{className:"flex-1 overflow-y-auto mb-4 space-y-3 min-h-[300px]",children:[w.jsx(zp,{children:i.map((h,f)=>w.jsx(Be.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:f*.05},className:`flex ${h.sender==="user"?"justify-end":"justify-start"}`,children:w.jsxs(Be.div,{whileHover:{scale:1.02},className:`max-w-[80%] p-3 rounded-2xl ${h.sender==="user"?"bg-acid/20 text-acid border border-acid/30":"bg-salmon/20 text-cream border border-salmon/30"} backdrop-blur-sm`,children:[w.jsx("p",{className:"text-sm",children:h.text}),w.jsx("p",{className:"text-xs opacity-50 mt-1",children:h.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},h.id))}),w.jsx("div",{ref:o})]}),w.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:mte.map(h=>w.jsx(Be.button,{onClick:()=>u(h),whileHover:{scale:1.05},whileTap:{scale:.95},className:`px-3 py-1 text-sm glassmorphism rounded-full
                     hover:bg-white/10 transition-colors magnetic-hover`,children:h},h))}),w.jsxs("form",{onSubmit:h=>{h.preventDefault(),u(s)},className:"flex gap-2",children:[w.jsx("input",{type:"text",value:s,onChange:h=>a(h.target.value),placeholder:"Ask me anything...",className:`flex-1 px-4 py-2 rounded-xl bg-white/5 border border-white/10
                   text-cream placeholder-cream/50 focus:outline-none focus:border-acid/50
                   transition-colors`}),w.jsx(Be.button,{type:"submit",whileHover:{scale:1.05},whileTap:{scale:.95},className:`px-6 py-2 bg-acid text-djungle font-semibold rounded-xl
                   hover:shadow-[0_0_20px_rgba(173,255,0,0.5)] transition-all`,children:"Send"})]})]})}const gte=[1,5,10,25,50,100];function vte({betSize:t,setBetSize:e,balance:n,isSpinning:i,onSpin:r}){const[s,a]=D.useState(!1),[o,l]=D.useState(0);D.useEffect(()=>{let h;return s&&!i?h=setInterval(()=>{l(f=>Math.min(f+2,100))},20):l(0),()=>clearInterval(h)},[s,i]);const c=()=>{!i&&n>=t&&a(!0)},u=()=>{s&&(a(!1),r())};return w.jsx("div",{className:"glassmorphism rounded-3xl p-8",children:w.jsxs("div",{className:"max-w-4xl mx-auto",children:[w.jsxs("div",{className:"mb-8",children:[w.jsx("h3",{className:"text-xl font-semibold text-beigeCream mb-4",children:"Bet Size"}),w.jsx("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-3",children:gte.map(h=>w.jsx(Be.button,{onClick:()=>e(h),disabled:h>n,whileHover:{scale:h<=n?1.05:1},whileTap:{scale:h<=n?.95:1},className:`py-3 px-4 rounded-xl font-semibold transition-all ${t===h?"bg-limeGreen text-darkGreen shadow-[0_0_20px_rgba(171,248,11,0.5)]":h>n?"bg-white/5 text-beigeCream/30 cursor-not-allowed":"bg-white/10 text-beigeCream hover:bg-white/20"}`,children:h},h))})]}),w.jsxs("div",{className:"mb-8",children:[w.jsx("label",{className:"block text-sm text-beigeCream/70 mb-2",children:"Custom Bet"}),w.jsxs("div",{className:"flex gap-3",children:[w.jsx("input",{type:"number",value:t,onChange:h=>{const f=Math.min(Number(h.target.value),n);e(Math.max(1,f))},className:`flex-1 px-4 py-2 rounded-xl bg-white/5 border border-white/10
                       text-beigeCream focus:outline-none focus:border-limeGreen/50 transition-colors`}),w.jsxs("div",{className:"flex gap-1",children:[w.jsx(Be.button,{onClick:()=>e(Math.max(1,t-10)),whileHover:{scale:1.1},whileTap:{scale:.9},className:"px-4 py-2 bg-white/10 rounded-l-xl hover:bg-white/20 transition-colors",children:"-10"}),w.jsx(Be.button,{onClick:()=>e(Math.min(n,t+10)),whileHover:{scale:1.1},whileTap:{scale:.9},className:"px-4 py-2 bg-white/10 rounded-r-xl hover:bg-white/20 transition-colors",children:"+10"})]})]})]}),w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs(Be.button,{onMouseDown:c,onMouseUp:u,onMouseLeave:()=>a(!1),disabled:n<t||i,whileHover:{scale:n>=t&&!i?1.05:1},whileTap:{scale:n>=t&&!i?.95:1},className:`relative px-12 py-6 rounded-2xl font-bold text-2xl transition-all
                      overflow-hidden ${n<t||i?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-limeGreen text-darkGreen hover:shadow-[0_0_40px_rgba(171,248,11,0.6)]"}`,children:[w.jsx(Be.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",initial:{x:"-100%"},animate:{x:s?"100%":"-100%"},transition:{duration:1,repeat:1/0}}),w.jsx("div",{className:"absolute bottom-0 left-0 h-1 bg-white/50 transition-all duration-100",style:{width:`${o}%`}}),w.jsx("span",{className:"relative z-10",children:i?"Spinning...":s?"Hold to Spin!":"SPIN"}),s&&w.jsx(Be.div,{className:"absolute inset-0 overflow-hidden",initial:{opacity:0},animate:{opacity:1},children:["P(x) = λe^(-λx)","∑(n=1 to ∞)","RNG ≠ Random","σ² = E[X²] - μ²","H(X) = -∑p(x)log p(x)","∫f(x)dx","Φ(x) = P(X ≤ x)","E[X] = μ","Var(X) = σ²","P(A|B) = P(B|A)P(A)/P(B)"].map((h,f)=>w.jsx(Be.div,{className:"absolute text-limeGreen text-xs font-mono whitespace-nowrap",initial:{x:"50%",y:"50%",scale:0},animate:{x:`${50+(Math.random()-.5)*300}%`,y:`${50+(Math.random()-.5)*300}%`,scale:[0,1,1,0],opacity:[0,1,1,0],rotate:(Math.random()-.5)*90},transition:{duration:2,repeat:1/0,delay:f*.2,ease:"easeOut"},style:{textShadow:"0 0 10px rgba(171, 248, 11, 0.8)"},children:h},f))})]}),w.jsxs(Be.button,{whileHover:{scale:1.1},className:`p-4 glassmorphism rounded-xl hover:bg-white/10 transition-colors
                     group relative`,children:[w.jsx("svg",{className:"w-8 h-8 text-mossGreen animate-pulse",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),w.jsx("span",{className:`absolute -top-8 right-0 px-2 py-1 bg-raisinBlack/90 text-xs rounded
                           opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap`,children:"Play Responsibly"})]})]}),w.jsxs("div",{className:"mt-6 flex justify-between text-sm text-beigeCream/60",children:[w.jsxs("span",{children:["Bet: ",t," WNT"]}),w.jsxs("span",{children:["Potential Win: ",t*2," WNT"]}),w.jsxs("span",{children:["Balance After: ",n-t," WNT"]})]})]})})}function yte({slotName:t,balance:e,sessionTime:n,onOpenSettings:i,onSelectSlot:r}){const[s,a]=D.useState(e);D.useEffect(()=>{const l=e-s;if(l!==0){const u=l/20;let h=s,f=0;const m=setInterval(()=>{h+=u,f++,f>=20?(a(e),clearInterval(m)):a(Math.round(h))},30);return()=>clearInterval(m)}},[e,s]);const o=l=>{const c=Math.floor(l/3600),u=Math.floor(l%3600/60),h=l%60;return`${c.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}:${h.toString().padStart(2,"0")}`};return w.jsx("header",{className:"glassmorphism border-b border-white/10",children:w.jsx("div",{className:"container mx-auto px-6 py-4",children:w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs(Be.button,{onClick:r,whileHover:{scale:1.05},className:"group",children:[w.jsx("h1",{className:"text-2xl font-bold text-cream group-hover:text-acid transition-colors",children:w.jsx("span",{className:"inline-block group-hover:animate-glitch",children:t})}),w.jsx("p",{className:"text-sm text-cream/50",children:"Click to change slot"})]}),w.jsxs("div",{className:"flex items-center space-x-8",children:[w.jsxs(Be.div,{className:"text-center",whileHover:{scale:1.05},children:[w.jsx("p",{className:"text-sm text-cream/50 mb-1",children:"WNT Balance"}),w.jsx(Be.p,{className:"text-2xl font-bold text-acid",initial:{scale:1.2,color:"#ffffff"},animate:{scale:1,color:"#ADFF00"},transition:{duration:.3},children:s.toLocaleString()},s)]}),w.jsxs("div",{className:"text-center",children:[w.jsx("p",{className:"text-sm text-cream/50 mb-1",children:"Session Time"}),w.jsx("p",{className:"text-2xl font-mono text-cream animate-pulse-glow",children:o(n)})]}),w.jsx(Be.button,{onClick:i,whileHover:{scale:1.1,rotate:90},whileTap:{scale:.9},className:"p-3 rounded-xl glassmorphism hover:bg-white/10 transition-colors",children:w.jsxs("svg",{className:"w-6 h-6 text-cream",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})]})})})}const UB=[{id:"1",name:"Lucky Fortune",theme:"Asian",volatility:"Medium",rtp:96.5,color:"#FF6B6B"},{id:"2",name:"Cosmic Cash",theme:"Space",volatility:"High",rtp:94.8,color:"#4ECDC4"},{id:"3",name:"Golden Pharaoh",theme:"Egyptian",volatility:"Low",rtp:97.2,color:"#FFD93D"},{id:"4",name:"Wild Safari",theme:"Animals",volatility:"Medium",rtp:95.9,color:"#95E1D3"},{id:"5",name:"Neon Nights",theme:"Retro",volatility:"High",rtp:93.5,color:"#F38181"},{id:"6",name:"Ocean Treasures",theme:"Underwater",volatility:"Low",rtp:96.8,color:"#08D9D6"}];function xte({slot:t,index:e,totalSlots:n,isSelected:i,onSelect:r}){const s=D.useRef(null),a=e/n*Math.PI*2;return Ur(o=>{if(s.current){const l=o.clock.elapsedTime;s.current.position.x=Math.sin(a+l*.2)*3,s.current.position.z=Math.cos(a+l*.2)*3,s.current.rotation.y=-a-l*.2;const c=Math.max(0,Math.cos(a+l*.2));s.current.scale.setScalar(.8+c*.2)}}),w.jsx(QE,{speed:2,rotationIntensity:.2,floatIntensity:.3,children:w.jsxs("group",{ref:s,onClick:r,children:[w.jsx(C$,{args:[2,3,.3],radius:.1,smoothness:4,children:w.jsx("meshStandardMaterial",{color:t.color,emissive:t.color,emissiveIntensity:i?.5:.2,roughness:.3,metalness:.8})}),w.jsx(Uf,{position:[0,.5,.2],fontSize:.3,color:"white",anchorX:"center",anchorY:"middle",font:"/fonts/inter-bold.woff",children:t.name}),w.jsx(Uf,{position:[0,0,.2],fontSize:.2,color:"white",anchorX:"center",anchorY:"middle",children:t.theme}),w.jsxs(Uf,{position:[0,-.5,.2],fontSize:.15,color:"white",anchorX:"center",anchorY:"middle",children:["RTP: ",t.rtp,"%"]})]})})}function _te({currentSlot:t,onSelect:e,onClose:n}){const[i,r]=D.useState(t),[s,a]=D.useState("all"),o=s==="all"?UB:UB.filter(c=>c.volatility.toLowerCase()===s),l=c=>{r(c),setTimeout(()=>{e(c)},300)};return w.jsx(zp,{children:w.jsxs(Be.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-6",children:[w.jsx(Be.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n,className:"absolute inset-0 bg-black/70 backdrop-blur-sm"}),w.jsxs(Be.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"relative w-full max-w-6xl h-[80vh] glassmorphism rounded-3xl p-8",children:[w.jsxs("div",{className:"flex justify-between items-center mb-6",children:[w.jsx("h2",{className:"text-3xl font-bold text-cream",children:"Select a Slot Machine"}),w.jsx(Be.button,{onClick:n,whileHover:{scale:1.1,rotate:90},whileTap:{scale:.9},className:"p-2 rounded-xl hover:bg-white/10 transition-colors",children:w.jsx("svg",{className:"w-6 h-6 text-cream",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),w.jsx("div",{className:"flex space-x-3 mb-6",children:["all","low","medium","high"].map(c=>w.jsx(Be.button,{onClick:()=>a(c),whileHover:{scale:1.05},whileTap:{scale:.95},className:`px-4 py-2 rounded-xl capitalize transition-all ${s===c?"bg-acid text-djungle":"bg-white/10 text-cream hover:bg-white/20"}`,children:c==="all"?"All Slots":`${c} Volatility`},c))}),w.jsx("div",{className:"h-[400px] rounded-2xl overflow-hidden bg-gradient-to-b from-transparent to-djungle/50",children:w.jsxs($h,{camera:{position:[0,0,8],fov:50},children:[w.jsx("ambientLight",{intensity:.5}),w.jsx("pointLight",{position:[10,10,10],intensity:1}),w.jsx("spotLight",{position:[0,10,0],angle:.3,penumbra:1,intensity:.5}),o.map((c,u)=>w.jsx(xte,{slot:c,index:u,totalSlots:o.length,isSelected:i===c.name,onSelect:()=>l(c.name)},c.id))]})}),w.jsxs(Be.div,{className:"mt-6 text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[w.jsx("p",{className:"text-cream/60 mb-2",children:"Selected:"}),w.jsx("p",{className:"text-2xl font-bold text-acid",children:i})]},i),w.jsx("div",{className:"mt-4 flex justify-center space-x-4",children:[1,2,3].map(c=>w.jsx(Be.div,{className:"w-20 h-20 bg-white/10 rounded-xl",animate:{opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0,delay:c*.2}},c))})]})]})})}function _k({videoSrc:t}){const e=D.useRef(null);return D.useEffect(()=>{e.current&&e.current.play().catch(n=>{console.error("Video autoplay failed:",n)})},[]),w.jsx("div",{className:"absolute inset-0 overflow-hidden",children:w.jsx("video",{ref:e,className:"absolute inset-0 w-full h-full object-cover",loop:!0,muted:!0,playsInline:!0,autoPlay:!0,children:w.jsx("source",{src:t,type:"video/mp4"})})})}function Ste(){const t=Ml(),[e,n]=D.useState(45),[i,r]=D.useState(1e3),[s,a]=D.useState(0),[o,l]=D.useState("Lucky Fortune"),[c,u]=D.useState(10),[h,f]=D.useState(!1),[m,g]=D.useState(!1);D.useEffect(()=>{const x=setInterval(()=>{a(v=>v+1)},1e3);return()=>clearInterval(x)},[]),D.useEffect(()=>{if(h){const x=setInterval(()=>{n(Math.floor(Math.random()*100))},100);return setTimeout(()=>{clearInterval(x),f(!1);const v=e>50;r(_=>v?_+c*2:_-c)},2e3),()=>clearInterval(x)}},[h,c,e]);const y=()=>{i>=c&&!h&&f(!0)};return w.jsxs(Be.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen relative overflow-hidden",children:[w.jsx(_k,{videoSrc:"/assets/videos/chat-background-flamingo.mp4"}),w.jsxs("div",{className:"relative z-10",children:[w.jsx(yte,{slotName:o,balance:i,sessionTime:s,onOpenSettings:()=>t("/settings"),onSelectSlot:()=>g(!0)}),w.jsxs("div",{className:"container mx-auto px-6 py-8",children:[w.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[w.jsx("div",{className:"flex items-center justify-center",children:w.jsx(pte,{probability:e,isSpinning:h})}),w.jsx("div",{className:"flex items-stretch",children:w.jsx(xk,{probability:e,balance:i,isSpinning:h})})]}),w.jsx("div",{className:"mt-8",children:w.jsx(vte,{betSize:c,setBetSize:u,balance:i,isSpinning:h,onSpin:y})})]})]}),m&&w.jsx(_te,{currentSlot:o,onSelect:x=>{l(x),g(!1)},onClose:()=>g(!1)})]})}function Ate(){const t=Ml(),[e,n]=D.useState({soundEnabled:!0,vibrationEnabled:!0,notificationsEnabled:!0,autoSpinEnabled:!1,sessionLimit:120,lossLimit:100,winLimit:500,breakReminder:30}),[i,r]=D.useState("general"),s=o=>{n(l=>({...l,[o]:!l[o]}))},a=(o,l)=>{n(c=>({...c,[o]:l}))};return w.jsxs(Be.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen bg-gradient-to-br from-deepGreen via-djungle to-forest",children:[w.jsx("div",{className:"fixed inset-0 opacity-20",children:w.jsx(Be.div,{className:"absolute inset-0 bg-gradient-to-br from-acid via-salmon to-sage",animate:{backgroundPosition:["0% 0%","100% 100%"]},transition:{duration:20,repeat:1/0,repeatType:"reverse"},style:{backgroundSize:"200% 200%"}})}),w.jsxs("div",{className:"relative z-10",children:[w.jsx("header",{className:"glassmorphism border-b border-white/10",children:w.jsx("div",{className:"container mx-auto px-6 py-4",children:w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs(Be.button,{onClick:()=>t("/dashboard"),whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex items-center space-x-2 text-cream hover:text-acid transition-colors",children:[w.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),w.jsx("span",{children:"Back to Game"})]}),w.jsx("h1",{className:"text-2xl font-bold text-cream",children:"Settings"}),w.jsx("div",{className:"w-24"})," "]})})}),w.jsxs("div",{className:"container mx-auto px-6 py-6",children:[w.jsxs("div",{className:"flex space-x-4 mb-8",children:[w.jsx(Be.button,{onClick:()=>r("general"),whileHover:{scale:1.05},whileTap:{scale:.95},className:`px-6 py-3 rounded-xl font-semibold transition-all ${i==="general"?"bg-acid text-djungle":"glassmorphism text-cream hover:bg-white/10"}`,children:"General Settings"}),w.jsx(Be.button,{onClick:()=>r("responsible"),whileHover:{scale:1.05},whileTap:{scale:.95},className:`px-6 py-3 rounded-xl font-semibold transition-all ${i==="responsible"?"bg-acid text-djungle":"glassmorphism text-cream hover:bg-white/10"}`,children:"Responsible Gaming"})]}),w.jsx(Be.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"glassmorphism rounded-3xl p-8",children:i==="general"?w.jsxs("div",{className:"space-y-6",children:[w.jsx(Sv,{label:"Sound Effects",description:"Play sound effects during gameplay",enabled:e.soundEnabled,onToggle:()=>s("soundEnabled")}),w.jsx(Sv,{label:"Vibration",description:"Enable haptic feedback (mobile only)",enabled:e.vibrationEnabled,onToggle:()=>s("vibrationEnabled")}),w.jsx(Sv,{label:"Notifications",description:"Receive notifications about wins and bonuses",enabled:e.notificationsEnabled,onToggle:()=>s("notificationsEnabled")}),w.jsx(Sv,{label:"Auto Spin",description:"Automatically spin after each round",enabled:e.autoSpinEnabled,onToggle:()=>s("autoSpinEnabled")})]}):w.jsxs("div",{className:"space-y-8",children:[w.jsxs("div",{className:"mb-6",children:[w.jsx("h3",{className:"text-xl font-semibold text-acid mb-2",children:"Protect Yourself"}),w.jsx("p",{className:"text-cream/70",children:"Set limits to ensure you play responsibly and within your means."})]}),w.jsx(Av,{label:"Session Time Limit",description:"Maximum playing time per session",value:e.sessionLimit,min:30,max:240,step:30,unit:"minutes",onChange:o=>a("sessionLimit",o)}),w.jsx(Av,{label:"Loss Limit",description:"Maximum amount you're willing to lose",value:e.lossLimit,min:10,max:1e3,step:10,unit:"WNT",onChange:o=>a("lossLimit",o)}),w.jsx(Av,{label:"Win Limit",description:"Stop playing after winning this amount",value:e.winLimit,min:50,max:5e3,step:50,unit:"WNT",onChange:o=>a("winLimit",o)}),w.jsx(Av,{label:"Break Reminder",description:"Get reminded to take a break",value:e.breakReminder,min:15,max:120,step:15,unit:"minutes",onChange:o=>a("breakReminder",o)}),w.jsx(Be.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:`w-full mt-8 p-4 bg-sage/20 border border-sage/50 rounded-xl
                           text-sage hover:bg-sage/30 transition-all`,children:w.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[w.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"})}),w.jsx("span",{className:"font-semibold",children:"Need Help? Contact Support"})]})})]})},i)]})]})]})}function Sv({label:t,description:e,enabled:n,onToggle:i}){return w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{children:[w.jsx("h4",{className:"text-lg font-semibold text-cream",children:t}),w.jsx("p",{className:"text-sm text-cream/60",children:e})]}),w.jsx(Be.button,{onClick:i,className:`relative w-16 h-8 rounded-full transition-colors ${n?"bg-acid":"bg-white/20"}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:w.jsx(Be.div,{className:"absolute top-1 w-6 h-6 bg-white rounded-full shadow-lg",animate:{left:n?"34px":"4px"},transition:{type:"spring",stiffness:500,damping:30}})})]})}function Av({label:t,description:e,value:n,min:i,max:r,step:s,unit:a,onChange:o}){return w.jsxs("div",{children:[w.jsxs("div",{className:"flex justify-between mb-2",children:[w.jsxs("div",{children:[w.jsx("h4",{className:"text-lg font-semibold text-cream",children:t}),w.jsx("p",{className:"text-sm text-cream/60",children:e})]}),w.jsxs("span",{className:"text-xl font-bold text-acid",children:[n," ",a]})]}),w.jsx("div",{className:"relative",children:w.jsx("input",{type:"range",min:i,max:r,step:s,value:n,onChange:l=>o(Number(l.target.value)),className:`w-full h-2 bg-white/20 rounded-lg appearance-none cursor-pointer
                   slider-thumb:appearance-none slider-thumb:w-6 slider-thumb:h-6
                   slider-thumb:bg-acid slider-thumb:rounded-full slider-thumb:cursor-pointer
                   slider-thumb:shadow-[0_0_10px_rgba(173,255,0,0.5)]`,style:{background:`linear-gradient(to right, var(--color-acid) 0%, var(--color-acid) ${(n-i)/(r-i)*100}%, rgba(255,255,255,0.2) ${(n-i)/(r-i)*100}%, rgba(255,255,255,0.2) 100%)`}})})]})}function wte(){const t=[{name:"Dr. Sarah Chen",role:"Chief AI Scientist",description:"Former quantum computing researcher at MIT. Pioneered the integration of neural networks with RNG analysis.",image:"/assets/images/team-1.png"},{name:"Marcus Rivera",role:"Lead Developer",description:"15+ years in gambling software. Discovered critical vulnerabilities in major casino systems.",image:"/assets/images/team-2.png"},{name:"Elena Volkov",role:"Data Scientist",description:"Expert in pattern recognition and predictive modeling. Published 20+ papers on randomness theory.",image:"/assets/images/team-3.png"},{name:"James Park",role:"Security Expert",description:"Ethical hacker who exposed flaws in online casino RNG implementations worldwide.",image:"/assets/images/team-4.png"}];return w.jsxs(Be.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen bg-gradient-to-br from-darkGreen via-raisinBlack to-darkGreen",children:[w.jsxs("section",{className:"relative min-h-[60vh] flex items-center justify-center overflow-hidden",children:[w.jsx("div",{className:"absolute inset-0",children:w.jsxs($h,{camera:{position:[0,0,5]},children:[w.jsx(KE,{enableZoom:!1,enablePan:!1,autoRotate:!0,autoRotateSpeed:.5}),w.jsx("ambientLight",{intensity:.3}),w.jsx("pointLight",{position:[10,10,10],intensity:.5,color:"#E59FCE"}),w.jsx("pointLight",{position:[-10,-10,-10],intensity:.5,color:"#ABF80B"}),w.jsx(gk,{animationState:"thinking",scale:2}),w.jsx(vk,{count:50,density:.5,color:"#ABF80B"})]})}),w.jsxs("div",{className:"relative z-10 container mx-auto px-6 text-center",children:[w.jsxs(Be.h1,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"text-5xl sm:text-6xl md:text-7xl font-bold mb-6",children:[w.jsx("span",{className:"text-limeGreen",children:"Disrupting"})," ",w.jsx("span",{className:"text-pink",children:"the House Edge"})]}),w.jsx(Be.p,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:"text-xl text-beigeCream/80 max-w-3xl mx-auto",children:`We're a team of renegade mathematicians, AI researchers, and ethical hackers united by one mission: proving that casino "randomness" is anything but random.`})]})]}),w.jsx("section",{className:"py-20 relative",children:w.jsx("div",{className:"container mx-auto px-6",children:w.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[w.jsxs(Be.div,{initial:{x:-50,opacity:0},whileInView:{x:0,opacity:1},transition:{duration:.8},children:[w.jsx("h2",{className:"text-4xl font-bold mb-6 text-limeGreen",children:"Our Mission"}),w.jsx("p",{className:"text-lg text-beigeCream/80 mb-6",children:`For decades, casinos have hidden behind the myth of "true randomness" to justify their astronomical profits. We're here to shatter that illusion.`}),w.jsx("p",{className:"text-lg text-beigeCream/80 mb-6",children:"Using advanced quantum-neural analysis and pattern recognition algorithms that casinos don't want you to know about, flamingo.ai exposes the predictable patterns in their so-called random number generators."}),w.jsxs("div",{className:"flex items-center space-x-4",children:[w.jsxs("div",{className:"text-center",children:[w.jsx("div",{className:"text-4xl font-bold text-pink",children:"98.3%"}),w.jsx("div",{className:"text-sm text-beigeCream/60",children:"Pattern Detection Rate"})]}),w.jsxs("div",{className:"text-center",children:[w.jsx("div",{className:"text-4xl font-bold text-limeGreen",children:"2.7M"}),w.jsx("div",{className:"text-sm text-beigeCream/60",children:"Spins Analyzed"})]}),w.jsxs("div",{className:"text-center",children:[w.jsx("div",{className:"text-4xl font-bold text-pink",children:"15K+"}),w.jsx("div",{className:"text-sm text-beigeCream/60",children:"Active Users"})]})]})]}),w.jsx(Be.div,{initial:{x:50,opacity:0},whileInView:{x:0,opacity:1},transition:{duration:.8},className:"relative",children:w.jsxs("div",{className:"glassmorphism rounded-2xl p-8",children:[w.jsx("h3",{className:"text-2xl font-bold mb-4 text-pink",children:"The Truth They Hide"}),w.jsxs("ul",{className:"space-y-3",children:[w.jsxs("li",{className:"flex items-start",children:[w.jsx("span",{className:"text-limeGreen mr-2",children:"▸"}),w.jsx("span",{className:"text-beigeCream/80",children:"RNG software has exploitable patterns"})]}),w.jsxs("li",{className:"flex items-start",children:[w.jsx("span",{className:"text-limeGreen mr-2",children:"▸"}),w.jsx("span",{className:"text-beigeCream/80",children:'Slot machines are programmed to create "near misses"'})]}),w.jsxs("li",{className:"flex items-start",children:[w.jsx("span",{className:"text-limeGreen mr-2",children:"▸"}),w.jsx("span",{className:"text-beigeCream/80",children:"Online casinos track and limit winning players"})]}),w.jsxs("li",{className:"flex items-start",children:[w.jsx("span",{className:"text-limeGreen mr-2",children:"▸"}),w.jsx("span",{className:"text-beigeCream/80",children:"The house edge is artificially inflated"})]})]})]})})]})})}),w.jsx("section",{className:"py-20 bg-raisinBlack/50",children:w.jsxs("div",{className:"container mx-auto px-6",children:[w.jsxs(Be.div,{initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},className:"text-center mb-12",children:[w.jsxs("h2",{className:"text-4xl font-bold mb-4",children:[w.jsx("span",{className:"text-limeGreen",children:"Meet the"})," ",w.jsx("span",{className:"text-pink",children:"Disruptors"})]}),w.jsx("p",{className:"text-lg text-beigeCream/70 max-w-2xl mx-auto",children:"Our team consists of industry whistleblowers and brilliant minds who refused to stay silent."})]}),w.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:t.map((e,n)=>w.jsxs(Be.div,{initial:{y:50,opacity:0},whileInView:{y:0,opacity:1},transition:{delay:n*.1},whileHover:{y:-10},className:"glassmorphism rounded-2xl p-6 text-center",children:[w.jsx("div",{className:"w-32 h-32 mx-auto mb-4 rounded-full bg-gradient-to-br from-pink/20 to-limeGreen/20 flex items-center justify-center",children:w.jsx("span",{className:"text-5xl",children:"🦩"})}),w.jsx("h3",{className:"text-xl font-bold text-limeGreen mb-2",children:e.name}),w.jsx("p",{className:"text-sm text-pink mb-3",children:e.role}),w.jsx("p",{className:"text-sm text-beigeCream/70",children:e.description})]},e.name))})]})}),w.jsx("section",{className:"py-20",children:w.jsx("div",{className:"container mx-auto px-6 text-center",children:w.jsxs(Be.div,{initial:{scale:.9,opacity:0},whileInView:{scale:1,opacity:1},transition:{duration:.8},className:"glassmorphism rounded-3xl p-12 max-w-3xl mx-auto",children:[w.jsxs("h2",{className:"text-3xl font-bold mb-6",children:["Ready to ",w.jsx("span",{className:"text-limeGreen",children:"Level the Playing Field"}),"?"]}),w.jsx("p",{className:"text-lg text-beigeCream/80 mb-8",children:`Join thousands who've discovered the truth about casino "randomness" and are finally winning.`}),w.jsx(Be.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.href="/dashboard",className:`px-8 py-4 bg-limeGreen text-darkGreen font-bold rounded-xl text-lg
                       hover:shadow-[0_0_30px_rgba(171,248,11,0.5)] transition-all duration-300`,children:"Start Winning Now"})]})})})]})}function Mte(){const[t,e]=D.useState(0),n=[{title:"Online Slots Pattern Detection",icon:"🎰",description:"Identify exploitable patterns in online slot RNG algorithms",details:{problem:"Online casinos claim their slots use 'certified' RNG, but our analysis shows predictable seed patterns.",solution:"Flamingo AI analyzes spin sequences in real-time, detecting pattern emergence before casinos can shuffle seeds.",results:["73% pattern detection accuracy","Average 23% increase in RTP","Identifies hot/cold cycles within 50 spins"],testimonial:{text:"I thought slots were random until Flamingo showed me the patterns. Turned $100 into $3,400 in one session!",author:"Alex M., Professional Player"}}},{title:"Live Casino Bias Exploitation",icon:"🎲",description:"Detect dealer patterns and wheel biases in live games",details:{problem:"Live dealers develop unconscious patterns. Roulette wheels develop physical biases over time.",solution:"Our AI tracks dealer behavior, ball physics, and wheel sectors to identify exploitable biases.",results:["Detected bias in 67% of wheels tested","15-20% edge on biased sectors","Dealer signature recognition in 200 spins"],testimonial:{text:"The wheel bias detection is insane. Found a biased sector that hit 3x more than probability suggests.",author:"Maria S., Former Casino Employee"}}},{title:"Bonus Hunting Optimization",icon:"💰",description:"Maximize EV from casino bonuses and promotions",details:{problem:"Casinos design bonuses with hidden traps and impossible wagering requirements.",solution:"Flamingo AI calculates true bonus EV and identifies the optimal strategy for clearing requirements.",results:["Average 340% bonus value extraction","Identifies +EV bonus opportunities","Wagering requirement optimization"],testimonial:{text:"Turned 50+ 'unbeatable' bonuses into $12,000 profit using Flamingo's calculations.",author:"James T., Bonus Hunter"}}},{title:"Session Timing Analysis",icon:"⏰",description:"Predict optimal play windows based on casino algorithms",details:{problem:"Casinos adjust their algorithms based on player activity, time of day, and session patterns.",solution:"Our AI monitors global casino patterns to identify when RTP is highest and security is lowest.",results:["Identified 4-hour daily windows with +5% RTP","Avoided 89% of 'tightening' periods","Session timing increased wins by 41%"],testimonial:{text:"Playing during Flamingo's recommended windows completely changed my results. It's like insider trading for casinos.",author:"Chen W., Data Scientist"}}}],i=n[t];return w.jsxs(Be.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen bg-gradient-to-br from-darkGreen via-raisinBlack to-darkGreen",children:[w.jsxs("section",{className:"py-20 relative overflow-hidden",children:[w.jsx("div",{className:"absolute inset-0 opacity-10",children:w.jsx("div",{className:"absolute inset-0 bg-[url('/assets/images/pattern-grid.svg')] bg-repeat animate-pulse"})}),w.jsxs("div",{className:"container mx-auto px-6 relative z-10",children:[w.jsxs(Be.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},className:"text-center mb-16",children:[w.jsxs("h1",{className:"text-5xl sm:text-6xl md:text-7xl font-bold mb-6",children:[w.jsx("span",{className:"text-limeGreen",children:"Exploit"})," ",w.jsx("span",{className:"text-pink",children:"Every Edge"})]}),w.jsx("p",{className:"text-xl text-beigeCream/80 max-w-3xl mx-auto",children:"Real-world applications of our quantum-neural technology. See how players are crushing the house using patterns casinos don't want you to find."})]}),w.jsx("div",{className:"grid md:grid-cols-4 gap-4 mb-12",children:n.map((r,s)=>w.jsxs(Be.button,{onClick:()=>e(s),whileHover:{scale:1.05},whileTap:{scale:.95},className:`p-6 rounded-2xl transition-all duration-300 ${t===s?"bg-limeGreen text-darkGreen shadow-[0_0_30px_rgba(171,248,11,0.5)]":"glassmorphism hover:bg-white/10"}`,children:[w.jsx("div",{className:"text-4xl mb-2",children:r.icon}),w.jsx("h3",{className:`font-bold ${t===s?"text-darkGreen":"text-limeGreen"}`,children:r.title}),w.jsx("p",{className:`text-sm mt-2 ${t===s?"text-darkGreen/80":"text-beigeCream/60"}`,children:r.description})]},s))}),w.jsx(Be.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"glassmorphism rounded-3xl p-8 md:p-12",children:w.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[w.jsxs("div",{children:[w.jsx("h2",{className:"text-3xl font-bold text-limeGreen mb-6",children:"The Problem"}),w.jsx("p",{className:"text-lg text-beigeCream/80 mb-8",children:i.details.problem}),w.jsx("h2",{className:"text-3xl font-bold text-pink mb-6",children:"Our Solution"}),w.jsx("p",{className:"text-lg text-beigeCream/80 mb-8",children:i.details.solution}),w.jsxs("div",{className:"bg-darkGreen/30 rounded-2xl p-6 border border-limeGreen/20",children:[w.jsxs("p",{className:"text-beigeCream/90 italic mb-3",children:['"',i.details.testimonial.text,'"']}),w.jsxs("p",{className:"text-limeGreen font-semibold",children:["— ",i.details.testimonial.author]})]})]}),w.jsxs("div",{children:[w.jsx("h2",{className:"text-3xl font-bold text-limeGreen mb-6",children:"Proven Results"}),w.jsx("div",{className:"space-y-4",children:i.details.results.map((r,s)=>w.jsxs(Be.div,{initial:{x:50,opacity:0},animate:{x:0,opacity:1},transition:{delay:s*.1},className:"flex items-center space-x-4 p-4 bg-white/5 rounded-xl",children:[w.jsx("div",{className:"w-12 h-12 bg-limeGreen/20 rounded-full flex items-center justify-center",children:w.jsx("span",{className:"text-limeGreen font-bold",children:s+1})}),w.jsx("p",{className:"text-beigeCream",children:r})]},s))}),w.jsxs("div",{className:"mt-8 p-6 bg-darkGreen/20 rounded-2xl",children:[w.jsx("h3",{className:"text-xl font-bold text-pink mb-4",children:"Performance Metrics"}),w.jsxs("div",{className:"space-y-3",children:[w.jsxs("div",{children:[w.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[w.jsx("span",{className:"text-beigeCream/70",children:"Detection Accuracy"}),w.jsx("span",{className:"text-limeGreen",children:"87%"})]}),w.jsx("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:w.jsx(Be.div,{initial:{width:0},whileInView:{width:"87%"},transition:{duration:1,delay:.2},className:"h-full bg-limeGreen"})})]}),w.jsxs("div",{children:[w.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[w.jsx("span",{className:"text-beigeCream/70",children:"Profit Increase"}),w.jsx("span",{className:"text-pink",children:"+42%"})]}),w.jsx("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:w.jsx(Be.div,{initial:{width:0},whileInView:{width:"42%"},transition:{duration:1,delay:.3},className:"h-full bg-pink"})})]}),w.jsxs("div",{children:[w.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[w.jsx("span",{className:"text-beigeCream/70",children:"User Satisfaction"}),w.jsx("span",{className:"text-limeGreen",children:"96%"})]}),w.jsx("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:w.jsx(Be.div,{initial:{width:0},whileInView:{width:"96%"},transition:{duration:1,delay:.4},className:"h-full bg-gradient-to-r from-pink to-limeGreen"})})]})]})]})]})]})},t)]})]}),w.jsx("section",{className:"py-20 bg-raisinBlack/50",children:w.jsx("div",{className:"container mx-auto px-6",children:w.jsx("div",{className:"grid md:grid-cols-4 gap-8 text-center",children:[{value:"$2.3M",label:"Total Winnings",color:"text-limeGreen"},{value:"15K+",label:"Active Users",color:"text-pink"},{value:"98.3%",label:"Pattern Detection",color:"text-limeGreen"},{value:"24/7",label:"AI Analysis",color:"text-pink"}].map((r,s)=>w.jsxs(Be.div,{initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},transition:{delay:s*.1},className:"glassmorphism rounded-2xl p-8",children:[w.jsx("div",{className:`text-4xl font-bold mb-2 ${r.color}`,children:r.value}),w.jsx("div",{className:"text-beigeCream/70",children:r.label})]},s))})})}),w.jsx("section",{className:"py-20",children:w.jsx("div",{className:"container mx-auto px-6 text-center",children:w.jsxs(Be.div,{initial:{scale:.9,opacity:0},whileInView:{scale:1,opacity:1},transition:{duration:.8},children:[w.jsxs("h2",{className:"text-4xl font-bold mb-6",children:[w.jsx("span",{className:"text-pink",children:"Stop Playing"})," ",w.jsx("span",{className:"text-limeGreen",children:"Their Game"})]}),w.jsx("p",{className:"text-xl text-beigeCream/80 max-w-2xl mx-auto mb-8",children:"Every second you play without Flamingo AI, you're letting casinos keep their edge. It's time to flip the script."}),w.jsx(Be.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.href="/pricing",className:`px-8 py-4 bg-limeGreen text-darkGreen font-bold rounded-xl text-lg
                       hover:shadow-[0_0_30px_rgba(171,248,11,0.5)] transition-all duration-300`,children:"See Pricing Plans"})]})})})]})}function Ete(){const[t,e]=D.useState("monthly"),n=[{name:"Rookie",icon:"🎰",monthlyPrice:49,yearlyPrice:470,description:"Perfect for beginners ready to beat the house",features:["Basic pattern detection for online slots","Up to 1,000 spins analyzed per day","Email support within 48 hours","Access to beginner strategies","Basic probability calculator","1 casino account monitoring"],highlighted:!1,cta:"Start Winning"},{name:"Professional",icon:"💎",monthlyPrice:149,yearlyPrice:1430,description:"For serious players who want maximum edge",features:["Advanced AI pattern detection","Unlimited spin analysis","Real-time alerts & notifications","Live casino bias detection","Bonus hunting optimizer","5 casino accounts monitoring","Priority 24/7 support","Session timing analysis"],highlighted:!0,cta:"Go Professional"},{name:"Whale",icon:"🐋",monthlyPrice:499,yearlyPrice:4790,description:"Exclusive features for high-stakes players",features:["Everything in Professional","Custom AI model training","VIP direct phone support","Unlimited casino accounts","API access for automation","Personal success manager","Exclusive insider strategies","Legal consultation included","Money-back guarantee"],highlighted:!1,cta:"Become a Whale"}],i=[{question:"Is this legal?",answer:"Yes. We use publicly available data and mathematical analysis. We don't hack or manipulate casino software - we simply identify patterns they don't want you to see."},{question:"Will casinos ban me?",answer:"Our AI operates invisibly. Casinos can't detect pattern analysis happening on your device. We also teach you how to avoid detection patterns."},{question:"What's your success rate?",answer:"Our users report an average 42% increase in winnings. Top performers using our Whale plan have reported 300%+ ROI within 6 months."},{question:"Do you offer refunds?",answer:"Whale plan members get a 30-day money-back guarantee. If you don't see improved results, we'll refund your investment."},{question:"How quickly will I see results?",answer:"Most users report significant pattern detection within the first week. Actual winnings depend on your bankroll and discipline in following our strategies."}];return w.jsxs(Be.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen bg-gradient-to-br from-darkGreen via-raisinBlack to-darkGreen",children:[w.jsx("section",{className:"py-20 relative overflow-hidden",children:w.jsxs("div",{className:"container mx-auto px-6",children:[w.jsxs(Be.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},className:"text-center mb-12",children:[w.jsxs("h1",{className:"text-5xl sm:text-6xl md:text-7xl font-bold mb-6",children:[w.jsx("span",{className:"text-limeGreen",children:"Invest in"})," ",w.jsx("span",{className:"text-pink",children:"Your Edge"})]}),w.jsx("p",{className:"text-xl text-beigeCream/80 max-w-3xl mx-auto mb-8",children:"Every day without Flamingo AI is money left on the casino floor. Choose your weapon and start taking back what's yours."}),w.jsxs("div",{className:"inline-flex items-center bg-white/10 rounded-xl p-1 backdrop-blur-sm",children:[w.jsx("button",{onClick:()=>e("monthly"),className:`px-6 py-3 rounded-lg font-semibold transition-all ${t==="monthly"?"bg-limeGreen text-darkGreen":"text-beigeCream hover:text-white"}`,children:"Monthly"}),w.jsx("button",{onClick:()=>e("yearly"),className:`px-6 py-3 rounded-lg font-semibold transition-all ${t==="yearly"?"bg-limeGreen text-darkGreen":"text-beigeCream hover:text-white"}`,children:"Yearly (Save 20%)"})]})]}),w.jsx("div",{className:"grid md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:n.map((r,s)=>w.jsxs(Be.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:s*.1},whileHover:{y:-10},className:`relative rounded-3xl p-8 ${r.highlighted?"bg-gradient-to-br from-limeGreen/20 to-pink/20 border-2 border-limeGreen":"glassmorphism"}`,children:[r.highlighted&&w.jsx("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2",children:w.jsx("span",{className:"bg-limeGreen text-darkGreen px-4 py-1 rounded-full text-sm font-bold",children:"MOST POPULAR"})}),w.jsxs("div",{className:"text-center mb-6",children:[w.jsx("div",{className:"text-5xl mb-4",children:r.icon}),w.jsx("h3",{className:"text-2xl font-bold text-limeGreen mb-2",children:r.name}),w.jsx("p",{className:"text-beigeCream/70 text-sm mb-4",children:r.description}),w.jsxs("div",{className:"mb-6",children:[w.jsxs("span",{className:"text-4xl font-bold text-pink",children:["$",t==="monthly"?r.monthlyPrice:r.yearlyPrice]}),w.jsxs("span",{className:"text-beigeCream/60",children:["/",t==="monthly"?"month":"year"]}),t==="yearly"&&w.jsxs("div",{className:"text-limeGreen text-sm mt-1",children:["Save $",r.monthlyPrice*12-r.yearlyPrice,"/year"]})]}),w.jsx(Be.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:`w-full py-3 rounded-xl font-bold transition-all ${r.highlighted?"bg-limeGreen text-darkGreen hover:shadow-[0_0_20px_rgba(171,248,11,0.5)]":"bg-pink/20 text-pink border border-pink/50 hover:bg-pink/30"}`,children:r.cta})]}),w.jsx("div",{className:"space-y-3",children:r.features.map((a,o)=>w.jsxs("div",{className:"flex items-start",children:[w.jsx("span",{className:"text-limeGreen mr-2",children:"✓"}),w.jsx("span",{className:"text-beigeCream/80 text-sm",children:a})]},o))})]},r.name))}),w.jsx("div",{className:"mt-16 text-center",children:w.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-8",children:[w.jsxs("div",{className:"flex items-center space-x-2",children:[w.jsx("span",{className:"text-2xl",children:"🔒"}),w.jsx("span",{className:"text-beigeCream/70",children:"256-bit Encryption"})]}),w.jsxs("div",{className:"flex items-center space-x-2",children:[w.jsx("span",{className:"text-2xl",children:"💳"}),w.jsx("span",{className:"text-beigeCream/70",children:"Secure Payments"})]}),w.jsxs("div",{className:"flex items-center space-x-2",children:[w.jsx("span",{className:"text-2xl",children:"🌍"}),w.jsx("span",{className:"text-beigeCream/70",children:"Available Worldwide"})]}),w.jsxs("div",{className:"flex items-center space-x-2",children:[w.jsx("span",{className:"text-2xl",children:"🚫"}),w.jsx("span",{className:"text-beigeCream/70",children:"No Casino Access"})]})]})})]})}),w.jsx("section",{className:"py-20 bg-raisinBlack/50",children:w.jsx("div",{className:"container mx-auto px-6",children:w.jsxs(Be.div,{initial:{opacity:0},whileInView:{opacity:1},className:"max-w-4xl mx-auto",children:[w.jsxs("h2",{className:"text-4xl font-bold text-center mb-12",children:[w.jsx("span",{className:"text-pink",children:"Calculate Your"})," ",w.jsx("span",{className:"text-limeGreen",children:"Potential ROI"})]}),w.jsxs("div",{className:"glassmorphism rounded-3xl p-8",children:[w.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[w.jsxs("div",{children:[w.jsx("h3",{className:"text-xl font-bold text-limeGreen mb-4",children:"Without Flamingo AI"}),w.jsxs("div",{className:"space-y-3",children:[w.jsxs("div",{className:"flex justify-between",children:[w.jsx("span",{className:"text-beigeCream/70",children:"Average Monthly Loss"}),w.jsx("span",{className:"text-pink",children:"-$500"})]}),w.jsxs("div",{className:"flex justify-between",children:[w.jsx("span",{className:"text-beigeCream/70",children:"Win Rate"}),w.jsx("span",{className:"text-pink",children:"47%"})]}),w.jsxs("div",{className:"flex justify-between",children:[w.jsx("span",{className:"text-beigeCream/70",children:"Pattern Detection"}),w.jsx("span",{className:"text-pink",children:"0%"})]})]})]}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-xl font-bold text-limeGreen mb-4",children:"With Flamingo AI"}),w.jsxs("div",{className:"space-y-3",children:[w.jsxs("div",{className:"flex justify-between",children:[w.jsx("span",{className:"text-beigeCream/70",children:"Average Monthly Profit"}),w.jsx("span",{className:"text-limeGreen",children:"+$1,200"})]}),w.jsxs("div",{className:"flex justify-between",children:[w.jsx("span",{className:"text-beigeCream/70",children:"Win Rate"}),w.jsx("span",{className:"text-limeGreen",children:"64%"})]}),w.jsxs("div",{className:"flex justify-between",children:[w.jsx("span",{className:"text-beigeCream/70",children:"Pattern Detection"}),w.jsx("span",{className:"text-limeGreen",children:"87%"})]})]})]})]}),w.jsx("div",{className:"mt-8 p-6 bg-limeGreen/10 rounded-2xl border border-limeGreen/30",children:w.jsxs("p",{className:"text-center text-lg",children:[w.jsx("span",{className:"text-beigeCream",children:"Potential Monthly Improvement: "}),w.jsx("span",{className:"text-2xl font-bold text-limeGreen",children:"+$1,700"})]})})]})]})})}),w.jsx("section",{className:"py-20",children:w.jsxs("div",{className:"container mx-auto px-6",children:[w.jsx(Be.div,{initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},className:"text-center mb-12",children:w.jsxs("h2",{className:"text-4xl font-bold",children:[w.jsx("span",{className:"text-limeGreen",children:"Frequently Asked"})," ",w.jsx("span",{className:"text-pink",children:"Questions"})]})}),w.jsx("div",{className:"max-w-3xl mx-auto space-y-6",children:i.map((r,s)=>w.jsxs(Be.div,{initial:{x:s%2===0?-50:50,opacity:0},whileInView:{x:0,opacity:1},transition:{delay:s*.1},className:"glassmorphism rounded-2xl p-6",children:[w.jsx("h3",{className:"text-xl font-bold text-limeGreen mb-3",children:r.question}),w.jsx("p",{className:"text-beigeCream/80",children:r.answer})]},s))})]})}),w.jsx("section",{className:"py-20",children:w.jsx("div",{className:"container mx-auto px-6 text-center",children:w.jsxs(Be.div,{initial:{scale:.9,opacity:0},whileInView:{scale:1,opacity:1},transition:{duration:.8},className:"glassmorphism rounded-3xl p-12 max-w-3xl mx-auto",children:[w.jsxs("h2",{className:"text-3xl font-bold mb-6",children:["Every Spin Without ",w.jsx("span",{className:"text-limeGreen",children:"Flamingo"})," is Money Lost"]}),w.jsx("p",{className:"text-lg text-beigeCream/80 mb-8",children:"Join 15,000+ players who've stopped letting casinos dictate the odds. Your edge is waiting."}),w.jsx(Be.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.href="/dashboard",className:`px-8 py-4 bg-limeGreen text-darkGreen font-bold rounded-xl text-lg
                       hover:shadow-[0_0_30px_rgba(171,248,11,0.5)] transition-all duration-300`,children:"Start Your Free Trial"}),w.jsx("p",{className:"text-sm text-beigeCream/60 mt-4",children:"No credit card required • Cancel anytime"})]})})})]})}function bte(){const[t,e]=D.useState("all"),n=[{id:"all",name:"All Posts",count:24},{id:"strategies",name:"Winning Strategies",count:8},{id:"exposes",name:"Casino Exposés",count:6},{id:"tutorials",name:"AI Tutorials",count:5},{id:"news",name:"Industry News",count:5}],i={title:"How We Cracked MGM's 'Unbreakable' RNG Algorithm",excerpt:"Our AI discovered a critical flaw in MGM's random number generation that they've been hiding for years. Here's the pattern that cost them millions.",date:"March 20, 2024",readTime:"12"},r=[{title:"The Mathematics Behind Slot Machine 'Randomness'",excerpt:"Dive deep into the pseudo-random number generators used by major casinos and learn why true randomness is a myth they're selling you.",date:"March 18, 2024",readTime:"8",category:"strategies",trending:!0},{title:"5 Patterns Casinos Don't Want You to Notice",excerpt:"Our AI has identified recurring patterns across 50+ online casinos. These are the red flags that indicate when the house is tightening the odds.",date:"March 15, 2024",readTime:"6",category:"strategies",trending:!0},{title:"Exposed: How Live Dealers Are Trained to Manipulate",excerpt:"Former casino employee reveals the psychological tricks and physical techniques dealers use to influence game outcomes.",date:"March 12, 2024",readTime:"10",category:"exposes"},{title:"Beginner's Guide to Pattern Recognition in Slots",excerpt:"Start identifying profitable patterns with our step-by-step tutorial. No advanced math required - just follow our AI's guidance.",date:"March 10, 2024",readTime:"7",category:"tutorials"},{title:"Why Tuesday 3AM is the Best Time to Play (Data Proof)",excerpt:"Our analysis of 2.7 million spins reveals shocking time-based patterns in casino algorithms. Here's when they're most vulnerable.",date:"March 8, 2024",readTime:"5",category:"strategies"},{title:"Breaking: EU Investigates Major Casino for RNG Fraud",excerpt:"Following our exposé, European regulators launch formal investigation into systematic RNG manipulation. Industry insiders are panicking.",date:"March 5, 2024",readTime:"4",category:"news"},{title:"The $50K Weekend: User Success Story",excerpt:"How David M. used Flamingo AI to turn a $500 bankroll into $50,000 over one weekend. Verified results with screenshots.",date:"March 3, 2024",readTime:"9",category:"strategies"},{title:"Casino CEO's Leaked Email Confirms Our Theories",excerpt:"Whistleblower shares internal communications proving casinos actively monitor and limit winning players. The truth is worse than we thought.",date:"February 28, 2024",readTime:"11",category:"exposes"},{title:"Advanced AI Settings for Maximum Pattern Detection",excerpt:"Optimize your Flamingo AI configuration with these pro tips. Increase pattern detection accuracy by up to 15%.",date:"February 25, 2024",readTime:"8",category:"tutorials"}],s=t==="all"?r:r.filter(a=>a.category===t);return w.jsxs(Be.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen bg-gradient-to-br from-darkGreen via-raisinBlack to-darkGreen",children:[w.jsx("section",{className:"py-20 relative overflow-hidden",children:w.jsxs("div",{className:"container mx-auto px-6",children:[w.jsxs(Be.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},className:"text-center mb-12",children:[w.jsxs("h1",{className:"text-5xl sm:text-6xl md:text-7xl font-bold mb-6",children:[w.jsx("span",{className:"text-limeGreen",children:"Exposing"})," ",w.jsx("span",{className:"text-pink",children:"the Truth"})]}),w.jsx("p",{className:"text-xl text-beigeCream/80 max-w-3xl mx-auto",children:"Insider secrets, winning strategies, and hard evidence that casinos are rigging the game. Knowledge they've spent millions trying to suppress."})]}),w.jsxs(Be.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2},className:"glassmorphism rounded-3xl p-8 mb-12 relative overflow-hidden",children:[w.jsx("div",{className:"absolute top-4 right-4",children:w.jsx("span",{className:"bg-pink text-darkGreen px-4 py-1 rounded-full text-sm font-bold",children:"FEATURED"})}),w.jsxs("div",{className:"grid md:grid-cols-2 gap-8 items-center",children:[w.jsxs("div",{children:[w.jsxs("div",{className:"flex items-center space-x-4 text-sm text-beigeCream/60 mb-4",children:[w.jsx("span",{children:i.date}),w.jsx("span",{children:"•"}),w.jsxs("span",{children:[i.readTime," min read"]}),w.jsx("span",{children:"•"}),w.jsx("span",{className:"text-pink",children:"Casino Exposés"})]}),w.jsx("h2",{className:"text-3xl font-bold text-limeGreen mb-4",children:i.title}),w.jsx("p",{className:"text-lg text-beigeCream/80 mb-6",children:i.excerpt}),w.jsx(Be.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:`px-6 py-3 bg-limeGreen text-darkGreen font-bold rounded-xl
                           hover:shadow-[0_0_20px_rgba(171,248,11,0.5)] transition-all`,children:"Read Full Exposé →"})]}),w.jsx("div",{className:"relative h-64 md:h-80 rounded-2xl overflow-hidden bg-gradient-to-br from-pink/20 to-limeGreen/20",children:w.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:w.jsx("span",{className:"text-8xl opacity-50",children:"🎰"})})})]})]}),w.jsx("div",{className:"flex flex-wrap justify-center gap-4 mb-12",children:n.map(a=>w.jsxs(Be.button,{onClick:()=>e(a.id),whileHover:{scale:1.05},whileTap:{scale:.95},className:`px-6 py-3 rounded-xl font-semibold transition-all ${t===a.id?"bg-limeGreen text-darkGreen":"glassmorphism text-beigeCream hover:bg-white/10"}`,children:[a.name," (",a.count,")"]},a.id))}),w.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:s.map((a,o)=>w.jsxs("div",{className:"relative",children:[a.trending&&w.jsx("div",{className:"absolute -top-3 left-4 z-10",children:w.jsx("span",{className:"bg-pink text-darkGreen px-3 py-1 rounded-full text-xs font-bold",children:"🔥 TRENDING"})}),w.jsx(FD,{title:a.title,excerpt:a.excerpt,date:a.date,readTime:a.readTime,index:o})]},o))}),w.jsx("div",{className:"text-center mt-12",children:w.jsx(Be.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:`px-8 py-3 glassmorphism rounded-xl font-semibold text-limeGreen
                       hover:bg-white/10 transition-all`,children:"Load More Articles"})})]})}),w.jsx("section",{className:"py-20 bg-raisinBlack/50",children:w.jsx("div",{className:"container mx-auto px-6",children:w.jsxs(Be.div,{initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},className:"max-w-3xl mx-auto text-center",children:[w.jsxs("h2",{className:"text-4xl font-bold mb-6",children:[w.jsx("span",{className:"text-pink",children:"Never Miss"})," ",w.jsx("span",{className:"text-limeGreen",children:"an Edge"})]}),w.jsx("p",{className:"text-lg text-beigeCream/80 mb-8",children:"Get exclusive strategies, insider leaks, and pattern alerts delivered to your inbox. The kind of information casinos pay millions to keep secret."}),w.jsxs("form",{className:"flex flex-col sm:flex-row gap-4 max-w-md mx-auto",children:[w.jsx("input",{type:"email",placeholder:"Enter your email",className:`flex-1 px-6 py-3 bg-white/10 border border-white/20 rounded-xl
                         text-beigeCream placeholder-beigeCream/50 focus:outline-none
                         focus:border-limeGreen/50 transition-colors`}),w.jsx(Be.button,{type:"submit",whileHover:{scale:1.05},whileTap:{scale:.95},className:`px-8 py-3 bg-limeGreen text-darkGreen font-bold rounded-xl
                         hover:shadow-[0_0_20px_rgba(171,248,11,0.5)] transition-all`,children:"Subscribe"})]}),w.jsx("p",{className:"text-sm text-beigeCream/60 mt-4",children:"Join 25,000+ readers • Unsubscribe anytime • We expose casinos, not your data"})]})})}),w.jsx("section",{className:"py-12",children:w.jsxs("div",{className:"container mx-auto px-6",children:[w.jsx("h3",{className:"text-xl font-bold text-limeGreen mb-6",children:"Popular Topics"}),w.jsx("div",{className:"flex flex-wrap gap-3",children:["RNG Exploits","Pattern Detection","Slot Strategies","Live Casino Bias","Bonus Hunting","Casino Leaks","AI Configuration","Success Stories","Legal Updates","Whistleblower Reports","Time-based Patterns","VIP Secrets"].map(a=>w.jsxs(Be.span,{whileHover:{scale:1.05},className:`px-4 py-2 glassmorphism rounded-full text-sm text-beigeCream/80
                         hover:bg-white/10 cursor-pointer transition-all`,children:["#",a]},a))})]})})]})}function Tte(){const[t,e]=D.useState({name:"",email:"",subject:"general",message:""}),n=[{value:"general",label:"General Inquiry"},{value:"support",label:"Technical Support"},{value:"partnership",label:"Partnership Opportunity"},{value:"whistleblower",label:"Casino Whistleblower"},{value:"media",label:"Media Inquiry"},{value:"legal",label:"Legal Matter"}],i=s=>{s.preventDefault(),console.log("Form submitted:",t)},r=s=>{e({...t,[s.target.name]:s.target.value})};return w.jsxs(Be.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen bg-gradient-to-br from-darkGreen via-raisinBlack to-darkGreen",children:[w.jsx("section",{className:"py-20 relative overflow-hidden",children:w.jsxs("div",{className:"container mx-auto px-6",children:[w.jsxs(Be.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},className:"text-center mb-16",children:[w.jsxs("h1",{className:"text-5xl sm:text-6xl md:text-7xl font-bold mb-6",children:[w.jsx("span",{className:"text-limeGreen",children:"Get in"})," ",w.jsx("span",{className:"text-pink",children:"Touch"})]}),w.jsx("p",{className:"text-xl text-beigeCream/80 max-w-3xl mx-auto",children:"Have insider information? Need support? Want to partner? We're here to help you beat the house."})]}),w.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 max-w-6xl mx-auto",children:[w.jsxs(Be.div,{initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2},className:"glassmorphism rounded-3xl p-8",children:[w.jsx("h2",{className:"text-2xl font-bold text-limeGreen mb-6",children:"Send Us a Message"}),w.jsxs("form",{onSubmit:i,className:"space-y-6",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-beigeCream mb-2",children:"Your Name"}),w.jsx("input",{type:"text",name:"name",value:t.name,onChange:r,required:!0,className:`w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl
                             text-beigeCream placeholder-beigeCream/50 focus:outline-none
                             focus:border-limeGreen/50 transition-colors`,placeholder:"John Doe"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-beigeCream mb-2",children:"Email Address"}),w.jsx("input",{type:"email",name:"email",value:t.email,onChange:r,required:!0,className:`w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl
                             text-beigeCream placeholder-beigeCream/50 focus:outline-none
                             focus:border-limeGreen/50 transition-colors`,placeholder:"john@example.com"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-beigeCream mb-2",children:"Subject"}),w.jsx("select",{name:"subject",value:t.subject,onChange:r,className:`w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl
                             text-beigeCream focus:outline-none focus:border-limeGreen/50
                             transition-colors`,children:n.map(s=>w.jsx("option",{value:s.value,className:"bg-darkGreen",children:s.label},s.value))})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-beigeCream mb-2",children:"Message"}),w.jsx("textarea",{name:"message",value:t.message,onChange:r,required:!0,rows:6,className:`w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl
                             text-beigeCream placeholder-beigeCream/50 focus:outline-none
                             focus:border-limeGreen/50 transition-colors resize-none`,placeholder:"Tell us more..."})]}),w.jsx(Be.button,{type:"submit",whileHover:{scale:1.05},whileTap:{scale:.95},className:`w-full py-4 bg-limeGreen text-darkGreen font-bold rounded-xl
                           hover:shadow-[0_0_30px_rgba(171,248,11,0.5)] transition-all`,children:"Send Message"})]})]}),w.jsxs(Be.div,{initial:{x:50,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3},className:"space-y-8",children:[w.jsxs("div",{className:"glassmorphism rounded-3xl p-8",children:[w.jsx("h3",{className:"text-2xl font-bold text-pink mb-6",children:"Quick Contact"}),w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{className:"flex items-start space-x-4",children:[w.jsx("div",{className:"w-12 h-12 bg-limeGreen/20 rounded-full flex items-center justify-center",children:w.jsx("span",{className:"text-2xl",children:"📧"})}),w.jsxs("div",{children:[w.jsx("h4",{className:"font-semibold text-limeGreen",children:"Email"}),w.jsx("p",{className:"text-beigeCream/80",children:"support@flamingo.ai"}),w.jsx("p",{className:"text-beigeCream/60 text-sm",children:"Response within 24 hours"})]})]}),w.jsxs("div",{className:"flex items-start space-x-4",children:[w.jsx("div",{className:"w-12 h-12 bg-limeGreen/20 rounded-full flex items-center justify-center",children:w.jsx("span",{className:"text-2xl",children:"💬"})}),w.jsxs("div",{children:[w.jsx("h4",{className:"font-semibold text-limeGreen",children:"Live Chat"}),w.jsx("p",{className:"text-beigeCream/80",children:"Available 24/7"}),w.jsx("p",{className:"text-beigeCream/60 text-sm",children:"For urgent support"})]})]}),w.jsxs("div",{className:"flex items-start space-x-4",children:[w.jsx("div",{className:"w-12 h-12 bg-limeGreen/20 rounded-full flex items-center justify-center",children:w.jsx("span",{className:"text-2xl",children:"🔒"})}),w.jsxs("div",{children:[w.jsx("h4",{className:"font-semibold text-limeGreen",children:"Secure Line"}),w.jsx("p",{className:"text-beigeCream/80",children:"whistleblower@flamingo.ai"}),w.jsx("p",{className:"text-beigeCream/60 text-sm",children:"End-to-end encrypted"})]})]})]})]}),w.jsxs("div",{className:"glassmorphism rounded-3xl p-8",children:[w.jsx("h3",{className:"text-2xl font-bold text-pink mb-6",children:"Special Inquiries"}),w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{className:"p-4 bg-white/5 rounded-xl",children:[w.jsx("h4",{className:"font-semibold text-limeGreen mb-2",children:"🕵️ Casino Whistleblowers"}),w.jsx("p",{className:"text-beigeCream/70 text-sm",children:"Have insider information about casino manipulation? Contact us securely. Your identity will be protected."})]}),w.jsxs("div",{className:"p-4 bg-white/5 rounded-xl",children:[w.jsx("h4",{className:"font-semibold text-limeGreen mb-2",children:"🤝 Partnership Opportunities"}),w.jsx("p",{className:"text-beigeCream/70 text-sm",children:"Interested in joining the revolution? We're always looking for allies in exposing casino deception."})]}),w.jsxs("div",{className:"p-4 bg-white/5 rounded-xl",children:[w.jsx("h4",{className:"font-semibold text-limeGreen mb-2",children:"📰 Media Inquiries"}),w.jsx("p",{className:"text-beigeCream/70 text-sm",children:"Writing about casino manipulation or AI gambling analysis? We have data and experts available."})]})]})]}),w.jsxs("div",{className:"bg-pink/10 border border-pink/30 rounded-2xl p-6",children:[w.jsx("h4",{className:"font-semibold text-pink mb-2",children:"🛡️ Your Privacy Matters"}),w.jsx("p",{className:"text-beigeCream/70 text-sm",children:"All communications are encrypted. We never share your information with casinos or third parties. Your secrets are safe with us."})]})]})]})]})}),w.jsx("section",{className:"py-20 bg-raisinBlack/50",children:w.jsxs("div",{className:"container mx-auto px-6",children:[w.jsx(Be.div,{initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},className:"text-center mb-12",children:w.jsxs("h2",{className:"text-4xl font-bold",children:[w.jsx("span",{className:"text-limeGreen",children:"Common"})," ",w.jsx("span",{className:"text-pink",children:"Questions"})]})}),w.jsx("div",{className:"grid md:grid-cols-2 gap-8 max-w-4xl mx-auto",children:[{q:"How quickly will I get a response?",a:"Email inquiries are answered within 24 hours. Live chat is available 24/7 for immediate assistance."},{q:"Is my information secure?",a:"Yes. All communications are encrypted, and we never share your data with casinos or any third parties."},{q:"Can I remain anonymous?",a:"Absolutely. We offer anonymous communication channels, especially for whistleblowers and sensitive information."},{q:"Do you offer phone support?",a:"Phone support is available for Whale plan members. All others can use email or live chat."}].map((s,a)=>w.jsxs(Be.div,{initial:{y:20,opacity:0},whileInView:{y:0,opacity:1},transition:{delay:a*.1},className:"glassmorphism rounded-2xl p-6",children:[w.jsx("h3",{className:"font-bold text-limeGreen mb-3",children:s.q}),w.jsx("p",{className:"text-beigeCream/80",children:s.a})]},a))})]})}),w.jsx("section",{className:"py-20",children:w.jsx("div",{className:"container mx-auto px-6 text-center",children:w.jsxs(Be.div,{initial:{scale:.9,opacity:0},whileInView:{scale:1,opacity:1},transition:{duration:.8},children:[w.jsxs("h2",{className:"text-3xl font-bold mb-6",children:["Ready to ",w.jsx("span",{className:"text-limeGreen",children:"Join the Revolution"}),"?"]}),w.jsx("p",{className:"text-lg text-beigeCream/80 max-w-2xl mx-auto mb-8",children:"Don't wait for casinos to take more of your money. Start winning with AI-powered insights today."}),w.jsx(Be.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.href="/dashboard",className:`px-8 py-4 bg-limeGreen text-darkGreen font-bold rounded-xl text-lg
                       hover:shadow-[0_0_30px_rgba(171,248,11,0.5)] transition-all duration-300`,children:"Get Started Now"})]})})})]})}function Cte(){const t={winRate:64,sessionsToday:3,profitToday:1250,patternsDetected:27};return w.jsxs(Be.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen relative overflow-hidden",children:[w.jsx(_k,{videoSrc:"/assets/videos/chat-background-flamingo.mp4"}),w.jsxs("div",{className:"relative z-10 min-h-screen",children:[w.jsx("header",{className:"glassmorphism border-b border-white/10",children:w.jsx("div",{className:"container mx-auto px-6 py-4",children:w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsx("div",{className:"flex items-center space-x-4",children:w.jsxs(Be.button,{onClick:()=>window.location.href="/dashboard",whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex items-center space-x-2 text-limeGreen hover:text-limeGreen/80 transition-colors",children:[w.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),w.jsx("span",{children:"Back to Dashboard"})]})}),w.jsx("h1",{className:"text-2xl font-bold text-beigeCream",children:"AI Assistant Chat"}),w.jsxs("div",{className:"flex items-center space-x-2",children:[w.jsx("div",{className:"w-3 h-3 bg-limeGreen rounded-full animate-pulse"}),w.jsx("span",{className:"text-sm text-limeGreen",children:"Online"})]})]})})}),w.jsx("div",{className:"container mx-auto px-6 py-8",children:w.jsxs("div",{className:"grid lg:grid-cols-3 gap-8 max-h-[calc(100vh-120px)]",children:[w.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[w.jsx(Be.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},className:"glassmorphism rounded-3xl p-6 h-64",children:w.jsxs($h,{camera:{position:[0,0,3]},children:[w.jsx(KE,{enableZoom:!1,enablePan:!1,autoRotate:!0,autoRotateSpeed:1}),w.jsx("ambientLight",{intensity:.3}),w.jsx("pointLight",{position:[10,10,10],intensity:.8,color:"#E59FCE"}),w.jsx("pointLight",{position:[-10,-10,-10],intensity:.5,color:"#ABF80B"}),w.jsx("spotLight",{position:[0,5,2],angle:.3,penumbra:1,intensity:1,color:"#ABF80B"}),w.jsx(yk,{animationState:"happy",scale:1.5})]})}),w.jsxs(Be.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"glassmorphism rounded-3xl p-6",children:[w.jsx("h3",{className:"text-xl font-bold text-limeGreen mb-4",children:"Today's Performance"}),w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{className:"flex justify-between items-center",children:[w.jsx("span",{className:"text-beigeCream/70",children:"Win Rate"}),w.jsxs("span",{className:"text-2xl font-bold text-limeGreen",children:[t.winRate,"%"]})]}),w.jsxs("div",{className:"flex justify-between items-center",children:[w.jsx("span",{className:"text-beigeCream/70",children:"Sessions"}),w.jsx("span",{className:"text-2xl font-bold text-pink",children:t.sessionsToday})]}),w.jsxs("div",{className:"flex justify-between items-center",children:[w.jsx("span",{className:"text-beigeCream/70",children:"Profit"}),w.jsxs("span",{className:"text-2xl font-bold text-limeGreen",children:["+$",t.profitToday]})]}),w.jsxs("div",{className:"flex justify-between items-center",children:[w.jsx("span",{className:"text-beigeCream/70",children:"Patterns Found"}),w.jsx("span",{className:"text-2xl font-bold text-pink",children:t.patternsDetected})]})]})]}),w.jsxs(Be.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:"glassmorphism rounded-3xl p-6",children:[w.jsx("h3",{className:"text-xl font-bold text-pink mb-4",children:"AI Insights"}),w.jsxs("div",{className:"space-y-3",children:[w.jsx("div",{className:"p-3 bg-limeGreen/10 rounded-xl border border-limeGreen/30",children:w.jsxs("p",{className:"text-sm text-beigeCream",children:[w.jsx("span",{className:"text-limeGreen font-semibold",children:"Hot Tip:"})," Slot #47 showing favorable patterns. 87% confidence in next 50 spins."]})}),w.jsx("div",{className:"p-3 bg-pink/10 rounded-xl border border-pink/30",children:w.jsxs("p",{className:"text-sm text-beigeCream",children:[w.jsx("span",{className:"text-pink font-semibold",children:"Warning:"})," Avoid progressive jackpots for next 2 hours. Algorithm tightening detected."]})})]})]})]}),w.jsx(Be.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"lg:col-span-2 h-[calc(100vh-160px)]",children:w.jsx(xk,{probability:t.winRate,balance:t.profitToday,isSpinning:!1})})]})})]}),w.jsxs("div",{className:"fixed bottom-8 right-8 space-y-4",children:[w.jsx(Be.button,{whileHover:{scale:1.1},whileTap:{scale:.95},className:`w-14 h-14 bg-pink rounded-full flex items-center justify-center
                   shadow-[0_0_20px_rgba(229,159,206,0.5)] hover:shadow-[0_0_30px_rgba(229,159,206,0.7)]
                   transition-all`,title:"Export Chat History",children:w.jsx("span",{className:"text-2xl",children:"💾"})}),w.jsx(Be.button,{whileHover:{scale:1.1},whileTap:{scale:.95},className:`w-14 h-14 bg-limeGreen rounded-full flex items-center justify-center
                   shadow-[0_0_20px_rgba(171,248,11,0.5)] hover:shadow-[0_0_30px_rgba(171,248,11,0.7)]
                   transition-all`,title:"Voice Chat",children:w.jsx("span",{className:"text-2xl",children:"🎤"})})]})]})}function Rte(){const[t,e]=D.useState({name:"",email:"",featureType:"pattern-detection",title:"",description:"",urgency:"medium"}),[n,i]=D.useState([]),r=[{value:"pattern-detection",label:"Pattern Detection Enhancement"},{value:"new-casino",label:"New Casino Support"},{value:"game-analysis",label:"New Game Analysis"},{value:"automation",label:"Automation Feature"},{value:"reporting",label:"Reporting & Analytics"},{value:"mobile",label:"Mobile App Feature"},{value:"api",label:"API Enhancement"},{value:"other",label:"Other"}],s=[{id:1,title:"Baccarat Pattern Recognition",description:"Add AI analysis for baccarat shoe patterns and banker/player streaks",votes:342,status:"in-progress",category:"game-analysis"},{id:2,title:"Crypto Casino Integration",description:"Support for analyzing patterns in blockchain-based casinos",votes:287,status:"planned",category:"new-casino"},{id:3,title:"Auto-Stop Loss Feature",description:"Automatically stop playing when reaching loss limits with AI predictions",votes:256,status:"planned",category:"automation"},{id:4,title:"Multi-Account Dashboard",description:"Monitor patterns across multiple casino accounts simultaneously",votes:198,status:"under-review",category:"reporting"},{id:5,title:"Voice Commands",description:"Control the AI assistant with voice commands during gameplay",votes:167,status:"planned",category:"mobile"},{id:6,title:"Poker Room Analysis",description:"Detect patterns in online poker player behaviors and betting patterns",votes:145,status:"under-review",category:"game-analysis"}],a=u=>{u.preventDefault(),console.log("Feature request submitted:",t)},o=u=>{e({...t,[u.target.name]:u.target.value})},l=u=>{n.includes(u)||i([...n,u])},c=u=>{switch(u){case"in-progress":return"bg-limeGreen/20 border-limeGreen/30";case"planned":return"bg-pink/20 border-pink/30";case"under-review":return"bg-beigeCream/20 border-beigeCream/30";default:return"bg-white/10 border-white/20"}};return w.jsxs(Be.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen bg-gradient-to-br from-darkGreen via-raisinBlack to-darkGreen",children:[w.jsx("section",{className:"py-20 relative overflow-hidden",children:w.jsxs("div",{className:"container mx-auto px-6",children:[w.jsxs(Be.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},className:"text-center mb-16",children:[w.jsxs("h1",{className:"text-5xl sm:text-6xl md:text-7xl font-bold mb-6",children:[w.jsx("span",{className:"text-limeGreen",children:"Shape the"})," ",w.jsx("span",{className:"text-pink",children:"Future"})]}),w.jsx("p",{className:"text-xl text-beigeCream/80 max-w-3xl mx-auto",children:"Your ideas drive our innovation. Request features that will help you beat the house even harder."})]}),w.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 max-w-6xl mx-auto",children:[w.jsxs(Be.div,{initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2},children:[w.jsx("h2",{className:"text-2xl font-bold text-limeGreen mb-6",children:"🔥 Popular Feature Requests"}),w.jsx("div",{className:"space-y-4",children:s.map(u=>w.jsxs(Be.div,{whileHover:{scale:1.02},className:"glassmorphism rounded-2xl p-6",children:[w.jsxs("div",{className:"flex justify-between items-start mb-3",children:[w.jsxs("div",{className:"flex-1",children:[w.jsx("h3",{className:"font-bold text-beigeCream mb-1",children:u.title}),w.jsx("p",{className:"text-sm text-beigeCream/70",children:u.description})]}),w.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${c(u.status)}`,children:u.status.replace("-"," ")})]}),w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center space-x-2",children:[w.jsxs("span",{className:"text-sm text-beigeCream/60",children:[u.votes+(n.includes(u.id)?1:0)," votes"]}),w.jsx("span",{className:"text-beigeCream/40",children:"•"}),w.jsx("span",{className:"text-sm text-pink",children:u.category.replace("-"," ")})]}),w.jsx(Be.button,{onClick:()=>l(u.id),whileHover:{scale:1.1},whileTap:{scale:.95},disabled:n.includes(u.id),className:`px-4 py-2 rounded-lg text-sm font-semibold transition-all ${n.includes(u.id)?"bg-limeGreen/20 text-limeGreen cursor-not-allowed":"bg-pink/20 text-pink hover:bg-pink/30"}`,children:n.includes(u.id)?"✓ Voted":"👍 Vote"})]})]},u.id))})]}),w.jsxs(Be.div,{initial:{x:50,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3},className:"glassmorphism rounded-3xl p-8",children:[w.jsx("h2",{className:"text-2xl font-bold text-pink mb-6",children:"💡 Submit Your Feature Request"}),w.jsxs("form",{onSubmit:a,className:"space-y-6",children:[w.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-beigeCream mb-2",children:"Your Name"}),w.jsx("input",{type:"text",name:"name",value:t.name,onChange:o,required:!0,className:`w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl
                               text-beigeCream placeholder-beigeCream/50 focus:outline-none
                               focus:border-limeGreen/50 transition-colors`,placeholder:"John Doe"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-beigeCream mb-2",children:"Email"}),w.jsx("input",{type:"email",name:"email",value:t.email,onChange:o,required:!0,className:`w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl
                               text-beigeCream placeholder-beigeCream/50 focus:outline-none
                               focus:border-limeGreen/50 transition-colors`,placeholder:"john@example.com"})]})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-beigeCream mb-2",children:"Feature Category"}),w.jsx("select",{name:"featureType",value:t.featureType,onChange:o,className:`w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl
                             text-beigeCream focus:outline-none focus:border-limeGreen/50
                             transition-colors`,children:r.map(u=>w.jsx("option",{value:u.value,className:"bg-darkGreen",children:u.label},u.value))})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-beigeCream mb-2",children:"Feature Title"}),w.jsx("input",{type:"text",name:"title",value:t.title,onChange:o,required:!0,className:`w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl
                             text-beigeCream placeholder-beigeCream/50 focus:outline-none
                             focus:border-limeGreen/50 transition-colors`,placeholder:"Brief title for your feature idea"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-beigeCream mb-2",children:"Detailed Description"}),w.jsx("textarea",{name:"description",value:t.description,onChange:o,required:!0,rows:4,className:`w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl
                             text-beigeCream placeholder-beigeCream/50 focus:outline-none
                             focus:border-limeGreen/50 transition-colors resize-none`,placeholder:"Describe your feature idea in detail. How would it help beat the house?"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-beigeCream mb-2",children:"Urgency Level"}),w.jsx("div",{className:"flex space-x-4",children:["low","medium","high","critical"].map(u=>w.jsxs("label",{className:"flex items-center",children:[w.jsx("input",{type:"radio",name:"urgency",value:u,checked:t.urgency===u,onChange:o,className:"mr-2"}),w.jsx("span",{className:`capitalize ${u==="critical"?"text-pink":u==="high"?"text-limeGreen":"text-beigeCream/70"}`,children:u})]},u))})]}),w.jsx(Be.button,{type:"submit",whileHover:{scale:1.05},whileTap:{scale:.95},className:`w-full py-4 bg-limeGreen text-darkGreen font-bold rounded-xl
                           hover:shadow-[0_0_30px_rgba(171,248,11,0.5)] transition-all`,children:"Submit Feature Request"})]})]})]})]})}),w.jsx("section",{className:"py-20 bg-raisinBlack/50",children:w.jsxs("div",{className:"container mx-auto px-6",children:[w.jsxs(Be.div,{initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},className:"text-center mb-12",children:[w.jsxs("h2",{className:"text-4xl font-bold",children:[w.jsx("span",{className:"text-limeGreen",children:"Development"})," ",w.jsx("span",{className:"text-pink",children:"Roadmap"})]}),w.jsx("p",{className:"text-lg text-beigeCream/70 mt-4",children:"See what we're building to give you an even bigger edge"})]}),w.jsxs("div",{className:"grid md:grid-cols-3 gap-8 max-w-4xl mx-auto",children:[w.jsxs(Be.div,{initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},transition:{delay:.1},className:"glassmorphism rounded-2xl p-6 border-t-4 border-limeGreen",children:[w.jsx("h3",{className:"text-xl font-bold text-limeGreen mb-4",children:"🚀 In Development"}),w.jsxs("ul",{className:"space-y-2 text-beigeCream/80",children:[w.jsx("li",{children:"• Baccarat pattern analysis"}),w.jsx("li",{children:"• Multi-language support"}),w.jsx("li",{children:"• iOS app beta"}),w.jsx("li",{children:"• Advanced API webhooks"})]})]}),w.jsxs(Be.div,{initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},transition:{delay:.2},className:"glassmorphism rounded-2xl p-6 border-t-4 border-pink",children:[w.jsx("h3",{className:"text-xl font-bold text-pink mb-4",children:"📋 Next Quarter"}),w.jsxs("ul",{className:"space-y-2 text-beigeCream/80",children:[w.jsx("li",{children:"• Crypto casino support"}),w.jsx("li",{children:"• Voice command AI"}),w.jsx("li",{children:"• Team accounts"}),w.jsx("li",{children:"• Custom alert system"})]})]}),w.jsxs(Be.div,{initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},transition:{delay:.3},className:"glassmorphism rounded-2xl p-6 border-t-4 border-beigeCream",children:[w.jsx("h3",{className:"text-xl font-bold text-beigeCream mb-4",children:"🔮 Future Plans"}),w.jsxs("ul",{className:"space-y-2 text-beigeCream/80",children:[w.jsx("li",{children:"• VR casino analysis"}),w.jsx("li",{children:"• Blockchain verification"}),w.jsx("li",{children:"• AI prediction marketplace"}),w.jsx("li",{children:"• Quantum computing integration"})]})]})]})]})}),w.jsx("section",{className:"py-20",children:w.jsx("div",{className:"container mx-auto px-6 text-center",children:w.jsxs(Be.div,{initial:{scale:.9,opacity:0},whileInView:{scale:1,opacity:1},transition:{duration:.8},children:[w.jsxs("h2",{className:"text-3xl font-bold mb-6",children:["Your Ideas ",w.jsx("span",{className:"text-limeGreen",children:"Shape Our Mission"})]}),w.jsx("p",{className:"text-lg text-beigeCream/80 max-w-2xl mx-auto mb-8",children:"Every feature we build is designed to tilt the odds further in your favor. Keep the suggestions coming."}),w.jsx(Be.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.href="/blog",className:`px-8 py-4 bg-pink text-darkGreen font-bold rounded-xl text-lg
                       hover:shadow-[0_0_30px_rgba(229,159,206,0.5)] transition-all`,children:"Read Development Updates"})]})})})]})}function Pte(){const t=Ml(),e=()=>{t("/dashboard")};return w.jsxs(w.Fragment,{children:[w.jsx(ND,{onLogin:e}),w.jsx("main",{className:"pt-20",children:w.jsx(pz,{})})]})}function Bte(){return w.jsx(Oz,{children:w.jsx("div",{className:"min-h-screen bg-djungle",children:w.jsx(zp,{mode:"wait",children:w.jsxs(gz,{children:[w.jsx(Tr,{path:"/",element:w.jsx(fV,{})}),w.jsxs(Tr,{element:w.jsx(Pte,{}),children:[w.jsx(Tr,{path:"/about",element:w.jsx(wte,{})}),w.jsx(Tr,{path:"/use-case",element:w.jsx(Mte,{})}),w.jsx(Tr,{path:"/pricing",element:w.jsx(Ete,{})}),w.jsx(Tr,{path:"/blog",element:w.jsx(bte,{})}),w.jsx(Tr,{path:"/contact",element:w.jsx(Tte,{})}),w.jsx(Tr,{path:"/request-feature",element:w.jsx(Rte,{})})]}),w.jsx(Tr,{path:"/onboarding",element:w.jsx(dte,{})}),w.jsx(Tr,{path:"/dashboard",element:w.jsx(Ste,{})}),w.jsx(Tr,{path:"/chat",element:w.jsx(Cte,{})}),w.jsx(Tr,{path:"/settings",element:w.jsx(Ate,{})}),w.jsx(Tr,{path:"*",element:w.jsx(fz,{to:"/",replace:!0})})]})})})})}z_.createRoot(document.getElementById("root")).render(w.jsx(Ah.StrictMode,{children:w.jsx(Bte,{})}));
